<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Tables and Graphs | Data Structures, Estimation and Optimization with R</title>
  <meta name="description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Tables and Graphs | Data Structures, Estimation and Optimization with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Tables and Graphs | Data Structures, Estimation and Optimization with R" />
  
  <meta name="twitter:description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2021-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="statistics.html"/>
<link rel="next" href="get-data.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Structures and Estimation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a>
<ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#lists"><i class="fa fa-check"></i><b>1.1.1</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#variables-in-dataframes"><i class="fa fa-check"></i><b>1.4</b> Variables in Dataframes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-dataframe"><i class="fa fa-check"></i><b>1.4.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="1.4.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#factor-label-and-combine"><i class="fa fa-check"></i><b>1.4.2</b> Factor Label and Combine</a></li>
<li class="chapter" data-level="1.4.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#drawly-random-rows"><i class="fa fa-check"></i><b>1.4.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="1.4.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>1.4.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="1.4.5" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-dataframes"><i class="fa fa-check"></i><b>1.4.5</b> String Dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>2</b> Summarize Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="summarize-data.html"><a href="summarize-data.html#counting-observation"><i class="fa fa-check"></i><b>2.1</b> Counting Observation</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-data.html"><a href="summarize-data.html#uncount"><i class="fa fa-check"></i><b>2.1.1</b> Uncount</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="summarize-data.html"><a href="summarize-data.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.2</b> Sorting, Indexing, Slicing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="summarize-data.html"><a href="summarize-data.html#sorting"><i class="fa fa-check"></i><b>2.2.1</b> Sorting</a></li>
<li class="chapter" data-level="2.2.2" data-path="summarize-data.html"><a href="summarize-data.html#group-sort-and-slice"><i class="fa fa-check"></i><b>2.2.2</b> Group, Sort and Slice</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="summarize-data.html"><a href="summarize-data.html#group-statistics"><i class="fa fa-check"></i><b>2.3</b> Group Statistics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="summarize-data.html"><a href="summarize-data.html#cumulative-statistics-within-group"><i class="fa fa-check"></i><b>2.3.1</b> Cumulative Statistics within Group</a></li>
<li class="chapter" data-level="2.3.2" data-path="summarize-data.html"><a href="summarize-data.html#groups-statistics"><i class="fa fa-check"></i><b>2.3.2</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.3.3" data-path="summarize-data.html"><a href="summarize-data.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.3.3</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.3.4" data-path="summarize-data.html"><a href="summarize-data.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.3.4</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="summarize-data.html"><a href="summarize-data.html#distributional-statistics"><i class="fa fa-check"></i><b>2.4</b> Distributional Statistics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="summarize-data.html"><a href="summarize-data.html#histogram"><i class="fa fa-check"></i><b>2.4.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summarize-data.html"><a href="summarize-data.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.5</b> Summarize Multiple Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="summarize-data.html"><a href="summarize-data.html#generate-replace-variables"><i class="fa fa-check"></i><b>2.5.1</b> Generate Replace Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mx1-by-n-to-mxq-by-n1"><i class="fa fa-check"></i><b>3.2.1</b> (Mx1 by N) to (MxQ by N+1)</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mx1-by-1"><i class="fa fa-check"></i><b>3.2.2</b> (MxP by N) to (Mx1 by 1)</a></li>
<li class="chapter" data-level="3.2.3" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mxq-by-nz"><i class="fa fa-check"></i><b>3.2.3</b> (MxP by N) to (MxQ by N+Z)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-and-sapply"><i class="fa fa-check"></i><b>3.3.1</b> Apply and Sapply</a></li>
<li class="chapter" data-level="3.3.2" data-path="functions.html"><a href="functions.html#mutate-evaluate-functions"><i class="fa fa-check"></i><b>3.3.2</b> Mutate Evaluate Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html"><i class="fa fa-check"></i><b>4</b> Multi-dimensional Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-gather-bind-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate, Gather, Bind and Join</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
<li class="chapter" data-level="4.1.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#gather-files"><i class="fa fa-check"></i><b>4.1.3</b> Gather Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#long-to-wide"><i class="fa fa-check"></i><b>4.2.1</b> Long to Wide</a></li>
<li class="chapter" data-level="4.2.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-to-long"><i class="fa fa-check"></i><b>4.2.2</b> Wide to Long</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-and-compare"><i class="fa fa-check"></i><b>4.3</b> Join and Compare</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#find-closest-neighbor-on-grid"><i class="fa fa-check"></i><b>4.3.1</b> Find Closest Neighbor on Grid</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.1</b> OLS and IV</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.1.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.1.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.2.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html"><i class="fa fa-check"></i><b>6</b> Nonlinear and Other Regressions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression"><i class="fa fa-check"></i><b>6.2</b> Quantile Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression-basics"><i class="fa fa-check"></i><b>6.2.1</b> Quantile Regression Basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1</b> Bisection</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#bisection-1"><i class="fa fa-check"></i><b>7.1.1</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathematics.html"><a href="mathematics.html"><i class="fa fa-check"></i><b>8</b> Mathematics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mathematics.html"><a href="mathematics.html#basics"><i class="fa fa-check"></i><b>8.1</b> Basics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="mathematics.html"><a href="mathematics.html#rescale-a-parameter-with-fixed-min-and-max"><i class="fa fa-check"></i><b>8.1.1</b> Rescale a Parameter with Fixed Min and Max</a></li>
<li class="chapter" data-level="8.1.2" data-path="mathematics.html"><a href="mathematics.html#positive-and-negative-exponents"><i class="fa fa-check"></i><b>8.1.2</b> Positive and Negative Exponents</a></li>
<li class="chapter" data-level="8.1.3" data-path="mathematics.html"><a href="mathematics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.1.3</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathematics.html"><a href="mathematics.html#inequality-models"><i class="fa fa-check"></i><b>8.2</b> Inequality Models</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="mathematics.html"><a href="mathematics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.2.1</b> Gini Discrete Sample</a></li>
<li class="chapter" data-level="8.2.2" data-path="mathematics.html"><a href="mathematics.html#gini-formula-for-discrete-random-varialbe"><i class="fa fa-check"></i><b>8.2.2</b> Gini Formula for Discrete Random Varialbe</a></li>
<li class="chapter" data-level="8.2.3" data-path="mathematics.html"><a href="mathematics.html#atkinson-inequality-index"><i class="fa fa-check"></i><b>8.2.3</b> Atkinson Inequality Index</a></li>
<li class="chapter" data-level="8.2.4" data-path="mathematics.html"><a href="mathematics.html#location-population-and-pollution"><i class="fa fa-check"></i><b>8.2.4</b> Location, Population, and Pollution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>9</b> Statistics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistics.html"><a href="statistics.html#distributions"><i class="fa fa-check"></i><b>9.1</b> Distributions</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="statistics.html"><a href="statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>9.1.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="statistics.html"><a href="statistics.html#discrete-random-variable"><i class="fa fa-check"></i><b>9.2</b> Discrete Random Variable</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="statistics.html"><a href="statistics.html#obtaining-joint-distribution-from-marginal-with-rectilinear-restrictions"><i class="fa fa-check"></i><b>9.2.1</b> Obtaining Joint Distribution from Marginal with Rectilinear Restrictions</a></li>
<li class="chapter" data-level="9.2.2" data-path="statistics.html"><a href="statistics.html#obtaining-joint-distribution-from-conditional-with-rectilinear-restrictions"><i class="fa fa-check"></i><b>9.2.2</b> Obtaining Joint Distribution from Conditional with Rectilinear Restrictions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>10</b> Tables and Graphs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>10.1</b> R Base Plots</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>10.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-related-plots"><i class="fa fa-check"></i><b>10.2</b> ggplot Line Related Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-plot"><i class="fa fa-check"></i><b>10.2.1</b> ggplot Line Plot</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-related-plots"><i class="fa fa-check"></i><b>10.3</b> ggplot Scatter Related Plots</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-plot"><i class="fa fa-check"></i><b>10.3.1</b> ggplot Scatter Plot</a></li>
<li class="chapter" data-level="10.3.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-multiple-scatter-lines-with-facet-wrap"><i class="fa fa-check"></i><b>10.3.2</b> ggplot Multiple Scatter-Lines with Facet Wrap</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>10.4</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>10.4.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>11</b> Get Data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="get-data.html"><a href="get-data.html#environmental-data"><i class="fa fa-check"></i><b>11.1</b> Environmental Data</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="get-data.html"><a href="get-data.html#ecmwf-era5-data"><i class="fa fa-check"></i><b>11.1.1</b> ECMWF ERA5 Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="code-and-development.html"><a href="code-and-development.html"><i class="fa fa-check"></i><b>12</b> Code and Development</a>
<ul>
<li class="chapter" data-level="12.1" data-path="code-and-development.html"><a href="code-and-development.html#files-in-and-out"><i class="fa fa-check"></i><b>12.1</b> Files In and Out</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="code-and-development.html"><a href="code-and-development.html#file-path"><i class="fa fa-check"></i><b>12.1.1</b> File Path</a></li>
<li class="chapter" data-level="12.1.2" data-path="code-and-development.html"><a href="code-and-development.html#text-to-file"><i class="fa fa-check"></i><b>12.1.2</b> Text to File</a></li>
<li class="chapter" data-level="12.1.3" data-path="code-and-development.html"><a href="code-and-development.html#rmd-to-html"><i class="fa fa-check"></i><b>12.1.3</b> Rmd to HTML</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="code-and-development.html"><a href="code-and-development.html#python-with-r"><i class="fa fa-check"></i><b>12.2</b> Python with R</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="code-and-development.html"><a href="code-and-development.html#reticulate-basics"><i class="fa fa-check"></i><b>12.2.1</b> Reticulate Basics</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="code-and-development.html"><a href="code-and-development.html#command-line"><i class="fa fa-check"></i><b>12.3</b> Command Line</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="code-and-development.html"><a href="code-and-development.html#shell-and-system-commands"><i class="fa fa-check"></i><b>12.3.1</b> Shell and System Commands</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 List</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Array</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Matrix</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Variables in Dataframes</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-data-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Data links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 Counting Observation</span> links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.2</b> <span>Section 2.2 Sorting, Indexing, Slicing</span> links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-group-statisticsgroup-statistics-links"><i class="fa fa-check"></i><b>A.2.3</b> <span>Section 2.3 Group Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.4</b> <span>Section 2.4 Distributional Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.5</b> <span>Section 2.5 Summarize Multiple Variables</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Dataframe Mutate</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Dataframe Do Anything</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Apply and pmap</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#multi-dimensional-data-structures-links"><i class="fa fa-check"></i><b>A.4</b> Multi-dimensional Data Structures links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-gather-bind-and-joingenerate-gather-bind-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Generate, Gather, Bind and Join</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Wide and Long</span> links</a></li>
<li class="chapter" data-level="A.4.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.3-join-and-comparejoin-and-compare-links"><i class="fa fa-check"></i><b>A.4.3</b> <span>Section 4.3 Join and Compare</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 OLS and IV</span> links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.2</b> <span>Section 5.2 Decomposition</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-and-other-regressions-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear and Other Regressions links</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> <span>Section 6.1 Logit Regression</span> links</a></li>
<li class="chapter" data-level="A.6.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.2-quantile-regressionquantile-regression-links"><i class="fa fa-check"></i><b>A.6.2</b> <span>Section 6.2 Quantile Regression</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-bisectionbisection-links"><i class="fa fa-check"></i><b>A.7.1</b> <span>Section 7.1 Bisection</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathematics-links"><i class="fa fa-check"></i><b>A.8</b> Mathematics links</a>
<ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-basicsbasics-links"><i class="fa fa-check"></i><b>A.8.1</b> <span>Section 8.1 Basics</span> links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.2</b> <span>Section 8.2 Inequality Models</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#statistics-links"><i class="fa fa-check"></i><b>A.9</b> Statistics links</a>
<ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.9.1</b> <span>Section 9.1 Distributions</span> links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-discrete-random-variablediscrete-random-variable-links"><i class="fa fa-check"></i><b>A.9.2</b> <span>Section 9.2 Discrete Random Variable</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.10" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.10</b> Tables and Graphs links</a>
<ul>
<li class="chapter" data-level="A.10.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.10.1</b> <span>Section 10.1 R Base Plots</span> links</a></li>
<li class="chapter" data-level="A.10.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.2-ggplot-line-related-plotsggplot-line-related-plots-links"><i class="fa fa-check"></i><b>A.10.2</b> <span>Section 10.2 ggplot Line Related Plots</span> links</a></li>
<li class="chapter" data-level="A.10.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.3-ggplot-scatter-related-plotsggplot-scatter-related-plots-links"><i class="fa fa-check"></i><b>A.10.3</b> <span>Section 10.3 ggplot Scatter Related Plots</span> links</a></li>
<li class="chapter" data-level="A.10.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.4-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.10.4</b> <span>Section 10.4 Write and Read Plots</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.11" data-path="index-and-code-links.html"><a href="index-and-code-links.html#get-data-links"><i class="fa fa-check"></i><b>A.11</b> Get Data links</a>
<ul>
<li class="chapter" data-level="A.11.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-11.1-environmental-dataenvironmental-data-links"><i class="fa fa-check"></i><b>A.11.1</b> <span>Section 11.1 Environmental Data</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.12" data-path="index-and-code-links.html"><a href="index-and-code-links.html#code-and-development-links"><i class="fa fa-check"></i><b>A.12</b> Code and Development links</a>
<ul>
<li class="chapter" data-level="A.12.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.1-files-in-and-outfiles-in-and-out-links"><i class="fa fa-check"></i><b>A.12.1</b> <span>Section 12.1 Files In and Out</span> links</a></li>
<li class="chapter" data-level="A.12.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.2-python-with-rpython-with-r-links"><i class="fa fa-check"></i><b>A.12.2</b> <span>Section 12.2 Python with R</span> links</a></li>
<li class="chapter" data-level="A.12.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.3-command-linecommand-line-links"><i class="fa fa-check"></i><b>A.12.3</b> <span>Section 12.3 Command Line</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Structures, Estimation and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tables-and-graphs" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Tables and Graphs</h1>

<div id="r-base-plots" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> R Base Plots</h2>

<div id="plot-curve-line-and-points" class="section level3" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Plot Curve, Line and Points</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<p>Work with the R plot function.</p>
<div id="one-point-one-line-and-two-curves" class="section level4" number="10.1.1.1">
<h4><span class="header-section-number">10.1.1.1</span> One Point, One Line and Two Curves</h4>
<ul>
<li>r curve on top of plot</li>
<li>r plot specify pch lty both scatter and line</li>
<li>r legend outside</li>
</ul>
<p>Jointly plot:</p>
<ul>
<li>1 scatter plot</li>
<li>1 line plot</li>
<li>2 function curve plots</li>
</ul>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="tables-and-graphs.html#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-2"><a href="tables-and-graphs.html#cb582-2" aria-hidden="true" tabindex="-1"></a><span class="co"># First, Some common Labels:</span></span>
<span id="cb582-3"><a href="tables-and-graphs.html#cb582-3" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-4"><a href="tables-and-graphs.html#cb582-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb582-5"><a href="tables-and-graphs.html#cb582-5" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Scatter, Line and Curve Joint Ploting Example Using Base R</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb582-6"><a href="tables-and-graphs.html#cb582-6" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;plot() + curve(): x*sin(x), cos(x), sin(x)*cos(x), sin(x)+tan(x)+cos(x)&#39;</span>)</span>
<span id="cb582-7"><a href="tables-and-graphs.html#cb582-7" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb582-8"><a href="tables-and-graphs.html#cb582-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/tabgraph/inout/htmlpdfr/fs_base_curve.html&#39;</span>)</span>
<span id="cb582-9"><a href="tables-and-graphs.html#cb582-9" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;x&#39;</span></span>
<span id="cb582-10"><a href="tables-and-graphs.html#cb582-10" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;f(x)&#39;</span></span>
<span id="cb582-11"><a href="tables-and-graphs.html#cb582-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-12"><a href="tables-and-graphs.html#cb582-12" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-13"><a href="tables-and-graphs.html#cb582-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Second, Generate the Graphs Functions and data points:</span></span>
<span id="cb582-14"><a href="tables-and-graphs.html#cb582-14" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-15"><a href="tables-and-graphs.html#cb582-15" aria-hidden="true" tabindex="-1"></a><span class="co"># x only used for Point 1 and Line 1</span></span>
<span id="cb582-16"><a href="tables-and-graphs.html#cb582-16" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>pi, <span class="dv">1</span><span class="sc">*</span>pi, <span class="at">length.out=</span><span class="dv">25</span>)</span>
<span id="cb582-17"><a href="tables-and-graphs.html#cb582-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Line (Point) 1: Generate X and Y</span></span>
<span id="cb582-18"><a href="tables-and-graphs.html#cb582-18" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> x<span class="sc">*</span><span class="fu">sin</span>(x)</span>
<span id="cb582-19"><a href="tables-and-graphs.html#cb582-19" aria-hidden="true" tabindex="-1"></a>st_point_1_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;x*sin(x)&#39;</span></span>
<span id="cb582-20"><a href="tables-and-graphs.html#cb582-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Line 2: Line Plot</span></span>
<span id="cb582-21"><a href="tables-and-graphs.html#cb582-21" aria-hidden="true" tabindex="-1"></a>y2 <span class="ot">&lt;-</span> <span class="fu">cos</span>(x)</span>
<span id="cb582-22"><a href="tables-and-graphs.html#cb582-22" aria-hidden="true" tabindex="-1"></a>st_line_2_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;cos(x)&#39;</span></span>
<span id="cb582-23"><a href="tables-and-graphs.html#cb582-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Line 3: Function</span></span>
<span id="cb582-24"><a href="tables-and-graphs.html#cb582-24" aria-hidden="true" tabindex="-1"></a>fc_sin_cos_diff <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sin</span>(x)<span class="sc">*</span><span class="fu">cos</span>(x)</span>
<span id="cb582-25"><a href="tables-and-graphs.html#cb582-25" aria-hidden="true" tabindex="-1"></a>st_line_3_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;sin(x)*cos(x)&#39;</span></span>
<span id="cb582-26"><a href="tables-and-graphs.html#cb582-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Line 4: Function</span></span>
<span id="cb582-27"><a href="tables-and-graphs.html#cb582-27" aria-hidden="true" tabindex="-1"></a>fc_sin_cos_tan <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sin</span>(x) <span class="sc">+</span> <span class="fu">cos</span>(x) <span class="sc">+</span> <span class="fu">tan</span>(x)</span>
<span id="cb582-28"><a href="tables-and-graphs.html#cb582-28" aria-hidden="true" tabindex="-1"></a>st_line_4_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;sin(x) + tan(x) + cos(x)&#39;</span></span>
<span id="cb582-29"><a href="tables-and-graphs.html#cb582-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-30"><a href="tables-and-graphs.html#cb582-30" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-31"><a href="tables-and-graphs.html#cb582-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Third, set:</span></span>
<span id="cb582-32"><a href="tables-and-graphs.html#cb582-32" aria-hidden="true" tabindex="-1"></a><span class="co"># - point shape and size: *pch* and *cex*</span></span>
<span id="cb582-33"><a href="tables-and-graphs.html#cb582-33" aria-hidden="true" tabindex="-1"></a><span class="co"># - line type and width: *lty* and *lwd*</span></span>
<span id="cb582-34"><a href="tables-and-graphs.html#cb582-34" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-35"><a href="tables-and-graphs.html#cb582-35" aria-hidden="true" tabindex="-1"></a><span class="co"># http://www.sthda.com/english/wiki/r-plot-pch-symbols-the-different-point-shapes-available-in-r</span></span>
<span id="cb582-36"><a href="tables-and-graphs.html#cb582-36" aria-hidden="true" tabindex="-1"></a><span class="co"># http://www.sthda.com/english/wiki/line-types-in-r-lty</span></span>
<span id="cb582-37"><a href="tables-and-graphs.html#cb582-37" aria-hidden="true" tabindex="-1"></a><span class="co"># for colors, see: https://fanwangecon.github.io/M4Econ/graph/tools/fs_color.html</span></span>
<span id="cb582-38"><a href="tables-and-graphs.html#cb582-38" aria-hidden="true" tabindex="-1"></a>st_point_1_blue <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="dv">57</span><span class="sc">/</span><span class="dv">255</span>,<span class="dv">106</span><span class="sc">/</span><span class="dv">255</span>,<span class="dv">177</span><span class="sc">/</span><span class="dv">255</span>)</span>
<span id="cb582-39"><a href="tables-and-graphs.html#cb582-39" aria-hidden="true" tabindex="-1"></a>st_line_2_red <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="dv">204</span><span class="sc">/</span><span class="dv">255</span>, <span class="dv">37</span><span class="sc">/</span><span class="dv">255</span>, <span class="dv">41</span><span class="sc">/</span><span class="dv">255</span>,)</span>
<span id="cb582-40"><a href="tables-and-graphs.html#cb582-40" aria-hidden="true" tabindex="-1"></a>st_line_3_black <span class="ot">&lt;-</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb582-41"><a href="tables-and-graphs.html#cb582-41" aria-hidden="true" tabindex="-1"></a>st_line_4_purple <span class="ot">&lt;-</span> <span class="st">&#39;orange&#39;</span></span>
<span id="cb582-42"><a href="tables-and-graphs.html#cb582-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-43"><a href="tables-and-graphs.html#cb582-43" aria-hidden="true" tabindex="-1"></a><span class="co"># point type</span></span>
<span id="cb582-44"><a href="tables-and-graphs.html#cb582-44" aria-hidden="true" tabindex="-1"></a>st_point_1_pch <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb582-45"><a href="tables-and-graphs.html#cb582-45" aria-hidden="true" tabindex="-1"></a><span class="co"># point size</span></span>
<span id="cb582-46"><a href="tables-and-graphs.html#cb582-46" aria-hidden="true" tabindex="-1"></a>st_point_1_cex <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb582-47"><a href="tables-and-graphs.html#cb582-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-48"><a href="tables-and-graphs.html#cb582-48" aria-hidden="true" tabindex="-1"></a><span class="co"># line type</span></span>
<span id="cb582-49"><a href="tables-and-graphs.html#cb582-49" aria-hidden="true" tabindex="-1"></a>st_line_2_lty <span class="ot">&lt;-</span> <span class="st">&#39;dashed&#39;</span></span>
<span id="cb582-50"><a href="tables-and-graphs.html#cb582-50" aria-hidden="true" tabindex="-1"></a>st_line_3_lty <span class="ot">&lt;-</span> <span class="st">&#39;dotted&#39;</span></span>
<span id="cb582-51"><a href="tables-and-graphs.html#cb582-51" aria-hidden="true" tabindex="-1"></a>st_line_4_lty <span class="ot">&lt;-</span> <span class="st">&#39;dotdash&#39;</span></span>
<span id="cb582-52"><a href="tables-and-graphs.html#cb582-52" aria-hidden="true" tabindex="-1"></a><span class="co"># line width</span></span>
<span id="cb582-53"><a href="tables-and-graphs.html#cb582-53" aria-hidden="true" tabindex="-1"></a>st_line_2_lwd <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb582-54"><a href="tables-and-graphs.html#cb582-54" aria-hidden="true" tabindex="-1"></a>st_line_3_lwd <span class="ot">&lt;-</span> <span class="fl">2.5</span></span>
<span id="cb582-55"><a href="tables-and-graphs.html#cb582-55" aria-hidden="true" tabindex="-1"></a>st_line_4_lwd <span class="ot">&lt;-</span> <span class="fl">3.5</span></span>
<span id="cb582-56"><a href="tables-and-graphs.html#cb582-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-57"><a href="tables-and-graphs.html#cb582-57" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-58"><a href="tables-and-graphs.html#cb582-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Fourth: Share xlim and ylim</span></span>
<span id="cb582-59"><a href="tables-and-graphs.html#cb582-59" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-60"><a href="tables-and-graphs.html#cb582-60" aria-hidden="true" tabindex="-1"></a>ar_xlim <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x))</span>
<span id="cb582-61"><a href="tables-and-graphs.html#cb582-61" aria-hidden="true" tabindex="-1"></a>ar_ylim <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">3.5</span>, <span class="fl">3.5</span>)</span>
<span id="cb582-62"><a href="tables-and-graphs.html#cb582-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-63"><a href="tables-and-graphs.html#cb582-63" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-64"><a href="tables-and-graphs.html#cb582-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Fifth: the legend will be long, will place it to the right of figure,</span></span>
<span id="cb582-65"><a href="tables-and-graphs.html#cb582-65" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-66"><a href="tables-and-graphs.html#cb582-66" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span><span class="cn">FALSE</span>, <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">10</span>))</span>
<span id="cb582-67"><a href="tables-and-graphs.html#cb582-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-68"><a href="tables-and-graphs.html#cb582-68" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-69"><a href="tables-and-graphs.html#cb582-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Sixth, the four objects and do not print yet:</span></span>
<span id="cb582-70"><a href="tables-and-graphs.html#cb582-70" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-71"><a href="tables-and-graphs.html#cb582-71" aria-hidden="true" tabindex="-1"></a><span class="co"># pdf(NULL)</span></span>
<span id="cb582-72"><a href="tables-and-graphs.html#cb582-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Scatter 1</span></span>
<span id="cb582-73"><a href="tables-and-graphs.html#cb582-73" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y1, <span class="at">type=</span><span class="st">&quot;p&quot;</span>,</span>
<span id="cb582-74"><a href="tables-and-graphs.html#cb582-74" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> st_point_1_blue,</span>
<span id="cb582-75"><a href="tables-and-graphs.html#cb582-75" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> st_point_1_pch, <span class="at">cex =</span> st_point_1_cex,</span>
<span id="cb582-76"><a href="tables-and-graphs.html#cb582-76" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> ar_xlim, <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb582-77"><a href="tables-and-graphs.html#cb582-77" aria-hidden="true" tabindex="-1"></a>     <span class="at">panel.first =</span> <span class="fu">grid</span>(),</span>
<span id="cb582-78"><a href="tables-and-graphs.html#cb582-78" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span>
<span id="cb582-79"><a href="tables-and-graphs.html#cb582-79" aria-hidden="true" tabindex="-1"></a>pl_scatter_1 <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb582-80"><a href="tables-and-graphs.html#cb582-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-81"><a href="tables-and-graphs.html#cb582-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Line 2</span></span>
<span id="cb582-82"><a href="tables-and-graphs.html#cb582-82" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb582-83"><a href="tables-and-graphs.html#cb582-83" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y2, <span class="at">type=</span><span class="st">&quot;l&quot;</span>,</span>
<span id="cb582-84"><a href="tables-and-graphs.html#cb582-84" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> st_line_2_red,</span>
<span id="cb582-85"><a href="tables-and-graphs.html#cb582-85" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> st_line_2_lwd, <span class="at">lty =</span> st_line_2_lty,</span>
<span id="cb582-86"><a href="tables-and-graphs.html#cb582-86" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> ar_xlim, <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb582-87"><a href="tables-and-graphs.html#cb582-87" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span>
<span id="cb582-88"><a href="tables-and-graphs.html#cb582-88" aria-hidden="true" tabindex="-1"></a>pl_12 <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb582-89"><a href="tables-and-graphs.html#cb582-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-90"><a href="tables-and-graphs.html#cb582-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Curve 3</span></span>
<span id="cb582-91"><a href="tables-and-graphs.html#cb582-91" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb582-92"><a href="tables-and-graphs.html#cb582-92" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(fc_sin_cos_diff,</span>
<span id="cb582-93"><a href="tables-and-graphs.html#cb582-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> st_line_3_black,</span>
<span id="cb582-94"><a href="tables-and-graphs.html#cb582-94" aria-hidden="true" tabindex="-1"></a>      <span class="at">lwd =</span> st_line_3_lwd, <span class="at">lty =</span> st_line_3_lty,</span>
<span id="cb582-95"><a href="tables-and-graphs.html#cb582-95" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> ar_xlim[<span class="dv">1</span>], <span class="at">to =</span> ar_xlim[<span class="dv">2</span>], <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb582-96"><a href="tables-and-graphs.html#cb582-96" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span>
<span id="cb582-97"><a href="tables-and-graphs.html#cb582-97" aria-hidden="true" tabindex="-1"></a>pl_123 <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb582-98"><a href="tables-and-graphs.html#cb582-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-99"><a href="tables-and-graphs.html#cb582-99" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Curve 4</span></span>
<span id="cb582-100"><a href="tables-and-graphs.html#cb582-100" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb582-101"><a href="tables-and-graphs.html#cb582-101" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(fc_sin_cos_tan,</span>
<span id="cb582-102"><a href="tables-and-graphs.html#cb582-102" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> st_line_4_purple,</span>
<span id="cb582-103"><a href="tables-and-graphs.html#cb582-103" aria-hidden="true" tabindex="-1"></a>      <span class="at">lwd =</span> st_line_4_lwd, <span class="at">lty =</span> st_line_4_lty,</span>
<span id="cb582-104"><a href="tables-and-graphs.html#cb582-104" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> ar_xlim[<span class="dv">1</span>], <span class="at">to =</span> ar_xlim[<span class="dv">2</span>], <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb582-105"><a href="tables-and-graphs.html#cb582-105" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span>
<span id="cb582-106"><a href="tables-and-graphs.html#cb582-106" aria-hidden="true" tabindex="-1"></a>pl_1234 <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb582-107"><a href="tables-and-graphs.html#cb582-107" aria-hidden="true" tabindex="-1"></a><span class="co"># invisible(dev.off())</span></span>
<span id="cb582-108"><a href="tables-and-graphs.html#cb582-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-109"><a href="tables-and-graphs.html#cb582-109" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-110"><a href="tables-and-graphs.html#cb582-110" aria-hidden="true" tabindex="-1"></a><span class="co"># Seventh, Set Title and Legend and Plot Jointly</span></span>
<span id="cb582-111"><a href="tables-and-graphs.html#cb582-111" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb582-112"><a href="tables-and-graphs.html#cb582-112" aria-hidden="true" tabindex="-1"></a><span class="co"># CEX sizing Contorl Titling and Legend Sizes</span></span>
<span id="cb582-113"><a href="tables-and-graphs.html#cb582-113" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_reg <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb582-114"><a href="tables-and-graphs.html#cb582-114" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_small <span class="ot">=</span> <span class="fl">0.75</span></span>
<span id="cb582-115"><a href="tables-and-graphs.html#cb582-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-116"><a href="tables-and-graphs.html#cb582-116" aria-hidden="true" tabindex="-1"></a><span class="co"># R Legend</span></span>
<span id="cb582-117"><a href="tables-and-graphs.html#cb582-117" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> st_title, <span class="at">sub =</span> st_subtitle, <span class="at">xlab =</span> st_x_label, <span class="at">ylab =</span> st_y_label,</span>
<span id="cb582-118"><a href="tables-and-graphs.html#cb582-118" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.lab=</span>fl_ces_fig_reg,</span>
<span id="cb582-119"><a href="tables-and-graphs.html#cb582-119" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.main=</span>fl_ces_fig_reg,</span>
<span id="cb582-120"><a href="tables-and-graphs.html#cb582-120" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.sub=</span>fl_ces_fig_small)</span>
<span id="cb582-121"><a href="tables-and-graphs.html#cb582-121" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb582-122"><a href="tables-and-graphs.html#cb582-122" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb582-123"><a href="tables-and-graphs.html#cb582-123" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb582-124"><a href="tables-and-graphs.html#cb582-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-125"><a href="tables-and-graphs.html#cb582-125" aria-hidden="true" tabindex="-1"></a><span class="co"># Legend sizing CEX</span></span>
<span id="cb582-126"><a href="tables-and-graphs.html#cb582-126" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>,</span>
<span id="cb582-127"><a href="tables-and-graphs.html#cb582-127" aria-hidden="true" tabindex="-1"></a>       <span class="at">inset=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.4</span>,<span class="dv">0</span>),</span>
<span id="cb582-128"><a href="tables-and-graphs.html#cb582-128" aria-hidden="true" tabindex="-1"></a>       <span class="at">xpd=</span><span class="cn">TRUE</span>,</span>
<span id="cb582-129"><a href="tables-and-graphs.html#cb582-129" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(st_point_1_y_legend, st_line_2_y_legend, st_line_3_y_legend, st_line_4_y_legend),</span>
<span id="cb582-130"><a href="tables-and-graphs.html#cb582-130" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(st_point_1_blue, st_line_2_red, st_line_3_black, st_line_4_purple),</span>
<span id="cb582-131"><a href="tables-and-graphs.html#cb582-131" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(st_point_1_pch, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb582-132"><a href="tables-and-graphs.html#cb582-132" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> fl_ces_fig_small,</span>
<span id="cb582-133"><a href="tables-and-graphs.html#cb582-133" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(<span class="cn">NA</span>, st_line_2_lty, st_line_3_lty, st_line_4_lty),</span>
<span id="cb582-134"><a href="tables-and-graphs.html#cb582-134" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="cn">NA</span>, st_line_2_lwd, st_line_3_lwd,st_line_4_lwd),</span>
<span id="cb582-135"><a href="tables-and-graphs.html#cb582-135" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Legends&#39;</span>,</span>
<span id="cb582-136"><a href="tables-and-graphs.html#cb582-136" aria-hidden="true" tabindex="-1"></a>       <span class="at">y.intersp=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-293-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="tables-and-graphs.html#cb583-1" aria-hidden="true" tabindex="-1"></a><span class="co"># record final plot</span></span>
<span id="cb583-2"><a href="tables-and-graphs.html#cb583-2" aria-hidden="true" tabindex="-1"></a>pl_1234_final <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span></code></pre></div>
<p>We used recordplot() earlier. So now we can print just the first two constructed plots.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="tables-and-graphs.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb584-2"><a href="tables-and-graphs.html#cb584-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Eighth, Plot just the first two saved lines</span></span>
<span id="cb584-3"><a href="tables-and-graphs.html#cb584-3" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb584-4"><a href="tables-and-graphs.html#cb584-4" aria-hidden="true" tabindex="-1"></a><span class="co"># mar: margin, bottom, left, top, right</span></span>
<span id="cb584-5"><a href="tables-and-graphs.html#cb584-5" aria-hidden="true" tabindex="-1"></a>pl_12</span>
<span id="cb584-6"><a href="tables-and-graphs.html#cb584-6" aria-hidden="true" tabindex="-1"></a><span class="co"># R Legend</span></span>
<span id="cb584-7"><a href="tables-and-graphs.html#cb584-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb584-8"><a href="tables-and-graphs.html#cb584-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> st_title, <span class="at">sub =</span> st_subtitle, <span class="at">xlab =</span> st_x_label, <span class="at">ylab =</span> st_y_label,</span>
<span id="cb584-9"><a href="tables-and-graphs.html#cb584-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.lab =</span> fl_ces_fig_reg,</span>
<span id="cb584-10"><a href="tables-and-graphs.html#cb584-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.main =</span> fl_ces_fig_reg,</span>
<span id="cb584-11"><a href="tables-and-graphs.html#cb584-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.sub =</span> fl_ces_fig_small)</span>
<span id="cb584-12"><a href="tables-and-graphs.html#cb584-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb584-13"><a href="tables-and-graphs.html#cb584-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Legend sizing CEX</span></span>
<span id="cb584-14"><a href="tables-and-graphs.html#cb584-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb584-15"><a href="tables-and-graphs.html#cb584-15" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>,</span>
<span id="cb584-16"><a href="tables-and-graphs.html#cb584-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">inset=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.4</span>,<span class="dv">0</span>),</span>
<span id="cb584-17"><a href="tables-and-graphs.html#cb584-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">xpd=</span><span class="cn">TRUE</span>,</span>
<span id="cb584-18"><a href="tables-and-graphs.html#cb584-18" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(st_point_1_y_legend, st_line_2_y_legend),</span>
<span id="cb584-19"><a href="tables-and-graphs.html#cb584-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(st_point_1_blue, st_line_2_red),</span>
<span id="cb584-20"><a href="tables-and-graphs.html#cb584-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(st_point_1_pch, <span class="cn">NA</span>),</span>
<span id="cb584-21"><a href="tables-and-graphs.html#cb584-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> fl_ces_fig_small,</span>
<span id="cb584-22"><a href="tables-and-graphs.html#cb584-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(<span class="cn">NA</span>, st_line_2_lty),</span>
<span id="cb584-23"><a href="tables-and-graphs.html#cb584-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="cn">NA</span>, st_line_2_lwd),</span>
<span id="cb584-24"><a href="tables-and-graphs.html#cb584-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Legends&#39;</span>,</span>
<span id="cb584-25"><a href="tables-and-graphs.html#cb584-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">y.intersp=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-294-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
<div id="ggplot-line-related-plots" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> ggplot Line Related Plots</h2>

<div id="ggplot-line-plot" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> ggplot Line Plot</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="three-categories-one-is-subplot" class="section level4" number="10.2.1.1">
<h4><span class="header-section-number">10.2.1.1</span> Three Categories, One is Subplot</h4>
<p>The outcome is CEV, generated for results with different productivity types (subplot), generated for PE vs GE (linetype), and at different parameter specifications (lower and higher gamma).</p>
<p>The graphs rely on this csv file <a href="https://github.com/FanWangEcon/R4Econ/tree/master/tabgraph/ggline/_file">cev_data.csv</a>.</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="tables-and-graphs.html#cb585-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb585-2"><a href="tables-and-graphs.html#cb585-2" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb585-3"><a href="tables-and-graphs.html#cb585-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-4"><a href="tables-and-graphs.html#cb585-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in CSV</span></span>
<span id="cb585-5"><a href="tables-and-graphs.html#cb585-5" aria-hidden="true" tabindex="-1"></a>bl_save_img <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb585-6"><a href="tables-and-graphs.html#cb585-6" aria-hidden="true" tabindex="-1"></a>spt_csv_root <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;C:/Users/fan/R4Econ/tabgraph/ggline/_file/&#39;</span>)</span>
<span id="cb585-7"><a href="tables-and-graphs.html#cb585-7" aria-hidden="true" tabindex="-1"></a>spt_img_root <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;G:/repos/R4Econ/tabgraph/ggline/_file/&#39;</span>)</span>
<span id="cb585-8"><a href="tables-and-graphs.html#cb585-8" aria-hidden="true" tabindex="-1"></a>spn_cev_data <span class="ot">&lt;-</span> <span class="fu">paste0</span>(spt_csv_root, <span class="st">&#39;cev_data.csv&#39;</span>)</span>
<span id="cb585-9"><a href="tables-and-graphs.html#cb585-9" aria-hidden="true" tabindex="-1"></a>spn_cev_graph <span class="ot">&lt;-</span> <span class="fu">paste0</span>(spt_img_root, <span class="st">&#39;cev_graph.png&#39;</span>)</span>
<span id="cb585-10"><a href="tables-and-graphs.html#cb585-10" aria-hidden="true" tabindex="-1"></a>spn_cev_graph_eps <span class="ot">&lt;-</span> <span class="fu">paste0</span>(spt_img_root, <span class="st">&#39;cev_graph.eps&#39;</span>)</span>
<span id="cb585-11"><a href="tables-and-graphs.html#cb585-11" aria-hidden="true" tabindex="-1"></a>df_cev_graph <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(spn_cev_data)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>X)</span>
<span id="cb585-12"><a href="tables-and-graphs.html#cb585-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-13"><a href="tables-and-graphs.html#cb585-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset subsetting ------</span></span>
<span id="cb585-14"><a href="tables-and-graphs.html#cb585-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-15"><a href="tables-and-graphs.html#cb585-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Line Patterns and Colors ------</span></span>
<span id="cb585-16"><a href="tables-and-graphs.html#cb585-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ar_st_age_group_leg_labels &lt;- c(&quot;\nGE\n\u03B3=0.42\n&quot;, &quot;\nGE\n\u03B3=0.56\n&quot;,</span></span>
<span id="cb585-17"><a href="tables-and-graphs.html#cb585-17" aria-hidden="true" tabindex="-1"></a><span class="co">#                                 &quot;\nPE\n\u03B3=0.42\n&quot;, &quot;\nPE\n\u03B3=0.42\n&quot;)</span></span>
<span id="cb585-18"><a href="tables-and-graphs.html#cb585-18" aria-hidden="true" tabindex="-1"></a>ar_st_age_group_leg_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">bquote</span>(<span class="st">&quot;GE,&quot;</span><span class="sc">~</span>gamma <span class="sc">==</span> .(<span class="fl">0.42</span>)),</span>
<span id="cb585-19"><a href="tables-and-graphs.html#cb585-19" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">bquote</span>(<span class="st">&quot;GE,&quot;</span><span class="sc">~</span>gamma <span class="sc">==</span> .(<span class="fl">0.56</span>)),</span>
<span id="cb585-20"><a href="tables-and-graphs.html#cb585-20" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">bquote</span>(<span class="st">&quot;PE,&quot;</span><span class="sc">~</span>gamma <span class="sc">==</span> .(<span class="fl">0.42</span>)),</span>
<span id="cb585-21"><a href="tables-and-graphs.html#cb585-21" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">bquote</span>(<span class="st">&quot;PE,&quot;</span><span class="sc">~</span>gamma <span class="sc">==</span> .(<span class="fl">0.56</span>)))</span>
<span id="cb585-22"><a href="tables-and-graphs.html#cb585-22" aria-hidden="true" tabindex="-1"></a>ar_st_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#85ccff&quot;</span>, <span class="st">&quot;#026aa3&quot;</span>, <span class="st">&quot;#85ccff&quot;</span>, <span class="st">&quot;#026aa3&quot;</span>)</span>
<span id="cb585-23"><a href="tables-and-graphs.html#cb585-23" aria-hidden="true" tabindex="-1"></a>ar_st_linetypes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;solid&quot;</span>, <span class="st">&quot;solid&quot;</span>, <span class="st">&quot;longdash&quot;</span>, <span class="st">&quot;longdash&quot;</span>)</span>
<span id="cb585-24"><a href="tables-and-graphs.html#cb585-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-25"><a href="tables-and-graphs.html#cb585-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Labels and Other Strings -------</span></span>
<span id="cb585-26"><a href="tables-and-graphs.html#cb585-26" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="st">&#39;&#39;</span></span>
<span id="cb585-27"><a href="tables-and-graphs.html#cb585-27" aria-hidden="true" tabindex="-1"></a>st_x <span class="ot">&lt;-</span> <span class="st">&#39;Wealth&#39;</span></span>
<span id="cb585-28"><a href="tables-and-graphs.html#cb585-28" aria-hidden="true" tabindex="-1"></a>st_y <span class="ot">&lt;-</span> <span class="st">&#39;Welfare Gain (% CEV)&#39;</span></span>
<span id="cb585-29"><a href="tables-and-graphs.html#cb585-29" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb585-30"><a href="tables-and-graphs.html#cb585-30" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/tabgraph/ggline/htmlpdfr/fs_ggline_mgrp_ncts.html&#39;</span>)</span>
<span id="cb585-31"><a href="tables-and-graphs.html#cb585-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-32"><a href="tables-and-graphs.html#cb585-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ar_st_age_group_leg_labels &lt;- c(&quot;C\u2013Optimal&quot;, &quot;V\u2013Optimal&quot;)</span></span>
<span id="cb585-33"><a href="tables-and-graphs.html#cb585-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-34"><a href="tables-and-graphs.html#cb585-34" aria-hidden="true" tabindex="-1"></a>prod_type_recode <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Productivity Type</span><span class="sc">\n</span><span class="st">(-1 sd)&quot;</span> <span class="ot">=</span> <span class="st">&quot;8993&quot;</span>,</span>
<span id="cb585-35"><a href="tables-and-graphs.html#cb585-35" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Productivity Type</span><span class="sc">\n</span><span class="st">(mean)&quot;</span> <span class="ot">=</span> <span class="st">&quot;10189&quot;</span>,</span>
<span id="cb585-36"><a href="tables-and-graphs.html#cb585-36" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Productivity Type</span><span class="sc">\n</span><span class="st">(+1 sd)&quot;</span> <span class="ot">=</span> <span class="st">&quot;12244&quot;</span>)</span>
<span id="cb585-37"><a href="tables-and-graphs.html#cb585-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-38"><a href="tables-and-graphs.html#cb585-38" aria-hidden="true" tabindex="-1"></a>x.labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;0&#39;</span>, <span class="st">&#39;200k&#39;</span>, <span class="st">&#39;400k&#39;</span>, <span class="st">&#39;600k&#39;</span>, <span class="st">&#39;800k&#39;</span>)</span>
<span id="cb585-39"><a href="tables-and-graphs.html#cb585-39" aria-hidden="true" tabindex="-1"></a>x.breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,</span>
<span id="cb585-40"><a href="tables-and-graphs.html#cb585-40" aria-hidden="true" tabindex="-1"></a>              <span class="dv">5</span>,</span>
<span id="cb585-41"><a href="tables-and-graphs.html#cb585-41" aria-hidden="true" tabindex="-1"></a>              <span class="dv">10</span>,</span>
<span id="cb585-42"><a href="tables-and-graphs.html#cb585-42" aria-hidden="true" tabindex="-1"></a>              <span class="dv">15</span>,</span>
<span id="cb585-43"><a href="tables-and-graphs.html#cb585-43" aria-hidden="true" tabindex="-1"></a>              <span class="dv">20</span>)</span>
<span id="cb585-44"><a href="tables-and-graphs.html#cb585-44" aria-hidden="true" tabindex="-1"></a>x.min <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb585-45"><a href="tables-and-graphs.html#cb585-45" aria-hidden="true" tabindex="-1"></a>x.max <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb585-46"><a href="tables-and-graphs.html#cb585-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-47"><a href="tables-and-graphs.html#cb585-47" aria-hidden="true" tabindex="-1"></a><span class="co"># y.labels &lt;- c(&#39;-0.01&#39;,</span></span>
<span id="cb585-48"><a href="tables-and-graphs.html#cb585-48" aria-hidden="true" tabindex="-1"></a><span class="co">#               &#39;\u2191\u2191\nWelfare\nGain\n\nCEV=0\n\nWelfare\nLoss\n\u2193\u2193&#39;,</span></span>
<span id="cb585-49"><a href="tables-and-graphs.html#cb585-49" aria-hidden="true" tabindex="-1"></a><span class="co">#               &#39;+0.01&#39;, &#39;+0.02&#39;, &#39;+0.03&#39;, &#39;+0.04&#39;,&#39;+0.05&#39;)</span></span>
<span id="cb585-50"><a href="tables-and-graphs.html#cb585-50" aria-hidden="true" tabindex="-1"></a>y.labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;-0.5 pp&#39;</span>,</span>
<span id="cb585-51"><a href="tables-and-graphs.html#cb585-51" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;CEV=0&#39;</span>,</span>
<span id="cb585-52"><a href="tables-and-graphs.html#cb585-52" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;+0.5 pp&#39;</span>, <span class="st">&#39;+1.0 pp&#39;</span>, <span class="st">&#39;+1.5 pp&#39;</span>, <span class="st">&#39;+2.0 pp&#39;</span>,<span class="st">&#39;+2.5 pp&#39;</span>)</span>
<span id="cb585-53"><a href="tables-and-graphs.html#cb585-53" aria-hidden="true" tabindex="-1"></a>y.breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.01</span>, <span class="dv">0</span>, <span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>)</span>
<span id="cb585-54"><a href="tables-and-graphs.html#cb585-54" aria-hidden="true" tabindex="-1"></a>y.min <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.011</span></span>
<span id="cb585-55"><a href="tables-and-graphs.html#cb585-55" aria-hidden="true" tabindex="-1"></a>y.max <span class="ot">&lt;-</span> <span class="fl">0.051</span></span>
<span id="cb585-56"><a href="tables-and-graphs.html#cb585-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-57"><a href="tables-and-graphs.html#cb585-57" aria-hidden="true" tabindex="-1"></a><span class="co"># data change -------</span></span>
<span id="cb585-58"><a href="tables-and-graphs.html#cb585-58" aria-hidden="true" tabindex="-1"></a>df_cev_graph <span class="ot">&lt;-</span> df_cev_graph <span class="sc">%&gt;%</span></span>
<span id="cb585-59"><a href="tables-and-graphs.html#cb585-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">across</span>(counter_policy, <span class="sc">~</span> <span class="fu">grepl</span>(<span class="st">&#39;70|42&#39;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb585-60"><a href="tables-and-graphs.html#cb585-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prod_type_lvl =</span> <span class="fu">as.factor</span>(prod_type_lvl)) <span class="sc">%&gt;%</span></span>
<span id="cb585-61"><a href="tables-and-graphs.html#cb585-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prod_type_lvl =</span> <span class="fu">fct_recode</span>(prod_type_lvl, <span class="sc">!!!</span>prod_type_recode))</span>
<span id="cb585-62"><a href="tables-and-graphs.html#cb585-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-63"><a href="tables-and-graphs.html#cb585-63" aria-hidden="true" tabindex="-1"></a><span class="co"># graph ------</span></span>
<span id="cb585-64"><a href="tables-and-graphs.html#cb585-64" aria-hidden="true" tabindex="-1"></a>pl_cev <span class="ot">&lt;-</span> df_cev_graph <span class="sc">%&gt;%</span></span>
<span id="cb585-65"><a href="tables-and-graphs.html#cb585-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prod_type_st, cash_tt) <span class="sc">%&gt;%</span></span>
<span id="cb585-66"><a href="tables-and-graphs.html#cb585-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>cash_tt, <span class="at">y=</span>cev_lvl,</span>
<span id="cb585-67"><a href="tables-and-graphs.html#cb585-67" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour=</span>counter_policy, <span class="at">linetype=</span>counter_policy, <span class="at">shape=</span>counter_policy)) <span class="sc">+</span></span>
<span id="cb585-68"><a href="tables-and-graphs.html#cb585-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> prod_type_lvl, <span class="at">nrow=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb585-69"><a href="tables-and-graphs.html#cb585-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;auto&quot;</span>, <span class="at">se=</span><span class="cn">FALSE</span>, <span class="at">fullrange=</span><span class="cn">FALSE</span>, <span class="at">level=</span><span class="fl">0.95</span>)</span>
<span id="cb585-70"><a href="tables-and-graphs.html#cb585-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-71"><a href="tables-and-graphs.html#cb585-71" aria-hidden="true" tabindex="-1"></a><span class="co"># labels</span></span>
<span id="cb585-72"><a href="tables-and-graphs.html#cb585-72" aria-hidden="true" tabindex="-1"></a>pl_cev <span class="ot">&lt;-</span> pl_cev <span class="sc">+</span></span>
<span id="cb585-73"><a href="tables-and-graphs.html#cb585-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> st_x,</span>
<span id="cb585-74"><a href="tables-and-graphs.html#cb585-74" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> st_y,</span>
<span id="cb585-75"><a href="tables-and-graphs.html#cb585-75" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> st_subtitle)</span>
<span id="cb585-76"><a href="tables-and-graphs.html#cb585-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-77"><a href="tables-and-graphs.html#cb585-77" aria-hidden="true" tabindex="-1"></a><span class="co"># set shapes and colors</span></span>
<span id="cb585-78"><a href="tables-and-graphs.html#cb585-78" aria-hidden="true" tabindex="-1"></a>pl_cev <span class="ot">&lt;-</span> pl_cev <span class="sc">+</span></span>
<span id="cb585-79"><a href="tables-and-graphs.html#cb585-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>ar_st_colours, <span class="at">labels=</span>ar_st_age_group_leg_labels) <span class="sc">+</span></span>
<span id="cb585-80"><a href="tables-and-graphs.html#cb585-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_discrete</span>(<span class="at">labels=</span>ar_st_age_group_leg_labels) <span class="sc">+</span></span>
<span id="cb585-81"><a href="tables-and-graphs.html#cb585-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span>ar_st_linetypes, <span class="at">labels=</span>ar_st_age_group_leg_labels) <span class="sc">+</span></span>
<span id="cb585-82"><a href="tables-and-graphs.html#cb585-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> x.labels, <span class="at">breaks =</span> x.breaks,</span>
<span id="cb585-83"><a href="tables-and-graphs.html#cb585-83" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(x.min, x.max)) <span class="sc">+</span></span>
<span id="cb585-84"><a href="tables-and-graphs.html#cb585-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> y.labels, <span class="at">breaks =</span> y.breaks,</span>
<span id="cb585-85"><a href="tables-and-graphs.html#cb585-85" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(y.min, y.max))</span>
<span id="cb585-86"><a href="tables-and-graphs.html#cb585-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-87"><a href="tables-and-graphs.html#cb585-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Horizontal line</span></span>
<span id="cb585-88"><a href="tables-and-graphs.html#cb585-88" aria-hidden="true" tabindex="-1"></a>pl_cev <span class="ot">&lt;-</span> pl_cev <span class="sc">+</span></span>
<span id="cb585-89"><a href="tables-and-graphs.html#cb585-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">&#39;solid&#39;</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>, <span class="at">size =</span><span class="dv">1</span>)</span>
<span id="cb585-90"><a href="tables-and-graphs.html#cb585-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_hline(yintercept=0, linetype=&#39;dotted&#39;, colour=&quot;black&quot;, size=2)</span></span>
<span id="cb585-91"><a href="tables-and-graphs.html#cb585-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-92"><a href="tables-and-graphs.html#cb585-92" aria-hidden="true" tabindex="-1"></a><span class="co"># theme</span></span>
<span id="cb585-93"><a href="tables-and-graphs.html#cb585-93" aria-hidden="true" tabindex="-1"></a>pl_cev <span class="ot">&lt;-</span> pl_cev <span class="sc">+</span></span>
<span id="cb585-94"><a href="tables-and-graphs.html#cb585-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb585-95"><a href="tables-and-graphs.html#cb585-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb585-96"><a href="tables-and-graphs.html#cb585-96" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb585-97"><a href="tables-and-graphs.html#cb585-97" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.16</span>, <span class="fl">0.65</span>),</span>
<span id="cb585-98"><a href="tables-and-graphs.html#cb585-98" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linetype=</span><span class="st">&#39;solid&#39;</span>),</span>
<span id="cb585-99"><a href="tables-and-graphs.html#cb585-99" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">&quot;cm&quot;</span>))</span>
<span id="cb585-100"><a href="tables-and-graphs.html#cb585-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-101"><a href="tables-and-graphs.html#cb585-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-102"><a href="tables-and-graphs.html#cb585-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Save Image Outputs -----</span></span>
<span id="cb585-103"><a href="tables-and-graphs.html#cb585-103" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (bl_save_img) {</span>
<span id="cb585-104"><a href="tables-and-graphs.html#cb585-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">png</span>(spn_cev_graph,</span>
<span id="cb585-105"><a href="tables-and-graphs.html#cb585-105" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">160</span>,</span>
<span id="cb585-106"><a href="tables-and-graphs.html#cb585-106" aria-hidden="true" tabindex="-1"></a>      <span class="at">height =</span> <span class="dv">105</span>, <span class="at">units=</span><span class="st">&#39;mm&#39;</span>,</span>
<span id="cb585-107"><a href="tables-and-graphs.html#cb585-107" aria-hidden="true" tabindex="-1"></a>      <span class="at">res =</span> <span class="dv">150</span>, <span class="at">pointsize=</span><span class="dv">7</span>)</span>
<span id="cb585-108"><a href="tables-and-graphs.html#cb585-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(</span>
<span id="cb585-109"><a href="tables-and-graphs.html#cb585-109" aria-hidden="true" tabindex="-1"></a>    spn_cev_graph_eps,</span>
<span id="cb585-110"><a href="tables-and-graphs.html#cb585-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot =</span> <span class="fu">last_plot</span>(),</span>
<span id="cb585-111"><a href="tables-and-graphs.html#cb585-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">device =</span> <span class="st">&#39;eps&#39;</span>,</span>
<span id="cb585-112"><a href="tables-and-graphs.html#cb585-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">path =</span> <span class="cn">NULL</span>,</span>
<span id="cb585-113"><a href="tables-and-graphs.html#cb585-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb585-114"><a href="tables-and-graphs.html#cb585-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">160</span>,</span>
<span id="cb585-115"><a href="tables-and-graphs.html#cb585-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span><span class="dv">105</span>,</span>
<span id="cb585-116"><a href="tables-and-graphs.html#cb585-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">units =</span> <span class="fu">c</span>(<span class="st">&quot;mm&quot;</span>),</span>
<span id="cb585-117"><a href="tables-and-graphs.html#cb585-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">dpi =</span> <span class="dv">150</span>,</span>
<span id="cb585-118"><a href="tables-and-graphs.html#cb585-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">limitsize =</span> <span class="cn">TRUE</span></span>
<span id="cb585-119"><a href="tables-and-graphs.html#cb585-119" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb585-120"><a href="tables-and-graphs.html#cb585-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb585-121"><a href="tables-and-graphs.html#cb585-121" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb585-122"><a href="tables-and-graphs.html#cb585-122" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pl_cev)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-296-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="tables-and-graphs.html#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (bl_save_img) {</span>
<span id="cb586-2"><a href="tables-and-graphs.html#cb586-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb586-3"><a href="tables-and-graphs.html#cb586-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>

</div>
</div>
</div>
<div id="ggplot-scatter-related-plots" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> ggplot Scatter Related Plots</h2>

<div id="ggplot-scatter-plot" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> ggplot Scatter Plot</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="three-continuous-variables-and-two-categorical-variables" class="section level4" number="10.3.1.1">
<h4><span class="header-section-number">10.3.1.1</span> Three Continuous Variables and Two Categorical Variables</h4>
<p>We will generate a graph that is very similar to the graph shown for <a href="https://fanwangecon.github.io/R4Econ/amto/tibble/htmlpdfr/fs_tib_factors.html">fs_tib_factors</a>, with the addition that scatter color and shape will be for two separate variables, and with the addition that scatter size will be for an additional continuous variable.</p>
<p>We have three continuous variables:</p>
<ol style="list-style-type: decimal">
<li>y-axis: time for 1/4 Miles (QSEC)</li>
<li>x-axis: horsepower</li>
<li>scatter-size: miles per gallon (mpg)</li>
</ol>
<p>We have two categorical ariables:</p>
<ol style="list-style-type: decimal">
<li>color: vs engine shape (vshaped or straight)</li>
<li>shape: am shift type (auto or manual)</li>
</ol>
<p>First, Load in the mtcars dataset and convert to categorical variables to factor with labels.</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="tables-and-graphs.html#cb587-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First make sure these are factors</span></span>
<span id="cb587-2"><a href="tables-and-graphs.html#cb587-2" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span></span>
<span id="cb587-3"><a href="tables-and-graphs.html#cb587-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">as_factor</span>(vs), <span class="at">am =</span> <span class="fu">as_factor</span>(am))</span>
<span id="cb587-4"><a href="tables-and-graphs.html#cb587-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Second Label the Factors</span></span>
<span id="cb587-5"><a href="tables-and-graphs.html#cb587-5" aria-hidden="true" tabindex="-1"></a>am_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">auto_shift =</span> <span class="st">&quot;0&quot;</span>, <span class="at">manual_shift =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb587-6"><a href="tables-and-graphs.html#cb587-6" aria-hidden="true" tabindex="-1"></a>vs_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">vshaped_engine =</span> <span class="st">&quot;0&quot;</span>, <span class="at">straight_engine =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb587-7"><a href="tables-and-graphs.html#cb587-7" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> tb_mtcars <span class="sc">%&gt;%</span></span>
<span id="cb587-8"><a href="tables-and-graphs.html#cb587-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">fct_recode</span>(vs, <span class="sc">!!!</span>vs_levels),</span>
<span id="cb587-9"><a href="tables-and-graphs.html#cb587-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">am =</span> <span class="fu">fct_recode</span>(am, <span class="sc">!!!</span>am_levels))</span></code></pre></div>
<p>Second, generate the core graph, a scatterplot with a nonlinear trendline. Note that in the example below color and shpae only apply to the jitter scatter, but not the trendline graph.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="tables-and-graphs.html#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphing</span></span>
<span id="cb588-2"><a href="tables-and-graphs.html#cb588-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span></span>
<span id="cb588-3"><a href="tables-and-graphs.html#cb588-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(tb_mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>qsec)) <span class="sc">+</span></span>
<span id="cb588-4"><a href="tables-and-graphs.html#cb588-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">size=</span>mpg, <span class="at">colour=</span>vs, <span class="at">shape=</span>am), <span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb588-5"><a href="tables-and-graphs.html#cb588-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">span =</span> <span class="fl">0.50</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb588-6"><a href="tables-and-graphs.html#cb588-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p>Third, control Color and Shape Information. There will be two colors and two shapes. See all <a href="https://www.google.com/search?q=r+points+shapes&amp;oq=r+point+shapes">shape listing</a>.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="tables-and-graphs.html#cb589-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Color controls</span></span>
<span id="cb589-2"><a href="tables-and-graphs.html#cb589-2" aria-hidden="true" tabindex="-1"></a>ar_st_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#33cc33&quot;</span>, <span class="st">&quot;#F8766D&quot;</span>)</span>
<span id="cb589-3"><a href="tables-and-graphs.html#cb589-3" aria-hidden="true" tabindex="-1"></a>ar_st_colors_label <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;v-shaped&quot;</span>, <span class="st">&quot;straight&quot;</span>)</span>
<span id="cb589-4"><a href="tables-and-graphs.html#cb589-4" aria-hidden="true" tabindex="-1"></a>fl_legend_color_symbol_size <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb589-5"><a href="tables-and-graphs.html#cb589-5" aria-hidden="true" tabindex="-1"></a>st_leg_color_lab <span class="ot">&lt;-</span> <span class="st">&quot;Engine-Shape&quot;</span></span>
<span id="cb589-6"><a href="tables-and-graphs.html#cb589-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape controls</span></span>
<span id="cb589-7"><a href="tables-and-graphs.html#cb589-7" aria-hidden="true" tabindex="-1"></a>ar_it_shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">15</span>)</span>
<span id="cb589-8"><a href="tables-and-graphs.html#cb589-8" aria-hidden="true" tabindex="-1"></a>ar_st_shapes_label <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manuel&quot;</span>)</span>
<span id="cb589-9"><a href="tables-and-graphs.html#cb589-9" aria-hidden="true" tabindex="-1"></a>fl_legend_shape_symbol_size <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb589-10"><a href="tables-and-graphs.html#cb589-10" aria-hidden="true" tabindex="-1"></a>st_leg_shape_lab <span class="ot">&lt;-</span> <span class="st">&quot;Transmission&quot;</span></span></code></pre></div>
<p>Fourth, control the size of the scatter, which will be the MPG variable.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="tables-and-graphs.html#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Control scatter point size</span></span>
<span id="cb590-2"><a href="tables-and-graphs.html#cb590-2" aria-hidden="true" tabindex="-1"></a>fl_min_size <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb590-3"><a href="tables-and-graphs.html#cb590-3" aria-hidden="true" tabindex="-1"></a>fl_max_size <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb590-4"><a href="tables-and-graphs.html#cb590-4" aria-hidden="true" tabindex="-1"></a>ar_size_range <span class="ot">&lt;-</span> <span class="fu">c</span>(fl_min_size, fl_max_size)</span>
<span id="cb590-5"><a href="tables-and-graphs.html#cb590-5" aria-hidden="true" tabindex="-1"></a>st_leg_size_lab <span class="ot">&lt;-</span> <span class="st">&quot;MPG&quot;</span></span></code></pre></div>
<p>Fifth, control graph strings.</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="tables-and-graphs.html#cb591-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb591-2"><a href="tables-and-graphs.html#cb591-2" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Distribution of HP and QSEC from mtcars&#39;</span>)</span>
<span id="cb591-3"><a href="tables-and-graphs.html#cb591-3" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb591-4"><a href="tables-and-graphs.html#cb591-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/tabgraph/ggscatter/htmlpdfr/fs_ggscatter_3cts_mdisc.html&#39;</span>)</span>
<span id="cb591-5"><a href="tables-and-graphs.html#cb591-5" aria-hidden="true" tabindex="-1"></a>st_caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb591-6"><a href="tables-and-graphs.html#cb591-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb591-7"><a href="tables-and-graphs.html#cb591-7" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;HP = Horse Power&#39;</span></span>
<span id="cb591-8"><a href="tables-and-graphs.html#cb591-8" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;QSEC = time for 1/4 Miles&#39;</span></span></code></pre></div>
<p>Sixth, combine graphical components.</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="tables-and-graphs.html#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add titles and labels</span></span>
<span id="cb592-2"><a href="tables-and-graphs.html#cb592-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb592-3"><a href="tables-and-graphs.html#cb592-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb592-4"><a href="tables-and-graphs.html#cb592-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption)</span>
<span id="cb592-5"><a href="tables-and-graphs.html#cb592-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb592-6"><a href="tables-and-graphs.html#cb592-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Color, shape and size controls</span></span>
<span id="cb592-7"><a href="tables-and-graphs.html#cb592-7" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb592-8"><a href="tables-and-graphs.html#cb592-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>ar_st_colors, <span class="at">labels=</span>ar_st_colors_label) <span class="sc">+</span></span>
<span id="cb592-9"><a href="tables-and-graphs.html#cb592-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values=</span>ar_it_shapes, <span class="at">labels=</span>ar_st_shapes_label) <span class="sc">+</span></span>
<span id="cb592-10"><a href="tables-and-graphs.html#cb592-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> ar_size_range)</span></code></pre></div>
<p>Eigth, replace default legends titles for color, shape and size.</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="tables-and-graphs.html#cb593-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace the default labels for each legend segment</span></span>
<span id="cb593-2"><a href="tables-and-graphs.html#cb593-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb593-3"><a href="tables-and-graphs.html#cb593-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> st_leg_color_lab,</span>
<span id="cb593-4"><a href="tables-and-graphs.html#cb593-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">shape =</span> st_leg_shape_lab,</span>
<span id="cb593-5"><a href="tables-and-graphs.html#cb593-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">size =</span> st_leg_size_lab)</span></code></pre></div>
<p>Ninth, additional controls for the graph.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="tables-and-graphs.html#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Control the order of legend display</span></span>
<span id="cb594-2"><a href="tables-and-graphs.html#cb594-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Show color, show shape, then show size.</span></span>
<span id="cb594-3"><a href="tables-and-graphs.html#cb594-3" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span> <span class="fu">guides</span>(</span>
<span id="cb594-4"><a href="tables-and-graphs.html#cb594-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">order =</span> <span class="dv">1</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> fl_legend_color_symbol_size)),</span>
<span id="cb594-5"><a href="tables-and-graphs.html#cb594-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">order =</span> <span class="dv">2</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> fl_legend_shape_symbol_size)),</span>
<span id="cb594-6"><a href="tables-and-graphs.html#cb594-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="at">order =</span> <span class="dv">3</span>))</span>
<span id="cb594-7"><a href="tables-and-graphs.html#cb594-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb594-8"><a href="tables-and-graphs.html#cb594-8" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb594-9"><a href="tables-and-graphs.html#cb594-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plt_mtcars_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-305-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
<div id="ggplot-multiple-scatter-lines-with-facet-wrap" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> ggplot Multiple Scatter-Lines with Facet Wrap</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="multiple-scatter-lines-with-facet-wrap" class="section level4" number="10.3.2.1">
<h4><span class="header-section-number">10.3.2.1</span> Multiple Scatter-Lines with Facet Wrap</h4>
<p>Two subplots, for auto and manual transitions. The x-axis is horse-power, the y-axis shows QSEC. Different colors represent v-shaped and straight-engines.</p>
<ol style="list-style-type: decimal">
<li>y-axis: time for 1/4 Miles (QSEC)</li>
<li>x-axis: horsepower (hp)</li>
<li>facet-wrap: auto or manual (am)</li>
<li>colored line and point shapes: vshaped or straight engine (vs)</li>
</ol>
<p>First, Load in the mtcars dataset and convert to categorical variables to factor with labels.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="tables-and-graphs.html#cb595-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First make sure these are factors</span></span>
<span id="cb595-2"><a href="tables-and-graphs.html#cb595-2" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span></span>
<span id="cb595-3"><a href="tables-and-graphs.html#cb595-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">as_factor</span>(vs), <span class="at">am =</span> <span class="fu">as_factor</span>(am))</span>
<span id="cb595-4"><a href="tables-and-graphs.html#cb595-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Second Label the Factors</span></span>
<span id="cb595-5"><a href="tables-and-graphs.html#cb595-5" aria-hidden="true" tabindex="-1"></a>am_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">auto_shift =</span> <span class="st">&quot;0&quot;</span>, <span class="at">manual_shift =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb595-6"><a href="tables-and-graphs.html#cb595-6" aria-hidden="true" tabindex="-1"></a>vs_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;vshaped engine&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>, <span class="st">&quot;straight engine&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb595-7"><a href="tables-and-graphs.html#cb595-7" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> tb_mtcars <span class="sc">%&gt;%</span></span>
<span id="cb595-8"><a href="tables-and-graphs.html#cb595-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">fct_recode</span>(vs, <span class="sc">!!!</span>vs_levels),</span>
<span id="cb595-9"><a href="tables-and-graphs.html#cb595-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">am =</span> <span class="fu">fct_recode</span>(am, <span class="sc">!!!</span>am_levels))</span></code></pre></div>
<p>Second, generate the core graph, a line plot and facet wrapping over the <em>am</em> variable. Note that <em>vs</em> variable has different color as well as line type and shape</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="tables-and-graphs.html#cb596-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphing</span></span>
<span id="cb596-2"><a href="tables-and-graphs.html#cb596-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span></span>
<span id="cb596-3"><a href="tables-and-graphs.html#cb596-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(tb_mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>qsec,</span>
<span id="cb596-4"><a href="tables-and-graphs.html#cb596-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">colour=</span>am, <span class="at">shape=</span>am, <span class="at">linetype=</span>am)) <span class="sc">+</span></span>
<span id="cb596-5"><a href="tables-and-graphs.html#cb596-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span> <span class="co"># Lwd = line width</span></span>
<span id="cb596-6"><a href="tables-and-graphs.html#cb596-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="at">stroke =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="co"># stroke = point shape width</span></span>
<span id="cb596-7"><a href="tables-and-graphs.html#cb596-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vs,</span>
<span id="cb596-8"><a href="tables-and-graphs.html#cb596-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span>,</span>
<span id="cb596-9"><a href="tables-and-graphs.html#cb596-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb596-10"><a href="tables-and-graphs.html#cb596-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">labeller =</span> <span class="fu">label_wrap_gen</span>(<span class="at">multi_line=</span><span class="cn">FALSE</span>))</span></code></pre></div>
<p>Third, control Color, Shape and Line-type Information. There will be two colors, two shapes and two linetypes. See all <a href="https://www.google.com/search?q=r+points+shapes&amp;oq=r+point+shapes">shape listing</a> and <a href="https://www.google.com/search?q=r+points+shapes&amp;oq=r+point+shapes">linetype listing</a>., See all <a href="https://www.google.com/search?q=r+linetype&amp;oq=r+linetype">shape listing</a>.</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="tables-and-graphs.html#cb597-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Color controls</span></span>
<span id="cb597-2"><a href="tables-and-graphs.html#cb597-2" aria-hidden="true" tabindex="-1"></a>ar_st_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#33cc33&quot;</span>, <span class="st">&quot;#F8766D&quot;</span>)</span>
<span id="cb597-3"><a href="tables-and-graphs.html#cb597-3" aria-hidden="true" tabindex="-1"></a>ar_st_colors_label <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manual&quot;</span>)</span>
<span id="cb597-4"><a href="tables-and-graphs.html#cb597-4" aria-hidden="true" tabindex="-1"></a>fl_legend_color_symbol_size <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb597-5"><a href="tables-and-graphs.html#cb597-5" aria-hidden="true" tabindex="-1"></a>st_leg_color_lab <span class="ot">&lt;-</span> <span class="st">&quot;Transmission&quot;</span></span>
<span id="cb597-6"><a href="tables-and-graphs.html#cb597-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape controls</span></span>
<span id="cb597-7"><a href="tables-and-graphs.html#cb597-7" aria-hidden="true" tabindex="-1"></a>ar_it_shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb597-8"><a href="tables-and-graphs.html#cb597-8" aria-hidden="true" tabindex="-1"></a>ar_st_shapes_label <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manual&quot;</span>)</span>
<span id="cb597-9"><a href="tables-and-graphs.html#cb597-9" aria-hidden="true" tabindex="-1"></a>fl_legend_shape_symbol_size <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb597-10"><a href="tables-and-graphs.html#cb597-10" aria-hidden="true" tabindex="-1"></a>st_leg_shape_lab <span class="ot">&lt;-</span> <span class="st">&quot;Transmission&quot;</span></span>
<span id="cb597-11"><a href="tables-and-graphs.html#cb597-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Line-Type controls</span></span>
<span id="cb597-12"><a href="tables-and-graphs.html#cb597-12" aria-hidden="true" tabindex="-1"></a>ar_st_linetypes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;solid&#39;</span>, <span class="st">&#39;dashed&#39;</span>)</span>
<span id="cb597-13"><a href="tables-and-graphs.html#cb597-13" aria-hidden="true" tabindex="-1"></a>ar_st_linetypes_label <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manual&quot;</span>)</span>
<span id="cb597-14"><a href="tables-and-graphs.html#cb597-14" aria-hidden="true" tabindex="-1"></a>fl_legend_linetype_symbol_size <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb597-15"><a href="tables-and-graphs.html#cb597-15" aria-hidden="true" tabindex="-1"></a>st_leg_linetype_lab <span class="ot">&lt;-</span> <span class="st">&quot;Transmission&quot;</span></span></code></pre></div>
<p>Fourth, manaully specify an x-axis.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="tables-and-graphs.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="co"># x labeling and axis control</span></span>
<span id="cb598-2"><a href="tables-and-graphs.html#cb598-2" aria-hidden="true" tabindex="-1"></a>ar_st_x_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;50 hp&#39;</span>, <span class="st">&#39;150 hp&#39;</span>, <span class="st">&#39;250 hp&#39;</span>, <span class="st">&#39;350 hp&#39;</span>)</span>
<span id="cb598-3"><a href="tables-and-graphs.html#cb598-3" aria-hidden="true" tabindex="-1"></a>ar_fl_x_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">150</span>, <span class="dv">250</span>, <span class="dv">350</span>)</span>
<span id="cb598-4"><a href="tables-and-graphs.html#cb598-4" aria-hidden="true" tabindex="-1"></a>ar_fl_x_limits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">360</span>)</span>
<span id="cb598-5"><a href="tables-and-graphs.html#cb598-5" aria-hidden="true" tabindex="-1"></a><span class="co"># y labeling and axis control</span></span>
<span id="cb598-6"><a href="tables-and-graphs.html#cb598-6" aria-hidden="true" tabindex="-1"></a>ar_st_y_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;15 QSEC&#39;</span>, <span class="st">&#39;18&#39;</span>, <span class="st">&#39;21&#39;</span>, <span class="st">&#39;24 QSEC&#39;</span>)</span>
<span id="cb598-7"><a href="tables-and-graphs.html#cb598-7" aria-hidden="true" tabindex="-1"></a>ar_fl_y_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">24</span>)</span>
<span id="cb598-8"><a href="tables-and-graphs.html#cb598-8" aria-hidden="true" tabindex="-1"></a>ar_fl_y_limits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">13.5</span>, <span class="fl">25.5</span>)</span></code></pre></div>
<p>Fifth, control graph strings.</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="tables-and-graphs.html#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb599-2"><a href="tables-and-graphs.html#cb599-2" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;How QSEC varies by Horse-power, by Engine and Transmission Types&#39;</span>)</span>
<span id="cb599-3"><a href="tables-and-graphs.html#cb599-3" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb599-4"><a href="tables-and-graphs.html#cb599-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/tabgraph/multiplot/htmlpdfr/fs_ggscatter_facet_wrap.html&#39;</span>)</span>
<span id="cb599-5"><a href="tables-and-graphs.html#cb599-5" aria-hidden="true" tabindex="-1"></a>st_caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb599-6"><a href="tables-and-graphs.html#cb599-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb599-7"><a href="tables-and-graphs.html#cb599-7" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;HP = Horse Power&#39;</span></span>
<span id="cb599-8"><a href="tables-and-graphs.html#cb599-8" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;QSEC = time for 1/4 Miles&#39;</span></span></code></pre></div>
<p>Sixth, combine graphical components.</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="tables-and-graphs.html#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add titles and labels</span></span>
<span id="cb600-2"><a href="tables-and-graphs.html#cb600-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb600-3"><a href="tables-and-graphs.html#cb600-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb600-4"><a href="tables-and-graphs.html#cb600-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption)</span>
<span id="cb600-5"><a href="tables-and-graphs.html#cb600-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-6"><a href="tables-and-graphs.html#cb600-6" aria-hidden="true" tabindex="-1"></a><span class="co"># x and y-axis ticks controls</span></span>
<span id="cb600-7"><a href="tables-and-graphs.html#cb600-7" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb600-8"><a href="tables-and-graphs.html#cb600-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> ar_st_x_labels,</span>
<span id="cb600-9"><a href="tables-and-graphs.html#cb600-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> ar_fl_x_breaks,</span>
<span id="cb600-10"><a href="tables-and-graphs.html#cb600-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> ar_fl_x_limits) <span class="sc">+</span></span>
<span id="cb600-11"><a href="tables-and-graphs.html#cb600-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> ar_st_y_labels,</span>
<span id="cb600-12"><a href="tables-and-graphs.html#cb600-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> ar_fl_y_breaks,</span>
<span id="cb600-13"><a href="tables-and-graphs.html#cb600-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> ar_fl_y_limits)</span>
<span id="cb600-14"><a href="tables-and-graphs.html#cb600-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-15"><a href="tables-and-graphs.html#cb600-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Color, shape and linetype controls</span></span>
<span id="cb600-16"><a href="tables-and-graphs.html#cb600-16" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb600-17"><a href="tables-and-graphs.html#cb600-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>ar_st_colors, <span class="at">labels=</span>ar_st_colors_label) <span class="sc">+</span></span>
<span id="cb600-18"><a href="tables-and-graphs.html#cb600-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values=</span>ar_it_shapes, <span class="at">labels=</span>ar_st_shapes_label) <span class="sc">+</span></span>
<span id="cb600-19"><a href="tables-and-graphs.html#cb600-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span>ar_st_linetypes, <span class="at">labels=</span>ar_st_linetypes_label)</span></code></pre></div>
<p>Seventh, replace default legends, and set figure font overall etc.</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="tables-and-graphs.html#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="co"># has legend theme</span></span>
<span id="cb601-2"><a href="tables-and-graphs.html#cb601-2" aria-hidden="true" tabindex="-1"></a>theme_custom <span class="ot">&lt;-</span> <span class="fu">theme</span>(</span>
<span id="cb601-3"><a href="tables-and-graphs.html#cb601-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb601-4"><a href="tables-and-graphs.html#cb601-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),</span>
<span id="cb601-5"><a href="tables-and-graphs.html#cb601-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb601-6"><a href="tables-and-graphs.html#cb601-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.35</span>, <span class="fl">0.80</span>),</span>
<span id="cb601-7"><a href="tables-and-graphs.html#cb601-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">&quot;line&quot;</span>),</span>
<span id="cb601-8"><a href="tables-and-graphs.html#cb601-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.background =</span></span>
<span id="cb601-9"><a href="tables-and-graphs.html#cb601-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linetype=</span><span class="st">&#39;solid&#39;</span>))</span>
<span id="cb601-10"><a href="tables-and-graphs.html#cb601-10" aria-hidden="true" tabindex="-1"></a><span class="co"># no legend theme (no y)</span></span>
<span id="cb601-11"><a href="tables-and-graphs.html#cb601-11" aria-hidden="true" tabindex="-1"></a>theme_custom_blank <span class="ot">&lt;-</span> <span class="fu">theme</span>(</span>
<span id="cb601-12"><a href="tables-and-graphs.html#cb601-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb601-13"><a href="tables-and-graphs.html#cb601-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb601-14"><a href="tables-and-graphs.html#cb601-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb601-15"><a href="tables-and-graphs.html#cb601-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb601-16"><a href="tables-and-graphs.html#cb601-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb601-17"><a href="tables-and-graphs.html#cb601-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>())</span></code></pre></div>
<p>Eighth, graph out.</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="tables-and-graphs.html#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace the default labels for each legend segment</span></span>
<span id="cb602-2"><a href="tables-and-graphs.html#cb602-2" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span> theme_custom</span>
<span id="cb602-3"><a href="tables-and-graphs.html#cb602-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb602-4"><a href="tables-and-graphs.html#cb602-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plt_mtcars_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-314-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="divide-facet-wrapped-plot-into-subplots" class="section level4" number="10.3.2.2">
<h4><span class="header-section-number">10.3.2.2</span> Divide Facet Wrapped Plot into Subplots</h4>
<p>Given the facet-wrapped plot just generated, now save alternative plot versions, where each subplot is saved by itself. Will simply use the code from above, but call inside lapply over different am categories.</p>
<p>Below generate a matrix with multiple data columns, then use apply over each row of the matrix and select different columns of values for each subplot generation.</p>
<p>First generate with legend versions, then without legend versions. These are versions that would be used to more freely compose graph together.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="tables-and-graphs.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_subplot_as_own_vsr <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) {</span>
<span id="cb603-2"><a href="tables-and-graphs.html#cb603-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-3"><a href="tables-and-graphs.html#cb603-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (it_subplot_as_own_vsr <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb603-4"><a href="tables-and-graphs.html#cb603-4" aria-hidden="true" tabindex="-1"></a>    theme_custom_use <span class="ot">&lt;-</span> theme_custom</span>
<span id="cb603-5"><a href="tables-and-graphs.html#cb603-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># st_file_suffix &lt;- &#39;_haslegend&#39;</span></span>
<span id="cb603-6"><a href="tables-and-graphs.html#cb603-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># it_width &lt;- 100</span></span>
<span id="cb603-7"><a href="tables-and-graphs.html#cb603-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (it_subplot_as_own_vsr <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb603-8"><a href="tables-and-graphs.html#cb603-8" aria-hidden="true" tabindex="-1"></a>    theme_custom_use <span class="ot">&lt;-</span> theme_custom_blank</span>
<span id="cb603-9"><a href="tables-and-graphs.html#cb603-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># st_file_suffix &lt;- &#39;_nolegend&#39;</span></span>
<span id="cb603-10"><a href="tables-and-graphs.html#cb603-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># it_width &lt;- 88</span></span>
<span id="cb603-11"><a href="tables-and-graphs.html#cb603-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb603-12"><a href="tables-and-graphs.html#cb603-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-13"><a href="tables-and-graphs.html#cb603-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unique vs as matrix</span></span>
<span id="cb603-14"><a href="tables-and-graphs.html#cb603-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ar_uniques &lt;-sort(unique(tb_mtcars$vs))</span></span>
<span id="cb603-15"><a href="tables-and-graphs.html#cb603-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mt_unique_vs &lt;- matrix(data=ar_uniques, nrow=length(ar_uniques), ncol=1)</span></span>
<span id="cb603-16"><a href="tables-and-graphs.html#cb603-16" aria-hidden="true" tabindex="-1"></a>  mt_unique_vs <span class="ot">&lt;-</span> tb_mtcars <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(vs) <span class="sc">%&gt;%</span></span>
<span id="cb603-17"><a href="tables-and-graphs.html#cb603-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mpg=</span><span class="fu">mean</span>(mpg)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb603-18"><a href="tables-and-graphs.html#cb603-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># apply over</span></span>
<span id="cb603-19"><a href="tables-and-graphs.html#cb603-19" aria-hidden="true" tabindex="-1"></a>  ls_plots <span class="ot">&lt;-</span> <span class="fu">apply</span>(mt_unique_vs, <span class="dv">1</span>, <span class="cf">function</span>(ar_vs_cate_row) {</span>
<span id="cb603-20"><a href="tables-and-graphs.html#cb603-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Graph main</span></span>
<span id="cb603-21"><a href="tables-and-graphs.html#cb603-21" aria-hidden="true" tabindex="-1"></a>    plt_mtcars_scatter <span class="ot">&lt;-</span></span>
<span id="cb603-22"><a href="tables-and-graphs.html#cb603-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(tb_mtcars <span class="sc">%&gt;%</span> <span class="fu">filter</span>(vs <span class="sc">==</span> ar_vs_cate_row[<span class="dv">1</span>]),</span>
<span id="cb603-23"><a href="tables-and-graphs.html#cb603-23" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>qsec,</span>
<span id="cb603-24"><a href="tables-and-graphs.html#cb603-24" aria-hidden="true" tabindex="-1"></a>                 <span class="at">colour=</span>am, <span class="at">shape=</span>am, <span class="at">linetype=</span>am)) <span class="sc">+</span></span>
<span id="cb603-25"><a href="tables-and-graphs.html#cb603-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span> <span class="co"># Lwd = line width</span></span>
<span id="cb603-26"><a href="tables-and-graphs.html#cb603-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="at">stroke =</span> <span class="dv">2</span>)</span>
<span id="cb603-27"><a href="tables-and-graphs.html#cb603-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-28"><a href="tables-and-graphs.html#cb603-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Add titles and labels</span></span>
<span id="cb603-29"><a href="tables-and-graphs.html#cb603-29" aria-hidden="true" tabindex="-1"></a>    plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb603-30"><a href="tables-and-graphs.html#cb603-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb603-31"><a href="tables-and-graphs.html#cb603-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption)</span>
<span id="cb603-32"><a href="tables-and-graphs.html#cb603-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-33"><a href="tables-and-graphs.html#cb603-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. x and y ticks</span></span>
<span id="cb603-34"><a href="tables-and-graphs.html#cb603-34" aria-hidden="true" tabindex="-1"></a>    plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb603-35"><a href="tables-and-graphs.html#cb603-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> ar_st_x_labels, <span class="at">breaks =</span> ar_fl_x_breaks, <span class="at">limits =</span> ar_fl_x_limits) <span class="sc">+</span></span>
<span id="cb603-36"><a href="tables-and-graphs.html#cb603-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> ar_st_y_labels, <span class="at">breaks =</span> ar_fl_y_breaks, <span class="at">limits =</span> ar_fl_y_limits)</span>
<span id="cb603-37"><a href="tables-and-graphs.html#cb603-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-38"><a href="tables-and-graphs.html#cb603-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. Color, shape and linetype controls</span></span>
<span id="cb603-39"><a href="tables-and-graphs.html#cb603-39" aria-hidden="true" tabindex="-1"></a>    plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span></span>
<span id="cb603-40"><a href="tables-and-graphs.html#cb603-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>ar_st_colors, <span class="at">labels=</span>ar_st_colors_label) <span class="sc">+</span></span>
<span id="cb603-41"><a href="tables-and-graphs.html#cb603-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_shape_manual</span>(<span class="at">values=</span>ar_it_shapes, <span class="at">labels=</span>ar_st_shapes_label) <span class="sc">+</span></span>
<span id="cb603-42"><a href="tables-and-graphs.html#cb603-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span>ar_st_linetypes, <span class="at">labels=</span>ar_st_linetypes_label)</span>
<span id="cb603-43"><a href="tables-and-graphs.html#cb603-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-44"><a href="tables-and-graphs.html#cb603-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5. replace the default labels for each legend segment</span></span>
<span id="cb603-45"><a href="tables-and-graphs.html#cb603-45" aria-hidden="true" tabindex="-1"></a>    plt_mtcars_scatter <span class="ot">&lt;-</span> plt_mtcars_scatter <span class="sc">+</span> theme_custom_use</span>
<span id="cb603-46"><a href="tables-and-graphs.html#cb603-46" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb603-47"><a href="tables-and-graphs.html#cb603-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># show</span></span>
<span id="cb603-48"><a href="tables-and-graphs.html#cb603-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ls_plots)</span>
<span id="cb603-49"><a href="tables-and-graphs.html#cb603-49" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [[1]]</code></pre>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-315-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>## 
## [[2]]</code></pre>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-315-2.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>## 
## [[1]]</code></pre>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-315-3.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>## 
## [[2]]</code></pre>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-315-4.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
<div id="write-and-read-plots" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Write and Read Plots</h2>

<div id="import-and-export-images" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Import and Export Images</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<p>Work with the R plot function.</p>
<div id="export-images-different-formats-with-plot" class="section level4" number="10.4.1.1">
<h4><span class="header-section-number">10.4.1.1</span> Export Images Different Formats with Plot()</h4>
<div id="generate-and-record-a-plot" class="section level5" number="10.4.1.1.1">
<h5><span class="header-section-number">10.4.1.1.1</span> Generate and Record A Plot</h5>
<p>Generate a graph and recordPlot() it. The generated graph does not have legends Yet. Crucially, there are no titles, legends, axis, labels in the figures. As we stack the figures together, do not add those. Only add at the end jointly for all figure elements together to control at one spot things.</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="tables-and-graphs.html#cb608-1" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-2"><a href="tables-and-graphs.html#cb608-2" aria-hidden="true" tabindex="-1"></a><span class="co"># First, Strings</span></span>
<span id="cb608-3"><a href="tables-and-graphs.html#cb608-3" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-4"><a href="tables-and-graphs.html#cb608-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb608-5"><a href="tables-and-graphs.html#cb608-5" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Scatter, Line and Curve Joint Ploting Example Using Base R</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb608-6"><a href="tables-and-graphs.html#cb608-6" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;plot() + curve():sin(x)*cos(x), sin(x)+tan(x)+cos(x)&#39;</span>)</span>
<span id="cb608-7"><a href="tables-and-graphs.html#cb608-7" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb608-8"><a href="tables-and-graphs.html#cb608-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/tabgraph/inout/htmlpdfr/fs_base_curve.html&#39;</span>)</span>
<span id="cb608-9"><a href="tables-and-graphs.html#cb608-9" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;x&#39;</span></span>
<span id="cb608-10"><a href="tables-and-graphs.html#cb608-10" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;f(x)&#39;</span></span>
<span id="cb608-11"><a href="tables-and-graphs.html#cb608-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-12"><a href="tables-and-graphs.html#cb608-12" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-13"><a href="tables-and-graphs.html#cb608-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Second, functions</span></span>
<span id="cb608-14"><a href="tables-and-graphs.html#cb608-14" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-15"><a href="tables-and-graphs.html#cb608-15" aria-hidden="true" tabindex="-1"></a>fc_sin_cos_diff <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sin</span>(x)<span class="sc">*</span><span class="fu">cos</span>(x)</span>
<span id="cb608-16"><a href="tables-and-graphs.html#cb608-16" aria-hidden="true" tabindex="-1"></a>st_line_3_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;sin(x)*cos(x)&#39;</span></span>
<span id="cb608-17"><a href="tables-and-graphs.html#cb608-17" aria-hidden="true" tabindex="-1"></a>fc_sin_cos_tan <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sin</span>(x) <span class="sc">+</span> <span class="fu">cos</span>(x) <span class="sc">+</span> <span class="fu">tan</span>(x)</span>
<span id="cb608-18"><a href="tables-and-graphs.html#cb608-18" aria-hidden="true" tabindex="-1"></a>st_line_4_y_legend <span class="ot">&lt;-</span> <span class="st">&#39;sin(x) + tan(x) + cos(x)&#39;</span></span>
<span id="cb608-19"><a href="tables-and-graphs.html#cb608-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-20"><a href="tables-and-graphs.html#cb608-20" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-21"><a href="tables-and-graphs.html#cb608-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Third, patterns</span></span>
<span id="cb608-22"><a href="tables-and-graphs.html#cb608-22" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-23"><a href="tables-and-graphs.html#cb608-23" aria-hidden="true" tabindex="-1"></a>st_line_3_black <span class="ot">&lt;-</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb608-24"><a href="tables-and-graphs.html#cb608-24" aria-hidden="true" tabindex="-1"></a>st_line_4_purple <span class="ot">&lt;-</span> <span class="st">&#39;orange&#39;</span></span>
<span id="cb608-25"><a href="tables-and-graphs.html#cb608-25" aria-hidden="true" tabindex="-1"></a><span class="co"># line type</span></span>
<span id="cb608-26"><a href="tables-and-graphs.html#cb608-26" aria-hidden="true" tabindex="-1"></a>st_line_3_lty <span class="ot">&lt;-</span> <span class="st">&#39;dotted&#39;</span></span>
<span id="cb608-27"><a href="tables-and-graphs.html#cb608-27" aria-hidden="true" tabindex="-1"></a>st_line_4_lty <span class="ot">&lt;-</span> <span class="st">&#39;dotdash&#39;</span></span>
<span id="cb608-28"><a href="tables-and-graphs.html#cb608-28" aria-hidden="true" tabindex="-1"></a><span class="co"># line width</span></span>
<span id="cb608-29"><a href="tables-and-graphs.html#cb608-29" aria-hidden="true" tabindex="-1"></a>st_line_3_lwd <span class="ot">&lt;-</span> <span class="fl">2.5</span></span>
<span id="cb608-30"><a href="tables-and-graphs.html#cb608-30" aria-hidden="true" tabindex="-1"></a>st_line_4_lwd <span class="ot">&lt;-</span> <span class="fl">3.5</span></span>
<span id="cb608-31"><a href="tables-and-graphs.html#cb608-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-32"><a href="tables-and-graphs.html#cb608-32" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-33"><a href="tables-and-graphs.html#cb608-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Fourth: Share xlim and ylim</span></span>
<span id="cb608-34"><a href="tables-and-graphs.html#cb608-34" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-35"><a href="tables-and-graphs.html#cb608-35" aria-hidden="true" tabindex="-1"></a>ar_xlim <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb608-36"><a href="tables-and-graphs.html#cb608-36" aria-hidden="true" tabindex="-1"></a>ar_ylim <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">3.5</span>, <span class="fl">3.5</span>)</span>
<span id="cb608-37"><a href="tables-and-graphs.html#cb608-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-38"><a href="tables-and-graphs.html#cb608-38" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-39"><a href="tables-and-graphs.html#cb608-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Fifth: Even margins</span></span>
<span id="cb608-40"><a href="tables-and-graphs.html#cb608-40" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-41"><a href="tables-and-graphs.html#cb608-41" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span><span class="cn">FALSE</span>)</span>
<span id="cb608-42"><a href="tables-and-graphs.html#cb608-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-43"><a href="tables-and-graphs.html#cb608-43" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-44"><a href="tables-and-graphs.html#cb608-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Sixth, the four objects and do not print yet:</span></span>
<span id="cb608-45"><a href="tables-and-graphs.html#cb608-45" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb608-46"><a href="tables-and-graphs.html#cb608-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Curve 3</span></span>
<span id="cb608-47"><a href="tables-and-graphs.html#cb608-47" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb608-48"><a href="tables-and-graphs.html#cb608-48" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(fc_sin_cos_diff,</span>
<span id="cb608-49"><a href="tables-and-graphs.html#cb608-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> st_line_3_black,</span>
<span id="cb608-50"><a href="tables-and-graphs.html#cb608-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">lwd =</span> st_line_3_lwd, <span class="at">lty =</span> st_line_3_lty,</span>
<span id="cb608-51"><a href="tables-and-graphs.html#cb608-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> ar_xlim[<span class="dv">1</span>], <span class="at">to =</span> ar_xlim[<span class="dv">2</span>], <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb608-52"><a href="tables-and-graphs.html#cb608-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span>
<span id="cb608-53"><a href="tables-and-graphs.html#cb608-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph Curve 4</span></span>
<span id="cb608-54"><a href="tables-and-graphs.html#cb608-54" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb608-55"><a href="tables-and-graphs.html#cb608-55" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(fc_sin_cos_tan,</span>
<span id="cb608-56"><a href="tables-and-graphs.html#cb608-56" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> st_line_4_purple,</span>
<span id="cb608-57"><a href="tables-and-graphs.html#cb608-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">lwd =</span> st_line_4_lwd, <span class="at">lty =</span> st_line_4_lty,</span>
<span id="cb608-58"><a href="tables-and-graphs.html#cb608-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> ar_xlim[<span class="dv">1</span>], <span class="at">to =</span> ar_xlim[<span class="dv">2</span>], <span class="at">ylim =</span> ar_ylim,</span>
<span id="cb608-59"><a href="tables-and-graphs.html#cb608-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&#39;&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="at">yaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">xaxt=</span><span class="st">&#39;n&#39;</span>, <span class="at">ann=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="tables-and-graphs.html#cb609-1" aria-hidden="true" tabindex="-1"></a>pl_curves_save <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span></code></pre></div>
</div>
<div id="generate-large-font-and-small-font-versions-of-plot" class="section level5" number="10.4.1.1.2">
<h5><span class="header-section-number">10.4.1.1.2</span> Generate Large Font and Small Font Versions of PLot</h5>
<p>Generate larger font version:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="tables-and-graphs.html#cb610-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replay</span></span>
<span id="cb610-2"><a href="tables-and-graphs.html#cb610-2" aria-hidden="true" tabindex="-1"></a>pl_curves_save</span>
<span id="cb610-3"><a href="tables-and-graphs.html#cb610-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb610-4"><a href="tables-and-graphs.html#cb610-4" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb610-5"><a href="tables-and-graphs.html#cb610-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Seventh, Set Title and Legend and Plot Jointly</span></span>
<span id="cb610-6"><a href="tables-and-graphs.html#cb610-6" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb610-7"><a href="tables-and-graphs.html#cb610-7" aria-hidden="true" tabindex="-1"></a><span class="co"># CEX sizing Contorl Titling and Legend Sizes</span></span>
<span id="cb610-8"><a href="tables-and-graphs.html#cb610-8" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_reg <span class="ot">=</span> <span class="fl">0.75</span></span>
<span id="cb610-9"><a href="tables-and-graphs.html#cb610-9" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_leg <span class="ot">=</span> <span class="fl">0.75</span></span>
<span id="cb610-10"><a href="tables-and-graphs.html#cb610-10" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_small <span class="ot">=</span> <span class="fl">0.65</span></span>
<span id="cb610-11"><a href="tables-and-graphs.html#cb610-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb610-12"><a href="tables-and-graphs.html#cb610-12" aria-hidden="true" tabindex="-1"></a><span class="co"># R Legend</span></span>
<span id="cb610-13"><a href="tables-and-graphs.html#cb610-13" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> st_title, <span class="at">sub =</span> st_subtitle, <span class="at">xlab =</span> st_x_label, <span class="at">ylab =</span> st_y_label,</span>
<span id="cb610-14"><a href="tables-and-graphs.html#cb610-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.lab=</span>fl_ces_fig_reg,</span>
<span id="cb610-15"><a href="tables-and-graphs.html#cb610-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.main=</span>fl_ces_fig_reg,</span>
<span id="cb610-16"><a href="tables-and-graphs.html#cb610-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.sub=</span>fl_ces_fig_small)</span>
<span id="cb610-17"><a href="tables-and-graphs.html#cb610-17" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb610-18"><a href="tables-and-graphs.html#cb610-18" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb610-19"><a href="tables-and-graphs.html#cb610-19" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb610-20"><a href="tables-and-graphs.html#cb610-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb610-21"><a href="tables-and-graphs.html#cb610-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Legend sizing CEX</span></span>
<span id="cb610-22"><a href="tables-and-graphs.html#cb610-22" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb610-23"><a href="tables-and-graphs.html#cb610-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg=</span><span class="st">&quot;transparent&quot;</span>,</span>
<span id="cb610-24"><a href="tables-and-graphs.html#cb610-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb610-25"><a href="tables-and-graphs.html#cb610-25" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(st_line_3_y_legend, st_line_4_y_legend),</span>
<span id="cb610-26"><a href="tables-and-graphs.html#cb610-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(st_line_3_black, st_line_4_purple),</span>
<span id="cb610-27"><a href="tables-and-graphs.html#cb610-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb610-28"><a href="tables-and-graphs.html#cb610-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> fl_ces_fig_leg,</span>
<span id="cb610-29"><a href="tables-and-graphs.html#cb610-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(st_line_3_lty, st_line_4_lty),</span>
<span id="cb610-30"><a href="tables-and-graphs.html#cb610-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(st_line_3_lwd,st_line_4_lwd),</span>
<span id="cb610-31"><a href="tables-and-graphs.html#cb610-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">y.intersp=</span><span class="dv">2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="tables-and-graphs.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="co"># record final plot</span></span>
<span id="cb611-2"><a href="tables-and-graphs.html#cb611-2" aria-hidden="true" tabindex="-1"></a>pl_curves_large <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb611-3"><a href="tables-and-graphs.html#cb611-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>Generate smaller font version:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="tables-and-graphs.html#cb612-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replay</span></span>
<span id="cb612-2"><a href="tables-and-graphs.html#cb612-2" aria-hidden="true" tabindex="-1"></a>pl_curves_save</span>
<span id="cb612-3"><a href="tables-and-graphs.html#cb612-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-4"><a href="tables-and-graphs.html#cb612-4" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb612-5"><a href="tables-and-graphs.html#cb612-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Seventh, Set Title and Legend and Plot Jointly</span></span>
<span id="cb612-6"><a href="tables-and-graphs.html#cb612-6" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################</span></span>
<span id="cb612-7"><a href="tables-and-graphs.html#cb612-7" aria-hidden="true" tabindex="-1"></a><span class="co"># CEX sizing Contorl Titling and Legend Sizes</span></span>
<span id="cb612-8"><a href="tables-and-graphs.html#cb612-8" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_reg <span class="ot">=</span> <span class="fl">0.45</span></span>
<span id="cb612-9"><a href="tables-and-graphs.html#cb612-9" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_leg <span class="ot">=</span> <span class="fl">0.45</span></span>
<span id="cb612-10"><a href="tables-and-graphs.html#cb612-10" aria-hidden="true" tabindex="-1"></a>fl_ces_fig_small <span class="ot">=</span> <span class="fl">0.25</span></span>
<span id="cb612-11"><a href="tables-and-graphs.html#cb612-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-12"><a href="tables-and-graphs.html#cb612-12" aria-hidden="true" tabindex="-1"></a><span class="co"># R Legend</span></span>
<span id="cb612-13"><a href="tables-and-graphs.html#cb612-13" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> st_title, <span class="at">sub =</span> st_subtitle, <span class="at">xlab =</span> st_x_label, <span class="at">ylab =</span> st_y_label,</span>
<span id="cb612-14"><a href="tables-and-graphs.html#cb612-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.lab=</span>fl_ces_fig_reg,</span>
<span id="cb612-15"><a href="tables-and-graphs.html#cb612-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.main=</span>fl_ces_fig_reg,</span>
<span id="cb612-16"><a href="tables-and-graphs.html#cb612-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.sub=</span>fl_ces_fig_small)</span>
<span id="cb612-17"><a href="tables-and-graphs.html#cb612-17" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb612-18"><a href="tables-and-graphs.html#cb612-18" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">cex.axis=</span>fl_ces_fig_reg)</span>
<span id="cb612-19"><a href="tables-and-graphs.html#cb612-19" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb612-20"><a href="tables-and-graphs.html#cb612-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-21"><a href="tables-and-graphs.html#cb612-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Legend sizing CEX</span></span>
<span id="cb612-22"><a href="tables-and-graphs.html#cb612-22" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb612-23"><a href="tables-and-graphs.html#cb612-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg=</span><span class="st">&quot;transparent&quot;</span>,</span>
<span id="cb612-24"><a href="tables-and-graphs.html#cb612-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb612-25"><a href="tables-and-graphs.html#cb612-25" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(st_line_3_y_legend, st_line_4_y_legend),</span>
<span id="cb612-26"><a href="tables-and-graphs.html#cb612-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(st_line_3_black, st_line_4_purple),</span>
<span id="cb612-27"><a href="tables-and-graphs.html#cb612-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb612-28"><a href="tables-and-graphs.html#cb612-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> fl_ces_fig_leg,</span>
<span id="cb612-29"><a href="tables-and-graphs.html#cb612-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(st_line_3_lty, st_line_4_lty),</span>
<span id="cb612-30"><a href="tables-and-graphs.html#cb612-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(st_line_3_lwd,st_line_4_lwd),</span>
<span id="cb612-31"><a href="tables-and-graphs.html#cb612-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">y.intersp=</span><span class="dv">2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="tables-and-graphs.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># record final plot</span></span>
<span id="cb613-2"><a href="tables-and-graphs.html#cb613-2" aria-hidden="true" tabindex="-1"></a>pl_curves_small <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb613-3"><a href="tables-and-graphs.html#cb613-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="save-plot-with-varying-resolutions-and-heights" class="section level5" number="10.4.1.1.3">
<h5><span class="header-section-number">10.4.1.1.3</span> Save Plot with Varying Resolutions and Heights</h5>
<p>Export recorded plot.</p>
<p>A4 paper is 8.3 x 11.7, with 1 inch margins, the remaining area is 6.3 x 9.7. For figures that should take half of the page, the height should be 4.8 inch. One third of a page should be 3.2 inch. 6.3 inch is 160mm and 3 inch is 76 mm. In the example below, use</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="tables-and-graphs.html#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store both in within folder directory and root image directory:</span></span>
<span id="cb614-2"><a href="tables-and-graphs.html#cb614-2" aria-hidden="true" tabindex="-1"></a><span class="co"># C:\Users\fan\R4Econ\tabgraph\inout\_img</span></span>
<span id="cb614-3"><a href="tables-and-graphs.html#cb614-3" aria-hidden="true" tabindex="-1"></a><span class="co"># C:\Users\fan\R4Econ\_img</span></span>
<span id="cb614-4"><a href="tables-and-graphs.html#cb614-4" aria-hidden="true" tabindex="-1"></a><span class="co"># need to store in both because bookdown and indi pdf path differ.</span></span>
<span id="cb614-5"><a href="tables-and-graphs.html#cb614-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap in try because will not work underbookdown, but images already created</span></span>
<span id="cb614-6"><a href="tables-and-graphs.html#cb614-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-7"><a href="tables-and-graphs.html#cb614-7" aria-hidden="true" tabindex="-1"></a>ls_spt_root <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;..//..//&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb614-8"><a href="tables-and-graphs.html#cb614-8" aria-hidden="true" tabindex="-1"></a>spt_prefix <span class="ot">&lt;-</span> <span class="st">&#39;_img/fs_img_io_2curve&#39;</span></span>
<span id="cb614-9"><a href="tables-and-graphs.html#cb614-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-10"><a href="tables-and-graphs.html#cb614-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (spt_root <span class="cf">in</span> ls_spt_root) {</span>
<span id="cb614-11"><a href="tables-and-graphs.html#cb614-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Changing pointsize will not change font sizes inside, just rescale</span></span>
<span id="cb614-12"><a href="tables-and-graphs.html#cb614-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PNG 72</span></span>
<span id="cb614-13"><a href="tables-and-graphs.html#cb614-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">png</span>(<span class="fu">paste0</span>(spt_root, spt_prefix, <span class="st">&quot;_w135h76_res72.png&quot;</span>),</span>
<span id="cb614-14"><a href="tables-and-graphs.html#cb614-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">135</span> , <span class="at">height =</span> <span class="dv">76</span>, <span class="at">units=</span><span class="st">&#39;mm&#39;</span>, <span class="at">res =</span> <span class="dv">72</span>, <span class="at">pointsize=</span><span class="dv">7</span>))</span>
<span id="cb614-15"><a href="tables-and-graphs.html#cb614-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pl_curves_large)</span>
<span id="cb614-16"><a href="tables-and-graphs.html#cb614-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb614-17"><a href="tables-and-graphs.html#cb614-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PNG 300</span></span>
<span id="cb614-18"><a href="tables-and-graphs.html#cb614-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">png</span>(<span class="fu">paste0</span>(spt_root, spt_prefix, <span class="st">&quot;_w135h76_res300.png&quot;</span>),</span>
<span id="cb614-19"><a href="tables-and-graphs.html#cb614-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">135</span>, <span class="at">height =</span> <span class="dv">76</span>, <span class="at">units=</span><span class="st">&#39;mm&#39;</span>, <span class="at">res =</span> <span class="dv">300</span>, <span class="at">pointsize=</span><span class="dv">7</span>))</span>
<span id="cb614-20"><a href="tables-and-graphs.html#cb614-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pl_curves_large)</span>
<span id="cb614-21"><a href="tables-and-graphs.html#cb614-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb614-22"><a href="tables-and-graphs.html#cb614-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PNG 300, SMALL, POINT SIZE LOWER</span></span>
<span id="cb614-23"><a href="tables-and-graphs.html#cb614-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">png</span>(<span class="fu">paste0</span>(spt_root, spt_prefix, <span class="st">&quot;_w80h48_res300.png&quot;</span>),</span>
<span id="cb614-24"><a href="tables-and-graphs.html#cb614-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">80</span>, <span class="at">height =</span> <span class="dv">48</span>, <span class="at">units=</span><span class="st">&#39;mm&#39;</span>, <span class="at">res =</span> <span class="dv">300</span>, <span class="at">pointsize=</span><span class="dv">7</span>))</span>
<span id="cb614-25"><a href="tables-and-graphs.html#cb614-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pl_curves_small)</span>
<span id="cb614-26"><a href="tables-and-graphs.html#cb614-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb614-27"><a href="tables-and-graphs.html#cb614-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PNG 300</span></span>
<span id="cb614-28"><a href="tables-and-graphs.html#cb614-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">png</span>(<span class="fu">paste0</span>(spt_root, spt_prefix, <span class="st">&quot;_w160h100_res300.png&quot;</span>),</span>
<span id="cb614-29"><a href="tables-and-graphs.html#cb614-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">160</span>, <span class="at">height =</span> <span class="dv">100</span>, <span class="at">units=</span><span class="st">&#39;mm&#39;</span>, <span class="at">res =</span> <span class="dv">300</span>))</span>
<span id="cb614-30"><a href="tables-and-graphs.html#cb614-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pl_curves_large)</span>
<span id="cb614-31"><a href="tables-and-graphs.html#cb614-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb614-32"><a href="tables-and-graphs.html#cb614-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-33"><a href="tables-and-graphs.html#cb614-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># EPS</span></span>
<span id="cb614-34"><a href="tables-and-graphs.html#cb614-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setEPS</span>()</span>
<span id="cb614-35"><a href="tables-and-graphs.html#cb614-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">postscript</span>(<span class="fu">paste0</span>(spt_root, spt_prefix, <span class="st">&quot;_fs_2curve.eps&quot;</span>)))</span>
<span id="cb614-36"><a href="tables-and-graphs.html#cb614-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pl_curves_large)</span>
<span id="cb614-37"><a href="tables-and-graphs.html#cb614-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dev.off</span>()</span>
<span id="cb614-38"><a href="tables-and-graphs.html#cb614-38" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Error in png(paste0(spt_root, spt_prefix, &quot;_w135h76_res72.png&quot;), width = 135,  : 
##   unable to start png() device
## Error in png(paste0(spt_root, spt_prefix, &quot;_w135h76_res300.png&quot;), width = 135,  : 
##   unable to start png() device
## Error in png(paste0(spt_root, spt_prefix, &quot;_w80h48_res300.png&quot;), width = 80,  : 
##   unable to start png() device
## Error in png(paste0(spt_root, spt_prefix, &quot;_w160h100_res300.png&quot;), width = 160,  : 
##   unable to start png() device
## Error in postscript(paste0(spt_root, spt_prefix, &quot;_fs_2curve.eps&quot;)) : 
##   cannot open file &#39;..//..//_img/fs_img_io_2curve_fs_2curve.eps&#39;</code></pre>
</div>
<div id="low-and-high-resolution-figure" class="section level5" number="10.4.1.1.4">
<h5><span class="header-section-number">10.4.1.1.4</span> Low and High Resolution Figure</h5>
<p>The standard resolution often produces very low quality images. Resolution should be increased. See figure comparison.</p>
<center>
<img src="_img/fs_img_io_2curve_w135h76_res72.png" height="304mm" width="540mm" style="float:center">
</center>
<br />
<center>
<img src="_img/fs_img_io_2curve_w135h76_res300.png" height="304mm" width="540mm" style="float:center">
</center>
</div>
<div id="smaller-and-larger-figures" class="section level5" number="10.4.1.1.5">
<h5><span class="header-section-number">10.4.1.1.5</span> Smaller and Larger Figures</h5>
<p>Smaller and larger figures with different font size comparison. Note that earlier, we generated the figure without legends, labels, etc first, recorded the figure. Then we associated the same underlying figure with differently sized titles, legends, axis, labels.</p>
<center>
<img src="_img/fs_img_io_2curve_w80h48_res300.png" height="192mm" width="320mm" style="float:center">
</center>
<br />
<center>
<img src="_img/fs_img_io_2curve_w160h100_res300.png" height="400mm" width="640mm" style="float:center">
</center>

</div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="statistics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="get-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
