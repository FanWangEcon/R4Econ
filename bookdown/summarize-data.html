<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Summarize Data | Panel Data and Optimization with R</title>
  <meta name="description" content="Base R store image core, add legends/titles/labels/axis of different sizes to save figures of different sizes." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Summarize Data | Panel Data and Optimization with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Base R store image core, add legends/titles/labels/axis of different sizes to save figures of different sizes." />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Summarize Data | Panel Data and Optimization with R" />
  
  <meta name="twitter:description" content="Base R store image core, add legends/titles/labels/axis of different sizes to save figures of different sizes." />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2020-05-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="array-matrix-dataframe.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Panel Data and Optimization with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a>
<ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#multiple-dimensional-list"><i class="fa fa-check"></i><b>1.1.1</b> Multiple Dimensional List</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#variables-in-dataframes"><i class="fa fa-check"></i><b>1.4</b> Variables in Dataframes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-dataframe"><i class="fa fa-check"></i><b>1.4.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="1.4.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#factor-label-and-combine"><i class="fa fa-check"></i><b>1.4.2</b> Factor Label and Combine</a></li>
<li class="chapter" data-level="1.4.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#drawly-random-rows"><i class="fa fa-check"></i><b>1.4.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="1.4.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>1.4.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="1.4.5" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-values"><i class="fa fa-check"></i><b>1.4.5</b> String Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>2</b> Summarize Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="summarize-data.html"><a href="summarize-data.html#counting-observation"><i class="fa fa-check"></i><b>2.1</b> Counting Observation</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-data.html"><a href="summarize-data.html#uncount"><i class="fa fa-check"></i><b>2.1.1</b> Uncount</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="summarize-data.html"><a href="summarize-data.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.2</b> Sorting, Indexing, Slicing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="summarize-data.html"><a href="summarize-data.html#sorting"><i class="fa fa-check"></i><b>2.2.1</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="summarize-data.html"><a href="summarize-data.html#group-statistics"><i class="fa fa-check"></i><b>2.3</b> Group Statistics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="summarize-data.html"><a href="summarize-data.html#groups-statistics"><i class="fa fa-check"></i><b>2.3.1</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.3.2" data-path="summarize-data.html"><a href="summarize-data.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.3.2</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.3.3" data-path="summarize-data.html"><a href="summarize-data.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.3.3</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="summarize-data.html"><a href="summarize-data.html#distributional-statistics"><i class="fa fa-check"></i><b>2.4</b> Distributional Statistics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="summarize-data.html"><a href="summarize-data.html#histogram"><i class="fa fa-check"></i><b>2.4.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summarize-data.html"><a href="summarize-data.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.5</b> Summarize Multiple Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="summarize-data.html"><a href="summarize-data.html#generate-replace-variables"><i class="fa fa-check"></i><b>2.5.1</b> Generate Replace Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mxq-to-mxp-rows"><i class="fa fa-check"></i><b>3.2.1</b> MxQ to MxP Rows</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mx1-to-mxq-rows"><i class="fa fa-check"></i><b>3.2.2</b> Mx1 to MxQ Rows</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-sapply-mutate"><i class="fa fa-check"></i><b>3.3.1</b> Apply, Sapply, Mutate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>4</b> Panel</a>
<ul>
<li class="chapter" data-level="4.1" data-path="panel.html"><a href="panel.html#generate-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate and Join</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="panel.html"><a href="panel.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="panel.html"><a href="panel.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="panel.html"><a href="panel.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="panel.html"><a href="panel.html#long-to-wide"><i class="fa fa-check"></i><b>4.2.1</b> Long to Wide</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.1</b> OLS and IV</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.1.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.1.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.2.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html"><i class="fa fa-check"></i><b>6</b> Nonlinear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1</b> Bisection</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#bisection-1"><i class="fa fa-check"></i><b>7.1.1</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html"><i class="fa fa-check"></i><b>8</b> Mathmatics and Statistics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#distributions"><i class="fa fa-check"></i><b>8.1</b> Distributions</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>8.1.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#analytical-solutions"><i class="fa fa-check"></i><b>8.2</b> Analytical Solutions</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.2.1</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#inequality-models"><i class="fa fa-check"></i><b>8.3</b> Inequality Models</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.3.1</b> Gini Discrete Sample</a></li>
<li class="chapter" data-level="8.3.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#atkinson-family-utility"><i class="fa fa-check"></i><b>8.3.2</b> Atkinson Family Utility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>9</b> Tables and Graphs</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>9.1</b> R Base Plots</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>9.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>9.2</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>9.2.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 List</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Array</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Matrix</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Variables in Dataframes</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-data-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Data links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 Counting Observation</span> links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.2</b> <span>Section 2.2 Sorting, Indexing, Slicing</span> links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-group-statisticsgroup-statistics-links"><i class="fa fa-check"></i><b>A.2.3</b> <span>Section 2.3 Group Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.4</b> <span>Section 2.4 Distributional Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.5</b> <span>Section 2.5 Summarize Multiple Variables</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Dataframe Mutate</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Dataframe Do Anything</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Apply and pmap</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#panel-links"><i class="fa fa-check"></i><b>A.4</b> Panel links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-and-joingenerate-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Generate and Join</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Wide and Long</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 OLS and IV</span> links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.2</b> <span>Section 5.2 Decomposition</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-regression-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear Regression links</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> <span>Section 6.1 Logit Regression</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-bisectionbisection-links"><i class="fa fa-check"></i><b>A.7.1</b> <span>Section 7.1 Bisection</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathmatics-and-statistics-links"><i class="fa fa-check"></i><b>A.8</b> Mathmatics and Statistics links</a>
<ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.8.1</b> <span>Section 8.1 Distributions</span> links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-analytical-solutionsanalytical-solutions-links"><i class="fa fa-check"></i><b>A.8.2</b> <span>Section 8.2 Analytical Solutions</span> links</a></li>
<li class="chapter" data-level="A.8.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.3-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.3</b> <span>Section 8.3 Inequality Models</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.9</b> Tables and Graphs links</a>
<ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.9.1</b> <span>Section 9.1 R Base Plots</span> links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.9.2</b> <span>Section 9.2 Write and Read Plots</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Panel Data and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summarize-data" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Summarize Data</h1>

<div id="counting-observation" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Counting Observation</h2>

<div id="uncount" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Uncount</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<p>In some panel, there are <span class="math inline">\(N\)</span> individuals, each observed for <span class="math inline">\(Y_i\)</span> years. Given a dataset with two variables, the individual index, and the <span class="math inline">\(Y_i\)</span> variable, expand the dataframe so that there is a row for each individual index’s each unique year in the survey.</p>
<p><em>Search</em>:</p>
<ul>
<li>r duplicate row by variable</li>
</ul>
<p><em>Links</em>:</p>
<ul>
<li>see: <a href="https://stackoverflow.com/questions/52498169/r-create-duplicate-rows-based-on-a-variable-dplyr-preferred">Create duplicate rows based on a variable</a></li>
</ul>
<p><em>Algorithm</em>:</p>
<ol style="list-style-type: decimal">
<li>generate testing frame, the individual attribute dataset with invariant information over panel</li>
<li>uncount, duplicate rows by years in survey</li>
<li>group and generate sorted index</li>
<li>add indiviual specific stat year to index</li>
</ol>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="summarize-data.html#cb163-1"></a><span class="co"># 1. Array of Years in the Survey</span></span>
<span id="cb163-2"><a href="summarize-data.html#cb163-2"></a>ar_years_in_survey &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">2</span>,<span class="dv">5</span>)</span>
<span id="cb163-3"><a href="summarize-data.html#cb163-3"></a>ar_start_yaer &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb163-4"><a href="summarize-data.html#cb163-4"></a>ar_end_year &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">10</span>,<span class="dv">2</span>,<span class="dv">5</span>)</span>
<span id="cb163-5"><a href="summarize-data.html#cb163-5"></a>mt_combine &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_years_in_survey, ar_start_yaer, ar_end_year)</span>
<span id="cb163-6"><a href="summarize-data.html#cb163-6"></a></span>
<span id="cb163-7"><a href="summarize-data.html#cb163-7"></a><span class="co"># This is the individual attribute dataset, attributes that are invariant acrosss years</span></span>
<span id="cb163-8"><a href="summarize-data.html#cb163-8"></a>tb_indi_attributes &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb163-9"><a href="summarize-data.html#cb163-9"></a></span>
<span id="cb163-10"><a href="summarize-data.html#cb163-10"></a><span class="co"># 2. Sort and generate variable equal to sorted index</span></span>
<span id="cb163-11"><a href="summarize-data.html#cb163-11"></a>tb_indi_panel &lt;-<span class="st"> </span>tb_indi_attributes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">uncount</span>(ar_years_in_survey)</span>
<span id="cb163-12"><a href="summarize-data.html#cb163-12"></a></span>
<span id="cb163-13"><a href="summarize-data.html#cb163-13"></a><span class="co"># 3. Panel now construct exactly which year in survey, note that all needed is sort index</span></span>
<span id="cb163-14"><a href="summarize-data.html#cb163-14"></a><span class="co"># Note sorting not needed, all rows identical now</span></span>
<span id="cb163-15"><a href="summarize-data.html#cb163-15"></a>tb_indi_panel &lt;-<span class="st"> </span>tb_indi_panel <span class="op">%&gt;%</span></span>
<span id="cb163-16"><a href="summarize-data.html#cb163-16"></a><span class="st">                    </span><span class="kw">group_by</span>(ID) <span class="op">%&gt;%</span></span>
<span id="cb163-17"><a href="summarize-data.html#cb163-17"></a><span class="st">                    </span><span class="kw">mutate</span>(<span class="dt">yr_in_survey =</span> <span class="kw">row_number</span>())</span>
<span id="cb163-18"><a href="summarize-data.html#cb163-18"></a></span>
<span id="cb163-19"><a href="summarize-data.html#cb163-19"></a>tb_indi_panel &lt;-<span class="st"> </span>tb_indi_panel <span class="op">%&gt;%</span></span>
<span id="cb163-20"><a href="summarize-data.html#cb163-20"></a><span class="st">                    </span><span class="kw">mutate</span>(<span class="dt">calendar_year =</span> yr_in_survey <span class="op">+</span><span class="st"> </span>ar_start_yaer <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb163-21"><a href="summarize-data.html#cb163-21"></a></span>
<span id="cb163-22"><a href="summarize-data.html#cb163-22"></a><span class="co"># Show results Head 10</span></span>
<span id="cb163-23"><a href="summarize-data.html#cb163-23"></a>tb_indi_panel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb163-24"><a href="summarize-data.html#cb163-24"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb163-25"><a href="summarize-data.html#cb163-25"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ar_start_yaer
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ar_end_year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
yr_in_survey
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
calendar_year
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="sorting-indexing-slicing" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Sorting, Indexing, Slicing</h2>

<div id="sorting" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Sorting</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-sorted-index-within-group-with-repeating-values" class="section level4" number="2.2.1.1">
<h4><span class="header-section-number">2.2.1.1</span> Generate Sorted Index within Group with Repeating Values</h4>
<p>There is a variable, sort by this variable, then generate index from 1 to N representing sorted values of this index. If there are repeating values, still assign index, different index each value.</p>
<ul>
<li>r generate index sort</li>
<li>dplyr mutate equals index</li>
</ul>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="summarize-data.html#cb164-1"></a><span class="co"># Sort and generate variable equal to sorted index</span></span>
<span id="cb164-2"><a href="summarize-data.html#cb164-2"></a>df_iris &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Sepal.Length) <span class="op">%&gt;%</span></span>
<span id="cb164-3"><a href="summarize-data.html#cb164-3"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Index =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></span>
<span id="cb164-4"><a href="summarize-data.html#cb164-4"></a><span class="st">              </span><span class="kw">select</span>(Sepal.Length, Sepal.Len.Index, <span class="kw">everything</span>())</span>
<span id="cb164-5"><a href="summarize-data.html#cb164-5"></a></span>
<span id="cb164-6"><a href="summarize-data.html#cb164-6"></a><span class="co"># Show results Head 10</span></span>
<span id="cb164-7"><a href="summarize-data.html#cb164-7"></a>df_iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb164-8"><a href="summarize-data.html#cb164-8"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb164-9"><a href="summarize-data.html#cb164-9"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Index
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="populate-value-from-lowest-index-to-all-other-rows" class="section level4" number="2.2.1.2">
<h4><span class="header-section-number">2.2.1.2</span> Populate Value from Lowest Index to All other Rows</h4>
<p>We would like to calculate for example the ratio of each individual’s highest to the the person with the lowest height in a dataset. We first need to generated sorted index from lowest to highest, and then populate the lowest height to all rows, and then divide.</p>
<p><em>Search Terms</em>:</p>
<ul>
<li>r spread value to all rows from one row</li>
<li>r other rows equal to the value of one row</li>
<li>Conditional assignment of one variable to the value of one of two other variables</li>
<li>dplyr mutate conditional</li>
<li>dplyr value from one row to all rows</li>
<li>dplyr mutate equal to value in another cell</li>
</ul>
<p><em>Links</em>:</p>
<ul>
<li>see: dplyr <a href="https://dplyr.tidyverse.org/reference/ranking.html">rank</a></li>
<li>see: dplyr <a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></li>
</ul>
<div id="short-method-mutate-and-min" class="section level5" number="2.2.1.2.1">
<h5><span class="header-section-number">2.2.1.2.1</span> Short Method: mutate and min</h5>
<p>We just want the lowest value to be in its own column, so that we can compute various statistics using the lowest value variable and the original variable.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="summarize-data.html#cb165-1"></a><span class="co"># 1. Sort</span></span>
<span id="cb165-2"><a href="summarize-data.html#cb165-2"></a>df_iris_m1 &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Lowest.all =</span> <span class="kw">min</span>(Sepal.Length)) <span class="op">%&gt;%</span></span>
<span id="cb165-3"><a href="summarize-data.html#cb165-3"></a><span class="st">                </span><span class="kw">select</span>(Sepal.Length, Sepal.Len.Lowest.all, <span class="kw">everything</span>())</span>
<span id="cb165-4"><a href="summarize-data.html#cb165-4"></a></span>
<span id="cb165-5"><a href="summarize-data.html#cb165-5"></a></span>
<span id="cb165-6"><a href="summarize-data.html#cb165-6"></a><span class="co"># Show results Head 10</span></span>
<span id="cb165-7"><a href="summarize-data.html#cb165-7"></a>df_iris_m1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb165-8"><a href="summarize-data.html#cb165-8"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb165-9"><a href="summarize-data.html#cb165-9"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Lowest.all
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="long-method-row_number-and-case_when" class="section level5" number="2.2.1.2.2">
<h5><span class="header-section-number">2.2.1.2.2</span> Long Method: row_number and case_when</h5>
<p>This is the long method, using row_number, and case_when. The benefit of this method is that it generates several intermediate variables that might be useful. And the key final step is to set a new variable (A=<em>Sepal.Len.Lowest.all</em>) equal to another variable’s (B=<em>Sepal.Length</em>’s) value at the index that satisfies condition based a third variable (C=<em>Sepal.Len.Index</em>).</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="summarize-data.html#cb166-1"></a><span class="co"># 1. Sort</span></span>
<span id="cb166-2"><a href="summarize-data.html#cb166-2"></a><span class="co"># 2. generate index</span></span>
<span id="cb166-3"><a href="summarize-data.html#cb166-3"></a><span class="co"># 3. value at lowest index (case_when)</span></span>
<span id="cb166-4"><a href="summarize-data.html#cb166-4"></a><span class="co"># 4. spread value from lowest index to other rows</span></span>
<span id="cb166-5"><a href="summarize-data.html#cb166-5"></a><span class="co"># Note step 4 does not require step 3</span></span>
<span id="cb166-6"><a href="summarize-data.html#cb166-6"></a>df_iris_m2 &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Sepal.Length) <span class="op">%&gt;%</span></span>
<span id="cb166-7"><a href="summarize-data.html#cb166-7"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Index =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></span>
<span id="cb166-8"><a href="summarize-data.html#cb166-8"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Lowest.one =</span></span>
<span id="cb166-9"><a href="summarize-data.html#cb166-9"></a>                       <span class="kw">case_when</span>(<span class="kw">row_number</span>()<span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span>Sepal.Length)) <span class="op">%&gt;%</span></span>
<span id="cb166-10"><a href="summarize-data.html#cb166-10"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Lowest.all =</span></span>
<span id="cb166-11"><a href="summarize-data.html#cb166-11"></a>                       Sepal.Length[Sepal.Len.Index<span class="op">==</span><span class="dv">1</span>]) <span class="op">%&gt;%</span></span>
<span id="cb166-12"><a href="summarize-data.html#cb166-12"></a><span class="st">              </span><span class="kw">select</span>(Sepal.Length, Sepal.Len.Index,</span>
<span id="cb166-13"><a href="summarize-data.html#cb166-13"></a>                     Sepal.Len.Lowest.one, Sepal.Len.Lowest.all)</span>
<span id="cb166-14"><a href="summarize-data.html#cb166-14"></a></span>
<span id="cb166-15"><a href="summarize-data.html#cb166-15"></a></span>
<span id="cb166-16"><a href="summarize-data.html#cb166-16"></a><span class="co"># Show results Head 10</span></span>
<span id="cb166-17"><a href="summarize-data.html#cb166-17"></a>df_iris_m2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb166-18"><a href="summarize-data.html#cb166-18"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb166-19"><a href="summarize-data.html#cb166-19"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Index
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Lowest.one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Lowest.all
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="generate-sorted-index-based-on-deviations" class="section level4" number="2.2.1.3">
<h4><span class="header-section-number">2.2.1.3</span> Generate Sorted Index based on Deviations</h4>
<p>Generate Positive and Negative Index based on Ordered Deviation from some Number.</p>
<p>There is a variable that is continuous, substract a number from this variable, and generate index based on deviations. Think of the index as generating intervals indicating where the value lies. 0th index indicates the largest value in sequence that is smaller than or equal to number <span class="math inline">\(x\)</span>, 1st index indicates the smallest value in sequence that is larger than number <span class="math inline">\(x\)</span>.</p>
<p>The solution below is a little bit convoluated and long, there is likely a much quicker way. The process below shows various intermediary outputs that help arrive at deviation index <em>Sepal.Len.Devi.Index</em> from initial sorted index <em>Sepal.Len.Index</em>.</p>
<p><em>search</em>:</p>
<ul>
<li>dplyr arrange ignore na</li>
<li>dplyr index deviation from order number sequence</li>
<li>dplyr index below above</li>
<li>dplyr index order below above value</li>
</ul>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="summarize-data.html#cb167-1"></a><span class="co"># 1. Sort and generate variable equal to sorted index</span></span>
<span id="cb167-2"><a href="summarize-data.html#cb167-2"></a><span class="co"># 2. Plus or minus deviations from some value</span></span>
<span id="cb167-3"><a href="summarize-data.html#cb167-3"></a><span class="co"># 3. Find the zero, which means, the number closests to zero including zero from the negative side</span></span>
<span id="cb167-4"><a href="summarize-data.html#cb167-4"></a><span class="co"># 4. Find the index at the highest zero and below deviation point</span></span>
<span id="cb167-5"><a href="summarize-data.html#cb167-5"></a><span class="co"># 5. Difference of zero index and original sorted index</span></span>
<span id="cb167-6"><a href="summarize-data.html#cb167-6"></a>sc_val_x &lt;-<span class="st"> </span><span class="fl">4.65</span></span>
<span id="cb167-7"><a href="summarize-data.html#cb167-7"></a>df_iris_deviate &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Sepal.Length) <span class="op">%&gt;%</span></span>
<span id="cb167-8"><a href="summarize-data.html#cb167-8"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Index =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></span>
<span id="cb167-9"><a href="summarize-data.html#cb167-9"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Devi =</span> (Sepal.Length <span class="op">-</span><span class="st"> </span>sc_val_x)) <span class="op">%&gt;%</span></span>
<span id="cb167-10"><a href="summarize-data.html#cb167-10"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Devi.Neg =</span></span>
<span id="cb167-11"><a href="summarize-data.html#cb167-11"></a>                       <span class="kw">case_when</span>(Sepal.Len.Devi <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span>(<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span>(Sepal.Len.Devi))) <span class="op">%&gt;%</span></span>
<span id="cb167-12"><a href="summarize-data.html#cb167-12"></a><span class="st">              </span><span class="kw">arrange</span>((Sepal.Len.Devi.Neg), <span class="kw">desc</span>(Sepal.Len.Index)) <span class="op">%&gt;%</span></span>
<span id="cb167-13"><a href="summarize-data.html#cb167-13"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Index.Zero =</span></span>
<span id="cb167-14"><a href="summarize-data.html#cb167-14"></a>                       <span class="kw">case_when</span>(<span class="kw">row_number</span>() <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span>Sepal.Len.Index)) <span class="op">%&gt;%</span></span>
<span id="cb167-15"><a href="summarize-data.html#cb167-15"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">Sepal.Len.Devi.Index =</span></span>
<span id="cb167-16"><a href="summarize-data.html#cb167-16"></a>                       Sepal.Len.Index <span class="op">-</span><span class="st"> </span>Sepal.Len.Index.Zero[<span class="kw">row_number</span>() <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]) <span class="op">%&gt;%</span></span>
<span id="cb167-17"><a href="summarize-data.html#cb167-17"></a><span class="st">              </span><span class="kw">arrange</span>(Sepal.Len.Index) <span class="op">%&gt;%</span></span>
<span id="cb167-18"><a href="summarize-data.html#cb167-18"></a><span class="st">              </span><span class="kw">select</span>(Sepal.Length, Sepal.Len.Index, Sepal.Len.Devi,</span>
<span id="cb167-19"><a href="summarize-data.html#cb167-19"></a>                     Sepal.Len.Devi.Neg, Sepal.Len.Index.Zero, Sepal.Len.Devi.Index)</span>
<span id="cb167-20"><a href="summarize-data.html#cb167-20"></a></span>
<span id="cb167-21"><a href="summarize-data.html#cb167-21"></a></span>
<span id="cb167-22"><a href="summarize-data.html#cb167-22"></a><span class="co"># Show results Head 10</span></span>
<span id="cb167-23"><a href="summarize-data.html#cb167-23"></a>df_iris_deviate <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>) <span class="op">%&gt;%</span></span>
<span id="cb167-24"><a href="summarize-data.html#cb167-24"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb167-25"><a href="summarize-data.html#cb167-25"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Index
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Devi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Devi.Neg
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Index.Zero
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Len.Devi.Index
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.35
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-8
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-7
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-6
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-5
</td>
</tr>
<tr>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-4
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
11
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="group-statistics" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Group Statistics</h2>

<div id="groups-statistics" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Groups Statistics</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="aggrgate-groups-only-unique-group-and-count" class="section level4" number="2.3.1.1">
<h4><span class="header-section-number">2.3.1.1</span> Aggrgate Groups only Unique Group and Count</h4>
<p>There are two variables that are numeric, we want to find all the unique groups of these two variables in a dataset and count how many times each unique group occurs</p>
<ul>
<li>r unique occurrence of numeric groups</li>
<li>How to add count of unique values by group to R data.frame</li>
</ul>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="summarize-data.html#cb168-1"></a><span class="co"># Numeric value combinations unique Groups</span></span>
<span id="cb168-2"><a href="summarize-data.html#cb168-2"></a>vars.group &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;hgt0&#39;</span>, <span class="st">&#39;wgt0&#39;</span>)</span>
<span id="cb168-3"><a href="summarize-data.html#cb168-3"></a></span>
<span id="cb168-4"><a href="summarize-data.html#cb168-4"></a><span class="co"># dataset subsetting</span></span>
<span id="cb168-5"><a href="summarize-data.html#cb168-5"></a>df_use &lt;-<span class="st"> </span>df_hgt_wgt <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">!!!</span><span class="kw">syms</span>(<span class="kw">c</span>(vars.group))) <span class="op">%&gt;%</span></span>
<span id="cb168-6"><a href="summarize-data.html#cb168-6"></a><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">hgt0 =</span> <span class="kw">round</span>(hgt0<span class="op">/</span><span class="dv">5</span>)<span class="op">*</span><span class="dv">5</span>, <span class="dt">wgt0 =</span> <span class="kw">round</span>(wgt0<span class="op">/</span><span class="dv">2000</span>)<span class="op">*</span><span class="dv">2000</span>) <span class="op">%&gt;%</span></span>
<span id="cb168-7"><a href="summarize-data.html#cb168-7"></a><span class="st">            </span><span class="kw">drop_na</span>()</span>
<span id="cb168-8"><a href="summarize-data.html#cb168-8"></a></span>
<span id="cb168-9"><a href="summarize-data.html#cb168-9"></a><span class="co"># Group, count and generate means for each numeric variables</span></span>
<span id="cb168-10"><a href="summarize-data.html#cb168-10"></a><span class="co"># mutate_at(vars.group, funs(as.factor(.))) %&gt;%</span></span>
<span id="cb168-11"><a href="summarize-data.html#cb168-11"></a>df.group.count &lt;-<span class="st"> </span>df_use <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb168-12"><a href="summarize-data.html#cb168-12"></a><span class="st">                    </span><span class="kw">arrange</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb168-13"><a href="summarize-data.html#cb168-13"></a><span class="st">                    </span><span class="kw">summarise</span>(<span class="dt">n_obs_group=</span><span class="kw">n</span>())</span>
<span id="cb168-14"><a href="summarize-data.html#cb168-14"></a></span>
<span id="cb168-15"><a href="summarize-data.html#cb168-15"></a><span class="co"># Show results Head 10</span></span>
<span id="cb168-16"><a href="summarize-data.html#cb168-16"></a>df.group.count <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
wgt0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
n_obs_group
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
122
</td>
</tr>
<tr>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
4586
</td>
</tr>
<tr>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
470
</td>
</tr>
<tr>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
9691
</td>
</tr>
<tr>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
13106
</td>
</tr>
<tr>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
126
</td>
</tr>
<tr>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
1900
</td>
</tr>
<tr>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
6000
</td>
<td style="text-align:right;">
18
</td>
</tr>
</tbody>
</table>
</div>
<div id="aggrgate-groups-only-unique-group-show-up-with-means" class="section level4" number="2.3.1.2">
<h4><span class="header-section-number">2.3.1.2</span> Aggrgate Groups only Unique Group Show up With Means</h4>
<p>Several variables that are grouping identifiers. Several variables that are values which mean be unique for each group members. For example, a Panel of income for N households over T years with also household education information that is invariant over time. Want to generate a dataset where the unit of observation are households, rather than household years. Take average of all numeric variables that are household and year specific.</p>
<p>A complicating factor potentially is that the number of observations differ within group, for example, income might be observed for all years for some households but not for other households.</p>
<ul>
<li>r dplyr aggregate group average</li>
<li>Aggregating and analyzing data with dplyr</li>
<li>column can’t be modified because it is a grouping variable</li>
<li>see also: <a href="https://datacarpentry.org/dc_zurich/R-ecology/04-dplyr.html">Aggregating and analyzing data with dplyr</a></li>
</ul>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="summarize-data.html#cb169-1"></a><span class="co"># In the df_hgt_wgt from R4Econ, there is a country id, village id,</span></span>
<span id="cb169-2"><a href="summarize-data.html#cb169-2"></a><span class="co"># and individual id, and various other statistics</span></span>
<span id="cb169-3"><a href="summarize-data.html#cb169-3"></a>vars.group &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S.country&#39;</span>, <span class="st">&#39;vil.id&#39;</span>, <span class="st">&#39;indi.id&#39;</span>)</span>
<span id="cb169-4"><a href="summarize-data.html#cb169-4"></a>vars.values &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;hgt&#39;</span>, <span class="st">&#39;momEdu&#39;</span>)</span>
<span id="cb169-5"><a href="summarize-data.html#cb169-5"></a></span>
<span id="cb169-6"><a href="summarize-data.html#cb169-6"></a><span class="co"># dataset subsetting</span></span>
<span id="cb169-7"><a href="summarize-data.html#cb169-7"></a>df_use &lt;-<span class="st"> </span>df_hgt_wgt <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">!!!</span><span class="kw">syms</span>(<span class="kw">c</span>(vars.group, vars.values)))</span>
<span id="cb169-8"><a href="summarize-data.html#cb169-8"></a></span>
<span id="cb169-9"><a href="summarize-data.html#cb169-9"></a><span class="co"># Group, count and generate means for each numeric variables</span></span>
<span id="cb169-10"><a href="summarize-data.html#cb169-10"></a>df.group &lt;-<span class="st"> </span>df_use <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb169-11"><a href="summarize-data.html#cb169-11"></a><span class="st">            </span><span class="kw">arrange</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb169-12"><a href="summarize-data.html#cb169-12"></a><span class="st">            </span><span class="kw">summarise_if</span>(is.numeric,</span>
<span id="cb169-13"><a href="summarize-data.html#cb169-13"></a>                         <span class="kw">funs</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb169-14"><a href="summarize-data.html#cb169-14"></a>                              <span class="dt">sd =</span> <span class="kw">sd</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb169-15"><a href="summarize-data.html#cb169-15"></a>                              <span class="dt">n =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(.)<span class="op">==</span><span class="dv">0</span>)))</span>
<span id="cb169-16"><a href="summarize-data.html#cb169-16"></a></span>
<span id="cb169-17"><a href="summarize-data.html#cb169-17"></a><span class="co"># Show results Head 10</span></span>
<span id="cb169-18"><a href="summarize-data.html#cb169-18"></a>df.group <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb169-19"><a href="summarize-data.html#cb169-19"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb169-20"><a href="summarize-data.html#cb169-20"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
S.country
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
vil.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
indi.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_mean
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_mean
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_sd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_sd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_n
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
61.80000
</td>
<td style="text-align:right;">
5.3
</td>
<td style="text-align:right;">
9.520504
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
68.86154
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
9.058931
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
80.45882
</td>
<td style="text-align:right;">
9.4
</td>
<td style="text-align:right;">
29.894231
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
88.10000
</td>
<td style="text-align:right;">
13.9
</td>
<td style="text-align:right;">
35.533166
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
97.70556
</td>
<td style="text-align:right;">
11.3
</td>
<td style="text-align:right;">
41.090366
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
87.49444
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
35.586439
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
90.79412
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
38.722385
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
68.45385
</td>
<td style="text-align:right;">
13.5
</td>
<td style="text-align:right;">
10.011961
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
86.21111
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
35.126057
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
87.67222
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
36.508127
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
18
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="summarize-data.html#cb170-1"></a><span class="co"># Show results Head 10</span></span>
<span id="cb170-2"><a href="summarize-data.html#cb170-2"></a>df.group <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb170-3"><a href="summarize-data.html#cb170-3"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></span>
<span id="cb170-4"><a href="summarize-data.html#cb170-4"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
S.country
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
vil.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
indi.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_mean
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_mean
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_sd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_sd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hgt_n
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momEdu_n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2014
</td>
<td style="text-align:right;">
66.97000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
8.967974
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2015
</td>
<td style="text-align:right;">
71.71818
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
11.399984
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2016
</td>
<td style="text-align:right;">
66.33000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
9.490352
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2017
</td>
<td style="text-align:right;">
76.40769
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
14.827871
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:right;">
74.55385
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
12.707846
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:right;">
70.47500
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
11.797390
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2020
</td>
<td style="text-align:right;">
60.28750
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
7.060036
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2021
</td>
<td style="text-align:right;">
84.96000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
15.446193
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2022
</td>
<td style="text-align:right;">
79.38667
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
15.824749
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2023
</td>
<td style="text-align:right;">
66.50000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
8.613113
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="one-variable-group-summary" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> One Variable Group Summary</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<p>There is a categorical variable (based on one or the interaction of multiple variables), there is a continuous variable, obtain statistics for the continuous variable conditional on the categorical variable, but also unconditionally.</p>
<p>Store results in a matrix, but also flatten results wide to row with appropriate keys/variable-names for all group statistics.</p>
<p>Pick which statistics to be included in final wide row</p>
<div id="build-program" class="section level4" number="2.3.2.1">
<h4><span class="header-section-number">2.3.2.1</span> Build Program</h4>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="summarize-data.html#cb171-1"></a><span class="co"># Single Variable Group Statistics (also generate overall statistics)</span></span>
<span id="cb171-2"><a href="summarize-data.html#cb171-2"></a>ff_summ_by_group_summ_one &lt;-<span class="st"> </span><span class="cf">function</span>(</span>
<span id="cb171-3"><a href="summarize-data.html#cb171-3"></a>  df, vars.group, var.numeric, <span class="dt">str.stats.group =</span> <span class="st">&#39;main&#39;</span>,</span>
<span id="cb171-4"><a href="summarize-data.html#cb171-4"></a>  <span class="dt">str.stats.specify =</span> <span class="ot">NULL</span>, <span class="dt">boo.overall.stats =</span> <span class="ot">TRUE</span>){</span>
<span id="cb171-5"><a href="summarize-data.html#cb171-5"></a>  </span>
<span id="cb171-6"><a href="summarize-data.html#cb171-6"></a>  <span class="co"># List of statistics</span></span>
<span id="cb171-7"><a href="summarize-data.html#cb171-7"></a>  <span class="co"># https://rdrr.io/cran/dplyr/man/summarise.html</span></span>
<span id="cb171-8"><a href="summarize-data.html#cb171-8"></a>  strs.center &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>, <span class="st">&#39;median&#39;</span>)</span>
<span id="cb171-9"><a href="summarize-data.html#cb171-9"></a>  strs.spread &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;sd&#39;</span>, <span class="st">&#39;IQR&#39;</span>, <span class="st">&#39;mad&#39;</span>)</span>
<span id="cb171-10"><a href="summarize-data.html#cb171-10"></a>  strs.range &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;min&#39;</span>, <span class="st">&#39;max&#39;</span>)</span>
<span id="cb171-11"><a href="summarize-data.html#cb171-11"></a>  strs.pos &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;last&#39;</span>)</span>
<span id="cb171-12"><a href="summarize-data.html#cb171-12"></a>  strs.count &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;n_distinct&#39;</span>)</span>
<span id="cb171-13"><a href="summarize-data.html#cb171-13"></a>  </span>
<span id="cb171-14"><a href="summarize-data.html#cb171-14"></a>  <span class="co"># Grouping of Statistics</span></span>
<span id="cb171-15"><a href="summarize-data.html#cb171-15"></a>  <span class="cf">if</span> (<span class="kw">missing</span>(str.stats.specify)) {</span>
<span id="cb171-16"><a href="summarize-data.html#cb171-16"></a>    <span class="cf">if</span> (str.stats.group <span class="op">==</span><span class="st"> &#39;main&#39;</span>) {</span>
<span id="cb171-17"><a href="summarize-data.html#cb171-17"></a>      strs.all &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>, <span class="st">&#39;min&#39;</span>, <span class="st">&#39;max&#39;</span>, <span class="st">&#39;sd&#39;</span>)</span>
<span id="cb171-18"><a href="summarize-data.html#cb171-18"></a>    }</span>
<span id="cb171-19"><a href="summarize-data.html#cb171-19"></a>    <span class="cf">if</span> (str.stats.group <span class="op">==</span><span class="st"> &#39;all&#39;</span>) {</span>
<span id="cb171-20"><a href="summarize-data.html#cb171-20"></a>      strs.all &lt;-<span class="st"> </span><span class="kw">c</span>(strs.center, strs.spread, strs.range, strs.pos, strs.count)</span>
<span id="cb171-21"><a href="summarize-data.html#cb171-21"></a>    }</span>
<span id="cb171-22"><a href="summarize-data.html#cb171-22"></a>  } <span class="cf">else</span> {</span>
<span id="cb171-23"><a href="summarize-data.html#cb171-23"></a>    strs.all &lt;-<span class="st"> </span>str.stats.specify</span>
<span id="cb171-24"><a href="summarize-data.html#cb171-24"></a>  }</span>
<span id="cb171-25"><a href="summarize-data.html#cb171-25"></a>  </span>
<span id="cb171-26"><a href="summarize-data.html#cb171-26"></a>  <span class="co"># Start Transform</span></span>
<span id="cb171-27"><a href="summarize-data.html#cb171-27"></a>  df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-28"><a href="summarize-data.html#cb171-28"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="op">!!</span>(var.numeric) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">as.numeric</span>(<span class="op">!!</span><span class="kw">sym</span>(var.numeric)))</span>
<span id="cb171-29"><a href="summarize-data.html#cb171-29"></a>  </span>
<span id="cb171-30"><a href="summarize-data.html#cb171-30"></a>  <span class="co"># Overall Statistics</span></span>
<span id="cb171-31"><a href="summarize-data.html#cb171-31"></a>  <span class="cf">if</span> (boo.overall.stats) {</span>
<span id="cb171-32"><a href="summarize-data.html#cb171-32"></a>    df.overall.stats &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-33"><a href="summarize-data.html#cb171-33"></a><span class="st">      </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(var.numeric), <span class="kw">funs</span>(<span class="op">!!!</span>strs.all))</span>
<span id="cb171-34"><a href="summarize-data.html#cb171-34"></a>    <span class="cf">if</span> (<span class="kw">length</span>(strs.all) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb171-35"><a href="summarize-data.html#cb171-35"></a>      <span class="co"># give it a name, otherwise if only one stat, name of stat not saved</span></span>
<span id="cb171-36"><a href="summarize-data.html#cb171-36"></a>      df.overall.stats &lt;-<span class="st"> </span>df.overall.stats <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-37"><a href="summarize-data.html#cb171-37"></a><span class="st">        </span><span class="kw">rename</span>(<span class="op">!!</span><span class="dt">strs.all :=</span> <span class="op">!!</span><span class="kw">sym</span>(var.numeric))</span>
<span id="cb171-38"><a href="summarize-data.html#cb171-38"></a>    }</span>
<span id="cb171-39"><a href="summarize-data.html#cb171-39"></a>    <span class="kw">names</span>(df.overall.stats) &lt;-<span class="st"> </span></span>
<span id="cb171-40"><a href="summarize-data.html#cb171-40"></a><span class="st">      </span><span class="kw">paste0</span>(var.numeric, <span class="st">&#39;.&#39;</span>, <span class="kw">names</span>(df.overall.stats))</span>
<span id="cb171-41"><a href="summarize-data.html#cb171-41"></a>  }</span>
<span id="cb171-42"><a href="summarize-data.html#cb171-42"></a>  </span>
<span id="cb171-43"><a href="summarize-data.html#cb171-43"></a>  <span class="co"># Group Sort</span></span>
<span id="cb171-44"><a href="summarize-data.html#cb171-44"></a>  df.select &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb171-45"><a href="summarize-data.html#cb171-45"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb171-46"><a href="summarize-data.html#cb171-46"></a><span class="st">    </span><span class="kw">arrange</span>(<span class="op">!!!</span><span class="kw">syms</span>(<span class="kw">c</span>(vars.group, var.numeric)))</span>
<span id="cb171-47"><a href="summarize-data.html#cb171-47"></a>  </span>
<span id="cb171-48"><a href="summarize-data.html#cb171-48"></a>  <span class="co"># Table of Statistics</span></span>
<span id="cb171-49"><a href="summarize-data.html#cb171-49"></a>  df.table.grp.stats &lt;-<span class="st"> </span>df.select <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-50"><a href="summarize-data.html#cb171-50"></a><span class="st">    </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(var.numeric), <span class="kw">funs</span>(<span class="op">!!!</span>strs.all))</span>
<span id="cb171-51"><a href="summarize-data.html#cb171-51"></a>  </span>
<span id="cb171-52"><a href="summarize-data.html#cb171-52"></a>  <span class="co"># Add Stat Name</span></span>
<span id="cb171-53"><a href="summarize-data.html#cb171-53"></a>  <span class="cf">if</span> (<span class="kw">length</span>(strs.all) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb171-54"><a href="summarize-data.html#cb171-54"></a>    <span class="co"># give it a name, otherwise if only one stat, name of stat not saved</span></span>
<span id="cb171-55"><a href="summarize-data.html#cb171-55"></a>    df.table.grp.stats &lt;-<span class="st"> </span>df.table.grp.stats <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-56"><a href="summarize-data.html#cb171-56"></a><span class="st">      </span><span class="kw">rename</span>(<span class="op">!!</span><span class="dt">strs.all :=</span> <span class="op">!!</span><span class="kw">sym</span>(var.numeric))</span>
<span id="cb171-57"><a href="summarize-data.html#cb171-57"></a>  }</span>
<span id="cb171-58"><a href="summarize-data.html#cb171-58"></a>  </span>
<span id="cb171-59"><a href="summarize-data.html#cb171-59"></a>  </span>
<span id="cb171-60"><a href="summarize-data.html#cb171-60"></a>  <span class="co"># Row of Statistics</span></span>
<span id="cb171-61"><a href="summarize-data.html#cb171-61"></a>  str.vars.group.combine &lt;-<span class="st"> </span><span class="kw">paste0</span>(vars.group, <span class="dt">collapse=</span><span class="st">&#39;_&#39;</span>)</span>
<span id="cb171-62"><a href="summarize-data.html#cb171-62"></a>  <span class="cf">if</span> (<span class="kw">length</span>(vars.group) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb171-63"><a href="summarize-data.html#cb171-63"></a>    df.row.grp.stats &lt;-<span class="st"> </span>df.table.grp.stats <span class="op">%&gt;%</span></span>
<span id="cb171-64"><a href="summarize-data.html#cb171-64"></a><span class="st">      </span><span class="kw">mutate</span>(<span class="op">!!</span>(str.vars.group.combine) <span class="op">:</span><span class="er">=</span><span class="st"> </span></span>
<span id="cb171-65"><a href="summarize-data.html#cb171-65"></a><span class="st">               </span><span class="kw">paste0</span>(var.numeric, <span class="st">&#39;.&#39;</span>,</span>
<span id="cb171-66"><a href="summarize-data.html#cb171-66"></a>                      vars.group, <span class="st">&#39;.g&#39;</span>,</span>
<span id="cb171-67"><a href="summarize-data.html#cb171-67"></a>                      (<span class="op">!!!</span><span class="kw">syms</span>(vars.group)))) <span class="op">%&gt;%</span></span>
<span id="cb171-68"><a href="summarize-data.html#cb171-68"></a><span class="st">      </span><span class="kw">gather</span>(variable, value, <span class="op">-</span><span class="kw">one_of</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb171-69"><a href="summarize-data.html#cb171-69"></a><span class="st">      </span><span class="kw">unite</span>(str.vars.group.combine, <span class="kw">c</span>(str.vars.group.combine, <span class="st">&#39;variable&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb171-70"><a href="summarize-data.html#cb171-70"></a><span class="st">      </span><span class="kw">spread</span>(str.vars.group.combine, value)</span>
<span id="cb171-71"><a href="summarize-data.html#cb171-71"></a>  } <span class="cf">else</span> {</span>
<span id="cb171-72"><a href="summarize-data.html#cb171-72"></a>    df.row.grp.stats &lt;-<span class="st"> </span>df.table.grp.stats <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb171-73"><a href="summarize-data.html#cb171-73"></a><span class="st">      </span><span class="kw">mutate</span>(<span class="dt">vars.groups.combine :=</span> </span>
<span id="cb171-74"><a href="summarize-data.html#cb171-74"></a>               <span class="kw">paste0</span>(<span class="kw">paste0</span>(vars.group, <span class="dt">collapse=</span><span class="st">&#39;.&#39;</span>)),</span>
<span id="cb171-75"><a href="summarize-data.html#cb171-75"></a>             <span class="op">!!</span>(str.vars.group.combine) <span class="op">:</span><span class="er">=</span><span class="st"> </span></span>
<span id="cb171-76"><a href="summarize-data.html#cb171-76"></a><span class="st">               </span><span class="kw">paste0</span>(<span class="kw">interaction</span>(<span class="op">!!!</span>(<span class="kw">syms</span>(vars.group))))) <span class="op">%&gt;%</span></span>
<span id="cb171-77"><a href="summarize-data.html#cb171-77"></a><span class="st">      </span><span class="kw">mutate</span>(<span class="op">!!</span>(str.vars.group.combine) <span class="op">:</span><span class="er">=</span><span class="st"> </span></span>
<span id="cb171-78"><a href="summarize-data.html#cb171-78"></a><span class="st">               </span><span class="kw">paste0</span>(var.numeric, <span class="st">&#39;.&#39;</span>, vars.groups.combine, <span class="st">&#39;.&#39;</span>,</span>
<span id="cb171-79"><a href="summarize-data.html#cb171-79"></a>                      (<span class="op">!!</span><span class="kw">sym</span>(str.vars.group.combine)))) <span class="op">%&gt;%</span></span>
<span id="cb171-80"><a href="summarize-data.html#cb171-80"></a><span class="st">      </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb171-81"><a href="summarize-data.html#cb171-81"></a><span class="st">      </span><span class="kw">select</span>(<span class="op">-</span>vars.groups.combine, <span class="op">-</span><span class="kw">one_of</span>(vars.group)) <span class="op">%&gt;%</span></span>
<span id="cb171-82"><a href="summarize-data.html#cb171-82"></a><span class="st">      </span><span class="kw">gather</span>(variable, value, <span class="op">-</span><span class="kw">one_of</span>(str.vars.group.combine)) <span class="op">%&gt;%</span></span>
<span id="cb171-83"><a href="summarize-data.html#cb171-83"></a><span class="st">      </span><span class="kw">unite</span>(str.vars.group.combine, <span class="kw">c</span>(str.vars.group.combine, <span class="st">&#39;variable&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb171-84"><a href="summarize-data.html#cb171-84"></a><span class="st">      </span><span class="kw">spread</span>(str.vars.group.combine, value)</span>
<span id="cb171-85"><a href="summarize-data.html#cb171-85"></a>  }</span>
<span id="cb171-86"><a href="summarize-data.html#cb171-86"></a>  </span>
<span id="cb171-87"><a href="summarize-data.html#cb171-87"></a>  <span class="co"># Clean up name strings</span></span>
<span id="cb171-88"><a href="summarize-data.html#cb171-88"></a>  <span class="kw">names</span>(df.table.grp.stats) &lt;-<span class="st"> </span></span>
<span id="cb171-89"><a href="summarize-data.html#cb171-89"></a><span class="st">    </span><span class="kw">gsub</span>(<span class="dt">x =</span> <span class="kw">names</span>(df.table.grp.stats),<span class="dt">pattern =</span> <span class="st">&quot;_&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb171-90"><a href="summarize-data.html#cb171-90"></a>  <span class="kw">names</span>(df.row.grp.stats) &lt;-<span class="st"> </span></span>
<span id="cb171-91"><a href="summarize-data.html#cb171-91"></a><span class="st">    </span><span class="kw">gsub</span>(<span class="dt">x =</span> <span class="kw">names</span>(df.row.grp.stats),<span class="dt">pattern =</span> <span class="st">&quot;_&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb171-92"><a href="summarize-data.html#cb171-92"></a>  </span>
<span id="cb171-93"><a href="summarize-data.html#cb171-93"></a>  <span class="co"># Return</span></span>
<span id="cb171-94"><a href="summarize-data.html#cb171-94"></a>  list.return &lt;-<span class="st"> </span></span>
<span id="cb171-95"><a href="summarize-data.html#cb171-95"></a><span class="st">    </span><span class="kw">list</span>(<span class="dt">df_table_grp_stats =</span> df.table.grp.stats, </span>
<span id="cb171-96"><a href="summarize-data.html#cb171-96"></a>         <span class="dt">df_row_grp_stats =</span> df.row.grp.stats)</span>
<span id="cb171-97"><a href="summarize-data.html#cb171-97"></a>  </span>
<span id="cb171-98"><a href="summarize-data.html#cb171-98"></a>  <span class="co"># Overall Statistics, without grouping</span></span>
<span id="cb171-99"><a href="summarize-data.html#cb171-99"></a>  <span class="cf">if</span> (boo.overall.stats) {</span>
<span id="cb171-100"><a href="summarize-data.html#cb171-100"></a>    df.row.stats.all &lt;-<span class="st"> </span><span class="kw">c</span>(df.row.grp.stats, df.overall.stats)</span>
<span id="cb171-101"><a href="summarize-data.html#cb171-101"></a>    list.return &lt;-<span class="st"> </span><span class="kw">append</span>(list.return, </span>
<span id="cb171-102"><a href="summarize-data.html#cb171-102"></a>                          <span class="kw">list</span>(<span class="dt">df_overall_stats =</span> df.overall.stats,</span>
<span id="cb171-103"><a href="summarize-data.html#cb171-103"></a>                               <span class="dt">df_row_stats_all =</span> df.row.stats.all))</span>
<span id="cb171-104"><a href="summarize-data.html#cb171-104"></a>  }</span>
<span id="cb171-105"><a href="summarize-data.html#cb171-105"></a>  </span>
<span id="cb171-106"><a href="summarize-data.html#cb171-106"></a>  <span class="co"># Return</span></span>
<span id="cb171-107"><a href="summarize-data.html#cb171-107"></a>  <span class="kw">return</span>(list.return)</span>
<span id="cb171-108"><a href="summarize-data.html#cb171-108"></a>  </span>
<span id="cb171-109"><a href="summarize-data.html#cb171-109"></a>}</span></code></pre></div>
</div>
<div id="test" class="section level4" number="2.3.2.2">
<h4><span class="header-section-number">2.3.2.2</span> Test</h4>
<p>Load data and test</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="summarize-data.html#cb172-1"></a><span class="co"># Library</span></span>
<span id="cb172-2"><a href="summarize-data.html#cb172-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb172-3"><a href="summarize-data.html#cb172-3"></a></span>
<span id="cb172-4"><a href="summarize-data.html#cb172-4"></a><span class="co"># Load Sample Data</span></span>
<span id="cb172-5"><a href="summarize-data.html#cb172-5"></a><span class="kw">setwd</span>(<span class="st">&#39;C:/Users/fan/R4Econ/_data/&#39;</span>)</span>
<span id="cb172-6"><a href="summarize-data.html#cb172-6"></a>df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;height_weight.csv&#39;</span>)</span></code></pre></div>
<div id="function-testing-by-gender-groups" class="section level5" number="2.3.2.2.1">
<h5><span class="header-section-number">2.3.2.2.1</span> Function Testing By Gender Groups</h5>
<p>Need two variables, a group variable that is a factor, and a numeric</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="summarize-data.html#cb173-1"></a>vars.group &lt;-<span class="st"> &#39;sex&#39;</span></span>
<span id="cb173-2"><a href="summarize-data.html#cb173-2"></a>var.numeric &lt;-<span class="st"> &#39;hgt&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="summarize-data.html#cb174-1"></a>df.select &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">one_of</span>(vars.group, var.numeric)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>()</span></code></pre></div>
<p>Main Statistics:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="summarize-data.html#cb175-1"></a><span class="co"># Single Variable Group Statistics</span></span>
<span id="cb175-2"><a href="summarize-data.html#cb175-2"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb175-3"><a href="summarize-data.html#cb175-3"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb175-4"><a href="summarize-data.html#cb175-4"></a>  <span class="dt">str.stats.group =</span> <span class="st">&#39;main&#39;</span>)<span class="op">$</span>df_table_grp_stats</span></code></pre></div>
<p>Specify Two Specific Statistics:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="summarize-data.html#cb176-1"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb176-2"><a href="summarize-data.html#cb176-2"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb176-3"><a href="summarize-data.html#cb176-3"></a>  <span class="dt">str.stats.specify =</span> <span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>, <span class="st">&#39;sd&#39;</span>))<span class="op">$</span>df_table_grp_stats</span></code></pre></div>
<p>Specify One Specific Statistics:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="summarize-data.html#cb177-1"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb177-2"><a href="summarize-data.html#cb177-2"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb177-3"><a href="summarize-data.html#cb177-3"></a>  <span class="dt">str.stats.specify =</span> <span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>))<span class="op">$</span>df_table_grp_stats</span></code></pre></div>
</div>
<div id="function-testing-by-country-and-gender-groups" class="section level5" number="2.3.2.2.2">
<h5><span class="header-section-number">2.3.2.2.2</span> Function Testing By Country and Gender Groups</h5>
<p>Need two variables, a group variable that is a factor, and a numeric. Now joint grouping variables.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="summarize-data.html#cb178-1"></a>vars.group &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S.country&#39;</span>, <span class="st">&#39;sex&#39;</span>)</span>
<span id="cb178-2"><a href="summarize-data.html#cb178-2"></a>var.numeric &lt;-<span class="st"> &#39;hgt&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="summarize-data.html#cb179-1"></a>df.select &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">one_of</span>(vars.group, var.numeric)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>()</span></code></pre></div>
<p>Main Statistics:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="summarize-data.html#cb180-1"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb180-2"><a href="summarize-data.html#cb180-2"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb180-3"><a href="summarize-data.html#cb180-3"></a>  <span class="dt">str.stats.group =</span> <span class="st">&#39;main&#39;</span>)<span class="op">$</span>df_table_grp_stats</span></code></pre></div>
<p>Specify Two Specific Statistics:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="summarize-data.html#cb181-1"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb181-2"><a href="summarize-data.html#cb181-2"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb181-3"><a href="summarize-data.html#cb181-3"></a>  <span class="dt">str.stats.specify =</span> <span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>, <span class="st">&#39;sd&#39;</span>))<span class="op">$</span>df_table_grp_stats</span></code></pre></div>
<p>Specify One Specific Statistics:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="summarize-data.html#cb182-1"></a><span class="kw">ff_summ_by_group_summ_one</span>(</span>
<span id="cb182-2"><a href="summarize-data.html#cb182-2"></a>  df.select, <span class="dt">vars.group =</span> vars.group, <span class="dt">var.numeric =</span> var.numeric, </span>
<span id="cb182-3"><a href="summarize-data.html#cb182-3"></a>  <span class="dt">str.stats.specify =</span> <span class="kw">c</span>(<span class="st">&#39;mean&#39;</span>))<span class="op">$</span>df_table_grp_stats</span></code></pre></div>

</div>
</div>
</div>
<div id="nested-within-group-stats" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Nested within Group Stats</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<p>By Multiple within Individual Groups Variables, Averages for All Numeric Variables within All Groups of All Group Variables (Long to very Wide). Suppose you have an individual level final outcome. The individual is observed for N periods, where each period the inputs differ. What inputs impacted the final outcome?</p>
<p>Suppose we can divide N periods in which the individual is in the data into a number of years, a number of semi-years, a number of quarters, or uneven-staggered lengths. We might want to generate averages across individuals and within each of these different possible groups averages of inputs.</p>
<p>Then we want to version of the data where each row is an individual, one of the variables is the final outcome, and the other variables are these different averages: averages for the 1st, 2nd, 3rd year in which indivdiual is in data, averages for 1st, …, final quarter in which indivdiual is in data.</p>
<div id="build-function" class="section level4" number="2.3.3.1">
<h4><span class="header-section-number">2.3.3.1</span> Build Function</h4>
<p>This function takes as inputs:</p>
<ol style="list-style-type: decimal">
<li><strong>vars.not.groups2avg</strong>: a list of variables that are not the within-indivdiual or across-individual grouping variables, but the variables we want to average over. Withnin indivdiual grouping averages will be calculated for these variables using the not-listed variables as within indivdiual groups (excluding vars.indi.grp groups).</li>
<li><strong>vars.indi.grp</strong>: a list or individual variables, and also perhaps villages, province, etc id variables that are higher than individual ID. Note the groups are are ACROSS individual higher level group variables.</li>
<li>the remaining variables are all within individual grouping variables.</li>
</ol>
<p>the function output is a dataframe:</p>
<ol style="list-style-type: decimal">
<li>each row is an individual</li>
<li>initial variables individual ID and across individual groups from <em>vars.indi.grp</em>.</li>
<li>other variables are all averages for the variables in <em>vars.not.groups2avg</em>
<ul>
<li>if there are 2 within individual group variables, and the first has 3 groups (years), the second has 6 groups (semi-years), then there would be 9 average variables.</li>
<li>each average variables has the original variable name from vars.not.groups2avg plus the name of the within individual grouping variable, and at the end ‘c_x’, where x is a integer representing the category within the group (if 3 years, x=1, 2, 3)</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="summarize-data.html#cb183-1"></a><span class="co"># Data Function</span></span>
<span id="cb183-2"><a href="summarize-data.html#cb183-2"></a><span class="co"># https://fanwangecon.github.io/R4Econ/summarize/summ/ByGroupsSummWide.html</span></span>
<span id="cb183-3"><a href="summarize-data.html#cb183-3"></a>f.by.groups.summ.wide &lt;-<span class="st"> </span><span class="cf">function</span>(df.groups.to.average,</span>
<span id="cb183-4"><a href="summarize-data.html#cb183-4"></a>                                  vars.not.groups2avg,</span>
<span id="cb183-5"><a href="summarize-data.html#cb183-5"></a>                                  <span class="dt">vars.indi.grp =</span> <span class="kw">c</span>(<span class="st">&#39;S.country&#39;</span>,<span class="st">&#39;ID&#39;</span>),</span>
<span id="cb183-6"><a href="summarize-data.html#cb183-6"></a>                                  <span class="dt">display=</span><span class="ot">TRUE</span>) {</span>
<span id="cb183-7"><a href="summarize-data.html#cb183-7"></a></span>
<span id="cb183-8"><a href="summarize-data.html#cb183-8"></a><span class="co"># 1. generate categoricals for full year (m.12), half year (m.6), quarter year (m.4)</span></span>
<span id="cb183-9"><a href="summarize-data.html#cb183-9"></a><span class="co"># 2. generate categoricals also for uneven years (m12t14) using </span></span>
<span id="cb183-10"><a href="summarize-data.html#cb183-10"></a><span class="co">#  stagger (+2 rather than -1)</span></span>
<span id="cb183-11"><a href="summarize-data.html#cb183-11"></a><span class="co"># 3. reshape wide to long, so that all categorical date groups appear in var=value,</span></span>
<span id="cb183-12"><a href="summarize-data.html#cb183-12"></a>    <span class="co"># and categories in var=variable</span></span>
<span id="cb183-13"><a href="summarize-data.html#cb183-13"></a><span class="co"># 4. calculate mean for all numeric variables for all date groups</span></span>
<span id="cb183-14"><a href="summarize-data.html#cb183-14"></a><span class="co"># 5. combine date categorical variable and value, single var:</span></span>
<span id="cb183-15"><a href="summarize-data.html#cb183-15"></a>    <span class="co"># m.12.c1= first year average from m.12 averaging</span></span>
<span id="cb183-16"><a href="summarize-data.html#cb183-16"></a></span>
<span id="cb183-17"><a href="summarize-data.html#cb183-17"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-18"><a href="summarize-data.html#cb183-18"></a><span class="co"># Step 1</span></span>
<span id="cb183-19"><a href="summarize-data.html#cb183-19"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-20"><a href="summarize-data.html#cb183-20"></a><span class="co"># 1. generate categoricals for full year (m.12), half year (m.6), quarter year (m.4)</span></span>
<span id="cb183-21"><a href="summarize-data.html#cb183-21"></a><span class="co"># 2. generate categoricals also for uneven years (m12t14) using stagger </span></span>
<span id="cb183-22"><a href="summarize-data.html#cb183-22"></a><span class="co">#  (+2 rather than -1)</span></span>
<span id="cb183-23"><a href="summarize-data.html#cb183-23"></a></span>
<span id="cb183-24"><a href="summarize-data.html#cb183-24"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-25"><a href="summarize-data.html#cb183-25"></a><span class="co"># S2: reshape wide to long, so that all categorical date groups appear in var=value,</span></span>
<span id="cb183-26"><a href="summarize-data.html#cb183-26"></a><span class="co"># and categories in var=variable; calculate mean for all </span></span>
<span id="cb183-27"><a href="summarize-data.html#cb183-27"></a><span class="co"># numeric variables for all date groups</span></span>
<span id="cb183-28"><a href="summarize-data.html#cb183-28"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-29"><a href="summarize-data.html#cb183-29"></a>df.avg.long &lt;-<span class="st"> </span>df.groups.to.average <span class="op">%&gt;%</span></span>
<span id="cb183-30"><a href="summarize-data.html#cb183-30"></a><span class="st">       </span><span class="kw">gather</span>(variable, value, <span class="op">-</span><span class="kw">one_of</span>(<span class="kw">c</span>(vars.indi.grp,</span>
<span id="cb183-31"><a href="summarize-data.html#cb183-31"></a>                                         vars.not.groups2avg))) <span class="op">%&gt;%</span></span>
<span id="cb183-32"><a href="summarize-data.html#cb183-32"></a><span class="st">       </span><span class="kw">group_by</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.indi.grp), variable, value) <span class="op">%&gt;%</span></span>
<span id="cb183-33"><a href="summarize-data.html#cb183-33"></a><span class="st">       </span><span class="kw">summarise_if</span>(is.numeric, <span class="kw">funs</span>(<span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</span>
<span id="cb183-34"><a href="summarize-data.html#cb183-34"></a></span>
<span id="cb183-35"><a href="summarize-data.html#cb183-35"></a><span class="cf">if</span> (display){</span>
<span id="cb183-36"><a href="summarize-data.html#cb183-36"></a>  <span class="kw">dim</span>(df.avg.long)</span>
<span id="cb183-37"><a href="summarize-data.html#cb183-37"></a>  <span class="kw">options</span>(<span class="dt">repr.matrix.max.rows=</span><span class="dv">10</span>, <span class="dt">repr.matrix.max.cols=</span><span class="dv">20</span>)</span>
<span id="cb183-38"><a href="summarize-data.html#cb183-38"></a>  <span class="kw">print</span>(df.avg.long)</span>
<span id="cb183-39"><a href="summarize-data.html#cb183-39"></a>}</span>
<span id="cb183-40"><a href="summarize-data.html#cb183-40"></a></span>
<span id="cb183-41"><a href="summarize-data.html#cb183-41"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-42"><a href="summarize-data.html#cb183-42"></a><span class="co"># S3 combine date categorical variable and value, single var:</span></span>
<span id="cb183-43"><a href="summarize-data.html#cb183-43"></a><span class="co"># m.12.c1= first year average from m.12 averaging; to do this make </span></span>
<span id="cb183-44"><a href="summarize-data.html#cb183-44"></a><span class="co"># data even longer first</span></span>
<span id="cb183-45"><a href="summarize-data.html#cb183-45"></a><span class="co">######## ######## ######## ######## #######</span></span>
<span id="cb183-46"><a href="summarize-data.html#cb183-46"></a></span>
<span id="cb183-47"><a href="summarize-data.html#cb183-47"></a><span class="co"># We already have the averages, but we want them to show up as variables,</span></span>
<span id="cb183-48"><a href="summarize-data.html#cb183-48"></a>    <span class="co"># mean for each group of each variable.</span></span>
<span id="cb183-49"><a href="summarize-data.html#cb183-49"></a>df.avg.allvars.wide &lt;-<span class="st"> </span>df.avg.long <span class="op">%&gt;%</span></span>
<span id="cb183-50"><a href="summarize-data.html#cb183-50"></a><span class="st">   </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb183-51"><a href="summarize-data.html#cb183-51"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">all_m_cate =</span> <span class="kw">paste0</span>(variable, <span class="st">&#39;_c&#39;</span>, value)) <span class="op">%&gt;%</span></span>
<span id="cb183-52"><a href="summarize-data.html#cb183-52"></a><span class="st">   </span><span class="kw">select</span>(all_m_cate, <span class="kw">everything</span>(), <span class="op">-</span>variable, <span class="op">-</span>value) <span class="op">%&gt;%</span></span>
<span id="cb183-53"><a href="summarize-data.html#cb183-53"></a><span class="st">   </span><span class="kw">gather</span>(variable, value, <span class="op">-</span><span class="kw">one_of</span>(vars.indi.grp), <span class="op">-</span>all_m_cate) <span class="op">%&gt;%</span></span>
<span id="cb183-54"><a href="summarize-data.html#cb183-54"></a><span class="st">   </span><span class="kw">unite</span>(<span class="st">&#39;var_mcate&#39;</span>, variable, all_m_cate) <span class="op">%&gt;%</span></span>
<span id="cb183-55"><a href="summarize-data.html#cb183-55"></a><span class="st">   </span><span class="kw">spread</span>(var_mcate, value)</span>
<span id="cb183-56"><a href="summarize-data.html#cb183-56"></a></span>
<span id="cb183-57"><a href="summarize-data.html#cb183-57"></a><span class="cf">if</span> (display){</span>
<span id="cb183-58"><a href="summarize-data.html#cb183-58"></a>  <span class="kw">dim</span>(df.avg.allvars.wide)</span>
<span id="cb183-59"><a href="summarize-data.html#cb183-59"></a>  <span class="kw">options</span>(<span class="dt">repr.matrix.max.rows=</span><span class="dv">10</span>, <span class="dt">repr.matrix.max.cols=</span><span class="dv">10</span>)</span>
<span id="cb183-60"><a href="summarize-data.html#cb183-60"></a>  <span class="kw">print</span>(df.avg.allvars.wide)</span>
<span id="cb183-61"><a href="summarize-data.html#cb183-61"></a>}</span>
<span id="cb183-62"><a href="summarize-data.html#cb183-62"></a></span>
<span id="cb183-63"><a href="summarize-data.html#cb183-63"></a><span class="kw">return</span>(df.avg.allvars.wide)</span>
<span id="cb183-64"><a href="summarize-data.html#cb183-64"></a>}</span></code></pre></div>
</div>
<div id="test-program" class="section level4" number="2.3.3.2">
<h4><span class="header-section-number">2.3.3.2</span> Test Program</h4>
<p>In our sample dataset, the number of nutrition/height/income etc information observed within each country and month of age group are different. We have a panel dataset for children observed over different months of age.</p>
<p>We have two key grouping variables:
1. country: data are observed for guatemala and cebu
2. month-age (survey month round=svymthRound): different months of age at which each individual child is observed</p>
<p>A child could be observed for many months, or just a few months. A child’s height information could be observed for more months-of-age than nutritional intake information. We eventually want to run regressions where the outcome is height/weight and the input is nutrition. The regressions will be at the month-of-age level. We need to know how many times different variables are observed at the month-of-age level.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="summarize-data.html#cb184-1"></a><span class="co"># Library</span></span>
<span id="cb184-2"><a href="summarize-data.html#cb184-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb184-3"><a href="summarize-data.html#cb184-3"></a></span>
<span id="cb184-4"><a href="summarize-data.html#cb184-4"></a><span class="co"># Load Sample Data</span></span>
<span id="cb184-5"><a href="summarize-data.html#cb184-5"></a><span class="kw">setwd</span>(<span class="st">&#39;C:/Users/fan/R4Econ/_data/&#39;</span>)</span>
<span id="cb184-6"><a href="summarize-data.html#cb184-6"></a>df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;height_weight.csv&#39;</span>)</span></code></pre></div>
<div id="generate-within-individual-groups" class="section level5" number="2.3.3.2.1">
<h5><span class="header-section-number">2.3.3.2.1</span> Generate Within Individual Groups</h5>
<p>In the data, children are observed for different number of months since birth. We want to calculate quarterly, semi-year, annual, etc average nutritional intakes. First generate these within-individual grouping variables. We can also generate uneven-staggered calendar groups as shown below.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="summarize-data.html#cb185-1"></a>mth.var &lt;-<span class="st"> &#39;svymthRound&#39;</span></span>
<span id="cb185-2"><a href="summarize-data.html#cb185-2"></a>df.groups.to.average&lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb185-3"><a href="summarize-data.html#cb185-3"></a><span class="st">        </span><span class="kw">filter</span>(<span class="op">!!</span><span class="kw">sym</span>(mth.var) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!!</span><span class="kw">sym</span>(mth.var) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">24</span>)  <span class="op">%&gt;%</span></span>
<span id="cb185-4"><a href="summarize-data.html#cb185-4"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">m12t24=</span>(<span class="kw">floor</span>((<span class="op">!!</span><span class="kw">sym</span>(mth.var) <span class="op">-</span><span class="st"> </span><span class="dv">12</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">14</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>),</span>
<span id="cb185-5"><a href="summarize-data.html#cb185-5"></a>               <span class="dt">m8t24=</span>(<span class="kw">floor</span>((<span class="op">!!</span><span class="kw">sym</span>(mth.var) <span class="op">-</span><span class="st"> </span><span class="dv">8</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">18</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>),</span>
<span id="cb185-6"><a href="summarize-data.html#cb185-6"></a>               <span class="dt">m12 =</span> <span class="kw">pmax</span>((<span class="kw">floor</span>((<span class="op">!!</span><span class="kw">sym</span>(mth.var)<span class="op">-</span><span class="dv">1</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">12</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>), <span class="dv">1</span>),</span>
<span id="cb185-7"><a href="summarize-data.html#cb185-7"></a>               <span class="dt">m6 =</span> <span class="kw">pmax</span>((<span class="kw">floor</span>((<span class="op">!!</span><span class="kw">sym</span>(mth.var)<span class="op">-</span><span class="dv">1</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">6</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>), <span class="dv">1</span>),</span>
<span id="cb185-8"><a href="summarize-data.html#cb185-8"></a>               <span class="dt">m3 =</span> <span class="kw">pmax</span>((<span class="kw">floor</span>((<span class="op">!!</span><span class="kw">sym</span>(mth.var)<span class="op">-</span><span class="dv">1</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>), <span class="dv">1</span>))</span></code></pre></div>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="summarize-data.html#cb186-1"></a><span class="co"># Show Results</span></span>
<span id="cb186-2"><a href="summarize-data.html#cb186-2"></a><span class="kw">options</span>(<span class="dt">repr.matrix.max.rows=</span><span class="dv">30</span>, <span class="dt">repr.matrix.max.cols=</span><span class="dv">20</span>)</span>
<span id="cb186-3"><a href="summarize-data.html#cb186-3"></a>vars.arrange &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S.country&#39;</span>,<span class="st">&#39;indi.id&#39;</span>,<span class="st">&#39;svymthRound&#39;</span>)</span>
<span id="cb186-4"><a href="summarize-data.html#cb186-4"></a>vars.groups.within.indi &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;m12t24&#39;</span>, <span class="st">&#39;m8t24&#39;</span>, <span class="st">&#39;m12&#39;</span>, <span class="st">&#39;m6&#39;</span>, <span class="st">&#39;m3&#39;</span>)</span>
<span id="cb186-5"><a href="summarize-data.html#cb186-5"></a><span class="kw">as.tibble</span>(df.groups.to.average <span class="op">%&gt;%</span></span>
<span id="cb186-6"><a href="summarize-data.html#cb186-6"></a><span class="st">          </span><span class="kw">group_by</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.arrange)) <span class="op">%&gt;%</span></span>
<span id="cb186-7"><a href="summarize-data.html#cb186-7"></a><span class="st">          </span><span class="kw">arrange</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.arrange)) <span class="op">%&gt;%</span></span>
<span id="cb186-8"><a href="summarize-data.html#cb186-8"></a><span class="st">          </span><span class="kw">select</span>(<span class="op">!!!</span><span class="kw">syms</span>(vars.arrange), <span class="op">!!!</span><span class="kw">syms</span>(vars.groups.within.indi)))</span></code></pre></div>
</div>
<div id="within-group-averages" class="section level5" number="2.3.3.2.2">
<h5><span class="header-section-number">2.3.3.2.2</span> Within Group Averages</h5>
<p>With the within-group averages created, we can generate averages for all variables within these groups.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="summarize-data.html#cb187-1"></a>vars.not.groups2avg &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;prot&#39;</span>, <span class="st">&#39;cal&#39;</span>)</span>
<span id="cb187-2"><a href="summarize-data.html#cb187-2"></a>vars.indi.grp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S.country&#39;</span>, <span class="st">&#39;indi.id&#39;</span>)</span>
<span id="cb187-3"><a href="summarize-data.html#cb187-3"></a>vars.groups.within.indi &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;m12t24&#39;</span>, <span class="st">&#39;m8t24&#39;</span>, <span class="st">&#39;m12&#39;</span>, <span class="st">&#39;m6&#39;</span>, <span class="st">&#39;m3&#39;</span>)</span>
<span id="cb187-4"><a href="summarize-data.html#cb187-4"></a></span>
<span id="cb187-5"><a href="summarize-data.html#cb187-5"></a>df.groups.to.average.select &lt;-<span class="st"> </span>df.groups.to.average <span class="op">%&gt;%</span></span>
<span id="cb187-6"><a href="summarize-data.html#cb187-6"></a><span class="st">                        </span><span class="kw">select</span>(<span class="kw">one_of</span>(<span class="kw">c</span>(vars.indi.grp,</span>
<span id="cb187-7"><a href="summarize-data.html#cb187-7"></a>                                        vars.not.groups2avg,</span>
<span id="cb187-8"><a href="summarize-data.html#cb187-8"></a>                                        vars.groups.within.indi)))</span>
<span id="cb187-9"><a href="summarize-data.html#cb187-9"></a>df.avg.allvars.wide &lt;-<span class="st"> </span><span class="kw">f.by.groups.summ.wide</span>(df.groups.to.average.select,</span>
<span id="cb187-10"><a href="summarize-data.html#cb187-10"></a>                                             vars.not.groups2avg,</span>
<span id="cb187-11"><a href="summarize-data.html#cb187-11"></a>                                             vars.indi.grp, <span class="dt">display=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p>This is the tabular version of results</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="summarize-data.html#cb188-1"></a><span class="kw">dim</span>(df.avg.allvars.wide)</span></code></pre></div>
<pre><code>## [1] 2023   38</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="summarize-data.html#cb190-1"></a><span class="kw">names</span>(df.avg.allvars.wide)</span></code></pre></div>
<pre><code>##  [1] &quot;S.country&quot;      &quot;indi.id&quot;        &quot;cal_m12_c1&quot;     &quot;cal_m12_c2&quot;     &quot;cal_m12t24_c0&quot;  &quot;cal_m12t24_c1&quot;  &quot;cal_m3_c1&quot;      &quot;cal_m3_c2&quot;      &quot;cal_m3_c3&quot;     
## [10] &quot;cal_m3_c4&quot;      &quot;cal_m3_c5&quot;      &quot;cal_m3_c6&quot;      &quot;cal_m3_c7&quot;      &quot;cal_m3_c8&quot;      &quot;cal_m6_c1&quot;      &quot;cal_m6_c2&quot;      &quot;cal_m6_c3&quot;      &quot;cal_m6_c4&quot;     
## [19] &quot;cal_m8t24_c0&quot;   &quot;cal_m8t24_c1&quot;   &quot;prot_m12_c1&quot;    &quot;prot_m12_c2&quot;    &quot;prot_m12t24_c0&quot; &quot;prot_m12t24_c1&quot; &quot;prot_m3_c1&quot;     &quot;prot_m3_c2&quot;     &quot;prot_m3_c3&quot;    
## [28] &quot;prot_m3_c4&quot;     &quot;prot_m3_c5&quot;     &quot;prot_m3_c6&quot;     &quot;prot_m3_c7&quot;     &quot;prot_m3_c8&quot;     &quot;prot_m6_c1&quot;     &quot;prot_m6_c2&quot;     &quot;prot_m6_c3&quot;     &quot;prot_m6_c4&quot;    
## [37] &quot;prot_m8t24_c0&quot;  &quot;prot_m8t24_c1&quot;</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="summarize-data.html#cb192-1"></a>df.avg.allvars.wide[<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>,] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
S.country
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
indi.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m12_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m12_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m12t24_c0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m12t24_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c6
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c7
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m3_c8
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m6_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m6_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m6_c3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m6_c4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m8t24_c0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cal_m8t24_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m12_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m12_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m12t24_c0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m12t24_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c6
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c7
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m3_c8
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m6_c1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m6_c2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m6_c3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m6_c4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m8t24_c0
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
prot_m8t24_c1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
132.15714
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
97.08333
</td>
<td style="text-align:right;">
342.6000
</td>
<td style="text-align:right;">
9.10
</td>
<td style="text-align:right;">
95.50
</td>
<td style="text-align:right;">
85.3
</td>
<td style="text-align:right;">
315.30
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
52.300
</td>
<td style="text-align:right;">
238.63333
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
52.300
</td>
<td style="text-align:right;">
238.6333
</td>
<td style="text-align:right;">
5.3571429
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
4.3666667
</td>
<td style="text-align:right;">
11.300000
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
3.65
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
13.15
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
2.150
</td>
<td style="text-align:right;">
9.6333333
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
2.150
</td>
<td style="text-align:right;">
9.633333
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
90.72857
</td>
<td style="text-align:right;">
255.6500
</td>
<td style="text-align:right;">
81.46667
</td>
<td style="text-align:right;">
240.0286
</td>
<td style="text-align:right;">
83.35
</td>
<td style="text-align:right;">
12.30
</td>
<td style="text-align:right;">
155.1
</td>
<td style="text-align:right;">
144.35
</td>
<td style="text-align:right;">
228.0
</td>
<td style="text-align:right;">
152.85
</td>
<td style="text-align:right;">
305.0
</td>
<td style="text-align:right;">
347.60
</td>
<td style="text-align:right;">
47.825
</td>
<td style="text-align:right;">
147.93333
</td>
<td style="text-align:right;">
177.9000
</td>
<td style="text-align:right;">
333.4000
</td>
<td style="text-align:right;">
47.825
</td>
<td style="text-align:right;">
219.7444
</td>
<td style="text-align:right;">
3.1857143
</td>
<td style="text-align:right;">
8.550000
</td>
<td style="text-align:right;">
2.7333333
</td>
<td style="text-align:right;">
8.171429
</td>
<td style="text-align:right;">
3.20
</td>
<td style="text-align:right;">
1.25
</td>
<td style="text-align:right;">
5.2
</td>
<td style="text-align:right;">
4.10
</td>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
5.15
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
13.95
</td>
<td style="text-align:right;">
2.225
</td>
<td style="text-align:right;">
4.4666667
</td>
<td style="text-align:right;">
5.233333
</td>
<td style="text-align:right;">
11.866667
</td>
<td style="text-align:right;">
2.225
</td>
<td style="text-align:right;">
7.188889
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
96.80000
</td>
<td style="text-align:right;">
658.8167
</td>
<td style="text-align:right;">
31.56667
</td>
<td style="text-align:right;">
634.4429
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
28.85
</td>
<td style="text-align:right;">
57.0
</td>
<td style="text-align:right;">
280.95
</td>
<td style="text-align:right;">
459.3
</td>
<td style="text-align:right;">
549.95
</td>
<td style="text-align:right;">
612.0
</td>
<td style="text-align:right;">
890.85
</td>
<td style="text-align:right;">
14.675
</td>
<td style="text-align:right;">
206.30000
</td>
<td style="text-align:right;">
519.7333
</td>
<td style="text-align:right;">
797.9000
</td>
<td style="text-align:right;">
14.675
</td>
<td style="text-align:right;">
507.9778
</td>
<td style="text-align:right;">
4.5000000
</td>
<td style="text-align:right;">
21.116667
</td>
<td style="text-align:right;">
1.6833333
</td>
<td style="text-align:right;">
21.157143
</td>
<td style="text-align:right;">
1.05
</td>
<td style="text-align:right;">
2.15
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
11.40
</td>
<td style="text-align:right;">
18.5
</td>
<td style="text-align:right;">
18.05
</td>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
27.05
</td>
<td style="text-align:right;">
1.600
</td>
<td style="text-align:right;">
8.3666667
</td>
<td style="text-align:right;">
18.200000
</td>
<td style="text-align:right;">
24.033333
</td>
<td style="text-align:right;">
1.600
</td>
<td style="text-align:right;">
16.866667
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
27.45714
</td>
<td style="text-align:right;">
371.7000
</td>
<td style="text-align:right;">
24.55000
</td>
<td style="text-align:right;">
325.0143
</td>
<td style="text-align:right;">
4.50
</td>
<td style="text-align:right;">
25.95
</td>
<td style="text-align:right;">
39.4
</td>
<td style="text-align:right;">
45.95
</td>
<td style="text-align:right;">
221.2
</td>
<td style="text-align:right;">
271.00
</td>
<td style="text-align:right;">
581.3
</td>
<td style="text-align:right;">
442.85
</td>
<td style="text-align:right;">
15.225
</td>
<td style="text-align:right;">
43.76667
</td>
<td style="text-align:right;">
254.4000
</td>
<td style="text-align:right;">
489.0000
</td>
<td style="text-align:right;">
15.225
</td>
<td style="text-align:right;">
262.3889
</td>
<td style="text-align:right;">
0.8714286
</td>
<td style="text-align:right;">
6.850000
</td>
<td style="text-align:right;">
0.9000000
</td>
<td style="text-align:right;">
5.971429
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:right;">
4.85
</td>
<td style="text-align:right;">
10.1
</td>
<td style="text-align:right;">
9.75
</td>
<td style="text-align:right;">
0.925
</td>
<td style="text-align:right;">
0.8000000
</td>
<td style="text-align:right;">
3.833333
</td>
<td style="text-align:right;">
9.866667
</td>
<td style="text-align:right;">
0.925
</td>
<td style="text-align:right;">
4.833333
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
101.34286
</td>
<td style="text-align:right;">
1080.8500
</td>
<td style="text-align:right;">
79.15000
</td>
<td style="text-align:right;">
959.9429
</td>
<td style="text-align:right;">
14.10
</td>
<td style="text-align:right;">
143.80
</td>
<td style="text-align:right;">
71.3
</td>
<td style="text-align:right;">
161.15
</td>
<td style="text-align:right;">
452.6
</td>
<td style="text-align:right;">
1345.20
</td>
<td style="text-align:right;">
1178.1
</td>
<td style="text-align:right;">
1082.00
</td>
<td style="text-align:right;">
78.950
</td>
<td style="text-align:right;">
131.20000
</td>
<td style="text-align:right;">
1047.6667
</td>
<td style="text-align:right;">
1114.0333
</td>
<td style="text-align:right;">
78.950
</td>
<td style="text-align:right;">
764.3000
</td>
<td style="text-align:right;">
2.4000000
</td>
<td style="text-align:right;">
19.483333
</td>
<td style="text-align:right;">
2.3166667
</td>
<td style="text-align:right;">
17.114286
</td>
<td style="text-align:right;">
1.35
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
2.35
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
23.15
</td>
<td style="text-align:right;">
24.5
</td>
<td style="text-align:right;">
19.50
</td>
<td style="text-align:right;">
2.175
</td>
<td style="text-align:right;">
2.7000000
</td>
<td style="text-align:right;">
17.800000
</td>
<td style="text-align:right;">
21.166667
</td>
<td style="text-align:right;">
2.175
</td>
<td style="text-align:right;">
13.888889
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
185.35714
</td>
<td style="text-align:right;">
521.5333
</td>
<td style="text-align:right;">
162.23333
</td>
<td style="text-align:right;">
493.3286
</td>
<td style="text-align:right;">
23.85
</td>
<td style="text-align:right;">
184.70
</td>
<td style="text-align:right;">
169.1
</td>
<td style="text-align:right;">
355.65
</td>
<td style="text-align:right;">
653.4
</td>
<td style="text-align:right;">
506.50
</td>
<td style="text-align:right;">
416.8
</td>
<td style="text-align:right;">
523.00
</td>
<td style="text-align:right;">
104.275
</td>
<td style="text-align:right;">
293.46667
</td>
<td style="text-align:right;">
555.4667
</td>
<td style="text-align:right;">
487.6000
</td>
<td style="text-align:right;">
104.275
</td>
<td style="text-align:right;">
445.5111
</td>
<td style="text-align:right;">
8.4000000
</td>
<td style="text-align:right;">
15.116667
</td>
<td style="text-align:right;">
7.3833333
</td>
<td style="text-align:right;">
15.028571
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
7.40
</td>
<td style="text-align:right;">
9.8
</td>
<td style="text-align:right;">
16.25
</td>
<td style="text-align:right;">
26.8
</td>
<td style="text-align:right;">
14.10
</td>
<td style="text-align:right;">
11.4
</td>
<td style="text-align:right;">
12.15
</td>
<td style="text-align:right;">
4.125
</td>
<td style="text-align:right;">
14.1000000
</td>
<td style="text-align:right;">
18.333333
</td>
<td style="text-align:right;">
11.900000
</td>
<td style="text-align:right;">
4.125
</td>
<td style="text-align:right;">
14.777778
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
157.25714
</td>
<td style="text-align:right;">
570.9800
</td>
<td style="text-align:right;">
145.50000
</td>
<td style="text-align:right;">
513.7833
</td>
<td style="text-align:right;">
8.30
</td>
<td style="text-align:right;">
137.80
</td>
<td style="text-align:right;">
407.8
</td>
<td style="text-align:right;">
200.40
</td>
<td style="text-align:right;">
390.6
</td>
<td style="text-align:right;">
637.10
</td>
<td style="text-align:right;">
688.1
</td>
<td style="text-align:right;">
569.55
</td>
<td style="text-align:right;">
73.050
</td>
<td style="text-align:right;">
269.53333
</td>
<td style="text-align:right;">
513.8500
</td>
<td style="text-align:right;">
609.0667
</td>
<td style="text-align:right;">
73.050
</td>
<td style="text-align:right;">
457.9375
</td>
<td style="text-align:right;">
3.3000000
</td>
<td style="text-align:right;">
20.440000
</td>
<td style="text-align:right;">
2.7833333
</td>
<td style="text-align:right;">
18.100000
</td>
<td style="text-align:right;">
0.95
</td>
<td style="text-align:right;">
1.70
</td>
<td style="text-align:right;">
8.6
</td>
<td style="text-align:right;">
4.60
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
23.00
</td>
<td style="text-align:right;">
21.5
</td>
<td style="text-align:right;">
20.65
</td>
<td style="text-align:right;">
1.325
</td>
<td style="text-align:right;">
5.9333333
</td>
<td style="text-align:right;">
19.700000
</td>
<td style="text-align:right;">
20.933333
</td>
<td style="text-align:right;">
1.325
</td>
<td style="text-align:right;">
15.000000
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
471.92857
</td>
<td style="text-align:right;">
844.8333
</td>
<td style="text-align:right;">
379.20000
</td>
<td style="text-align:right;">
871.0429
</td>
<td style="text-align:right;">
158.95
</td>
<td style="text-align:right;">
423.00
</td>
<td style="text-align:right;">
417.5
</td>
<td style="text-align:right;">
861.05
</td>
<td style="text-align:right;">
691.3
</td>
<td style="text-align:right;">
897.95
</td>
<td style="text-align:right;">
637.1
</td>
<td style="text-align:right;">
972.35
</td>
<td style="text-align:right;">
290.975
</td>
<td style="text-align:right;">
713.20000
</td>
<td style="text-align:right;">
829.0667
</td>
<td style="text-align:right;">
860.6000
</td>
<td style="text-align:right;">
290.975
</td>
<td style="text-align:right;">
800.9556
</td>
<td style="text-align:right;">
13.6857143
</td>
<td style="text-align:right;">
32.716667
</td>
<td style="text-align:right;">
11.0166667
</td>
<td style="text-align:right;">
32.285714
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
11.35
</td>
<td style="text-align:right;">
10.8
</td>
<td style="text-align:right;">
27.25
</td>
<td style="text-align:right;">
42.7
</td>
<td style="text-align:right;">
26.45
</td>
<td style="text-align:right;">
25.8
</td>
<td style="text-align:right;">
37.45
</td>
<td style="text-align:right;">
7.625
</td>
<td style="text-align:right;">
21.7666667
</td>
<td style="text-align:right;">
31.866667
</td>
<td style="text-align:right;">
33.566667
</td>
<td style="text-align:right;">
7.625
</td>
<td style="text-align:right;">
29.066667
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
32.27143
</td>
<td style="text-align:right;">
415.2167
</td>
<td style="text-align:right;">
16.58333
</td>
<td style="text-align:right;">
373.9571
</td>
<td style="text-align:right;">
5.05
</td>
<td style="text-align:right;">
10.40
</td>
<td style="text-align:right;">
15.1
</td>
<td style="text-align:right;">
89.95
</td>
<td style="text-align:right;">
142.4
</td>
<td style="text-align:right;">
203.60
</td>
<td style="text-align:right;">
753.2
</td>
<td style="text-align:right;">
594.25
</td>
<td style="text-align:right;">
7.725
</td>
<td style="text-align:right;">
65.00000
</td>
<td style="text-align:right;">
183.2000
</td>
<td style="text-align:right;">
647.2333
</td>
<td style="text-align:right;">
7.725
</td>
<td style="text-align:right;">
298.4778
</td>
<td style="text-align:right;">
0.9571429
</td>
<td style="text-align:right;">
18.283333
</td>
<td style="text-align:right;">
0.9166667
</td>
<td style="text-align:right;">
15.842857
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
2.10
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
10.85
</td>
<td style="text-align:right;">
39.5
</td>
<td style="text-align:right;">
22.15
</td>
<td style="text-align:right;">
0.500
</td>
<td style="text-align:right;">
1.5666667
</td>
<td style="text-align:right;">
8.633333
</td>
<td style="text-align:right;">
27.933333
</td>
<td style="text-align:right;">
0.500
</td>
<td style="text-align:right;">
12.711111
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
67.18571
</td>
<td style="text-align:right;">
395.2500
</td>
<td style="text-align:right;">
68.58333
</td>
<td style="text-align:right;">
347.1857
</td>
<td style="text-align:right;">
9.55
</td>
<td style="text-align:right;">
26.40
</td>
<td style="text-align:right;">
164.6
</td>
<td style="text-align:right;">
116.90
</td>
<td style="text-align:right;">
296.6
</td>
<td style="text-align:right;">
303.00
</td>
<td style="text-align:right;">
385.1
</td>
<td style="text-align:right;">
541.90
</td>
<td style="text-align:right;">
17.975
</td>
<td style="text-align:right;">
132.80000
</td>
<td style="text-align:right;">
300.8667
</td>
<td style="text-align:right;">
489.6333
</td>
<td style="text-align:right;">
17.975
</td>
<td style="text-align:right;">
307.7667
</td>
<td style="text-align:right;">
2.0428571
</td>
<td style="text-align:right;">
8.466667
</td>
<td style="text-align:right;">
1.9333333
</td>
<td style="text-align:right;">
7.642857
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.35
</td>
<td style="text-align:right;">
7.5
</td>
<td style="text-align:right;">
6.05
</td>
<td style="text-align:right;">
9.2
</td>
<td style="text-align:right;">
11.00
</td>
<td style="text-align:right;">
0.675
</td>
<td style="text-align:right;">
3.8666667
</td>
<td style="text-align:right;">
6.533333
</td>
<td style="text-align:right;">
10.400000
</td>
<td style="text-align:right;">
0.675
</td>
<td style="text-align:right;">
6.933333
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
14.90000
</td>
<td style="text-align:right;">
245.3833
</td>
<td style="text-align:right;">
11.80000
</td>
<td style="text-align:right;">
215.1143
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
5.20
</td>
<td style="text-align:right;">
30.0
</td>
<td style="text-align:right;">
31.45
</td>
<td style="text-align:right;">
126.2
</td>
<td style="text-align:right;">
223.05
</td>
<td style="text-align:right;">
239.6
</td>
<td style="text-align:right;">
330.20
</td>
<td style="text-align:right;">
2.850
</td>
<td style="text-align:right;">
30.96667
</td>
<td style="text-align:right;">
190.7667
</td>
<td style="text-align:right;">
300.0000
</td>
<td style="text-align:right;">
2.850
</td>
<td style="text-align:right;">
173.9111
</td>
<td style="text-align:right;">
1.0285714
</td>
<td style="text-align:right;">
6.833333
</td>
<td style="text-align:right;">
1.1166667
</td>
<td style="text-align:right;">
5.928571
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
1.70
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
6.35
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
8.70
</td>
<td style="text-align:right;">
1.250
</td>
<td style="text-align:right;">
0.7333333
</td>
<td style="text-align:right;">
5.433333
</td>
<td style="text-align:right;">
8.233333
</td>
<td style="text-align:right;">
1.250
</td>
<td style="text-align:right;">
4.800000
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
453.61429
</td>
<td style="text-align:right;">
745.6833
</td>
<td style="text-align:right;">
419.51667
</td>
<td style="text-align:right;">
733.1857
</td>
<td style="text-align:right;">
325.60
</td>
<td style="text-align:right;">
483.65
</td>
<td style="text-align:right;">
463.0
</td>
<td style="text-align:right;">
546.90
</td>
<td style="text-align:right;">
766.8
</td>
<td style="text-align:right;">
676.85
</td>
<td style="text-align:right;">
998.5
</td>
<td style="text-align:right;">
677.55
</td>
<td style="text-align:right;">
404.625
</td>
<td style="text-align:right;">
518.93333
</td>
<td style="text-align:right;">
706.8333
</td>
<td style="text-align:right;">
784.5333
</td>
<td style="text-align:right;">
404.625
</td>
<td style="text-align:right;">
670.1000
</td>
<td style="text-align:right;">
14.7714286
</td>
<td style="text-align:right;">
22.133333
</td>
<td style="text-align:right;">
14.1666667
</td>
<td style="text-align:right;">
21.600000
</td>
<td style="text-align:right;">
7.40
</td>
<td style="text-align:right;">
13.60
</td>
<td style="text-align:right;">
26.6
</td>
<td style="text-align:right;">
17.40
</td>
<td style="text-align:right;">
18.6
</td>
<td style="text-align:right;">
20.35
</td>
<td style="text-align:right;">
25.6
</td>
<td style="text-align:right;">
23.95
</td>
<td style="text-align:right;">
10.500
</td>
<td style="text-align:right;">
20.4666667
</td>
<td style="text-align:right;">
19.766667
</td>
<td style="text-align:right;">
24.500000
</td>
<td style="text-align:right;">
10.500
</td>
<td style="text-align:right;">
21.577778
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
47.51429
</td>
<td style="text-align:right;">
210.2500
</td>
<td style="text-align:right;">
36.81667
</td>
<td style="text-align:right;">
196.1714
</td>
<td style="text-align:right;">
17.45
</td>
<td style="text-align:right;">
40.00
</td>
<td style="text-align:right;">
28.5
</td>
<td style="text-align:right;">
94.60
</td>
<td style="text-align:right;">
216.9
</td>
<td style="text-align:right;">
195.15
</td>
<td style="text-align:right;">
281.3
</td>
<td style="text-align:right;">
186.50
</td>
<td style="text-align:right;">
28.725
</td>
<td style="text-align:right;">
72.56667
</td>
<td style="text-align:right;">
202.4000
</td>
<td style="text-align:right;">
218.1000
</td>
<td style="text-align:right;">
28.725
</td>
<td style="text-align:right;">
164.3556
</td>
<td style="text-align:right;">
1.9571429
</td>
<td style="text-align:right;">
6.800000
</td>
<td style="text-align:right;">
1.6666667
</td>
<td style="text-align:right;">
6.357143
</td>
<td style="text-align:right;">
0.70
</td>
<td style="text-align:right;">
1.50
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
3.60
</td>
<td style="text-align:right;">
8.3
</td>
<td style="text-align:right;">
4.75
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:right;">
8.40
</td>
<td style="text-align:right;">
1.100
</td>
<td style="text-align:right;">
3.1000000
</td>
<td style="text-align:right;">
5.933333
</td>
<td style="text-align:right;">
7.666667
</td>
<td style="text-align:right;">
1.100
</td>
<td style="text-align:right;">
5.566667
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
608.85714
</td>
<td style="text-align:right;">
924.5833
</td>
<td style="text-align:right;">
527.30000
</td>
<td style="text-align:right;">
949.3857
</td>
<td style="text-align:right;">
259.05
</td>
<td style="text-align:right;">
554.30
</td>
<td style="text-align:right;">
688.1
</td>
<td style="text-align:right;">
973.60
</td>
<td style="text-align:right;">
525.5
</td>
<td style="text-align:right;">
1039.60
</td>
<td style="text-align:right;">
800.0
</td>
<td style="text-align:right;">
1071.40
</td>
<td style="text-align:right;">
406.675
</td>
<td style="text-align:right;">
878.43333
</td>
<td style="text-align:right;">
868.2333
</td>
<td style="text-align:right;">
980.9333
</td>
<td style="text-align:right;">
406.675
</td>
<td style="text-align:right;">
909.2000
</td>
<td style="text-align:right;">
24.6714286
</td>
<td style="text-align:right;">
28.050000
</td>
<td style="text-align:right;">
23.0833333
</td>
<td style="text-align:right;">
28.928571
</td>
<td style="text-align:right;">
15.05
</td>
<td style="text-align:right;">
28.85
</td>
<td style="text-align:right;">
32.6
</td>
<td style="text-align:right;">
26.15
</td>
<td style="text-align:right;">
12.7
</td>
<td style="text-align:right;">
29.75
</td>
<td style="text-align:right;">
29.5
</td>
<td style="text-align:right;">
33.30
</td>
<td style="text-align:right;">
21.950
</td>
<td style="text-align:right;">
28.3000000
</td>
<td style="text-align:right;">
24.066667
</td>
<td style="text-align:right;">
32.033333
</td>
<td style="text-align:right;">
21.950
</td>
<td style="text-align:right;">
28.133333
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
74.67143
</td>
<td style="text-align:right;">
440.0833
</td>
<td style="text-align:right;">
64.21667
</td>
<td style="text-align:right;">
396.8429
</td>
<td style="text-align:right;">
62.40
</td>
<td style="text-align:right;">
39.60
</td>
<td style="text-align:right;">
80.1
</td>
<td style="text-align:right;">
119.30
</td>
<td style="text-align:right;">
292.5
</td>
<td style="text-align:right;">
237.45
</td>
<td style="text-align:right;">
607.8
</td>
<td style="text-align:right;">
632.65
</td>
<td style="text-align:right;">
51.000
</td>
<td style="text-align:right;">
106.23333
</td>
<td style="text-align:right;">
255.8000
</td>
<td style="text-align:right;">
624.3667
</td>
<td style="text-align:right;">
51.000
</td>
<td style="text-align:right;">
328.8000
</td>
<td style="text-align:right;">
2.2571429
</td>
<td style="text-align:right;">
10.633333
</td>
<td style="text-align:right;">
1.6333333
</td>
<td style="text-align:right;">
9.971429
</td>
<td style="text-align:right;">
1.65
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
4.60
</td>
<td style="text-align:right;">
9.4
</td>
<td style="text-align:right;">
5.80
</td>
<td style="text-align:right;">
13.6
</td>
<td style="text-align:right;">
14.60
</td>
<td style="text-align:right;">
1.275
</td>
<td style="text-align:right;">
3.5666667
</td>
<td style="text-align:right;">
7.000000
</td>
<td style="text-align:right;">
14.266667
</td>
<td style="text-align:right;">
1.275
</td>
<td style="text-align:right;">
8.277778
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
128.45714
</td>
<td style="text-align:right;">
519.9333
</td>
<td style="text-align:right;">
90.50000
</td>
<td style="text-align:right;">
496.5429
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
11.00
</td>
<td style="text-align:right;">
205.3
</td>
<td style="text-align:right;">
331.15
</td>
<td style="text-align:right;">
290.8
</td>
<td style="text-align:right;">
354.50
</td>
<td style="text-align:right;">
563.3
</td>
<td style="text-align:right;">
778.25
</td>
<td style="text-align:right;">
7.900
</td>
<td style="text-align:right;">
289.20000
</td>
<td style="text-align:right;">
333.2667
</td>
<td style="text-align:right;">
706.6000
</td>
<td style="text-align:right;">
7.900
</td>
<td style="text-align:right;">
443.0222
</td>
<td style="text-align:right;">
4.6857143
</td>
<td style="text-align:right;">
18.083333
</td>
<td style="text-align:right;">
4.1000000
</td>
<td style="text-align:right;">
16.671429
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
2.70
</td>
<td style="text-align:right;">
8.7
</td>
<td style="text-align:right;">
8.70
</td>
<td style="text-align:right;">
7.8
</td>
<td style="text-align:right;">
12.95
</td>
<td style="text-align:right;">
25.9
</td>
<td style="text-align:right;">
24.45
</td>
<td style="text-align:right;">
1.675
</td>
<td style="text-align:right;">
8.7000000
</td>
<td style="text-align:right;">
11.233333
</td>
<td style="text-align:right;">
24.933333
</td>
<td style="text-align:right;">
1.675
</td>
<td style="text-align:right;">
14.955556
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
130.78571
</td>
<td style="text-align:right;">
718.8667
</td>
<td style="text-align:right;">
97.48333
</td>
<td style="text-align:right;">
663.4000
</td>
<td style="text-align:right;">
5.50
</td>
<td style="text-align:right;">
7.80
</td>
<td style="text-align:right;">
249.9
</td>
<td style="text-align:right;">
319.50
</td>
<td style="text-align:right;">
774.6
</td>
<td style="text-align:right;">
892.90
</td>
<td style="text-align:right;">
551.9
</td>
<td style="text-align:right;">
600.45
</td>
<td style="text-align:right;">
6.650
</td>
<td style="text-align:right;">
296.30000
</td>
<td style="text-align:right;">
853.4667
</td>
<td style="text-align:right;">
584.2667
</td>
<td style="text-align:right;">
6.650
</td>
<td style="text-align:right;">
578.0111
</td>
<td style="text-align:right;">
2.8142857
</td>
<td style="text-align:right;">
19.716667
</td>
<td style="text-align:right;">
2.2166667
</td>
<td style="text-align:right;">
17.814286
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
5.70
</td>
<td style="text-align:right;">
20.1
</td>
<td style="text-align:right;">
21.55
</td>
<td style="text-align:right;">
24.9
</td>
<td style="text-align:right;">
15.10
</td>
<td style="text-align:right;">
0.550
</td>
<td style="text-align:right;">
5.8333333
</td>
<td style="text-align:right;">
21.066667
</td>
<td style="text-align:right;">
18.366667
</td>
<td style="text-align:right;">
0.550
</td>
<td style="text-align:right;">
15.088889
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
172.64000
</td>
<td style="text-align:right;">
497.9500
</td>
<td style="text-align:right;">
172.64000
</td>
<td style="text-align:right;">
497.9500
</td>
<td style="text-align:right;">
29.60
</td>
<td style="text-align:right;">
234.40
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
335.20
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
497.95
</td>
<td style="text-align:right;">
132.000
</td>
<td style="text-align:right;">
335.20000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
497.9500
</td>
<td style="text-align:right;">
132.000
</td>
<td style="text-align:right;">
443.7000
</td>
<td style="text-align:right;">
11.7000000
</td>
<td style="text-align:right;">
19.100000
</td>
<td style="text-align:right;">
11.7000000
</td>
<td style="text-align:right;">
19.100000
</td>
<td style="text-align:right;">
2.95
</td>
<td style="text-align:right;">
17.90
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
16.80
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
19.10
</td>
<td style="text-align:right;">
10.425
</td>
<td style="text-align:right;">
16.8000000
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
19.100000
</td>
<td style="text-align:right;">
10.425
</td>
<td style="text-align:right;">
18.333333
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
74.45714
</td>
<td style="text-align:right;">
314.7333
</td>
<td style="text-align:right;">
80.10000
</td>
<td style="text-align:right;">
275.5714
</td>
<td style="text-align:right;">
3.65
</td>
<td style="text-align:right;">
95.70
</td>
<td style="text-align:right;">
171.3
</td>
<td style="text-align:right;">
75.60
</td>
<td style="text-align:right;">
131.3
</td>
<td style="text-align:right;">
350.50
</td>
<td style="text-align:right;">
304.6
</td>
<td style="text-align:right;">
375.75
</td>
<td style="text-align:right;">
49.675
</td>
<td style="text-align:right;">
107.50000
</td>
<td style="text-align:right;">
277.4333
</td>
<td style="text-align:right;">
352.0333
</td>
<td style="text-align:right;">
49.675
</td>
<td style="text-align:right;">
245.6556
</td>
<td style="text-align:right;">
2.5428571
</td>
<td style="text-align:right;">
10.466667
</td>
<td style="text-align:right;">
2.8833333
</td>
<td style="text-align:right;">
9.042857
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
2.95
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.10
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
11.40
</td>
<td style="text-align:right;">
12.3
</td>
<td style="text-align:right;">
12.15
</td>
<td style="text-align:right;">
1.725
</td>
<td style="text-align:right;">
3.6333333
</td>
<td style="text-align:right;">
8.733333
</td>
<td style="text-align:right;">
12.200000
</td>
<td style="text-align:right;">
1.725
</td>
<td style="text-align:right;">
8.188889
</td>
</tr>
<tr>
<td style="text-align:left;">
Cebu
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
110.90000
</td>
<td style="text-align:right;">
583.2000
</td>
<td style="text-align:right;">
80.51667
</td>
<td style="text-align:right;">
541.7714
</td>
<td style="text-align:right;">
7.30
</td>
<td style="text-align:right;">
120.65
</td>
<td style="text-align:right;">
77.8
</td>
<td style="text-align:right;">
221.30
</td>
<td style="text-align:right;">
391.2
</td>
<td style="text-align:right;">
582.10
</td>
<td style="text-align:right;">
466.1
</td>
<td style="text-align:right;">
738.85
</td>
<td style="text-align:right;">
63.975
</td>
<td style="text-align:right;">
173.46667
</td>
<td style="text-align:right;">
518.4667
</td>
<td style="text-align:right;">
647.9333
</td>
<td style="text-align:right;">
63.975
</td>
<td style="text-align:right;">
446.6222
</td>
<td style="text-align:right;">
3.2000000
</td>
<td style="text-align:right;">
16.966667
</td>
<td style="text-align:right;">
2.1833333
</td>
<td style="text-align:right;">
15.871429
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
2.7
</td>
<td style="text-align:right;">
5.50
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
20.15
</td>
<td style="text-align:right;">
11.8
</td>
<td style="text-align:right;">
20.90
</td>
<td style="text-align:right;">
2.175
</td>
<td style="text-align:right;">
4.5666667
</td>
<td style="text-align:right;">
16.066667
</td>
<td style="text-align:right;">
17.866667
</td>
<td style="text-align:right;">
2.175
</td>
<td style="text-align:right;">
12.833333
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
<div id="distributional-statistics" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Distributional Statistics</h2>

<div id="histogram" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Histogram</h3>
<div id="generate-test-score-dataset" class="section level4" number="2.4.1.1">
<h4><span class="header-section-number">2.4.1.1</span> Generate Test Score Dataset</h4>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r generate text string as csv</li>
<li>r tibble matrix hand input</li>
</ul>
<p>First, we will generate a test score dataset, directly from string. Below we type line by line a dataset with four variables in comma separated (csv) format, where the first row includes the variables names. These texts could be stored in a separate file, or they could be directly included in code and read in as csv</p>
<div id="a-dataset-with-only-two-continuous-variable" class="section level5" number="2.4.1.1.1">
<h5><span class="header-section-number">2.4.1.1.1</span> A Dataset with only Two Continuous Variable</h5>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="summarize-data.html#cb193-1"></a>ar_test_scores_ec3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">107.72</span>,<span class="fl">101.28</span>,<span class="fl">105.92</span>,<span class="fl">109.31</span>,<span class="fl">104.27</span>,<span class="fl">110.27</span>,<span class="fl">91.92846154</span>,<span class="fl">81.8</span>,<span class="fl">109.0071429</span>,<span class="fl">103.07</span>,<span class="fl">98.97923077</span>,<span class="fl">101.91</span>,<span class="fl">96.49</span>,<span class="fl">97.79923077</span>,<span class="fl">99.07846154</span>,<span class="fl">99.17</span>,<span class="fl">103.51</span>,<span class="fl">112.2225</span>,<span class="fl">101.2964286</span>,<span class="fl">94.5</span>,<span class="fl">98.92</span>,<span class="fl">97.09</span>,<span class="fl">93.83989011</span>,<span class="fl">97.36304945</span>,<span class="fl">80.34</span>,<span class="fl">65.74</span>,<span class="fl">85.275</span>,<span class="fl">82.19708791</span>,<span class="fl">86.53758242</span>,<span class="fl">86.2025</span>,<span class="fl">86.63</span>,<span class="fl">82.57392857</span>,<span class="fl">83.66</span>,<span class="fl">79.76</span>,<span class="fl">75.55642857</span>,<span class="fl">86.32571429</span>,<span class="fl">66.41</span>,<span class="fl">76.06</span>,<span class="fl">44.225</span>,<span class="fl">82.28</span>,<span class="fl">47.77392857</span>,<span class="fl">70.005</span>,<span class="fl">69.13769231</span>,<span class="fl">73.52571429</span>,<span class="fl">60.51</span>,<span class="fl">56.04</span>)</span>
<span id="cb193-2"><a href="summarize-data.html#cb193-2"></a>ar_test_scores_ec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">101.72</span>,<span class="fl">101.28</span>,<span class="fl">99.92</span>,<span class="fl">103.31</span>,<span class="fl">100.27</span>,<span class="fl">104.27</span>,<span class="fl">90.23615385</span>,<span class="fl">77.8</span>,<span class="fl">103.4357143</span>,<span class="fl">97.07</span>,<span class="fl">93.13307692</span>,<span class="fl">95.91</span>,<span class="fl">92.49</span>,<span class="fl">93.95307692</span>,<span class="fl">95.38615385</span>,<span class="fl">97.17</span>,<span class="fl">99.51</span>,<span class="fl">100.3475</span>,<span class="fl">95.83214286</span>,<span class="fl">92.5</span>,<span class="fl">94.92</span>,<span class="fl">91.09</span>,<span class="fl">90.4332967</span>,<span class="fl">93.52101648</span>,<span class="fl">80.34</span>,<span class="fl">59.74</span>,<span class="fl">79.525</span>,<span class="fl">77.67236264</span>,<span class="fl">81.59252747</span>,<span class="fl">82.3275</span>,<span class="fl">80.63</span>,<span class="fl">76.98464286</span>,<span class="fl">81.66</span>,<span class="fl">79.76</span>,<span class="fl">70.59214286</span>,<span class="fl">82.46857143</span>,<span class="fl">66.41</span>,<span class="fl">74.06</span>,<span class="fl">40.475</span>,<span class="fl">76.28</span>,<span class="fl">44.18464286</span>,<span class="fl">66.255</span>,<span class="fl">65.59923077</span>,<span class="fl">69.66857143</span>,<span class="fl">60.51</span>,<span class="fl">56.04</span>)</span>
<span id="cb193-3"><a href="summarize-data.html#cb193-3"></a>mt_test_scores &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_test_scores_ec1, ar_test_scores_ec3)</span>
<span id="cb193-4"><a href="summarize-data.html#cb193-4"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;course_total_ec1p&#39;</span>,<span class="st">&#39;course_total_ec3p&#39;</span>)</span>
<span id="cb193-5"><a href="summarize-data.html#cb193-5"></a>tb_final_twovar &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_test_scores) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb193-6"><a href="summarize-data.html#cb193-6"></a><span class="kw">summary</span>(tb_final_twovar)</span></code></pre></div>
<pre><code>##  course_total_ec1p course_total_ec3p
##  Min.   : 40.48    Min.   : 44.23   
##  1st Qu.: 76.46    1st Qu.: 79.91   
##  Median : 86.35    Median : 89.28   
##  Mean   : 83.88    Mean   : 87.90   
##  3rd Qu.: 95.89    3rd Qu.:100.75   
##  Max.   :104.27    Max.   :112.22</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="summarize-data.html#cb195-1"></a><span class="kw">ff_summ_percentiles</span>(<span class="dt">df =</span> tb_final_twovar, <span class="dt">bl_statsasrows =</span> <span class="ot">TRUE</span>, <span class="dt">col2varname =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="a-dataset-with-one-continuous-variable-and-histogram" class="section level5" number="2.4.1.1.2">
<h5><span class="header-section-number">2.4.1.1.2</span> A Dataset with one Continuous Variable and Histogram</h5>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="summarize-data.html#cb196-1"></a>ar_final_scores &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">94.28442509</span>,<span class="fl">95.68817475</span>,<span class="fl">97.25219512</span>,<span class="fl">77.89268293</span>,<span class="fl">95.08795497</span>,<span class="fl">93.27380863</span>,<span class="fl">92.3</span>,<span class="fl">84.25317073</span>,<span class="fl">86.08642991</span>,<span class="fl">84.69219512</span>,<span class="fl">71.43634146</span>,<span class="fl">76.21365854</span>,<span class="fl">71.68878049</span>,<span class="fl">77.46142589</span>,<span class="fl">79.29579268</span>,<span class="fl">43.7285453</span>,<span class="fl">63.80634146</span>,<span class="fl">67.92994774</span>,<span class="fl">100.8980488</span>,<span class="fl">100.0857143</span>,<span class="fl">99.93073171</span>,<span class="fl">98.4102439</span>,<span class="fl">97.93</span>,<span class="fl">97.10359756</span>,<span class="fl">96.97121951</span>,<span class="fl">96.60292683</span>,<span class="fl">96.23317073</span>,<span class="fl">93.92243902</span>,<span class="fl">93.82243902</span>,<span class="fl">92.75390244</span>,<span class="fl">92.65775261</span>,<span class="fl">92.20444653</span>,<span class="fl">91.73463415</span>,<span class="fl">90.38321161</span>,<span class="fl">89.37414634</span>,<span class="fl">86.95932458</span>,<span class="fl">79.58686411</span>,<span class="fl">78.70878049</span>,<span class="fl">77.2497561</span>,<span class="fl">76.88195122</span>,<span class="fl">76.52987805</span>,<span class="fl">74.72114313</span>,<span class="fl">74.27488676</span>,<span class="fl">71.30268293</span>,<span class="fl">63.70256098</span>,<span class="fl">37.90426829</span>,<span class="fl">2.292682927</span>)</span>
<span id="cb196-2"><a href="summarize-data.html#cb196-2"></a>mt_test_scores &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">length</span>(ar_final_scores)), ar_final_scores)</span>
<span id="cb196-3"><a href="summarize-data.html#cb196-3"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;index&#39;</span>, <span class="st">&#39;course_final&#39;</span>)</span>
<span id="cb196-4"><a href="summarize-data.html#cb196-4"></a>tb_onevar &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_test_scores) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb196-5"><a href="summarize-data.html#cb196-5"></a><span class="kw">summary</span>(tb_onevar)</span></code></pre></div>
<pre><code>##      index       course_final    
##  Min.   : 1.0   Min.   :  2.293  
##  1st Qu.:12.5   1st Qu.: 76.372  
##  Median :24.0   Median : 86.959  
##  Mean   :24.0   Mean   : 82.415  
##  3rd Qu.:35.5   3rd Qu.: 94.686  
##  Max.   :47.0   Max.   :100.898</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="summarize-data.html#cb198-1"></a><span class="kw">ff_summ_percentiles</span>(<span class="dt">df =</span> tb_onevar, <span class="dt">bl_statsasrows =</span> <span class="ot">TRUE</span>, <span class="dt">col2varname =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="a-dataset-with-multiple-variables" class="section level5" number="2.4.1.1.3">
<h5><span class="header-section-number">2.4.1.1.3</span> A Dataset with Multiple Variables</h5>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="summarize-data.html#cb199-1"></a><span class="co">#load in data empirically by hand</span></span>
<span id="cb199-2"><a href="summarize-data.html#cb199-2"></a>txt_test_data &lt;-<span class="st"> &quot;init_prof, later_prof, class_id, exam_score</span></span>
<span id="cb199-3"><a href="summarize-data.html#cb199-3"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 102</span></span>
<span id="cb199-4"><a href="summarize-data.html#cb199-4"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 102</span></span>
<span id="cb199-5"><a href="summarize-data.html#cb199-5"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 101</span></span>
<span id="cb199-6"><a href="summarize-data.html#cb199-6"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 100</span></span>
<span id="cb199-7"><a href="summarize-data.html#cb199-7"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 100</span></span>
<span id="cb199-8"><a href="summarize-data.html#cb199-8"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 99</span></span>
<span id="cb199-9"><a href="summarize-data.html#cb199-9"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 98.5</span></span>
<span id="cb199-10"><a href="summarize-data.html#cb199-10"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 98.5</span></span>
<span id="cb199-11"><a href="summarize-data.html#cb199-11"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 97</span></span>
<span id="cb199-12"><a href="summarize-data.html#cb199-12"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 95</span></span>
<span id="cb199-13"><a href="summarize-data.html#cb199-13"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 94</span></span>
<span id="cb199-14"><a href="summarize-data.html#cb199-14"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 91</span></span>
<span id="cb199-15"><a href="summarize-data.html#cb199-15"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 91</span></span>
<span id="cb199-16"><a href="summarize-data.html#cb199-16"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 90</span></span>
<span id="cb199-17"><a href="summarize-data.html#cb199-17"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 89</span></span>
<span id="cb199-18"><a href="summarize-data.html#cb199-18"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 88.5</span></span>
<span id="cb199-19"><a href="summarize-data.html#cb199-19"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 88</span></span>
<span id="cb199-20"><a href="summarize-data.html#cb199-20"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 87</span></span>
<span id="cb199-21"><a href="summarize-data.html#cb199-21"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 87</span></span>
<span id="cb199-22"><a href="summarize-data.html#cb199-22"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 87</span></span>
<span id="cb199-23"><a href="summarize-data.html#cb199-23"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 86</span></span>
<span id="cb199-24"><a href="summarize-data.html#cb199-24"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 86</span></span>
<span id="cb199-25"><a href="summarize-data.html#cb199-25"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 84</span></span>
<span id="cb199-26"><a href="summarize-data.html#cb199-26"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 82</span></span>
<span id="cb199-27"><a href="summarize-data.html#cb199-27"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 78.5</span></span>
<span id="cb199-28"><a href="summarize-data.html#cb199-28"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 76</span></span>
<span id="cb199-29"><a href="summarize-data.html#cb199-29"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 72</span></span>
<span id="cb199-30"><a href="summarize-data.html#cb199-30"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 70.5</span></span>
<span id="cb199-31"><a href="summarize-data.html#cb199-31"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 67.5</span></span>
<span id="cb199-32"><a href="summarize-data.html#cb199-32"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 67.5</span></span>
<span id="cb199-33"><a href="summarize-data.html#cb199-33"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 67</span></span>
<span id="cb199-34"><a href="summarize-data.html#cb199-34"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 63.5</span></span>
<span id="cb199-35"><a href="summarize-data.html#cb199-35"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 60</span></span>
<span id="cb199-36"><a href="summarize-data.html#cb199-36"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 59</span></span>
<span id="cb199-37"><a href="summarize-data.html#cb199-37"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 44.5</span></span>
<span id="cb199-38"><a href="summarize-data.html#cb199-38"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 44</span></span>
<span id="cb199-39"><a href="summarize-data.html#cb199-39"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 42.5</span></span>
<span id="cb199-40"><a href="summarize-data.html#cb199-40"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 40.5</span></span>
<span id="cb199-41"><a href="summarize-data.html#cb199-41"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 40.5</span></span>
<span id="cb199-42"><a href="summarize-data.html#cb199-42"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 36.5</span></span>
<span id="cb199-43"><a href="summarize-data.html#cb199-43"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 35.5</span></span>
<span id="cb199-44"><a href="summarize-data.html#cb199-44"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 21.5</span></span>
<span id="cb199-45"><a href="summarize-data.html#cb199-45"></a><span class="st"> &#39;SW&#39;, &#39;SW&#39;, 1, 4</span></span>
<span id="cb199-46"><a href="summarize-data.html#cb199-46"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 105</span></span>
<span id="cb199-47"><a href="summarize-data.html#cb199-47"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 103</span></span>
<span id="cb199-48"><a href="summarize-data.html#cb199-48"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 102</span></span>
<span id="cb199-49"><a href="summarize-data.html#cb199-49"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 101</span></span>
<span id="cb199-50"><a href="summarize-data.html#cb199-50"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 101</span></span>
<span id="cb199-51"><a href="summarize-data.html#cb199-51"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 100.5</span></span>
<span id="cb199-52"><a href="summarize-data.html#cb199-52"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 100</span></span>
<span id="cb199-53"><a href="summarize-data.html#cb199-53"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 99</span></span>
<span id="cb199-54"><a href="summarize-data.html#cb199-54"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 97</span></span>
<span id="cb199-55"><a href="summarize-data.html#cb199-55"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 97</span></span>
<span id="cb199-56"><a href="summarize-data.html#cb199-56"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 97</span></span>
<span id="cb199-57"><a href="summarize-data.html#cb199-57"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 97</span></span>
<span id="cb199-58"><a href="summarize-data.html#cb199-58"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 96</span></span>
<span id="cb199-59"><a href="summarize-data.html#cb199-59"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 95</span></span>
<span id="cb199-60"><a href="summarize-data.html#cb199-60"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 91</span></span>
<span id="cb199-61"><a href="summarize-data.html#cb199-61"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 89</span></span>
<span id="cb199-62"><a href="summarize-data.html#cb199-62"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 85</span></span>
<span id="cb199-63"><a href="summarize-data.html#cb199-63"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 84</span></span>
<span id="cb199-64"><a href="summarize-data.html#cb199-64"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 84</span></span>
<span id="cb199-65"><a href="summarize-data.html#cb199-65"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 84</span></span>
<span id="cb199-66"><a href="summarize-data.html#cb199-66"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 83.5</span></span>
<span id="cb199-67"><a href="summarize-data.html#cb199-67"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 82.5</span></span>
<span id="cb199-68"><a href="summarize-data.html#cb199-68"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 81.5</span></span>
<span id="cb199-69"><a href="summarize-data.html#cb199-69"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 80.5</span></span>
<span id="cb199-70"><a href="summarize-data.html#cb199-70"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 80</span></span>
<span id="cb199-71"><a href="summarize-data.html#cb199-71"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 77</span></span>
<span id="cb199-72"><a href="summarize-data.html#cb199-72"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 77</span></span>
<span id="cb199-73"><a href="summarize-data.html#cb199-73"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 75</span></span>
<span id="cb199-74"><a href="summarize-data.html#cb199-74"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 75</span></span>
<span id="cb199-75"><a href="summarize-data.html#cb199-75"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 71</span></span>
<span id="cb199-76"><a href="summarize-data.html#cb199-76"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 70</span></span>
<span id="cb199-77"><a href="summarize-data.html#cb199-77"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 68</span></span>
<span id="cb199-78"><a href="summarize-data.html#cb199-78"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 63</span></span>
<span id="cb199-79"><a href="summarize-data.html#cb199-79"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 56</span></span>
<span id="cb199-80"><a href="summarize-data.html#cb199-80"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 56</span></span>
<span id="cb199-81"><a href="summarize-data.html#cb199-81"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 55.5</span></span>
<span id="cb199-82"><a href="summarize-data.html#cb199-82"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 49.5</span></span>
<span id="cb199-83"><a href="summarize-data.html#cb199-83"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 48.5</span></span>
<span id="cb199-84"><a href="summarize-data.html#cb199-84"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 47.5</span></span>
<span id="cb199-85"><a href="summarize-data.html#cb199-85"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 44.5</span></span>
<span id="cb199-86"><a href="summarize-data.html#cb199-86"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 34.5</span></span>
<span id="cb199-87"><a href="summarize-data.html#cb199-87"></a><span class="st"> &#39;MP&#39;, &#39;MP&#39;, 2, 29.5</span></span>
<span id="cb199-88"><a href="summarize-data.html#cb199-88"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 103</span></span>
<span id="cb199-89"><a href="summarize-data.html#cb199-89"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 103</span></span>
<span id="cb199-90"><a href="summarize-data.html#cb199-90"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 101</span></span>
<span id="cb199-91"><a href="summarize-data.html#cb199-91"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 96.5</span></span>
<span id="cb199-92"><a href="summarize-data.html#cb199-92"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 93.5</span></span>
<span id="cb199-93"><a href="summarize-data.html#cb199-93"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 93</span></span>
<span id="cb199-94"><a href="summarize-data.html#cb199-94"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 93</span></span>
<span id="cb199-95"><a href="summarize-data.html#cb199-95"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 92</span></span>
<span id="cb199-96"><a href="summarize-data.html#cb199-96"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 90</span></span>
<span id="cb199-97"><a href="summarize-data.html#cb199-97"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 90</span></span>
<span id="cb199-98"><a href="summarize-data.html#cb199-98"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 89</span></span>
<span id="cb199-99"><a href="summarize-data.html#cb199-99"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 86.5</span></span>
<span id="cb199-100"><a href="summarize-data.html#cb199-100"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 84.5</span></span>
<span id="cb199-101"><a href="summarize-data.html#cb199-101"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 83</span></span>
<span id="cb199-102"><a href="summarize-data.html#cb199-102"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 83</span></span>
<span id="cb199-103"><a href="summarize-data.html#cb199-103"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 82</span></span>
<span id="cb199-104"><a href="summarize-data.html#cb199-104"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 78</span></span>
<span id="cb199-105"><a href="summarize-data.html#cb199-105"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 75</span></span>
<span id="cb199-106"><a href="summarize-data.html#cb199-106"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 74.5</span></span>
<span id="cb199-107"><a href="summarize-data.html#cb199-107"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 70</span></span>
<span id="cb199-108"><a href="summarize-data.html#cb199-108"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 54.5</span></span>
<span id="cb199-109"><a href="summarize-data.html#cb199-109"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 52</span></span>
<span id="cb199-110"><a href="summarize-data.html#cb199-110"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 50</span></span>
<span id="cb199-111"><a href="summarize-data.html#cb199-111"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 42</span></span>
<span id="cb199-112"><a href="summarize-data.html#cb199-112"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 36.5</span></span>
<span id="cb199-113"><a href="summarize-data.html#cb199-113"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 28</span></span>
<span id="cb199-114"><a href="summarize-data.html#cb199-114"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 26</span></span>
<span id="cb199-115"><a href="summarize-data.html#cb199-115"></a><span class="st"> &#39;CA&#39;, &#39;MP&#39;, 3, 11</span></span>
<span id="cb199-116"><a href="summarize-data.html#cb199-116"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 103</span></span>
<span id="cb199-117"><a href="summarize-data.html#cb199-117"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 103</span></span>
<span id="cb199-118"><a href="summarize-data.html#cb199-118"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 102</span></span>
<span id="cb199-119"><a href="summarize-data.html#cb199-119"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 102</span></span>
<span id="cb199-120"><a href="summarize-data.html#cb199-120"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 101</span></span>
<span id="cb199-121"><a href="summarize-data.html#cb199-121"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 100</span></span>
<span id="cb199-122"><a href="summarize-data.html#cb199-122"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 98</span></span>
<span id="cb199-123"><a href="summarize-data.html#cb199-123"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 98</span></span>
<span id="cb199-124"><a href="summarize-data.html#cb199-124"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 98</span></span>
<span id="cb199-125"><a href="summarize-data.html#cb199-125"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 95</span></span>
<span id="cb199-126"><a href="summarize-data.html#cb199-126"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 95</span></span>
<span id="cb199-127"><a href="summarize-data.html#cb199-127"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 92.5</span></span>
<span id="cb199-128"><a href="summarize-data.html#cb199-128"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 92</span></span>
<span id="cb199-129"><a href="summarize-data.html#cb199-129"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 91</span></span>
<span id="cb199-130"><a href="summarize-data.html#cb199-130"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 90</span></span>
<span id="cb199-131"><a href="summarize-data.html#cb199-131"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 85.5</span></span>
<span id="cb199-132"><a href="summarize-data.html#cb199-132"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 84</span></span>
<span id="cb199-133"><a href="summarize-data.html#cb199-133"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 82.5</span></span>
<span id="cb199-134"><a href="summarize-data.html#cb199-134"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 81</span></span>
<span id="cb199-135"><a href="summarize-data.html#cb199-135"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 77.5</span></span>
<span id="cb199-136"><a href="summarize-data.html#cb199-136"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 77</span></span>
<span id="cb199-137"><a href="summarize-data.html#cb199-137"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 72</span></span>
<span id="cb199-138"><a href="summarize-data.html#cb199-138"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 71.5</span></span>
<span id="cb199-139"><a href="summarize-data.html#cb199-139"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 69</span></span>
<span id="cb199-140"><a href="summarize-data.html#cb199-140"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 68.5</span></span>
<span id="cb199-141"><a href="summarize-data.html#cb199-141"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 68</span></span>
<span id="cb199-142"><a href="summarize-data.html#cb199-142"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 67</span></span>
<span id="cb199-143"><a href="summarize-data.html#cb199-143"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 65.5</span></span>
<span id="cb199-144"><a href="summarize-data.html#cb199-144"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 62.5</span></span>
<span id="cb199-145"><a href="summarize-data.html#cb199-145"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 62</span></span>
<span id="cb199-146"><a href="summarize-data.html#cb199-146"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 61.5</span></span>
<span id="cb199-147"><a href="summarize-data.html#cb199-147"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 61</span></span>
<span id="cb199-148"><a href="summarize-data.html#cb199-148"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 57.5</span></span>
<span id="cb199-149"><a href="summarize-data.html#cb199-149"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 54</span></span>
<span id="cb199-150"><a href="summarize-data.html#cb199-150"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 52.5</span></span>
<span id="cb199-151"><a href="summarize-data.html#cb199-151"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 51</span></span>
<span id="cb199-152"><a href="summarize-data.html#cb199-152"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 50.5</span></span>
<span id="cb199-153"><a href="summarize-data.html#cb199-153"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 50</span></span>
<span id="cb199-154"><a href="summarize-data.html#cb199-154"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 49</span></span>
<span id="cb199-155"><a href="summarize-data.html#cb199-155"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 43</span></span>
<span id="cb199-156"><a href="summarize-data.html#cb199-156"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 39.5</span></span>
<span id="cb199-157"><a href="summarize-data.html#cb199-157"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 32.5</span></span>
<span id="cb199-158"><a href="summarize-data.html#cb199-158"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 25.5</span></span>
<span id="cb199-159"><a href="summarize-data.html#cb199-159"></a><span class="st"> &#39;CA&#39;, &#39;SN&#39;, 4, 18&quot;</span></span>
<span id="cb199-160"><a href="summarize-data.html#cb199-160"></a></span>
<span id="cb199-161"><a href="summarize-data.html#cb199-161"></a>csv_test_data =<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">text=</span>txt_test_data, <span class="dt">header=</span><span class="ot">TRUE</span>)</span>
<span id="cb199-162"><a href="summarize-data.html#cb199-162"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;first_half_professor&#39;</span>,</span>
<span id="cb199-163"><a href="summarize-data.html#cb199-163"></a>                    <span class="st">&#39;second_half_professor&#39;</span>,</span>
<span id="cb199-164"><a href="summarize-data.html#cb199-164"></a>                    <span class="st">&#39;course_id&#39;</span>, <span class="st">&#39;exam_score&#39;</span>)</span>
<span id="cb199-165"><a href="summarize-data.html#cb199-165"></a>tb_test_data &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(csv_test_data) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb199-166"><a href="summarize-data.html#cb199-166"></a><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb199-167"><a href="summarize-data.html#cb199-167"></a><span class="kw">summary</span>(tb_test_data)</span></code></pre></div>
<pre><code>##  first_half_professor second_half_professor   course_id       exam_score    
##   &#39;CA&#39;:72              &#39;MP&#39;:70              Min.   :1.000   Min.   :  4.00  
##   &#39;MP&#39;:42              &#39;SN&#39;:44              1st Qu.:1.000   1st Qu.: 60.00  
##   &#39;SW&#39;:43              &#39;SW&#39;:43              Median :2.000   Median : 82.00  
##                                             Mean   :2.465   Mean   : 75.08  
##                                             3rd Qu.:4.000   3rd Qu.: 94.00  
##                                             Max.   :4.000   Max.   :105.00</code></pre>
</div>
</div>
<div id="test-score-distributions" class="section level4" number="2.4.1.2">
<h4><span class="header-section-number">2.4.1.2</span> Test Score Distributions</h4>
<div id="histogram-1" class="section level5" number="2.4.1.2.1">
<h5><span class="header-section-number">2.4.1.2.1</span> Histogram</h5>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="summarize-data.html#cb201-1"></a><span class="kw">ggplot</span>(tb_final_twovar, <span class="kw">aes</span>(<span class="dt">x=</span>ar_test_scores_ec3)) <span class="op">+</span></span>
<span id="cb201-2"><a href="summarize-data.html#cb201-2"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins=</span><span class="dv">25</span>) <span class="op">+</span></span>
<span id="cb201-3"><a href="summarize-data.html#cb201-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="kw">paste0</span>(<span class="st">&#39;Sandbox: Final Distribution (Econ 2370, FW)&#39;</span>),</span>
<span id="cb201-4"><a href="summarize-data.html#cb201-4"></a>       <span class="dt">caption =</span> <span class="kw">paste0</span>(<span class="st">&#39;FW Section, formula:&#39;</span>,</span>
<span id="cb201-5"><a href="summarize-data.html#cb201-5"></a>                        <span class="st">&#39;0.3*exam1Perc + 0.3*exam2Perc + &#39;</span>,</span>
<span id="cb201-6"><a href="summarize-data.html#cb201-6"></a>                        <span class="st">&#39;0.42*HWtotalPerc + 0.03*AttendancePerc </span><span class="ch">\n</span><span class="st">&#39;</span>,</span>
<span id="cb201-7"><a href="summarize-data.html#cb201-7"></a>                        <span class="st">&#39;+ perfect attendance + 0.03 per Extra Credit&#39;</span>)) <span class="op">+</span></span>
<span id="cb201-8"><a href="summarize-data.html#cb201-8"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-79-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="summarize-data.html#cb202-1"></a><span class="kw">ggplot</span>(tb_test_data, <span class="kw">aes</span>(<span class="dt">x=</span>exam_score)) <span class="op">+</span></span>
<span id="cb202-2"><a href="summarize-data.html#cb202-2"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins=</span><span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb202-3"><a href="summarize-data.html#cb202-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="kw">paste0</span>(<span class="st">&#39;Exam Distribution&#39;</span>),</span>
<span id="cb202-4"><a href="summarize-data.html#cb202-4"></a>       <span class="dt">caption =</span> <span class="st">&#39;All Sections&#39;</span>) <span class="op">+</span></span>
<span id="cb202-5"><a href="summarize-data.html#cb202-5"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-80-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
</div>
<div id="summarize-multiple-variables" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Summarize Multiple Variables</h2>

<div id="generate-replace-variables" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Generate Replace Variables</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="replace-na-for-multiple-variables" class="section level4" number="2.5.1.1">
<h4><span class="header-section-number">2.5.1.1</span> Replace NA for Multiple Variables</h4>
<p>Replace some variables NA by some values, and other variables’ NAs by other values.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="summarize-data.html#cb203-1"></a><span class="co"># Define</span></span>
<span id="cb203-2"><a href="summarize-data.html#cb203-2"></a>it_N &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb203-3"><a href="summarize-data.html#cb203-3"></a>it_M &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb203-4"><a href="summarize-data.html#cb203-4"></a>svr_id &lt;-<span class="st"> &#39;date&#39;</span></span>
<span id="cb203-5"><a href="summarize-data.html#cb203-5"></a></span>
<span id="cb203-6"><a href="summarize-data.html#cb203-6"></a><span class="co"># NA dataframe</span></span>
<span id="cb203-7"><a href="summarize-data.html#cb203-7"></a>df_NA &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span>it_M)) <span class="op">%&gt;%</span></span>
<span id="cb203-8"><a href="summarize-data.html#cb203-8"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> svr_id) <span class="op">%&gt;%</span></span>
<span id="cb203-9"><a href="summarize-data.html#cb203-9"></a><span class="st">  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&quot;V&quot;</span>)),</span>
<span id="cb203-10"><a href="summarize-data.html#cb203-10"></a>            <span class="kw">funs</span>(<span class="kw">str_replace</span>(., <span class="st">&quot;V&quot;</span>, <span class="st">&quot;var&quot;</span>)))</span>
<span id="cb203-11"><a href="summarize-data.html#cb203-11"></a><span class="kw">kable</span>(df_NA) <span class="op">%&gt;%</span></span>
<span id="cb203-12"><a href="summarize-data.html#cb203-12"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var1
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var3
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var4
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="summarize-data.html#cb204-1"></a><span class="co"># Replace NA</span></span>
<span id="cb204-2"><a href="summarize-data.html#cb204-2"></a>df_NA_replace &lt;-<span class="st"> </span>df_NA <span class="op">%&gt;%</span></span>
<span id="cb204-3"><a href="summarize-data.html#cb204-3"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="kw">one_of</span>(<span class="kw">c</span>(<span class="st">&#39;var1&#39;</span>, <span class="st">&#39;var2&#39;</span>))), <span class="kw">list</span>(<span class="op">~</span><span class="kw">replace_na</span>(., <span class="dv">0</span>))) <span class="op">%&gt;%</span></span>
<span id="cb204-4"><a href="summarize-data.html#cb204-4"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="kw">one_of</span>(<span class="kw">c</span>(<span class="st">&#39;var3&#39;</span>, <span class="st">&#39;var5&#39;</span>))), <span class="kw">list</span>(<span class="op">~</span><span class="kw">replace_na</span>(., <span class="dv">99</span>)))</span>
<span id="cb204-5"><a href="summarize-data.html#cb204-5"></a><span class="kw">kable</span>(df_NA_replace) <span class="op">%&gt;%</span></span>
<span id="cb204-6"><a href="summarize-data.html#cb204-6"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var3
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
99
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
99
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
99
</td>
</tr>
</tbody>
</table>
</div>
<div id="cumulative-sum-multiple-variables" class="section level4" number="2.5.1.2">
<h4><span class="header-section-number">2.5.1.2</span> Cumulative Sum Multiple Variables</h4>
<p>Each row is a different date, each column is the profit a firms earns on a date, we want to compute cumulatively how much a person is earning. Also renames variable names below jointly.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="summarize-data.html#cb205-1"></a><span class="co"># Define</span></span>
<span id="cb205-2"><a href="summarize-data.html#cb205-2"></a>it_N &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb205-3"><a href="summarize-data.html#cb205-3"></a>it_M &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb205-4"><a href="summarize-data.html#cb205-4"></a>svr_id &lt;-<span class="st"> &#39;date&#39;</span></span>
<span id="cb205-5"><a href="summarize-data.html#cb205-5"></a></span>
<span id="cb205-6"><a href="summarize-data.html#cb205-6"></a><span class="co"># random dataframe, daily profit of firms</span></span>
<span id="cb205-7"><a href="summarize-data.html#cb205-7"></a><span class="co"># dp_fx: daily profit firm ID something</span></span>
<span id="cb205-8"><a href="summarize-data.html#cb205-8"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb205-9"><a href="summarize-data.html#cb205-9"></a>df_daily_profit &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(<span class="kw">rnorm</span>(it_N<span class="op">*</span>it_M), <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span>it_M)) <span class="op">%&gt;%</span></span>
<span id="cb205-10"><a href="summarize-data.html#cb205-10"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> svr_id) <span class="op">%&gt;%</span></span>
<span id="cb205-11"><a href="summarize-data.html#cb205-11"></a><span class="st">  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&quot;V&quot;</span>)),</span>
<span id="cb205-12"><a href="summarize-data.html#cb205-12"></a>            <span class="kw">funs</span>(<span class="kw">str_replace</span>(., <span class="st">&quot;V&quot;</span>, <span class="st">&quot;dp_f&quot;</span>)))</span>
<span id="cb205-13"><a href="summarize-data.html#cb205-13"></a><span class="kw">kable</span>(df_daily_profit) <span class="op">%&gt;%</span></span>
<span id="cb205-14"><a href="summarize-data.html#cb205-14"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5604756
</td>
<td style="text-align:right;">
0.0705084
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
0.4007715
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.2301775
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
0.1106827
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1.5587083
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
-0.5558411
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="summarize-data.html#cb206-1"></a><span class="co"># cumulative sum with suffix</span></span>
<span id="cb206-2"><a href="summarize-data.html#cb206-2"></a>df_cumu_profit_suffix &lt;-<span class="st"> </span>df_daily_profit <span class="op">%&gt;%</span></span>
<span id="cb206-3"><a href="summarize-data.html#cb206-3"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="kw">contains</span>(<span class="st">&#39;dp_f&#39;</span>)), <span class="dt">.funs =</span> <span class="kw">list</span>(<span class="dt">cumu =</span> <span class="op">~</span><span class="kw">cumsum</span>(.)))</span>
<span id="cb206-4"><a href="summarize-data.html#cb206-4"></a><span class="kw">kable</span>(df_cumu_profit_suffix) <span class="op">%&gt;%</span></span>
<span id="cb206-5"><a href="summarize-data.html#cb206-5"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f1_cumu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f2_cumu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f3_cumu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f4_cumu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f5_cumu
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5604756
</td>
<td style="text-align:right;">
0.0705084
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-0.5604756
</td>
<td style="text-align:right;">
0.0705084
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
0.4007715
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.2301775
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
-0.7906531
</td>
<td style="text-align:right;">
0.1997961
</td>
<td style="text-align:right;">
-0.8041450
</td>
<td style="text-align:right;">
0.7784198
</td>
<td style="text-align:right;">
0.5114542
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1.5587083
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.7680552
</td>
<td style="text-align:right;">
1.9148611
</td>
<td style="text-align:right;">
-1.4909979
</td>
<td style="text-align:right;">
1.1382337
</td>
<td style="text-align:right;">
-0.0443870
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="summarize-data.html#cb207-1"></a><span class="co"># cumulative sum variables naming to prefix</span></span>
<span id="cb207-2"><a href="summarize-data.html#cb207-2"></a>df_cumu_profit &lt;-<span class="st"> </span>df_cumu_profit_suffix <span class="op">%&gt;%</span></span>
<span id="cb207-3"><a href="summarize-data.html#cb207-3"></a><span class="st">  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">contains</span>( <span class="st">&quot;_cumu&quot;</span>) ), <span class="kw">list</span>(<span class="op">~</span><span class="kw">paste</span>(<span class="st">&quot;cp_f&quot;</span>, <span class="kw">gsub</span>(<span class="st">&quot;_cumu&quot;</span>, <span class="st">&quot;&quot;</span>, .), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))) <span class="op">%&gt;%</span></span>
<span id="cb207-4"><a href="summarize-data.html#cb207-4"></a><span class="st">  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">contains</span>( <span class="st">&quot;cp_f&quot;</span>) ), <span class="kw">list</span>(<span class="op">~</span><span class="kw">gsub</span>(<span class="st">&quot;dp_f&quot;</span>, <span class="st">&quot;&quot;</span>, .)))</span>
<span id="cb207-5"><a href="summarize-data.html#cb207-5"></a><span class="kw">kable</span>(df_cumu_profit) <span class="op">%&gt;%</span></span>
<span id="cb207-6"><a href="summarize-data.html#cb207-6"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
dp_f5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cp_f1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cp_f2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cp_f3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cp_f4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cp_f5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5604756
</td>
<td style="text-align:right;">
0.0705084
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-0.5604756
</td>
<td style="text-align:right;">
0.0705084
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
0.4007715
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.2301775
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
-0.7906531
</td>
<td style="text-align:right;">
0.1997961
</td>
<td style="text-align:right;">
-0.8041450
</td>
<td style="text-align:right;">
0.7784198
</td>
<td style="text-align:right;">
0.5114542
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1.5587083
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.7680552
</td>
<td style="text-align:right;">
1.9148611
</td>
<td style="text-align:right;">
-1.4909979
</td>
<td style="text-align:right;">
1.1382337
</td>
<td style="text-align:right;">
-0.0443870
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="array-matrix-dataframe.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
