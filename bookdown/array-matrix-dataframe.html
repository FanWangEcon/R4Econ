<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R</title>
  <meta name="description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R" />
  
  <meta name="twitter:description" content="<p>Run system executable and shell commands.
Activate conda environment with shell script.</p>" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2021-06-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="summarize-data.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Structures and Estimation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a>
<ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#lists"><i class="fa fa-check"></i><b>1.1.1</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#variables-in-dataframes"><i class="fa fa-check"></i><b>1.4</b> Variables in Dataframes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-dataframe"><i class="fa fa-check"></i><b>1.4.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="1.4.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#factor-label-and-combine"><i class="fa fa-check"></i><b>1.4.2</b> Factor Label and Combine</a></li>
<li class="chapter" data-level="1.4.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#drawly-random-rows"><i class="fa fa-check"></i><b>1.4.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="1.4.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>1.4.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="1.4.5" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-dataframes"><i class="fa fa-check"></i><b>1.4.5</b> String Dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>2</b> Summarize Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="summarize-data.html"><a href="summarize-data.html#counting-observation"><i class="fa fa-check"></i><b>2.1</b> Counting Observation</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-data.html"><a href="summarize-data.html#uncount"><i class="fa fa-check"></i><b>2.1.1</b> Uncount</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="summarize-data.html"><a href="summarize-data.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.2</b> Sorting, Indexing, Slicing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="summarize-data.html"><a href="summarize-data.html#sorting"><i class="fa fa-check"></i><b>2.2.1</b> Sorting</a></li>
<li class="chapter" data-level="2.2.2" data-path="summarize-data.html"><a href="summarize-data.html#group-sort-and-slice"><i class="fa fa-check"></i><b>2.2.2</b> Group, Sort and Slice</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="summarize-data.html"><a href="summarize-data.html#group-statistics"><i class="fa fa-check"></i><b>2.3</b> Group Statistics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="summarize-data.html"><a href="summarize-data.html#cumulative-statistics-within-group"><i class="fa fa-check"></i><b>2.3.1</b> Cumulative Statistics within Group</a></li>
<li class="chapter" data-level="2.3.2" data-path="summarize-data.html"><a href="summarize-data.html#groups-statistics"><i class="fa fa-check"></i><b>2.3.2</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.3.3" data-path="summarize-data.html"><a href="summarize-data.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.3.3</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.3.4" data-path="summarize-data.html"><a href="summarize-data.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.3.4</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="summarize-data.html"><a href="summarize-data.html#distributional-statistics"><i class="fa fa-check"></i><b>2.4</b> Distributional Statistics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="summarize-data.html"><a href="summarize-data.html#histogram"><i class="fa fa-check"></i><b>2.4.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summarize-data.html"><a href="summarize-data.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.5</b> Summarize Multiple Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="summarize-data.html"><a href="summarize-data.html#generate-replace-variables"><i class="fa fa-check"></i><b>2.5.1</b> Generate Replace Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mx1-by-n-to-mxq-by-n1"><i class="fa fa-check"></i><b>3.2.1</b> (Mx1 by N) to (MxQ by N+1)</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mx1-by-1"><i class="fa fa-check"></i><b>3.2.2</b> (MxP by N) to (Mx1 by 1)</a></li>
<li class="chapter" data-level="3.2.3" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mxq-by-nz"><i class="fa fa-check"></i><b>3.2.3</b> (MxP by N) to (MxQ by N+Z)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-and-sapply"><i class="fa fa-check"></i><b>3.3.1</b> Apply and Sapply</a></li>
<li class="chapter" data-level="3.3.2" data-path="functions.html"><a href="functions.html#mutate-evaluate-functions"><i class="fa fa-check"></i><b>3.3.2</b> Mutate Evaluate Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html"><i class="fa fa-check"></i><b>4</b> Multi-dimensional Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-gather-bind-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate, Gather, Bind and Join</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
<li class="chapter" data-level="4.1.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#gather-files"><i class="fa fa-check"></i><b>4.1.3</b> Gather Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#long-to-wide"><i class="fa fa-check"></i><b>4.2.1</b> Long to Wide</a></li>
<li class="chapter" data-level="4.2.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-to-long"><i class="fa fa-check"></i><b>4.2.2</b> Wide to Long</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-and-compare"><i class="fa fa-check"></i><b>4.3</b> Join and Compare</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#find-closest-neighbor-on-grid"><i class="fa fa-check"></i><b>4.3.1</b> Find Closest Neighbor on Grid</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.1</b> OLS and IV</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.1.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.1.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.2.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html"><i class="fa fa-check"></i><b>6</b> Nonlinear and Other Regressions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
<li class="chapter" data-level="6.1.2" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#logistic-choice-model-with-aggregate-shares"><i class="fa fa-check"></i><b>6.1.2</b> Logistic Choice Model with Aggregate Shares</a></li>
<li class="chapter" data-level="6.1.3" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#prices-from-aggregate-shares-in-logistic-choice-model"><i class="fa fa-check"></i><b>6.1.3</b> Prices from Aggregate Shares in Logistic Choice Model</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression"><i class="fa fa-check"></i><b>6.2</b> Quantile Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression-basics"><i class="fa fa-check"></i><b>6.2.1</b> Quantile Regression Basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1</b> Bisection</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#bisection-1"><i class="fa fa-check"></i><b>7.1.1</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathematics.html"><a href="mathematics.html"><i class="fa fa-check"></i><b>8</b> Mathematics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mathematics.html"><a href="mathematics.html#production-function"><i class="fa fa-check"></i><b>8.1</b> Production Function</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="mathematics.html"><a href="mathematics.html#nested-ces-production-function"><i class="fa fa-check"></i><b>8.1.1</b> Nested CES Production Function</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathematics.html"><a href="mathematics.html#basics"><i class="fa fa-check"></i><b>8.2</b> Basics</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="mathematics.html"><a href="mathematics.html#log-with-different-bases-and-exponents"><i class="fa fa-check"></i><b>8.2.1</b> Log with Different Bases and Exponents</a></li>
<li class="chapter" data-level="8.2.2" data-path="mathematics.html"><a href="mathematics.html#rescale-a-parameter-with-fixed-min-and-max"><i class="fa fa-check"></i><b>8.2.2</b> Rescale a Parameter with Fixed Min and Max</a></li>
<li class="chapter" data-level="8.2.3" data-path="mathematics.html"><a href="mathematics.html#find-nearest"><i class="fa fa-check"></i><b>8.2.3</b> Find Nearest</a></li>
<li class="chapter" data-level="8.2.4" data-path="mathematics.html"><a href="mathematics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.2.4</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="mathematics.html"><a href="mathematics.html#inequality-models"><i class="fa fa-check"></i><b>8.3</b> Inequality Models</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mathematics.html"><a href="mathematics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.3.1</b> GINI Discrete Sample</a></li>
<li class="chapter" data-level="8.3.2" data-path="mathematics.html"><a href="mathematics.html#gini-formula-for-discrete-random-varialbe"><i class="fa fa-check"></i><b>8.3.2</b> GINI Formula for Discrete Random Varialbe</a></li>
<li class="chapter" data-level="8.3.3" data-path="mathematics.html"><a href="mathematics.html#atkinson-inequality-index"><i class="fa fa-check"></i><b>8.3.3</b> Atkinson Inequality Index</a></li>
<li class="chapter" data-level="8.3.4" data-path="mathematics.html"><a href="mathematics.html#location-population-and-pollution"><i class="fa fa-check"></i><b>8.3.4</b> Location, Population, and Pollution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>9</b> Statistics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistics.html"><a href="statistics.html#distributions"><i class="fa fa-check"></i><b>9.1</b> Distributions</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="statistics.html"><a href="statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>9.1.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="statistics.html"><a href="statistics.html#discrete-random-variable"><i class="fa fa-check"></i><b>9.2</b> Discrete Random Variable</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="statistics.html"><a href="statistics.html#discrete-approximation-of-continuous-random-variables"><i class="fa fa-check"></i><b>9.2.1</b> Discrete Approximation of Continuous Random Variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="statistics.html"><a href="statistics.html#obtaining-joint-distribution-from-marginal-with-rectilinear-restrictions"><i class="fa fa-check"></i><b>9.2.2</b> Obtaining Joint Distribution from Marginal with Rectilinear Restrictions</a></li>
<li class="chapter" data-level="9.2.3" data-path="statistics.html"><a href="statistics.html#obtaining-joint-distribution-from-conditional-with-rectilinear-restrictions"><i class="fa fa-check"></i><b>9.2.3</b> Obtaining Joint Distribution from Conditional with Rectilinear Restrictions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>10</b> Tables and Graphs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>10.1</b> R Base Plots</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>10.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-related-plots"><i class="fa fa-check"></i><b>10.2</b> ggplot Line Related Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-plot"><i class="fa fa-check"></i><b>10.2.1</b> ggplot Line Plot</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-related-plots"><i class="fa fa-check"></i><b>10.3</b> ggplot Scatter Related Plots</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-plot"><i class="fa fa-check"></i><b>10.3.1</b> ggplot Scatter Plot</a></li>
<li class="chapter" data-level="10.3.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-multiple-scatter-lines-with-facet-wrap"><i class="fa fa-check"></i><b>10.3.2</b> ggplot Multiple Scatter-Lines with Facet Wrap</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>10.4</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>10.4.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>11</b> Get Data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="get-data.html"><a href="get-data.html#environmental-data"><i class="fa fa-check"></i><b>11.1</b> Environmental Data</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="get-data.html"><a href="get-data.html#ecmwf-era5-data"><i class="fa fa-check"></i><b>11.1.1</b> ECMWF ERA5 Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="code-and-development.html"><a href="code-and-development.html"><i class="fa fa-check"></i><b>12</b> Code and Development</a>
<ul>
<li class="chapter" data-level="12.1" data-path="code-and-development.html"><a href="code-and-development.html#files-in-and-out"><i class="fa fa-check"></i><b>12.1</b> Files In and Out</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="code-and-development.html"><a href="code-and-development.html#file-path"><i class="fa fa-check"></i><b>12.1.1</b> File Path</a></li>
<li class="chapter" data-level="12.1.2" data-path="code-and-development.html"><a href="code-and-development.html#text-to-file"><i class="fa fa-check"></i><b>12.1.2</b> Text to File</a></li>
<li class="chapter" data-level="12.1.3" data-path="code-and-development.html"><a href="code-and-development.html#rmd-to-html"><i class="fa fa-check"></i><b>12.1.3</b> Rmd to HTML</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="code-and-development.html"><a href="code-and-development.html#python-with-r"><i class="fa fa-check"></i><b>12.2</b> Python with R</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="code-and-development.html"><a href="code-and-development.html#reticulate-basics"><i class="fa fa-check"></i><b>12.2.1</b> Reticulate Basics</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="code-and-development.html"><a href="code-and-development.html#command-line"><i class="fa fa-check"></i><b>12.3</b> Command Line</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="code-and-development.html"><a href="code-and-development.html#shell-and-system-commands"><i class="fa fa-check"></i><b>12.3.1</b> Shell and System Commands</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 List</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Array</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Matrix</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Variables in Dataframes</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-data-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Data links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 Counting Observation</span> links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.2</b> <span>Section 2.2 Sorting, Indexing, Slicing</span> links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-group-statisticsgroup-statistics-links"><i class="fa fa-check"></i><b>A.2.3</b> <span>Section 2.3 Group Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.4</b> <span>Section 2.4 Distributional Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.5</b> <span>Section 2.5 Summarize Multiple Variables</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Dataframe Mutate</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Dataframe Do Anything</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Apply and pmap</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#multi-dimensional-data-structures-links"><i class="fa fa-check"></i><b>A.4</b> Multi-dimensional Data Structures links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-gather-bind-and-joingenerate-gather-bind-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Generate, Gather, Bind and Join</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Wide and Long</span> links</a></li>
<li class="chapter" data-level="A.4.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.3-join-and-comparejoin-and-compare-links"><i class="fa fa-check"></i><b>A.4.3</b> <span>Section 4.3 Join and Compare</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 OLS and IV</span> links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.2</b> <span>Section 5.2 Decomposition</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-and-other-regressions-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear and Other Regressions links</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> <span>Section 6.1 Logit Regression</span> links</a></li>
<li class="chapter" data-level="A.6.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.2-quantile-regressionquantile-regression-links"><i class="fa fa-check"></i><b>A.6.2</b> <span>Section 6.2 Quantile Regression</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-bisectionbisection-links"><i class="fa fa-check"></i><b>A.7.1</b> <span>Section 7.1 Bisection</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathematics-links"><i class="fa fa-check"></i><b>A.8</b> Mathematics links</a>
<ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-production-functionproduction-function-links"><i class="fa fa-check"></i><b>A.8.1</b> <span>Section 8.1 Production Function</span> links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-basicsbasics-links"><i class="fa fa-check"></i><b>A.8.2</b> <span>Section 8.2 Basics</span> links</a></li>
<li class="chapter" data-level="A.8.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.3-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.3</b> <span>Section 8.3 Inequality Models</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#statistics-links"><i class="fa fa-check"></i><b>A.9</b> Statistics links</a>
<ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.9.1</b> <span>Section 9.1 Distributions</span> links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-discrete-random-variablediscrete-random-variable-links"><i class="fa fa-check"></i><b>A.9.2</b> <span>Section 9.2 Discrete Random Variable</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.10" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.10</b> Tables and Graphs links</a>
<ul>
<li class="chapter" data-level="A.10.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.10.1</b> <span>Section 10.1 R Base Plots</span> links</a></li>
<li class="chapter" data-level="A.10.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.2-ggplot-line-related-plotsggplot-line-related-plots-links"><i class="fa fa-check"></i><b>A.10.2</b> <span>Section 10.2 ggplot Line Related Plots</span> links</a></li>
<li class="chapter" data-level="A.10.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.3-ggplot-scatter-related-plotsggplot-scatter-related-plots-links"><i class="fa fa-check"></i><b>A.10.3</b> <span>Section 10.3 ggplot Scatter Related Plots</span> links</a></li>
<li class="chapter" data-level="A.10.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.4-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.10.4</b> <span>Section 10.4 Write and Read Plots</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.11" data-path="index-and-code-links.html"><a href="index-and-code-links.html#get-data-links"><i class="fa fa-check"></i><b>A.11</b> Get Data links</a>
<ul>
<li class="chapter" data-level="A.11.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-11.1-environmental-dataenvironmental-data-links"><i class="fa fa-check"></i><b>A.11.1</b> <span>Section 11.1 Environmental Data</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.12" data-path="index-and-code-links.html"><a href="index-and-code-links.html#code-and-development-links"><i class="fa fa-check"></i><b>A.12</b> Code and Development links</a>
<ul>
<li class="chapter" data-level="A.12.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.1-files-in-and-outfiles-in-and-out-links"><i class="fa fa-check"></i><b>A.12.1</b> <span>Section 12.1 Files In and Out</span> links</a></li>
<li class="chapter" data-level="A.12.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.2-python-with-rpython-with-r-links"><i class="fa fa-check"></i><b>A.12.2</b> <span>Section 12.2 Python with R</span> links</a></li>
<li class="chapter" data-level="A.12.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.3-command-linecommand-line-links"><i class="fa fa-check"></i><b>A.12.3</b> <span>Section 12.3 Command Line</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Structures, Estimation and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="array-matrix-dataframe" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Array, Matrix, Dataframe</h1>

<div id="list" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> List</h2>

<div id="lists" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Lists</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r list tutorial</li>
<li>r vector vs list</li>
<li>r initialize empty multiple element list</li>
<li>r name rows and columns of 2 dimensional list</li>
<li>r row and colum names of list</li>
<li>list dimnames</li>
<li>r named list to string</li>
</ul>
<div id="iteratively-build-up-a-list-of-strings" class="section level4" number="1.1.1.1">
<h4><span class="header-section-number">1.1.1.1</span> Iteratively Build Up a List of Strings</h4>
<p>Build up a list of strings, where the strings share common components. Iteratre over lists to generate variations in elements of the string list.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="array-matrix-dataframe.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># common string components</span></span>
<span id="cb1-2"><a href="array-matrix-dataframe.html#cb1-2" aria-hidden="true" tabindex="-1"></a>st_base_name <span class="ot">&lt;-</span> <span class="st">&#39;snwx_v_planner_docdense&#39;</span></span>
<span id="cb1-3"><a href="array-matrix-dataframe.html#cb1-3" aria-hidden="true" tabindex="-1"></a>st_base_middle <span class="ot">&lt;-</span> <span class="st">&#39;b1_xi0_manna_88&#39;</span></span>
<span id="cb1-4"><a href="array-matrix-dataframe.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># numeric values to loop over</span></span>
<span id="cb1-5"><a href="array-matrix-dataframe.html#cb1-5" aria-hidden="true" tabindex="-1"></a>ar_st_beta_val <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;bt60&#39;</span>, <span class="st">&#39;bt70&#39;</span>, <span class="st">&#39;bt80&#39;</span>, <span class="st">&#39;bt90&#39;</span>)</span>
<span id="cb1-6"><a href="array-matrix-dataframe.html#cb1-6" aria-hidden="true" tabindex="-1"></a>ar_st_edu_type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;e1lm2&#39;</span>, <span class="st">&#39;e2hm2&#39;</span>)</span>
<span id="cb1-7"><a href="array-matrix-dataframe.html#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="array-matrix-dataframe.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize string list</span></span>
<span id="cb1-9"><a href="array-matrix-dataframe.html#cb1-9" aria-hidden="true" tabindex="-1"></a>ls_snm <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(ar_st_beta_val)<span class="sc">*</span><span class="fu">length</span>(ar_st_edu_type))</span>
<span id="cb1-10"><a href="array-matrix-dataframe.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="array-matrix-dataframe.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># generate list </span></span>
<span id="cb1-12"><a href="array-matrix-dataframe.html#cb1-12" aria-hidden="true" tabindex="-1"></a>it_ctr <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-13"><a href="array-matrix-dataframe.html#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (st_beta_val <span class="cf">in</span> ar_st_beta_val) {</span>
<span id="cb1-14"><a href="array-matrix-dataframe.html#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (st_edu_type <span class="cf">in</span> ar_st_edu_type) {</span>
<span id="cb1-15"><a href="array-matrix-dataframe.html#cb1-15" aria-hidden="true" tabindex="-1"></a>    it_ctr <span class="ot">=</span> it_ctr <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-16"><a href="array-matrix-dataframe.html#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># snm_file_name &lt;- &#39;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt90&#39;</span></span>
<span id="cb1-17"><a href="array-matrix-dataframe.html#cb1-17" aria-hidden="true" tabindex="-1"></a>    snm_file_name <span class="ot">&lt;-</span> <span class="fu">paste</span>(st_base_name, st_edu_type, st_base_middle, st_beta_val, <span class="at">sep =</span><span class="st">&#39;_&#39;</span>)</span>
<span id="cb1-18"><a href="array-matrix-dataframe.html#cb1-18" aria-hidden="true" tabindex="-1"></a>    ls_snm[it_ctr] <span class="ot">&lt;-</span> snm_file_name</span>
<span id="cb1-19"><a href="array-matrix-dataframe.html#cb1-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-20"><a href="array-matrix-dataframe.html#cb1-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-21"><a href="array-matrix-dataframe.html#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="array-matrix-dataframe.html#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># print</span></span>
<span id="cb1-23"><a href="array-matrix-dataframe.html#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (snm <span class="cf">in</span> ls_snm) {</span>
<span id="cb1-24"><a href="array-matrix-dataframe.html#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(snm)</span>
<span id="cb1-25"><a href="array-matrix-dataframe.html#cb1-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt60&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt60&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt70&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt70&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt80&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt80&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt90&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt90&quot;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="array-matrix-dataframe.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if string in string</span></span>
<span id="cb3-2"><a href="array-matrix-dataframe.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;snwx_v_planner&#39;</span>, snm)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="named-list-of-matrixes" class="section level4" number="1.1.1.2">
<h4><span class="header-section-number">1.1.1.2</span> Named List of Matrixes</h4>
<p>Save a list of matrixes. Retrieve Element of that list via loop.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="array-matrix-dataframe.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define an array to loop over</span></span>
<span id="cb5-2"><a href="array-matrix-dataframe.html#cb5-2" aria-hidden="true" tabindex="-1"></a>ar_fl_mean <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb5-3"><a href="array-matrix-dataframe.html#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="array-matrix-dataframe.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># store restuls in named list</span></span>
<span id="cb5-5"><a href="array-matrix-dataframe.html#cb5-5" aria-hidden="true" tabindex="-1"></a>ls_mt_res <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(ar_fl_mean))</span>
<span id="cb5-6"><a href="array-matrix-dataframe.html#cb5-6" aria-hidden="true" tabindex="-1"></a>ar_st_names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mean&#39;</span>, ar_fl_mean)</span>
<span id="cb5-7"><a href="array-matrix-dataframe.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ls_mt_res) <span class="ot">&lt;-</span> ar_st_names</span>
<span id="cb5-8"><a href="array-matrix-dataframe.html#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="array-matrix-dataframe.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop and generat a list of dataframes</span></span>
<span id="cb5-10"><a href="array-matrix-dataframe.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(ar_fl_mean))) {</span>
<span id="cb5-11"><a href="array-matrix-dataframe.html#cb5-11" aria-hidden="true" tabindex="-1"></a>  fl_mean <span class="ot">=</span> ar_fl_mean[it_fl_mean]</span>
<span id="cb5-12"><a href="array-matrix-dataframe.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="array-matrix-dataframe.html#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dataframe</span></span>
<span id="cb5-14"><a href="array-matrix-dataframe.html#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(it_fl_mean)</span>
<span id="cb5-15"><a href="array-matrix-dataframe.html#cb5-15" aria-hidden="true" tabindex="-1"></a>  tb_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(</span>
<span id="cb5-16"><a href="array-matrix-dataframe.html#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span>fl_mean,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb5-17"><a href="array-matrix-dataframe.html#cb5-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="array-matrix-dataframe.html#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="array-matrix-dataframe.html#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(<span class="fu">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;varb&#39;</span>,<span class="st">&#39;vartheta&#39;</span>)))</span>
<span id="cb5-20"><a href="array-matrix-dataframe.html#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="array-matrix-dataframe.html#cb5-21" aria-hidden="true" tabindex="-1"></a>  ls_mt_res[[it_fl_mean]] <span class="ot">=</span> tb_combine</span>
<span id="cb5-22"><a href="array-matrix-dataframe.html#cb5-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-23"><a href="array-matrix-dataframe.html#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="array-matrix-dataframe.html#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve elements</span></span>
<span id="cb5-25"><a href="array-matrix-dataframe.html#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res[[<span class="dv">1</span>]])</span>
<span id="cb5-26"><a href="array-matrix-dataframe.html#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res<span class="sc">$</span>mean10)</span>
<span id="cb5-27"><a href="array-matrix-dataframe.html#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res[[<span class="st">&#39;mean10&#39;</span>]])</span>
<span id="cb5-28"><a href="array-matrix-dataframe.html#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="array-matrix-dataframe.html#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Print via Loop </span></span>
<span id="cb5-30"><a href="array-matrix-dataframe.html#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(ar_fl_mean))) {</span>
<span id="cb5-31"><a href="array-matrix-dataframe.html#cb5-31" aria-hidden="true" tabindex="-1"></a>  tb_combine <span class="ot">=</span> ls_mt_res[[it_fl_mean]]</span>
<span id="cb5-32"><a href="array-matrix-dataframe.html#cb5-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(tb_combine)</span>
<span id="cb5-33"><a href="array-matrix-dataframe.html#cb5-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="one-dimensional-named-list" class="section level4" number="1.1.1.3">
<h4><span class="header-section-number">1.1.1.3</span> One Dimensional Named List</h4>
<ol style="list-style-type: decimal">
<li>define list</li>
<li>slice list</li>
<li>print r named list as a single line string</li>
</ol>
<ul>
<li><a href="https://stackoverflow.com/a/55622024/8280804">R Unlist named list into one string with preserving list names</a></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="array-matrix-dataframe.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Lists</span></span>
<span id="cb6-2"><a href="array-matrix-dataframe.html#cb6-2" aria-hidden="true" tabindex="-1"></a>ls_num <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb6-3"><a href="array-matrix-dataframe.html#cb6-3" aria-hidden="true" tabindex="-1"></a>ls_str <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;1&#39;</span>,<span class="st">&#39;2&#39;</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb6-4"><a href="array-matrix-dataframe.html#cb6-4" aria-hidden="true" tabindex="-1"></a>ls_num_str <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb6-5"><a href="array-matrix-dataframe.html#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="array-matrix-dataframe.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Named Lists</span></span>
<span id="cb6-7"><a href="array-matrix-dataframe.html#cb6-7" aria-hidden="true" tabindex="-1"></a>ar_st_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;e1&#39;</span>,<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>)</span>
<span id="cb6-8"><a href="array-matrix-dataframe.html#cb6-8" aria-hidden="true" tabindex="-1"></a>ls_num_str_named <span class="ot">&lt;-</span> ls_num_str</span>
<span id="cb6-9"><a href="array-matrix-dataframe.html#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ls_num_str_named) <span class="ot">&lt;-</span> ar_st_names</span>
<span id="cb6-10"><a href="array-matrix-dataframe.html#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="array-matrix-dataframe.html#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Element to Named List</span></span>
<span id="cb6-12"><a href="array-matrix-dataframe.html#cb6-12" aria-hidden="true" tabindex="-1"></a>ls_num_str_named<span class="sc">$</span>e4 <span class="ot">&lt;-</span> <span class="st">&#39;this is added&#39;</span></span></code></pre></div>
<p>Initiate an empty list and add to it</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="array-matrix-dataframe.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate List</span></span>
<span id="cb7-2"><a href="array-matrix-dataframe.html#cb7-2" aria-hidden="true" tabindex="-1"></a>ls_abc <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">0</span>)</span>
<span id="cb7-3"><a href="array-matrix-dataframe.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Named Elements to List Sequentially</span></span>
<span id="cb7-4"><a href="array-matrix-dataframe.html#cb7-4" aria-hidden="true" tabindex="-1"></a>ls_abc<span class="sc">$</span>a <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb7-5"><a href="array-matrix-dataframe.html#cb7-5" aria-hidden="true" tabindex="-1"></a>ls_abc<span class="sc">$</span>b <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb7-6"><a href="array-matrix-dataframe.html#cb7-6" aria-hidden="true" tabindex="-1"></a>ls_abc<span class="sc">$</span>c <span class="ot">=</span> <span class="st">&#39;abc</span><span class="sc">\&#39;</span><span class="st">s third element&#39;</span></span>
<span id="cb7-7"><a href="array-matrix-dataframe.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all Names Added to List</span></span>
<span id="cb7-8"><a href="array-matrix-dataframe.html#cb7-8" aria-hidden="true" tabindex="-1"></a>ar_st_list_names <span class="ot">&lt;-</span> <span class="fu">names</span>(ls_abc)</span>
<span id="cb7-9"><a href="array-matrix-dataframe.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print list in a loop</span></span>
<span id="cb7-10"><a href="array-matrix-dataframe.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_abc)</span></code></pre></div>
<pre><code>## $a
## [1] 1
## 
## $b
## [1] 2
## 
## $c
## [1] &quot;abc&#39;s third element&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="array-matrix-dataframe.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_list_ele_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">length</span>(ar_st_list_names))) {</span>
<span id="cb9-2"><a href="array-matrix-dataframe.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  st_list_ele_name <span class="ot">&lt;-</span> ar_st_list_names[it_list_ele_ctr]</span>
<span id="cb9-3"><a href="array-matrix-dataframe.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  st_list_ele_val <span class="ot">&lt;-</span> ls_abc[it_list_ele_ctr]</span>
<span id="cb9-4"><a href="array-matrix-dataframe.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(st_list_ele_name,<span class="st">&#39;=&#39;</span>,st_list_ele_val))</span>
<span id="cb9-5"><a href="array-matrix-dataframe.html#cb9-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;a=1&quot;
## [1] &quot;b=2&quot;
## [1] &quot;c=abc&#39;s third element&quot;</code></pre>
</div>
<div id="named-list-print-function" class="section level4" number="1.1.1.4">
<h4><span class="header-section-number">1.1.1.4</span> Named List Print Function</h4>
<ul>
<li>r print input as string</li>
<li>r print parameter code as string</li>
<li><a href="https://stackoverflow.com/a/14577878/8280804">How to convert variable (object) name into String</a></li>
</ul>
<p>The function below ffi_lst2str is also a function in <a href="https://fanwangecon.github.io/REconTools/index.html">REconTools</a>: <a href="https://fanwangecon.github.io/REconTools/reference/ff_sup_lst2str.html">ff_sup_lst2str</a>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="array-matrix-dataframe.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list to String printing function</span></span>
<span id="cb11-2"><a href="array-matrix-dataframe.html#cb11-2" aria-hidden="true" tabindex="-1"></a>ffi_lst2str <span class="ot">&lt;-</span> <span class="cf">function</span>(ls_list, st_desc, <span class="at">bl_print=</span><span class="cn">TRUE</span>) {</span>
<span id="cb11-3"><a href="array-matrix-dataframe.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="array-matrix-dataframe.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># string desc</span></span>
<span id="cb11-5"><a href="array-matrix-dataframe.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">missing</span>(st_desc)){</span>
<span id="cb11-6"><a href="array-matrix-dataframe.html#cb11-6" aria-hidden="true" tabindex="-1"></a>    st_desc <span class="ot">&lt;-</span> <span class="fu">deparse</span>(<span class="fu">substitute</span>(ls_list))</span>
<span id="cb11-7"><a href="array-matrix-dataframe.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-8"><a href="array-matrix-dataframe.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="array-matrix-dataframe.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create string</span></span>
<span id="cb11-10"><a href="array-matrix-dataframe.html#cb11-10" aria-hidden="true" tabindex="-1"></a>  st_string_from_list <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">paste0</span>(st_desc, <span class="st">&#39;:&#39;</span>),</span>
<span id="cb11-11"><a href="array-matrix-dataframe.html#cb11-11" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">paste</span>(<span class="fu">names</span>(ls_list), ls_list, <span class="at">sep=</span><span class="st">&quot;=&quot;</span>, <span class="at">collapse=</span><span class="st">&quot;;&quot;</span> ))</span>
<span id="cb11-12"><a href="array-matrix-dataframe.html#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="array-matrix-dataframe.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (bl_print){</span>
<span id="cb11-14"><a href="array-matrix-dataframe.html#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(st_string_from_list)</span>
<span id="cb11-15"><a href="array-matrix-dataframe.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-16"><a href="array-matrix-dataframe.html#cb11-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-17"><a href="array-matrix-dataframe.html#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="array-matrix-dataframe.html#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># print full</span></span>
<span id="cb11-19"><a href="array-matrix-dataframe.html#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="array-matrix-dataframe.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="array-matrix-dataframe.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="array-matrix-dataframe.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named:e1=1;e2=2;e3=3;e4=this is added&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="array-matrix-dataframe.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print subset</span></span>
<span id="cb19-2"><a href="array-matrix-dataframe.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="array-matrix-dataframe.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_str[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_str[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="array-matrix-dataframe.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str[2:4]:=2;=3;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="array-matrix-dataframe.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str_named[<span class="fu">c</span>(<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>,<span class="st">&#39;e4&#39;</span>)])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named[c(\&quot;e2\&quot;, \&quot;e3\&quot;, \&quot;e4\&quot;)]:e2=2;e3=3;e4=this is added&quot;</code></pre>
</div>
<div id="two-dimensional-unnamed-list" class="section level4" number="1.1.1.5">
<h4><span class="header-section-number">1.1.1.5</span> Two Dimensional Unnamed List</h4>
<p>Generate a multiple dimensional list:</p>
<ol style="list-style-type: decimal">
<li>Initiate with an N element empty list</li>
<li>Reshape list to M by Q</li>
<li>Fill list elements</li>
<li>Get list element by row and column number</li>
</ol>
<p>List allows for different data types to be stored together.</p>
<p>Note that element specific names in named list are not preserved when the list is reshaped to be two dimensional. Two dimensional list, however, could have row and column names.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="array-matrix-dataframe.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensions</span></span>
<span id="cb27-2"><a href="array-matrix-dataframe.html#cb27-2" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb27-3"><a href="array-matrix-dataframe.html#cb27-3" aria-hidden="true" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb27-4"><a href="array-matrix-dataframe.html#cb27-4" aria-hidden="true" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> it_M<span class="sc">*</span>it_Q</span>
<span id="cb27-5"><a href="array-matrix-dataframe.html#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="array-matrix-dataframe.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb27-7"><a href="array-matrix-dataframe.html#cb27-7" aria-hidden="true" tabindex="-1"></a>ls_2d_flat <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_N)</span>
<span id="cb27-8"><a href="array-matrix-dataframe.html#cb27-8" aria-hidden="true" tabindex="-1"></a>ls_2d <span class="ot">&lt;-</span> ls_2d_flat</span>
<span id="cb27-9"><a href="array-matrix-dataframe.html#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="array-matrix-dataframe.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Named flat</span></span>
<span id="cb27-11"><a href="array-matrix-dataframe.html#cb27-11" aria-hidden="true" tabindex="-1"></a>ls_2d_flat_named <span class="ot">&lt;-</span> ls_2d_flat</span>
<span id="cb27-12"><a href="array-matrix-dataframe.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb27-13"><a href="array-matrix-dataframe.html#cb27-13" aria-hidden="true" tabindex="-1"></a>ls_2d_named <span class="ot">&lt;-</span> ls_2d_flat_named</span>
<span id="cb27-14"><a href="array-matrix-dataframe.html#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="array-matrix-dataframe.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape</span></span>
<span id="cb27-16"><a href="array-matrix-dataframe.html#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ls_2d) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span>
<span id="cb27-17"><a href="array-matrix-dataframe.html#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co"># named 2d list can not carry 1d name after reshape</span></span>
<span id="cb27-18"><a href="array-matrix-dataframe.html#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ls_2d_named) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span></code></pre></div>
<p>Print Various objects generated above, print list flattened.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="array-matrix-dataframe.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb28-2"><a href="array-matrix-dataframe.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named:e1=NULL;e2=NULL;e3=NULL;e4=NULL;e5=NULL;e6=NULL&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="array-matrix-dataframe.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print(ls_2d_flat_named)</span></span>
<span id="cb30-2"><a href="array-matrix-dataframe.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_named:=NULL;=NULL;=NULL;=NULL;=NULL;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="array-matrix-dataframe.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_2d_named)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] NULL NULL NULL
## [2,] NULL NULL NULL</code></pre>
<p>Select element from list:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="array-matrix-dataframe.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select Values, double bracket to select from 2dim list</span></span>
<span id="cb34-2"><a href="array-matrix-dataframe.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_2d[[1,2]]&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d[[1,2]]&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="array-matrix-dataframe.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_2d[[<span class="dv">1</span>,<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="define-two-dimensional-named-list" class="section level4" number="1.1.1.6">
<h4><span class="header-section-number">1.1.1.6</span> Define Two Dimensional Named LIst</h4>
<p>For naming two dimensional lists, <em>rowname</em> and <em>colname</em> does not work. Rather, we need to use <em>dimnames</em>. Note that in addition to dimnames, we can continue to have element specific names. Both can co-exist. But note that the element specific names are not preserved after dimension transform, so need to be redefined afterwards.</p>
<p>How to select an element of a two dimensional list:</p>
<ol style="list-style-type: decimal">
<li>row and column names: <em>dimnames</em>, <em>ls_2d_flat_named[[â€˜row2,â€™â€˜col2â€™]]</em></li>
<li>named elements: <em>names</em>, <em>ls_2d_flat_named[[â€˜e5â€™]]</em></li>
<li>select by index: <em>index</em>, <em>ls_2d_flat_named[[5]]</em></li>
<li>converted two dimensional named list to tibble/matrix</li>
</ol>
<p>Neither <em>dimnames</em> nor <em>names</em> are required, but both can be used to select elements.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="array-matrix-dataframe.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensions</span></span>
<span id="cb38-2"><a href="array-matrix-dataframe.html#cb38-2" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb38-3"><a href="array-matrix-dataframe.html#cb38-3" aria-hidden="true" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb38-4"><a href="array-matrix-dataframe.html#cb38-4" aria-hidden="true" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> it_M<span class="sc">*</span>it_Q</span>
<span id="cb38-5"><a href="array-matrix-dataframe.html#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="array-matrix-dataframe.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb38-7"><a href="array-matrix-dataframe.html#cb38-7" aria-hidden="true" tabindex="-1"></a>ls_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_N)</span>
<span id="cb38-8"><a href="array-matrix-dataframe.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span>
<span id="cb38-9"><a href="array-matrix-dataframe.html#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="array-matrix-dataframe.html#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill with values</span></span>
<span id="cb38-11"><a href="array-matrix-dataframe.html#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_Q)) {</span>
<span id="cb38-12"><a href="array-matrix-dataframe.html#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_M)) {</span>
<span id="cb38-13"><a href="array-matrix-dataframe.html#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># linear index</span></span>
<span id="cb38-14"><a href="array-matrix-dataframe.html#cb38-14" aria-hidden="true" tabindex="-1"></a>    ls_2d_flat_named[[it_M_ctr, it_Q_ctr]] <span class="ot">&lt;-</span> (it_Q_ctr<span class="dv">-1</span>)<span class="sc">*</span>it_M<span class="sc">+</span>it_M_ctr</span>
<span id="cb38-15"><a href="array-matrix-dataframe.html#cb38-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-16"><a href="array-matrix-dataframe.html#cb38-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-17"><a href="array-matrix-dataframe.html#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="array-matrix-dataframe.html#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace row names, note rownames does not work</span></span>
<span id="cb38-19"><a href="array-matrix-dataframe.html#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d_flat_named)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;row&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_M))</span>
<span id="cb38-20"><a href="array-matrix-dataframe.html#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d_flat_named)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;col&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_Q))</span>
<span id="cb38-21"><a href="array-matrix-dataframe.html#cb38-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-22"><a href="array-matrix-dataframe.html#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Element Specific Names</span></span>
<span id="cb38-23"><a href="array-matrix-dataframe.html#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb38-24"><a href="array-matrix-dataframe.html#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="array-matrix-dataframe.html#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to Matrix</span></span>
<span id="cb38-26"><a href="array-matrix-dataframe.html#cb38-26" aria-hidden="true" tabindex="-1"></a>tb_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ls_2d_flat_named) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>()</span>
<span id="cb38-27"><a href="array-matrix-dataframe.html#cb38-27" aria-hidden="true" tabindex="-1"></a>mt_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(tb_2d_flat_named)</span></code></pre></div>
<p>Print various objects generated above:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="array-matrix-dataframe.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These are not element names, can still name each element</span></span>
<span id="cb39-2"><a href="array-matrix-dataframe.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb39-3"><a href="array-matrix-dataframe.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="array-matrix-dataframe.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## row1 1    4    7    10  
## row2 2    5    8    11  
## row3 3    6    9    12  
## attr(,&quot;names&quot;)
##  [1] &quot;e1&quot;  &quot;e2&quot;  &quot;e3&quot;  &quot;e4&quot;  &quot;e5&quot;  &quot;e6&quot;  &quot;e7&quot;  &quot;e8&quot;  &quot;e9&quot;  &quot;e10&quot; &quot;e11&quot; &quot;e12&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="array-matrix-dataframe.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;tb_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;tb_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="array-matrix-dataframe.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tb_2d_flat_named)</span>
<span id="cb45-2"><a href="array-matrix-dataframe.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;mt_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;mt_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="array-matrix-dataframe.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mt_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12</code></pre>
<p>Select elements from list:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="array-matrix-dataframe.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select elements with with dimnames</span></span>
<span id="cb49-2"><a href="array-matrix-dataframe.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;row2&#39;</span>,<span class="st">&#39;col2&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;row2\&quot;, \&quot;col2\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="array-matrix-dataframe.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select elements with element names</span></span>
<span id="cb51-2"><a href="array-matrix-dataframe.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;e5&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;e5\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="array-matrix-dataframe.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select elements with index</span></span>
<span id="cb53-2"><a href="array-matrix-dataframe.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="dv">5</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[5]]:=5&quot;</code></pre>
</div>
<div id="two-dimensioanl-named-list-for-joint-probability-mass" class="section level4" number="1.1.1.7">
<h4><span class="header-section-number">1.1.1.7</span> Two-Dimensioanl Named List for Joint Probability Mass</h4>
<p>There are two discrete random variables, generate some random discrete probability mass, name the columns and rows, and then convert to matrix.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="array-matrix-dataframe.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb55-2"><a href="array-matrix-dataframe.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="array-matrix-dataframe.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate prob list </span></span>
<span id="cb55-4"><a href="array-matrix-dataframe.html#cb55-4" aria-hidden="true" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb55-5"><a href="array-matrix-dataframe.html#cb55-5" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb55-6"><a href="array-matrix-dataframe.html#cb55-6" aria-hidden="true" tabindex="-1"></a>ls_2d <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_Q<span class="sc">*</span>it_M)</span>
<span id="cb55-7"><a href="array-matrix-dataframe.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ls_2d) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_Q, it_M)</span>
<span id="cb55-8"><a href="array-matrix-dataframe.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Random joint mass </span></span>
<span id="cb55-9"><a href="array-matrix-dataframe.html#cb55-9" aria-hidden="true" tabindex="-1"></a>ar_rand <span class="ot">&lt;-</span> <span class="fu">runif</span>(it_Q<span class="sc">*</span>it_M)</span>
<span id="cb55-10"><a href="array-matrix-dataframe.html#cb55-10" aria-hidden="true" tabindex="-1"></a>ar_rand <span class="ot">&lt;-</span> ar_rand<span class="sc">/</span><span class="fu">sum</span>(ar_rand)</span>
<span id="cb55-11"><a href="array-matrix-dataframe.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill with values</span></span>
<span id="cb55-12"><a href="array-matrix-dataframe.html#cb55-12" aria-hidden="true" tabindex="-1"></a>it_ctr <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb55-13"><a href="array-matrix-dataframe.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_Q)) {</span>
<span id="cb55-14"><a href="array-matrix-dataframe.html#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_M)) {</span>
<span id="cb55-15"><a href="array-matrix-dataframe.html#cb55-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># linear index</span></span>
<span id="cb55-16"><a href="array-matrix-dataframe.html#cb55-16" aria-hidden="true" tabindex="-1"></a>    ls_2d[[it_M_ctr, it_Q_ctr]] <span class="ot">&lt;-</span> ar_rand[(it_Q_ctr<span class="dv">-1</span>)<span class="sc">*</span>it_M<span class="sc">+</span>it_M_ctr]</span>
<span id="cb55-17"><a href="array-matrix-dataframe.html#cb55-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-18"><a href="array-matrix-dataframe.html#cb55-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-19"><a href="array-matrix-dataframe.html#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace row names, note rownames does not work</span></span>
<span id="cb55-20"><a href="array-matrix-dataframe.html#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;E&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_M))</span>
<span id="cb55-21"><a href="array-matrix-dataframe.html#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;A&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_Q))</span>
<span id="cb55-22"><a href="array-matrix-dataframe.html#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="co"># rename </span></span>
<span id="cb55-23"><a href="array-matrix-dataframe.html#cb55-23" aria-hidden="true" tabindex="-1"></a>ls_prob_joint_E_A <span class="ot">&lt;-</span> ls_2d</span>
<span id="cb55-24"><a href="array-matrix-dataframe.html#cb55-24" aria-hidden="true" tabindex="-1"></a>mt_prob_joint_E_A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">unlist</span>(ls_prob_joint_E_A), <span class="at">ncol=</span>it_M, <span class="at">byrow=</span>F)</span>
<span id="cb55-25"><a href="array-matrix-dataframe.html#cb55-25" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_prob_joint_E_A&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_prob_joint_E_A&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="array-matrix-dataframe.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ls_prob_joint_E_A)</span></code></pre></div>
<pre><code>##    A1        A2       
## E1 0.1214495 0.1727188
## E2 0.3329164 0.3729152</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="array-matrix-dataframe.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mt_prob_joint_E_A)</span></code></pre></div>
<pre><code>##           [,1]      [,2]
## [1,] 0.1214495 0.1727188
## [2,] 0.3329164 0.3729152</code></pre>
<p>Create conditional probabilities: <span class="math inline">\(F=P(A_1|E_1)\)</span>, <span class="math inline">\(B=P(A_1|E_2)\)</span>, <span class="math inline">\(C=P(E_1|A_1)\)</span>, <span class="math inline">\(D=P(E_1|A_2)\)</span></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="array-matrix-dataframe.html#cb61-1" aria-hidden="true" tabindex="-1"></a>fl_F <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[<span class="dv">1</span>,])</span>
<span id="cb61-2"><a href="array-matrix-dataframe.html#cb61-2" aria-hidden="true" tabindex="-1"></a>fl_B <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">2</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[<span class="dv">2</span>,])</span>
<span id="cb61-3"><a href="array-matrix-dataframe.html#cb61-3" aria-hidden="true" tabindex="-1"></a>fl_C <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[,<span class="dv">1</span>])</span>
<span id="cb61-4"><a href="array-matrix-dataframe.html#cb61-4" aria-hidden="true" tabindex="-1"></a>fl_D <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">2</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[,<span class="dv">2</span>])</span>
<span id="cb61-5"><a href="array-matrix-dataframe.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;fl_F=&#39;</span>, fl_F, <span class="st">&#39;,fl_B=&#39;</span>,fl_B,<span class="st">&#39;,fl_C=&#39;</span>,fl_C,<span class="st">&#39;,fl_D=&#39;</span>,fl_D))</span></code></pre></div>
<pre><code>## [1] &quot;fl_F=0.412857205138471,fl_B=0.471665472604598,fl_C=0.267294503388642,fl_D=0.316546995323062&quot;</code></pre>

</div>
</div>
</div>
<div id="array" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Array</h2>

<div id="array-basics" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Array Basics</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="multidimesional-arrays" class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Multidimesional Arrays</h4>
<div id="repeat-one-number-by-the-size-of-an-array" class="section level5" number="1.2.1.1.1">
<h5><span class="header-section-number">1.2.1.1.1</span> Repeat one Number by the Size of an Array</h5>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="array-matrix-dataframe.html#cb63-1" aria-hidden="true" tabindex="-1"></a>ar_a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb63-2"><a href="array-matrix-dataframe.html#cb63-2" aria-hidden="true" tabindex="-1"></a>ar_b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span><span class="sc">/</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb63-3"><a href="array-matrix-dataframe.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">length</span>(ar_a))</span></code></pre></div>
<pre><code>## [1] 0 0 0</code></pre>
</div>
<div id="generate-2-dimensional-array" class="section level5" number="1.2.1.1.2">
<h5><span class="header-section-number">1.2.1.1.2</span> Generate 2 Dimensional Array</h5>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="array-matrix-dataframe.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multidimensional Array</span></span>
<span id="cb65-2"><a href="array-matrix-dataframe.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 is r1c1t1, 1.5 in r2c1t1, 0 in r1c2t1, etc.</span></span>
<span id="cb65-3"><a href="array-matrix-dataframe.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Three dimensions, row first, column second, and tensor third</span></span>
<span id="cb65-4"><a href="array-matrix-dataframe.html#cb65-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb65-5"><a href="array-matrix-dataframe.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(x)</span></code></pre></div>
<pre><code>## [1] 2 2 2</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="array-matrix-dataframe.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]  1.0    0
## [2,]  1.5    2
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    0    0
## [2,]    4    3</code></pre>
</div>
</div>
<div id="array-slicing" class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Array Slicing</h4>
<div id="get-a-subset-of-array-elements-n-cuts-from-m-points" class="section level5" number="1.2.1.2.1">
<h5><span class="header-section-number">1.2.1.2.1</span> Get a Subset of Array Elements, N Cuts from M Points</h5>
<p>There is an array with M elements, get N elements from the M elements.</p>
<p>First cut including the starting and ending points.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="array-matrix-dataframe.html#cb69-1" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb69-2"><a href="array-matrix-dataframe.html#cb69-2" aria-hidden="true" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb69-3"><a href="array-matrix-dataframe.html#cb69-3" aria-hidden="true" tabindex="-1"></a>ar_all_elements <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="remove-elements-of-array" class="section level5" number="1.2.1.2.2">
<h5><span class="header-section-number">1.2.1.2.2</span> Remove Elements of Array</h5>
<p>Select elements with direct indexing, or with head and tail functions. Get the first two elements of three elements array.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="array-matrix-dataframe.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove last element of array</span></span>
<span id="cb70-2"><a href="array-matrix-dataframe.html#cb70-2" aria-hidden="true" tabindex="-1"></a>vars.group.bydf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb70-3"><a href="array-matrix-dataframe.html#cb70-3" aria-hidden="true" tabindex="-1"></a>vars.group.bydf[<span class="sc">-</span><span class="fu">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="array-matrix-dataframe.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the head function to remove last element</span></span>
<span id="cb72-2"><a href="array-matrix-dataframe.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vars.group.bydf, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="array-matrix-dataframe.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<p>Get last two elements of array.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="array-matrix-dataframe.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove first element of array</span></span>
<span id="cb76-2"><a href="array-matrix-dataframe.html#cb76-2" aria-hidden="true" tabindex="-1"></a>vars.group.bydf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb76-3"><a href="array-matrix-dataframe.html#cb76-3" aria-hidden="true" tabindex="-1"></a>vars.group.bydf[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="array-matrix-dataframe.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Tail function</span></span>
<span id="cb78-2"><a href="array-matrix-dataframe.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vars.group.bydf, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="array-matrix-dataframe.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<p>Select all except for the first and the last element of an array.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="array-matrix-dataframe.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define array</span></span>
<span id="cb82-2"><a href="array-matrix-dataframe.html#cb82-2" aria-hidden="true" tabindex="-1"></a>ar_amin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb82-3"><a href="array-matrix-dataframe.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select without head and tail</span></span>
<span id="cb82-4"><a href="array-matrix-dataframe.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">head</span>(ar_amin, <span class="sc">-</span><span class="dv">1</span>), <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.25 0.50 0.75</code></pre>
<p>Select the first and the last element of an array. The extreme values.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="array-matrix-dataframe.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define array</span></span>
<span id="cb84-2"><a href="array-matrix-dataframe.html#cb84-2" aria-hidden="true" tabindex="-1"></a>ar_amin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb84-3"><a href="array-matrix-dataframe.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select head and tail</span></span>
<span id="cb84-4"><a href="array-matrix-dataframe.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">head</span>(ar_amin, <span class="dv">1</span>), <span class="fu">tail</span>(ar_amin, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] 0 1</code></pre>
</div>
</div>
<div id="na-in-array" class="section level4" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> NA in Array</h4>
<div id="check-if-na-is-in-array" class="section level5" number="1.2.1.3.1">
<h5><span class="header-section-number">1.2.1.3.1</span> Check if NA is in Array</h5>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="array-matrix-dataframe.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Inf and -Inf to NA</span></span>
<span id="cb86-2"><a href="array-matrix-dataframe.html#cb86-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="cn">Inf</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="cn">Inf</span>)</span>
<span id="cb86-3"><a href="array-matrix-dataframe.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">na_if</span>(<span class="fu">na_if</span>(x, <span class="sc">-</span><span class="cn">Inf</span>), <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## [1]  1 -1 NA 10 NA</code></pre>
</div>
</div>
<div id="complex-number" class="section level4" number="1.2.1.4">
<h4><span class="header-section-number">1.2.1.4</span> Complex Number</h4>
<p>Handling numbers with real and imaginary components. Two separate issues, given an array of numbers that includes real as well as imaginary numbers, keep subset that only has real components. Additionally, for the same array, generate an equal length version of the array that includes the real components of all numbers.</p>
<p>Define complex numbers.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="array-matrix-dataframe.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a complex number</span></span>
<span id="cb88-2"><a href="array-matrix-dataframe.html#cb88-2" aria-hidden="true" tabindex="-1"></a>cx_number_a <span class="ot">&lt;-</span> <span class="dv">0</span><span class="fl">+0.0460246857561777</span>i</span>
<span id="cb88-3"><a href="array-matrix-dataframe.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define another complex number</span></span>
<span id="cb88-4"><a href="array-matrix-dataframe.html#cb88-4" aria-hidden="true" tabindex="-1"></a>cx_number_b <span class="ot">&lt;-</span> <span class="fu">complex</span>(<span class="at">real =</span> <span class="fl">0.02560982</span>, <span class="at">imaginary =</span> <span class="fl">0.0460246857561777</span>)</span>
<span id="cb88-5"><a href="array-matrix-dataframe.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co"># An array of numbers some of which are complex</span></span>
<span id="cb88-6"><a href="array-matrix-dataframe.html#cb88-6" aria-hidden="true" tabindex="-1"></a>ar_cx_number <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.02560982+0.000000000</span>i, <span class="fl">0.00000000+0.044895305</span>i, </span>
<span id="cb88-7"><a href="array-matrix-dataframe.html#cb88-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fl">0.00000000+0.009153429</span>i, <span class="fl">0.05462045+0.000000000</span>i, </span>
<span id="cb88-8"><a href="array-matrix-dataframe.html#cb88-8" aria-hidden="true" tabindex="-1"></a>                  <span class="fl">0.00000000+0.001198538</span>i, <span class="fl">0.00000000+0.019267050</span>i)</span></code></pre></div>
<p>Extract real components from a complex array.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="array-matrix-dataframe.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equi-length real component</span></span>
<span id="cb89-2"><a href="array-matrix-dataframe.html#cb89-2" aria-hidden="true" tabindex="-1"></a>ar_fl_number_re <span class="ot">&lt;-</span> <span class="fu">Re</span>(ar_cx_number)</span>
<span id="cb89-3"><a href="array-matrix-dataframe.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_re)</span></code></pre></div>
<pre><code>## [1] 0.02560982 0.00000000 0.00000000 0.05462045 0.00000000 0.00000000</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="array-matrix-dataframe.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equi-length img component</span></span>
<span id="cb91-2"><a href="array-matrix-dataframe.html#cb91-2" aria-hidden="true" tabindex="-1"></a>ar_fl_number_im <span class="ot">&lt;-</span> <span class="fu">Im</span>(ar_cx_number)</span>
<span id="cb91-3"><a href="array-matrix-dataframe.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_im)</span></code></pre></div>
<pre><code>## [1] 0.000000000 0.044895305 0.009153429 0.000000000 0.001198538 0.019267050</code></pre>
<p>Keep only real elements of array.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="array-matrix-dataframe.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subset of array that is real</span></span>
<span id="cb93-2"><a href="array-matrix-dataframe.html#cb93-2" aria-hidden="true" tabindex="-1"></a>ar_fl_number_re_subset <span class="ot">&lt;-</span> <span class="fu">Re</span>(ar_cx_number[<span class="fu">Re</span>(ar_cx_number)<span class="sc">!=</span><span class="dv">0</span>])</span>
<span id="cb93-3"><a href="array-matrix-dataframe.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_re_subset)</span></code></pre></div>
<pre><code>## [1] 0.02560982 0.05462045</code></pre>
</div>
<div id="number-formatting" class="section level4" number="1.2.1.5">
<h4><span class="header-section-number">1.2.1.5</span> Number Formatting</h4>
<div id="e-notation" class="section level5" number="1.2.1.5.1">
<h5><span class="header-section-number">1.2.1.5.1</span> e notation</h5>
<ol style="list-style-type: decimal">
<li>Case one: <em>1.149946e+00</em>
<ul>
<li>this is approximately: 1.14995</li>
</ul></li>
<li>Case two: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
<li>Case three: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
</ol>

</div>
</div>
</div>
<div id="generate-arrays" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Generate Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-often-used-arrays" class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Generate Often Used Arrays</h4>
<div id="equi-distance-array-with-bound" class="section level5" number="1.2.2.1.1">
<h5><span class="header-section-number">1.2.2.1.1</span> Equi-distance Array with Bound</h5>
<p>Consider multiple income groups in income bins that are equal-width, for the final income group, consider all individuals above some final bin minimum bound. Below the code generates this array of numbers: <span class="math inline">\(0, 20000, 40000, 60000, 80000, 100000, 100000000\)</span>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="array-matrix-dataframe.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate income cut-offs</span></span>
<span id="cb95-2"><a href="array-matrix-dataframe.html#cb95-2" aria-hidden="true" tabindex="-1"></a>fl_bin_start <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb95-3"><a href="array-matrix-dataframe.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co"># width equal to 20,000</span></span>
<span id="cb95-4"><a href="array-matrix-dataframe.html#cb95-4" aria-hidden="true" tabindex="-1"></a>fl_bin_width <span class="ot">&lt;-</span> <span class="fl">2e4</span></span>
<span id="cb95-5"><a href="array-matrix-dataframe.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co"># final point is 100 million</span></span>
<span id="cb95-6"><a href="array-matrix-dataframe.html#cb95-6" aria-hidden="true" tabindex="-1"></a>fl_bin_final_end <span class="ot">&lt;-</span> <span class="fl">1e8</span></span>
<span id="cb95-7"><a href="array-matrix-dataframe.html#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co"># final segment starting point is 100,000 dollars</span></span>
<span id="cb95-8"><a href="array-matrix-dataframe.html#cb95-8" aria-hidden="true" tabindex="-1"></a>fl_bin_final_start <span class="ot">&lt;-</span> <span class="fl">1e5</span></span>
<span id="cb95-9"><a href="array-matrix-dataframe.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co"># generate tincome bins</span></span>
<span id="cb95-10"><a href="array-matrix-dataframe.html#cb95-10" aria-hidden="true" tabindex="-1"></a>ar_income_bins <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">seq</span>(fl_bin_start, fl_bin_final_start, <span class="at">by=</span>fl_bin_width), </span>
<span id="cb95-11"><a href="array-matrix-dataframe.html#cb95-11" aria-hidden="true" tabindex="-1"></a>                    fl_bin_final_end)</span>
<span id="cb95-12"><a href="array-matrix-dataframe.html#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb95-13"><a href="array-matrix-dataframe.html#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_income_bins)</span></code></pre></div>
<pre><code>## [1] 0e+00 2e+04 4e+04 6e+04 8e+04 1e+05 1e+08</code></pre>
<p>Generate finer bins, at 5000 USD intervals, and stopping at 200 thousand dollars.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="array-matrix-dataframe.html#cb97-1" aria-hidden="true" tabindex="-1"></a>fl_bin_start <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb97-2"><a href="array-matrix-dataframe.html#cb97-2" aria-hidden="true" tabindex="-1"></a>fl_bin_width <span class="ot">&lt;-</span> <span class="fl">5e3</span></span>
<span id="cb97-3"><a href="array-matrix-dataframe.html#cb97-3" aria-hidden="true" tabindex="-1"></a>fl_bin_final_end <span class="ot">&lt;-</span> <span class="fl">1e8</span></span>
<span id="cb97-4"><a href="array-matrix-dataframe.html#cb97-4" aria-hidden="true" tabindex="-1"></a>fl_bin_final_start <span class="ot">&lt;-</span> <span class="fl">2e5</span></span>
<span id="cb97-5"><a href="array-matrix-dataframe.html#cb97-5" aria-hidden="true" tabindex="-1"></a>ar_income_bins <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">seq</span>(fl_bin_start, fl_bin_final_start, <span class="at">by=</span>fl_bin_width), </span>
<span id="cb97-6"><a href="array-matrix-dataframe.html#cb97-6" aria-hidden="true" tabindex="-1"></a>                    fl_bin_final_end)</span>
<span id="cb97-7"><a href="array-matrix-dataframe.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_income_bins)</span></code></pre></div>
<pre><code>##  [1] 0.00e+00 5.00e+03 1.00e+04 1.50e+04 2.00e+04 2.50e+04 3.00e+04 3.50e+04 4.00e+04 4.50e+04 5.00e+04
## [12] 5.50e+04 6.00e+04 6.50e+04 7.00e+04 7.50e+04 8.00e+04 8.50e+04 9.00e+04 9.50e+04 1.00e+05 1.05e+05
## [23] 1.10e+05 1.15e+05 1.20e+05 1.25e+05 1.30e+05 1.35e+05 1.40e+05 1.45e+05 1.50e+05 1.55e+05 1.60e+05
## [34] 1.65e+05 1.70e+05 1.75e+05 1.80e+05 1.85e+05 1.90e+05 1.95e+05 2.00e+05 1.00e+08</code></pre>
</div>
<div id="log-space-arrays" class="section level5" number="1.2.2.1.2">
<h5><span class="header-section-number">1.2.2.1.2</span> Log Space Arrays</h5>
<p>Often need to generate arrays on log rather than linear scale, below is log 10 scaled grid.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="array-matrix-dataframe.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb99-2"><a href="array-matrix-dataframe.html#cb99-2" aria-hidden="true" tabindex="-1"></a>it.lower.bd.inc.cnt <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb99-3"><a href="array-matrix-dataframe.html#cb99-3" aria-hidden="true" tabindex="-1"></a>fl.log.lower <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb99-4"><a href="array-matrix-dataframe.html#cb99-4" aria-hidden="true" tabindex="-1"></a>fl.log.higher <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">9</span></span>
<span id="cb99-5"><a href="array-matrix-dataframe.html#cb99-5" aria-hidden="true" tabindex="-1"></a>fl.min.rescale <span class="ot">&lt;-</span> <span class="fl">0.01</span></span>
<span id="cb99-6"><a href="array-matrix-dataframe.html#cb99-6" aria-hidden="true" tabindex="-1"></a>it.log.count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb99-7"><a href="array-matrix-dataframe.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate</span></span>
<span id="cb99-8"><a href="array-matrix-dataframe.html#cb99-8" aria-hidden="true" tabindex="-1"></a>ar.fl.log.rescaled <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">log</span>(<span class="dv">10</span>)<span class="sc">*</span><span class="fu">seq</span>(<span class="fu">log10</span>(fl.min.rescale),</span>
<span id="cb99-9"><a href="array-matrix-dataframe.html#cb99-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">log10</span>(fl.min.rescale <span class="sc">+</span></span>
<span id="cb99-10"><a href="array-matrix-dataframe.html#cb99-10" aria-hidden="true" tabindex="-1"></a>                                              (fl.log.higher<span class="sc">-</span>fl.log.lower)),</span>
<span id="cb99-11"><a href="array-matrix-dataframe.html#cb99-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">length.out=</span>it.log.count))</span>
<span id="cb99-12"><a href="array-matrix-dataframe.html#cb99-12" aria-hidden="true" tabindex="-1"></a>ar.fl.log <span class="ot">&lt;-</span> ar.fl.log.rescaled <span class="sc">+</span> fl.log.lower <span class="sc">-</span> fl.min.rescale</span>
<span id="cb99-13"><a href="array-matrix-dataframe.html#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb99-14"><a href="array-matrix-dataframe.html#cb99-14" aria-hidden="true" tabindex="-1"></a>ar.fl.log</span></code></pre></div>
<pre><code>## [1] -10.000000  -9.963430  -9.793123  -9.000000</code></pre>
</div>
</div>
<div id="generate-arrays-based-on-existing-arrays" class="section level4" number="1.2.2.2">
<h4><span class="header-section-number">1.2.2.2</span> Generate Arrays Based on Existing Arrays</h4>
<div id="probability-mass-array-and-discrete-value-array" class="section level5" number="1.2.2.2.1">
<h5><span class="header-section-number">1.2.2.2.1</span> Probability Mass Array and Discrete Value Array</h5>
<p>There are two arrays, an array of values, and an array of probabilities. The probability array sums to 1. The array of values, however, might not be unique.</p>
<p>First, generate some array of numbers not sorted and some proability mass for each non-sorted, non-unique element of the array.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="array-matrix-dataframe.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb101-2"><a href="array-matrix-dataframe.html#cb101-2" aria-hidden="true" tabindex="-1"></a>it_len <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb101-3"><a href="array-matrix-dataframe.html#cb101-3" aria-hidden="true" tabindex="-1"></a>ar_x <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">runif</span>(it_len)<span class="sc">*</span><span class="dv">5</span><span class="sc">+</span><span class="dv">10</span>)</span>
<span id="cb101-4"><a href="array-matrix-dataframe.html#cb101-4" aria-hidden="true" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> <span class="fu">dbinom</span>(<span class="fu">seq</span>(<span class="dv">0</span>,it_len<span class="dv">-1</span>,<span class="at">length.out =</span> it_len), it_len<span class="dv">-1</span>, <span class="at">prob=</span><span class="fl">0.5</span>)</span>
<span id="cb101-5"><a href="array-matrix-dataframe.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x,ar_prob))</span></code></pre></div>
<pre><code>##       ar_x     ar_prob
##  [1,]   12 0.001953125
##  [2,]   14 0.017578125
##  [3,]   13 0.070312500
##  [4,]   15 0.164062500
##  [5,]   15 0.246093750
##  [6,]   11 0.246093750
##  [7,]   13 0.164062500
##  [8,]   15 0.070312500
##  [9,]   13 0.017578125
## [10,]   13 0.001953125</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="array-matrix-dataframe.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;sum(ar_prob)=&#39;</span>,<span class="fu">sum</span>(ar_prob)))</span></code></pre></div>
<pre><code>## [1] &quot;sum(ar_prob)=1&quot;</code></pre>
<p>Second, sorting index for ar_x, and resort ar_prob with the same index:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="array-matrix-dataframe.html#cb105-1" aria-hidden="true" tabindex="-1"></a>ls_sorted_res <span class="ot">&lt;-</span> <span class="fu">sort</span>(ar_x, <span class="at">decreasing =</span> <span class="cn">FALSE</span>, <span class="at">index.return=</span><span class="cn">TRUE</span>)</span>
<span id="cb105-2"><a href="array-matrix-dataframe.html#cb105-2" aria-hidden="true" tabindex="-1"></a>ar_idx_increasing_x <span class="ot">&lt;-</span> ls_sorted_res<span class="sc">$</span>ix</span>
<span id="cb105-3"><a href="array-matrix-dataframe.html#cb105-3" aria-hidden="true" tabindex="-1"></a>ar_x_sorted <span class="ot">&lt;-</span> ls_sorted_res<span class="sc">$</span>x</span>
<span id="cb105-4"><a href="array-matrix-dataframe.html#cb105-4" aria-hidden="true" tabindex="-1"></a>ar_prob_sorted <span class="ot">&lt;-</span> ar_prob[ar_idx_increasing_x]</span>
<span id="cb105-5"><a href="array-matrix-dataframe.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_sorted,ar_prob_sorted))</span></code></pre></div>
<pre><code>##       ar_x_sorted ar_prob_sorted
##  [1,]          11    0.246093750
##  [2,]          12    0.001953125
##  [3,]          13    0.070312500
##  [4,]          13    0.164062500
##  [5,]          13    0.017578125
##  [6,]          13    0.001953125
##  [7,]          14    0.017578125
##  [8,]          15    0.164062500
##  [9,]          15    0.246093750
## [10,]          15    0.070312500</code></pre>
<p>Third, sum within group and generate unique, using the <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/aggregate">aggregate</a> function. Then we have a column of unique values and associated probabilities.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="array-matrix-dataframe.html#cb107-1" aria-hidden="true" tabindex="-1"></a>ar_x_unique <span class="ot">&lt;-</span> <span class="fu">unique</span>(ar_x_sorted)</span>
<span id="cb107-2"><a href="array-matrix-dataframe.html#cb107-2" aria-hidden="true" tabindex="-1"></a>mt_prob_unique <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ar_prob_sorted, <span class="at">by=</span><span class="fu">list</span>(ar_x_sorted), <span class="at">FUN=</span>sum)</span>
<span id="cb107-3"><a href="array-matrix-dataframe.html#cb107-3" aria-hidden="true" tabindex="-1"></a>ar_x_unique_prob <span class="ot">&lt;-</span> mt_prob_unique<span class="sc">$</span>x</span>
<span id="cb107-4"><a href="array-matrix-dataframe.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_unique, ar_x_unique_prob))</span></code></pre></div>
<pre><code>##      ar_x_unique ar_x_unique_prob
## [1,]          11      0.246093750
## [2,]          12      0.001953125
## [3,]          13      0.253906250
## [4,]          14      0.017578125
## [5,]          15      0.480468750</code></pre>
<p>Finally, the several steps together.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="array-matrix-dataframe.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb109-2"><a href="array-matrix-dataframe.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb109-3"><a href="array-matrix-dataframe.html#cb109-3" aria-hidden="true" tabindex="-1"></a>it_len <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb109-4"><a href="array-matrix-dataframe.html#cb109-4" aria-hidden="true" tabindex="-1"></a>ar_x <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">runif</span>(it_len)<span class="sc">*</span><span class="dv">20</span><span class="sc">+</span><span class="dv">10</span>)</span>
<span id="cb109-5"><a href="array-matrix-dataframe.html#cb109-5" aria-hidden="true" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> <span class="fu">runif</span>(it_len)</span>
<span id="cb109-6"><a href="array-matrix-dataframe.html#cb109-6" aria-hidden="true" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> ar_prob<span class="sc">/</span><span class="fu">sum</span>(ar_prob)</span>
<span id="cb109-7"><a href="array-matrix-dataframe.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co"># step 1, sort</span></span>
<span id="cb109-8"><a href="array-matrix-dataframe.html#cb109-8" aria-hidden="true" tabindex="-1"></a>ls_sorted_res <span class="ot">&lt;-</span> <span class="fu">sort</span>(ar_x, <span class="at">decreasing =</span> <span class="cn">FALSE</span>, <span class="at">index.return=</span><span class="cn">TRUE</span>)</span>
<span id="cb109-9"><a href="array-matrix-dataframe.html#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co"># step 2, unique sorted</span></span>
<span id="cb109-10"><a href="array-matrix-dataframe.html#cb109-10" aria-hidden="true" tabindex="-1"></a>ar_x_unique <span class="ot">&lt;-</span> <span class="fu">unique</span>(ls_sorted_res<span class="sc">$</span>x)</span>
<span id="cb109-11"><a href="array-matrix-dataframe.html#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co"># step 3, mass for each unique</span></span>
<span id="cb109-12"><a href="array-matrix-dataframe.html#cb109-12" aria-hidden="true" tabindex="-1"></a>mt_prob_unique <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ar_prob[ls_sorted_res<span class="sc">$</span>ix], <span class="at">by=</span><span class="fu">list</span>(ls_sorted_res<span class="sc">$</span>x), <span class="at">FUN=</span>sum)</span>
<span id="cb109-13"><a href="array-matrix-dataframe.html#cb109-13" aria-hidden="true" tabindex="-1"></a>ar_x_unique_prob <span class="ot">&lt;-</span> mt_prob_unique<span class="sc">$</span>x</span>
<span id="cb109-14"><a href="array-matrix-dataframe.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co"># results</span></span>
<span id="cb109-15"><a href="array-matrix-dataframe.html#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_unique, ar_x_unique_prob))</span></code></pre></div>
<pre><code>##       ar_x_unique ar_x_unique_prob
##  [1,]          11      0.071718383
##  [2,]          13      0.040040920
##  [3,]          15      0.017708800
##  [4,]          16      0.141199002
##  [5,]          17      0.020211876
##  [6,]          19      0.052488290
##  [7,]          20      0.049104113
##  [8,]          21      0.067328518
##  [9,]          22      0.109454333
## [10,]          23      0.060712145
## [11,]          24      0.107671406
## [12,]          25      0.015694798
## [13,]          26      0.068567789
## [14,]          28      0.090925756
## [15,]          29      0.001870451
## [16,]          30      0.085303420</code></pre>

</div>
</div>
</div>
<div id="string-arrays" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> String Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="positive-or-negative-floating-number-to-string" class="section level4" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> Positive or Negative Floating Number to String</h4>
<p>There is a number, that contains decimal and possibly negative sign and has some decimals, convert this to a string that is more easily used as a file or folder name.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="array-matrix-dataframe.html#cb111-1" aria-hidden="true" tabindex="-1"></a>ls_fl_rho <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="fl">1.5</span> <span class="sc">-</span><span class="dv">100</span>, <span class="fl">0.5</span>, <span class="fl">0.11111111</span>, <span class="sc">-</span><span class="fl">199.22123</span>)</span>
<span id="cb111-2"><a href="array-matrix-dataframe.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (fl_rho <span class="cf">in</span> ls_fl_rho) {</span>
<span id="cb111-3"><a href="array-matrix-dataframe.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">round</span>(fl_rho, <span class="dv">4</span>))</span>
<span id="cb111-4"><a href="array-matrix-dataframe.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">x =</span> st_rho,  <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;n&quot;</span>)</span>
<span id="cb111-5"><a href="array-matrix-dataframe.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">x =</span> st_rho,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb111-6"><a href="array-matrix-dataframe.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_rho=&#39;</span>, st_rho))</span>
<span id="cb111-7"><a href="array-matrix-dataframe.html#cb111-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;st_rho=1&quot;
## [1] &quot;st_rho=n1&quot;
## [1] &quot;st_rho=n101p5&quot;
## [1] &quot;st_rho=0p5&quot;
## [1] &quot;st_rho=0p1111&quot;
## [1] &quot;st_rho=n199p2212&quot;</code></pre>
</div>
<div id="string-replace" class="section level4" number="1.2.3.2">
<h4><span class="header-section-number">1.2.3.2</span> String Replace</h4>
<ul>
<li>r string wildcard replace between regex</li>
<li><a href="https://stackoverflow.com/a/27246520/8280804">R - replace part of a string using wildcards</a></li>
</ul>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="array-matrix-dataframe.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># String replacement</span></span>
<span id="cb113-2"><a href="array-matrix-dataframe.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> <span class="fu">paste0</span>(<span class="fu">unique</span>(df.slds.stats.perc<span class="sc">$</span>it.inner.counter), <span class="st">&#39;:&#39;</span>,</span>
<span id="cb113-3"><a href="array-matrix-dataframe.html#cb113-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">unique</span>(df.slds.stats.perc<span class="sc">$</span>z_n_a_n), <span class="at">collapse =</span> <span class="st">&#39;;&#39;</span>),</span>
<span id="cb113-4"><a href="array-matrix-dataframe.html#cb113-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb113-5"><a href="array-matrix-dataframe.html#cb113-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb113-6"><a href="array-matrix-dataframe.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> var,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb113-7"><a href="array-matrix-dataframe.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> var.input,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<p>String replaces a segment, search by wildcard. Given the string below, delete all text between carriage return and pound sign:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="array-matrix-dataframe.html#cb114-1" aria-hidden="true" tabindex="-1"></a>st_tex_text <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">% Lat2ex Comments</span><span class="sc">\n\\</span><span class="st">newcommand{</span><span class="sc">\\</span><span class="st">exa}{</span><span class="sc">\\</span><span class="st">text{from external file: } </span><span class="sc">\\</span><span class="st">alpha + </span><span class="sc">\\</span><span class="st">beta}</span><span class="sc">\n</span><span class="st">% More LaLatex Comments</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb114-2"><a href="array-matrix-dataframe.html#cb114-2" aria-hidden="true" tabindex="-1"></a>st_clean_a1 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">%.*?</span><span class="sc">\\\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb114-3"><a href="array-matrix-dataframe.html#cb114-3" aria-hidden="true" tabindex="-1"></a>st_clean_a2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;L.*?x&quot;</span>, <span class="st">&quot;[LATEX]&quot;</span>, st_tex_text)</span>
<span id="cb114-4"><a href="array-matrix-dataframe.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\n% Lat2ex Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More LaLatex Comments\n&quot;</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="array-matrix-dataframe.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n&quot;</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="array-matrix-dataframe.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a2:&#39;</span>, st_clean_a2))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a2:\n% [LATEX] Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More [LATEX] Comments\n&quot;</code></pre>
<p>String delete after a particular string:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="array-matrix-dataframe.html#cb120-1" aria-hidden="true" tabindex="-1"></a>st_tex_text <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">end{equation}</span><span class="sc">\n</span><span class="st">}</span><span class="sc">\n</span><span class="st">% Even more comments from Latex preamble&quot;</span></span>
<span id="cb120-2"><a href="array-matrix-dataframe.html#cb120-2" aria-hidden="true" tabindex="-1"></a>st_clean_a1 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">%.*&quot;</span>,<span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb120-3"><a href="array-matrix-dataframe.html#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\\end{equation}\n}\n% Even more comments from Latex preamble&quot;</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="array-matrix-dataframe.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\\end{equation}\n}&quot;</code></pre>
</div>
<div id="search-if-and-which-string-contains" class="section level4" number="1.2.3.3">
<h4><span class="header-section-number">1.2.3.3</span> Search If and Which String Contains</h4>
<ul>
<li>r if string contains</li>
<li>r if string contains either or grepl</li>
<li><a href="https://stackoverflow.com/a/26319765/8280804">Use grepl to search either of multiple substrings in a text</a></li>
</ul>
<p>Search for a single substring in a single string:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="array-matrix-dataframe.html#cb124-1" aria-hidden="true" tabindex="-1"></a>st_example_a <span class="ot">&lt;-</span> <span class="st">&#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></span>
<span id="cb124-2"><a href="array-matrix-dataframe.html#cb124-2" aria-hidden="true" tabindex="-1"></a>st_example_b <span class="ot">&lt;-</span> <span class="st">&#39;C:/Users/fan/R4Econ/amto/tibble/_main.html&#39;</span></span>
<span id="cb124-3"><a href="array-matrix-dataframe.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_a)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="array-matrix-dataframe.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_b)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Search for if one of a set of substring exists in a set of strings. In particular which one of the elements of <em>ls_spn</em> contains at least one of the elements of <em>ls_str_if_contains</em>. In the example below, only the first path does not contain either the word <em>aggregate</em> or <em>index</em> in the path. This can be used after all paths have been found recursively in some folder to select only desired paths from the full set of possibilities:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="array-matrix-dataframe.html#cb128-1" aria-hidden="true" tabindex="-1"></a>ls_spn <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;C:/Users/fan/R4Econ//panel/basic/fs_genpanel.Rmd&quot;</span>,</span>
<span id="cb128-2"><a href="array-matrix-dataframe.html#cb128-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/aggregate/main.Rmd&quot;</span>,</span>
<span id="cb128-3"><a href="array-matrix-dataframe.html#cb128-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/index/fs_index_populate.Rmd&quot;</span>)</span>
<span id="cb128-4"><a href="array-matrix-dataframe.html#cb128-4" aria-hidden="true" tabindex="-1"></a>ls_str_if_contains <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;aggregate&quot;</span>, <span class="st">&quot;index&quot;</span>)</span>
<span id="cb128-5"><a href="array-matrix-dataframe.html#cb128-5" aria-hidden="true" tabindex="-1"></a>str_if_contains <span class="ot">&lt;-</span> <span class="fu">paste</span>(ls_str_if_contains, <span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>)</span>
<span id="cb128-6"><a href="array-matrix-dataframe.html#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(str_if_contains, ls_spn)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
</div>
<div id="string-split" class="section level4" number="1.2.3.4">
<h4><span class="header-section-number">1.2.3.4</span> String Split</h4>
<p>Given some string, generated for example by cut, get the lower cut starting points, and also the higher end point</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="array-matrix-dataframe.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract 0.216 and 0.500 as lower and upper bounds</span></span>
<span id="cb130-2"><a href="array-matrix-dataframe.html#cb130-2" aria-hidden="true" tabindex="-1"></a>st_cut_cate <span class="ot">&lt;-</span> <span class="st">&#39;(0.216,0.500]&#39;</span></span>
<span id="cb130-3"><a href="array-matrix-dataframe.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract Lower Part</span></span>
<span id="cb130-4"><a href="array-matrix-dataframe.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="fu">substring</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>], <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;0.216&quot;</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="array-matrix-dataframe.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract second part except final bracket Option 1</span></span>
<span id="cb132-2"><a href="array-matrix-dataframe.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">intToUtf8</span>(<span class="fu">rev</span>(<span class="fu">utf8ToInt</span>(<span class="fu">substring</span>(<span class="fu">intToUtf8</span>(<span class="fu">rev</span>(<span class="fu">utf8ToInt</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">2</span>]))), <span class="dv">2</span>))))</span></code></pre></div>
<pre><code>## [1] &quot;0.500&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="array-matrix-dataframe.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract second part except final bracket Option 2</span></span>
<span id="cb134-2"><a href="array-matrix-dataframe.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">2</span>],  <span class="at">pattern =</span> <span class="st">&quot;]&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;0.500&quot;</code></pre>
</div>
<div id="string-concatenate" class="section level4" number="1.2.3.5">
<h4><span class="header-section-number">1.2.3.5</span> String Concatenate</h4>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="array-matrix-dataframe.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple Collapse</span></span>
<span id="cb136-2"><a href="array-matrix-dataframe.html#cb136-2" aria-hidden="true" tabindex="-1"></a>vars.group.by <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;abc&#39;</span>, <span class="st">&#39;efg&#39;</span>)</span>
<span id="cb136-3"><a href="array-matrix-dataframe.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(vars.group.by, <span class="at">collapse=</span><span class="st">&#39;|&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;abc|efg&quot;</code></pre>
</div>
<div id="string-add-leading-zero" class="section level4" number="1.2.3.6">
<h4><span class="header-section-number">1.2.3.6</span> String Add Leading Zero</h4>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="array-matrix-dataframe.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Leading zero for integer values to allow for sorting when</span></span>
<span id="cb138-2"><a href="array-matrix-dataframe.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co"># integers are combined into strings</span></span>
<span id="cb138-3"><a href="array-matrix-dataframe.html#cb138-3" aria-hidden="true" tabindex="-1"></a>it_z_n <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb138-4"><a href="array-matrix-dataframe.html#cb138-4" aria-hidden="true" tabindex="-1"></a>it_a_n <span class="ot">&lt;-</span> <span class="dv">192</span></span>
<span id="cb138-5"><a href="array-matrix-dataframe.html#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%02d&quot;</span>, it_z_n))</span></code></pre></div>
<pre><code>## [1] &quot;01&quot;</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="array-matrix-dataframe.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%04d&quot;</span>, it_a_n))</span></code></pre></div>
<pre><code>## [1] &quot;0192&quot;</code></pre>
</div>
<div id="substring-components" class="section level4" number="1.2.3.7">
<h4><span class="header-section-number">1.2.3.7</span> Substring Components</h4>
<p>Given a string, with certain structure, get components.</p>
<ul>
<li>r time string get month and year and day</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="array-matrix-dataframe.html#cb142-1" aria-hidden="true" tabindex="-1"></a>snm_full <span class="ot">&lt;-</span> <span class="st">&quot;20100701&quot;</span></span>
<span id="cb142-2"><a href="array-matrix-dataframe.html#cb142-2" aria-hidden="true" tabindex="-1"></a>snm_year <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">0</span>,<span class="dv">4</span>)</span>
<span id="cb142-3"><a href="array-matrix-dataframe.html#cb142-3" aria-hidden="true" tabindex="-1"></a>snm_month <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb142-4"><a href="array-matrix-dataframe.html#cb142-4" aria-hidden="true" tabindex="-1"></a>snm_day <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">7</span>,<span class="dv">8</span>)</span>
<span id="cb142-5"><a href="array-matrix-dataframe.html#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;full:&#39;</span>, snm_full,</span>
<span id="cb142-6"><a href="array-matrix-dataframe.html#cb142-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;, year:&#39;</span>, snm_year,</span>
<span id="cb142-7"><a href="array-matrix-dataframe.html#cb142-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;, month:&#39;</span>, snm_month,</span>
<span id="cb142-8"><a href="array-matrix-dataframe.html#cb142-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;, day:&#39;</span>, snm_day))</span></code></pre></div>
<pre><code>## [1] &quot;full:20100701, year:2010, month:07, day:01&quot;</code></pre>

</div>
</div>
<div id="mesh-matrices-arrays-and-scalars" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Mesh Matrices, Arrays and Scalars</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r expand.grid meshed array to matrix</li>
<li>r meshgrid</li>
<li>r array to matrix</li>
<li>r reshape array to matrix</li>
<li>dplyr permuations rows of matrix and element of array</li>
<li>tidyr expand_grid mesh matrix and vector</li>
</ul>
<div id="mesh-two-or-more-vectors-with-expand_grid" class="section level4" number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> Mesh Two or More Vectors with expand_grid</h4>
<p>In the example below, we have a matrix that is 2 by 2 (endogenous states), a vector that is 3 by 1 (choices), and another matrix that is 4 by 3 (exogenous states shocks).</p>
<p>We want to generate a tibble dataset that meshes the matrix and the vector, so that all combinations show up. Additionally, we want to add some additional values that are common across all rows to the meshed dataframe.</p>
<p>Note <em>expand_grid</em> is a from tidyr 1.0.0.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="array-matrix-dataframe.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A. Generate the 5 by 2 Matrix (ENDO STATES)</span></span>
<span id="cb144-2"><a href="array-matrix-dataframe.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it_child_count = N, the number of children</span></span>
<span id="cb144-3"><a href="array-matrix-dataframe.html#cb144-3" aria-hidden="true" tabindex="-1"></a>it_N_child_cnt <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb144-4"><a href="array-matrix-dataframe.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="co"># P fixed parameters, nN is N dimensional, nP is P dimensional</span></span>
<span id="cb144-5"><a href="array-matrix-dataframe.html#cb144-5" aria-hidden="true" tabindex="-1"></a>ar_nN_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out =</span> it_N_child_cnt)</span>
<span id="cb144-6"><a href="array-matrix-dataframe.html#cb144-6" aria-hidden="true" tabindex="-1"></a>ar_nN_alpha <span class="ot">=</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="at">length.out =</span> it_N_child_cnt)</span>
<span id="cb144-7"><a href="array-matrix-dataframe.html#cb144-7" aria-hidden="true" tabindex="-1"></a>fl_rho <span class="ot">=</span> <span class="fl">0.1</span></span>
<span id="cb144-8"><a href="array-matrix-dataframe.html#cb144-8" aria-hidden="true" tabindex="-1"></a>fl_lambda <span class="ot">=</span> <span class="fl">1.1</span></span>
<span id="cb144-9"><a href="array-matrix-dataframe.html#cb144-9" aria-hidden="true" tabindex="-1"></a>mt_nP_A_alpha <span class="ot">=</span> <span class="fu">cbind</span>(ar_nN_A, ar_nN_alpha, fl_rho, fl_lambda)</span>
<span id="cb144-10"><a href="array-matrix-dataframe.html#cb144-10" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;s_A&#39;</span>, <span class="st">&#39;s_alpha&#39;</span>, <span class="st">&#39;p_rho&#39;</span>, <span class="st">&#39;p_lambda&#39;</span>)</span>
<span id="cb144-11"><a href="array-matrix-dataframe.html#cb144-11" aria-hidden="true" tabindex="-1"></a>tb_states_endo <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_nP_A_alpha) <span class="sc">%&gt;%</span></span>
<span id="cb144-12"><a href="array-matrix-dataframe.html#cb144-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb144-13"><a href="array-matrix-dataframe.html#cb144-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;state_id&quot;</span>)</span>
<span id="cb144-14"><a href="array-matrix-dataframe.html#cb144-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-15"><a href="array-matrix-dataframe.html#cb144-15" aria-hidden="true" tabindex="-1"></a><span class="co"># B. Choice Grid</span></span>
<span id="cb144-16"><a href="array-matrix-dataframe.html#cb144-16" aria-hidden="true" tabindex="-1"></a>it_N_choice_cnt <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb144-17"><a href="array-matrix-dataframe.html#cb144-17" aria-hidden="true" tabindex="-1"></a>fl_max <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb144-18"><a href="array-matrix-dataframe.html#cb144-18" aria-hidden="true" tabindex="-1"></a>fl_min <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb144-19"><a href="array-matrix-dataframe.html#cb144-19" aria-hidden="true" tabindex="-1"></a>ar_nN_d <span class="ot">=</span> <span class="fu">seq</span>(fl_min, fl_max, <span class="at">length.out =</span> it_N_choice_cnt)</span>
<span id="cb144-20"><a href="array-matrix-dataframe.html#cb144-20" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;c_food&#39;</span>)</span>
<span id="cb144-21"><a href="array-matrix-dataframe.html#cb144-21" aria-hidden="true" tabindex="-1"></a>tb_choices <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ar_nN_d) <span class="sc">%&gt;%</span></span>
<span id="cb144-22"><a href="array-matrix-dataframe.html#cb144-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb144-23"><a href="array-matrix-dataframe.html#cb144-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;choice_id&quot;</span>)</span>
<span id="cb144-24"><a href="array-matrix-dataframe.html#cb144-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-25"><a href="array-matrix-dataframe.html#cb144-25" aria-hidden="true" tabindex="-1"></a><span class="co"># C. Shock Grid</span></span>
<span id="cb144-26"><a href="array-matrix-dataframe.html#cb144-26" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb144-27"><a href="array-matrix-dataframe.html#cb144-27" aria-hidden="true" tabindex="-1"></a>it_N_shock_cnt <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb144-28"><a href="array-matrix-dataframe.html#cb144-28" aria-hidden="true" tabindex="-1"></a>ar_nQ_shocks <span class="ot">=</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(it_N_shock_cnt, <span class="at">mean=</span><span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>))</span>
<span id="cb144-29"><a href="array-matrix-dataframe.html#cb144-29" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;s_eps&#39;</span>)</span>
<span id="cb144-30"><a href="array-matrix-dataframe.html#cb144-30" aria-hidden="true" tabindex="-1"></a>tb_states_exo <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ar_nQ_shocks) <span class="sc">%&gt;%</span></span>
<span id="cb144-31"><a href="array-matrix-dataframe.html#cb144-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb144-32"><a href="array-matrix-dataframe.html#cb144-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;shock_id&quot;</span>)</span>
<span id="cb144-33"><a href="array-matrix-dataframe.html#cb144-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-34"><a href="array-matrix-dataframe.html#cb144-34" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe expand with other non expanded variables</span></span>
<span id="cb144-35"><a href="array-matrix-dataframe.html#cb144-35" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span></span>
<span id="cb144-36"><a href="array-matrix-dataframe.html#cb144-36" aria-hidden="true" tabindex="-1"></a>tb_states_shk_choices <span class="ot">&lt;-</span> tb_states_endo <span class="sc">%&gt;%</span></span>
<span id="cb144-37"><a href="array-matrix-dataframe.html#cb144-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_grid</span>(tb_choices) <span class="sc">%&gt;%</span></span>
<span id="cb144-38"><a href="array-matrix-dataframe.html#cb144-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_grid</span>(tb_states_exo) <span class="sc">%&gt;%</span></span>
<span id="cb144-39"><a href="array-matrix-dataframe.html#cb144-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_id, choice_id, shock_id,</span>
<span id="cb144-40"><a href="array-matrix-dataframe.html#cb144-40" aria-hidden="true" tabindex="-1"></a>         s_A, s_alpha, s_eps, c_food,</span>
<span id="cb144-41"><a href="array-matrix-dataframe.html#cb144-41" aria-hidden="true" tabindex="-1"></a>         p_rho, p_lambda)</span>
<span id="cb144-42"><a href="array-matrix-dataframe.html#cb144-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-43"><a href="array-matrix-dataframe.html#cb144-43" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb144-44"><a href="array-matrix-dataframe.html#cb144-44" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_states_shk_choices) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
state_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
choice_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
shock_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_A
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_alpha
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_eps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
c_food
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_rho
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_lambda
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
</tbody>
</table>
<p>Using expand_grid directly over arrays</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="array-matrix-dataframe.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand grid with dplyr</span></span>
<span id="cb145-2"><a href="array-matrix-dataframe.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">expand_grid</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">z =</span> <span class="sc">-</span><span class="dv">3</span><span class="sc">:-</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="mesh-arrays-with-expand.grid" class="section level4" number="1.2.4.2">
<h4><span class="header-section-number">1.2.4.2</span> Mesh Arrays with expand.grid</h4>
<p>Given two arrays, mesh the two arrays together.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="array-matrix-dataframe.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb146-2"><a href="array-matrix-dataframe.html#cb146-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-3"><a href="array-matrix-dataframe.html#cb146-3" aria-hidden="true" tabindex="-1"></a>it_ar_A <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb146-4"><a href="array-matrix-dataframe.html#cb146-4" aria-hidden="true" tabindex="-1"></a>it_ar_alpha <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb146-5"><a href="array-matrix-dataframe.html#cb146-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-6"><a href="array-matrix-dataframe.html#cb146-6" aria-hidden="true" tabindex="-1"></a>ar_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out=</span>it_ar_A)</span>
<span id="cb146-7"><a href="array-matrix-dataframe.html#cb146-7" aria-hidden="true" tabindex="-1"></a>ar_alpha <span class="ot">=</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="at">length.out=</span>it_ar_alpha)</span>
<span id="cb146-8"><a href="array-matrix-dataframe.html#cb146-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-9"><a href="array-matrix-dataframe.html#cb146-9" aria-hidden="true" tabindex="-1"></a>mt_A_alpha <span class="ot">=</span> <span class="fu">expand.grid</span>(<span class="at">A =</span> ar_A, <span class="at">alpha =</span> ar_alpha)</span>
<span id="cb146-10"><a href="array-matrix-dataframe.html#cb146-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-11"><a href="array-matrix-dataframe.html#cb146-11" aria-hidden="true" tabindex="-1"></a>mt_A_meshed <span class="ot">=</span> mt_A_alpha[,<span class="dv">1</span>]</span>
<span id="cb146-12"><a href="array-matrix-dataframe.html#cb146-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mt_A_meshed) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb146-13"><a href="array-matrix-dataframe.html#cb146-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-14"><a href="array-matrix-dataframe.html#cb146-14" aria-hidden="true" tabindex="-1"></a>mt_alpha_meshed <span class="ot">=</span> mt_A_alpha[,<span class="dv">2</span>]</span>
<span id="cb146-15"><a href="array-matrix-dataframe.html#cb146-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mt_alpha_meshed) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb146-16"><a href="array-matrix-dataframe.html#cb146-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-17"><a href="array-matrix-dataframe.html#cb146-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb146-18"><a href="array-matrix-dataframe.html#cb146-18" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_A_meshed) <span class="sc">%&gt;%</span></span>
<span id="cb146-19"><a href="array-matrix-dataframe.html#cb146-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="array-matrix-dataframe.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_alpha_meshed) <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="array-matrix-dataframe.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
</tbody>
</table>
</div>
<p>Two Identical Arrays, individual attributes, each column is an individual for a matrix, and each row is also an individual.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="array-matrix-dataframe.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb148-2"><a href="array-matrix-dataframe.html#cb148-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-3"><a href="array-matrix-dataframe.html#cb148-3" aria-hidden="true" tabindex="-1"></a>it_ar_A <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb148-4"><a href="array-matrix-dataframe.html#cb148-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-5"><a href="array-matrix-dataframe.html#cb148-5" aria-hidden="true" tabindex="-1"></a>ar_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out=</span>it_ar_A)</span>
<span id="cb148-6"><a href="array-matrix-dataframe.html#cb148-6" aria-hidden="true" tabindex="-1"></a>mt_A_A <span class="ot">=</span> <span class="fu">expand.grid</span>(<span class="at">Arow =</span> ar_A, <span class="at">Arow =</span> ar_A)</span>
<span id="cb148-7"><a href="array-matrix-dataframe.html#cb148-7" aria-hidden="true" tabindex="-1"></a>mt_Arow <span class="ot">=</span> mt_A_A[,<span class="dv">1</span>]</span>
<span id="cb148-8"><a href="array-matrix-dataframe.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mt_Arow) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb148-9"><a href="array-matrix-dataframe.html#cb148-9" aria-hidden="true" tabindex="-1"></a>mt_Acol <span class="ot">=</span> mt_A_A[,<span class="dv">2</span>]</span>
<span id="cb148-10"><a href="array-matrix-dataframe.html#cb148-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mt_Acol) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb148-11"><a href="array-matrix-dataframe.html#cb148-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-12"><a href="array-matrix-dataframe.html#cb148-12" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb148-13"><a href="array-matrix-dataframe.html#cb148-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_Arow) <span class="sc">%&gt;%</span></span>
<span id="cb148-14"><a href="array-matrix-dataframe.html#cb148-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="array-matrix-dataframe.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_Acol) <span class="sc">%&gt;%</span></span>
<span id="cb149-2"><a href="array-matrix-dataframe.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="matrix" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Matrix</h2>

<div id="generate-matrixes" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Generate Matrixes</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="create-a-n-by-2-matrix-from-3-arrays" class="section level4" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Create a N by 2 Matrix from 3 arrays</h4>
<p>Names of each array become row names automatically.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="array-matrix-dataframe.html#cb150-1" aria-hidden="true" tabindex="-1"></a>ar_row_one <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb150-2"><a href="array-matrix-dataframe.html#cb150-2" aria-hidden="true" tabindex="-1"></a>ar_row_two <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb150-3"><a href="array-matrix-dataframe.html#cb150-3" aria-hidden="true" tabindex="-1"></a>ar_row_three <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb150-4"><a href="array-matrix-dataframe.html#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="array-matrix-dataframe.html#cb150-5" aria-hidden="true" tabindex="-1"></a>mt_n_by_2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb150-6"><a href="array-matrix-dataframe.html#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_n_by_2) <span class="sc">%&gt;%</span></span>
<span id="cb150-7"><a href="array-matrix-dataframe.html#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
ar_row_one
</td>
<td style="text-align:right;">
-1.00
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_two
</td>
<td style="text-align:right;">
-3.00
</td>
<td style="text-align:right;">
-2.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_three
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
</tbody>
</table>
</div>
<div id="name-matrix-columns-and-rows" class="section level4" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Name Matrix Columns and Rows</h4>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="array-matrix-dataframe.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb151-2"><a href="array-matrix-dataframe.html#cb151-2" aria-hidden="true" tabindex="-1"></a>mt_named <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb151-3"><a href="array-matrix-dataframe.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mt_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;c&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb151-4"><a href="array-matrix-dataframe.html#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(mt_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;r&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb151-5"><a href="array-matrix-dataframe.html#cb151-5" aria-hidden="true" tabindex="-1"></a>mt_named</span></code></pre></div>
<pre><code>##    c1 c2
## r1 NA NA
## r2 NA NA</code></pre>
</div>
<div id="generate-na-matrix" class="section level4" number="1.3.1.3">
<h4><span class="header-section-number">1.3.1.3</span> Generate NA Matrix</h4>
<ul>
<li><a href="https://stackoverflow.com/a/26724451/8280804">Best way to allocate matrix in R, NULL vs NA?</a></li>
</ul>
<p>Allocate with NA or NA_real_ or NA_int_. Clarity in type definition is preferred.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="array-matrix-dataframe.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb153-2"><a href="array-matrix-dataframe.html#cb153-2" aria-hidden="true" tabindex="-1"></a>mt_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb153-3"><a href="array-matrix-dataframe.html#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mt_na)</span></code></pre></div>
<pre><code>##  logi [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="array-matrix-dataframe.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An empty matrix with numerica NA</span></span>
<span id="cb155-2"><a href="array-matrix-dataframe.html#cb155-2" aria-hidden="true" tabindex="-1"></a>mt_fl_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA_real_</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb155-3"><a href="array-matrix-dataframe.html#cb155-3" aria-hidden="true" tabindex="-1"></a>mt_it_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA_integer_</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb155-4"><a href="array-matrix-dataframe.html#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="array-matrix-dataframe.html#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="array-matrix-dataframe.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
</div>
<div id="generate-random-matrixes" class="section level4" number="1.3.1.4">
<h4><span class="header-section-number">1.3.1.4</span> Generate Random Matrixes</h4>
<p>Random draw from the normal distribution, random draw from the uniform distribution, and combine resulting matrixes.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="array-matrix-dataframe.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb159-2"><a href="array-matrix-dataframe.html#cb159-2" aria-hidden="true" tabindex="-1"></a>mt_rnorm <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">15</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb159-3"><a href="array-matrix-dataframe.html#cb159-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-4"><a href="array-matrix-dataframe.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb159-5"><a href="array-matrix-dataframe.html#cb159-5" aria-hidden="true" tabindex="-1"></a>mt_runif <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">15</span>,<span class="at">min=</span><span class="dv">0</span>,<span class="at">max=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">5</span>)</span>
<span id="cb159-6"><a href="array-matrix-dataframe.html#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="array-matrix-dataframe.html#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine</span></span>
<span id="cb159-8"><a href="array-matrix-dataframe.html#cb159-8" aria-hidden="true" tabindex="-1"></a>mt_rnorm_runif <span class="ot">&lt;-</span> <span class="fu">cbind</span>(mt_rnorm, mt_runif)</span>
<span id="cb159-9"><a href="array-matrix-dataframe.html#cb159-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-10"><a href="array-matrix-dataframe.html#cb159-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb159-11"><a href="array-matrix-dataframe.html#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_rnorm_runif) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
0.2659726
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
</tr>
<tr>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
1.7869131
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
0.8578277
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
</tr>
<tr>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
0.4978505
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
0.0458312
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-1.9666172
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
0.4422001
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
0.7013559
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
0.7989248
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="add-column-to-matrix-with-common-scalar-value" class="section level4" number="1.3.1.5">
<h4><span class="header-section-number">1.3.1.5</span> Add Column to Matrix with Common Scalar Value</h4>
<p>Given some matrix of information, add a column, where all rows of the column have the same numerical value. Use the matrix created prior.
- R add column to matrix
- r append column to matrix constant value</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="array-matrix-dataframe.html#cb160-1" aria-hidden="true" tabindex="-1"></a>fl_new_first_col_val <span class="ot">&lt;-</span> <span class="dv">111</span></span>
<span id="cb160-2"><a href="array-matrix-dataframe.html#cb160-2" aria-hidden="true" tabindex="-1"></a>fl_new_last_col_val <span class="ot">&lt;-</span> <span class="dv">999</span></span>
<span id="cb160-3"><a href="array-matrix-dataframe.html#cb160-3" aria-hidden="true" tabindex="-1"></a>mt_with_more_columns <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">rep</span>(fl_new_first_col_val, <span class="fu">dim</span>(mt_rnorm_runif)[<span class="dv">1</span>]), </span>
<span id="cb160-4"><a href="array-matrix-dataframe.html#cb160-4" aria-hidden="true" tabindex="-1"></a>                              mt_rnorm_runif,</span>
<span id="cb160-5"><a href="array-matrix-dataframe.html#cb160-5" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">rep</span>(fl_new_last_col_val, <span class="fu">dim</span>(mt_rnorm_runif)[<span class="dv">1</span>]))</span>
<span id="cb160-6"><a href="array-matrix-dataframe.html#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb160-7"><a href="array-matrix-dataframe.html#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_with_more_columns) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
0.2659726
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
1.7869131
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
0.8578277
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
0.4978505
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
0.0458312
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-1.9666172
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
0.4422001
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
0.7013559
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
0.7989248
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
999
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="linear-algebra" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Linear Algebra</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="matrix-multiplication" class="section level4" number="1.3.2.1">
<h4><span class="header-section-number">1.3.2.1</span> Matrix Multiplication</h4>
<p>Multiply Together a 3 by 2 matrix and a 2 by 1 vector</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="array-matrix-dataframe.html#cb161-1" aria-hidden="true" tabindex="-1"></a>ar_row_one <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb161-2"><a href="array-matrix-dataframe.html#cb161-2" aria-hidden="true" tabindex="-1"></a>ar_row_two <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb161-3"><a href="array-matrix-dataframe.html#cb161-3" aria-hidden="true" tabindex="-1"></a>ar_row_three <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb161-4"><a href="array-matrix-dataframe.html#cb161-4" aria-hidden="true" tabindex="-1"></a>mt_n_by_2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb161-5"><a href="array-matrix-dataframe.html#cb161-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-6"><a href="array-matrix-dataframe.html#cb161-6" aria-hidden="true" tabindex="-1"></a>ar_row_four <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb161-7"><a href="array-matrix-dataframe.html#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="array-matrix-dataframe.html#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Matrix Multiplication</span></span>
<span id="cb161-9"><a href="array-matrix-dataframe.html#cb161-9" aria-hidden="true" tabindex="-1"></a>mt_out <span class="ot">&lt;-</span> mt_n_by_2 <span class="sc">%*%</span> ar_row_four</span>
<span id="cb161-10"><a href="array-matrix-dataframe.html#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mt_n_by_2)</span></code></pre></div>
<pre><code>##               [,1]  [,2]
## ar_row_one   -1.00  1.00
## ar_row_two   -3.00 -2.00
## ar_row_three  0.35  0.75</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="array-matrix-dataframe.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ar_row_four)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="array-matrix-dataframe.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mt_out)</span></code></pre></div>
<pre><code>##                [,1]
## ar_row_one     1.00
## ar_row_two   -17.00
## ar_row_three   4.05</code></pre>

</div>
</div>
</div>
<div id="variables-in-dataframes" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Variables in Dataframes</h2>

<!-- includes:
  in_header: ../../preamble.tex -->
<div id="generate-dataframe" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Generate Dataframe</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="simple-meshed-dataframe-name-columns" class="section level4" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> Simple Meshed Dataframe Name Columns</h4>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="array-matrix-dataframe.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 by 3 matrix</span></span>
<span id="cb167-2"><a href="array-matrix-dataframe.html#cb167-2" aria-hidden="true" tabindex="-1"></a>mt_rnorm_a <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb167-3"><a href="array-matrix-dataframe.html#cb167-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-4"><a href="array-matrix-dataframe.html#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Column Names</span></span>
<span id="cb167-5"><a href="array-matrix-dataframe.html#cb167-5" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;varb&#39;</span>,<span class="st">&#39;vartheta&#39;</span>)</span>
<span id="cb167-6"><a href="array-matrix-dataframe.html#cb167-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-7"><a href="array-matrix-dataframe.html#cb167-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb167-8"><a href="array-matrix-dataframe.html#cb167-8" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_rnorm_a) <span class="sc">%&gt;%</span></span>
<span id="cb167-9"><a href="array-matrix-dataframe.html#cb167-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb167-10"><a href="array-matrix-dataframe.html#cb167-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames))</span>
<span id="cb167-11"><a href="array-matrix-dataframe.html#cb167-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-12"><a href="array-matrix-dataframe.html#cb167-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb167-13"><a href="array-matrix-dataframe.html#cb167-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_combine) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
varb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
vartheta
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-0.3200564
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-1.1655448
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
</tr>
</tbody>
</table>
</div>
<div id="generate-tibble-given-matrixes-and-arrays" class="section level4" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> Generate Tibble given Matrixes and Arrays</h4>
<p>Given Arrays and Matrixes, Generate Tibble and Name Variables/Columns</p>
<ul>
<li>naming tibble columns</li>
<li>tibble variable names</li>
<li>dplyr rename tibble</li>
<li>dplyr rename tibble all variables</li>
<li>dplyr rename all columns by index</li>
<li>dplyr tibble add index column</li>
<li>see also: <a href="https://stackoverflow.com/questions/45535157/difference-between-dplyrrename-and-dplyrrename-all">SO-51205520</a></li>
</ul>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="array-matrix-dataframe.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base Inputs</span></span>
<span id="cb168-2"><a href="array-matrix-dataframe.html#cb168-2" aria-hidden="true" tabindex="-1"></a>ar_col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb168-3"><a href="array-matrix-dataframe.html#cb168-3" aria-hidden="true" tabindex="-1"></a>mt_rnorm_a <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb168-4"><a href="array-matrix-dataframe.html#cb168-4" aria-hidden="true" tabindex="-1"></a>mt_rnorm_b <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">4</span>)</span>
<span id="cb168-5"><a href="array-matrix-dataframe.html#cb168-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-6"><a href="array-matrix-dataframe.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Matrix</span></span>
<span id="cb168-7"><a href="array-matrix-dataframe.html#cb168-7" aria-hidden="true" tabindex="-1"></a>mt_combine <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ar_col, mt_rnorm_a, mt_rnorm_b)</span>
<span id="cb168-8"><a href="array-matrix-dataframe.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mt_combine) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;ar_col&#39;</span>,</span>
<span id="cb168-9"><a href="array-matrix-dataframe.html#cb168-9" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste0</span>(<span class="st">&#39;matcolvar_grpa_&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">dim</span>(mt_rnorm_a)[<span class="dv">2</span>])),</span>
<span id="cb168-10"><a href="array-matrix-dataframe.html#cb168-10" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste0</span>(<span class="st">&#39;matcolvar_grpb_&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">dim</span>(mt_rnorm_b)[<span class="dv">2</span>])))</span>
<span id="cb168-11"><a href="array-matrix-dataframe.html#cb168-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-12"><a href="array-matrix-dataframe.html#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable Names</span></span>
<span id="cb168-13"><a href="array-matrix-dataframe.html#cb168-13" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;var_one&#39;</span>,</span>
<span id="cb168-14"><a href="array-matrix-dataframe.html#cb168-14" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">paste0</span>(<span class="st">&#39;tibcolvar_ga_&#39;</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)),</span>
<span id="cb168-15"><a href="array-matrix-dataframe.html#cb168-15" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">paste0</span>(<span class="st">&#39;tibcolvar_gb_&#39;</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)))</span>
<span id="cb168-16"><a href="array-matrix-dataframe.html#cb168-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-17"><a href="array-matrix-dataframe.html#cb168-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb168-18"><a href="array-matrix-dataframe.html#cb168-18" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_combine) <span class="sc">%&gt;%</span> <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames))</span>
<span id="cb168-19"><a href="array-matrix-dataframe.html#cb168-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-20"><a href="array-matrix-dataframe.html#cb168-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Add an index column to the dataframe, ID column</span></span>
<span id="cb168-21"><a href="array-matrix-dataframe.html#cb168-21" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> tb_combine <span class="sc">%&gt;%</span> <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb168-22"><a href="array-matrix-dataframe.html#cb168-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-23"><a href="array-matrix-dataframe.html#cb168-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Change all gb variable names</span></span>
<span id="cb168-24"><a href="array-matrix-dataframe.html#cb168-24" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> tb_combine <span class="sc">%&gt;%</span></span>
<span id="cb168-25"><a href="array-matrix-dataframe.html#cb168-25" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;tibcolvar_gb_&quot;</span>)),</span>
<span id="cb168-26"><a href="array-matrix-dataframe.html#cb168-26" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">funs</span>(<span class="fu">str_replace</span>(., <span class="st">&quot;_gb_&quot;</span>, <span class="st">&quot;_gbrenamed_&quot;</span>)))</span>
<span id="cb168-27"><a href="array-matrix-dataframe.html#cb168-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-28"><a href="array-matrix-dataframe.html#cb168-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Tibble back to matrix</span></span>
<span id="cb168-29"><a href="array-matrix-dataframe.html#cb168-29" aria-hidden="true" tabindex="-1"></a>mt_tb_combine_back <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(tb_combine)</span>
<span id="cb168-30"><a href="array-matrix-dataframe.html#cb168-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-31"><a href="array-matrix-dataframe.html#cb168-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb168-32"><a href="array-matrix-dataframe.html#cb168-32" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_combine) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ar_col
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="array-matrix-dataframe.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_combine) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="array-matrix-dataframe.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mt_tb_combine_back) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rename-tibble-with-numeric-column-names" class="section level4" number="1.4.1.3">
<h4><span class="header-section-number">1.4.1.3</span> Rename Tibble with Numeric Column Names</h4>
<p>After reshaping, often could end up with variable names that are all numeric, intgers for example, how to rename these variables to add a common prefix for example.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="array-matrix-dataframe.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base Inputs</span></span>
<span id="cb171-2"><a href="array-matrix-dataframe.html#cb171-2" aria-hidden="true" tabindex="-1"></a>ar_col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb171-3"><a href="array-matrix-dataframe.html#cb171-3" aria-hidden="true" tabindex="-1"></a>mt_rnorm_c <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">10</span>)</span>
<span id="cb171-4"><a href="array-matrix-dataframe.html#cb171-4" aria-hidden="true" tabindex="-1"></a>mt_combine <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ar_col, mt_rnorm_c)</span>
<span id="cb171-5"><a href="array-matrix-dataframe.html#cb171-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-6"><a href="array-matrix-dataframe.html#cb171-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable Names</span></span>
<span id="cb171-7"><a href="array-matrix-dataframe.html#cb171-7" aria-hidden="true" tabindex="-1"></a>ar_it_cols_ctr <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">dim</span>(mt_rnorm_c)[<span class="dv">2</span>])</span>
<span id="cb171-8"><a href="array-matrix-dataframe.html#cb171-8" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;var_one&#39;</span>, ar_it_cols_ctr)</span>
<span id="cb171-9"><a href="array-matrix-dataframe.html#cb171-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-10"><a href="array-matrix-dataframe.html#cb171-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb171-11"><a href="array-matrix-dataframe.html#cb171-11" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_combine) <span class="sc">%&gt;%</span> <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames))</span>
<span id="cb171-12"><a href="array-matrix-dataframe.html#cb171-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-13"><a href="array-matrix-dataframe.html#cb171-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add an index column to the dataframe, ID column</span></span>
<span id="cb171-14"><a href="array-matrix-dataframe.html#cb171-14" aria-hidden="true" tabindex="-1"></a>tb_combine_ori <span class="ot">&lt;-</span> tb_combine <span class="sc">%&gt;%</span> <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb171-15"><a href="array-matrix-dataframe.html#cb171-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-16"><a href="array-matrix-dataframe.html#cb171-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Change all gb variable names</span></span>
<span id="cb171-17"><a href="array-matrix-dataframe.html#cb171-17" aria-hidden="true" tabindex="-1"></a>tb_combine <span class="ot">&lt;-</span> tb_combine_ori <span class="sc">%&gt;%</span></span>
<span id="cb171-18"><a href="array-matrix-dataframe.html#cb171-18" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_at</span>(</span>
<span id="cb171-19"><a href="array-matrix-dataframe.html#cb171-19" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">vars</span>(<span class="fu">num_range</span>(<span class="st">&#39;&#39;</span>,ar_it_cols_ctr)),</span>
<span id="cb171-20"><a href="array-matrix-dataframe.html#cb171-20" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">funs</span>(<span class="fu">paste0</span>(<span class="st">&quot;rho&quot;</span>, . , <span class="st">&#39;var&#39;</span>))</span>
<span id="cb171-21"><a href="array-matrix-dataframe.html#cb171-21" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb171-22"><a href="array-matrix-dataframe.html#cb171-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-23"><a href="array-matrix-dataframe.html#cb171-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb171-24"><a href="array-matrix-dataframe.html#cb171-24" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_combine_ori) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
6
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
7
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
8
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
9
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
10
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="array-matrix-dataframe.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_combine) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho1var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho2var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho3var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho4var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho5var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho6var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho7var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho8var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho9var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho10var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="tibble-row-and-column-and-summarize" class="section level4" number="1.4.1.4">
<h4><span class="header-section-number">1.4.1.4</span> Tibble Row and Column and Summarize</h4>
<p>Show what is in the table: 1, column and row names; 2, contents inside table.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="array-matrix-dataframe.html#cb173-1" aria-hidden="true" tabindex="-1"></a>tb_iris <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris)</span>
<span id="cb173-2"><a href="array-matrix-dataframe.html#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">rownames</span>(tb_iris))</span></code></pre></div>
<pre><code>##   [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot;  &quot;12&quot;  &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot; 
##  [17] &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot;  &quot;22&quot;  &quot;23&quot;  &quot;24&quot;  &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot; 
##  [33] &quot;33&quot;  &quot;34&quot;  &quot;35&quot;  &quot;36&quot;  &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot;  &quot;43&quot;  &quot;44&quot;  &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot; 
##  [49] &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot;  &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot;  &quot;61&quot;  &quot;62&quot;  &quot;63&quot;  &quot;64&quot; 
##  [65] &quot;65&quot;  &quot;66&quot;  &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot;  &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot;  &quot;78&quot;  &quot;79&quot;  &quot;80&quot; 
##  [81] &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot;  &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot;  &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot; 
##  [97] &quot;97&quot;  &quot;98&quot;  &quot;99&quot;  &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot; &quot;106&quot; &quot;107&quot; &quot;108&quot; &quot;109&quot; &quot;110&quot; &quot;111&quot; &quot;112&quot;
## [113] &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot; &quot;121&quot; &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot; &quot;127&quot; &quot;128&quot;
## [129] &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot; &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot; &quot;144&quot;
## [145] &quot;145&quot; &quot;146&quot; &quot;147&quot; &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="array-matrix-dataframe.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tb_iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="array-matrix-dataframe.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tb_iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="array-matrix-dataframe.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tb_iris)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500</code></pre>
</div>
<div id="tibble-sorting" class="section level4" number="1.4.1.5">
<h4><span class="header-section-number">1.4.1.5</span> Tibble Sorting</h4>
<ul>
<li>dplyr arrange desc reverse</li>
<li>dplyr sort</li>
</ul>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="array-matrix-dataframe.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort in Ascending Order</span></span>
<span id="cb181-2"><a href="array-matrix-dataframe.html#cb181-2" aria-hidden="true" tabindex="-1"></a>tb_iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Species, Sepal.Length, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb181-3"><a href="array-matrix-dataframe.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Species, Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-4"><a href="array-matrix-dataframe.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.1
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="array-matrix-dataframe.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort in Descending Order</span></span>
<span id="cb182-2"><a href="array-matrix-dataframe.html#cb182-2" aria-hidden="true" tabindex="-1"></a>tb_iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Species, Sepal.Length, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb182-3"><a href="array-matrix-dataframe.html#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Species), <span class="fu">desc</span>(Sepal.Length)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb182-4"><a href="array-matrix-dataframe.html#cb182-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.4
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.6
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
</tbody>
</table>
</div>
<div id="recontools-summarize-over-tible" class="section level4" number="1.4.1.6">
<h4><span class="header-section-number">1.4.1.6</span> REconTools Summarize over Tible</h4>
<p>Use R4Econâ€™s summary tool.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="array-matrix-dataframe.html#cb183-1" aria-hidden="true" tabindex="-1"></a>df_summ_stats <span class="ot">&lt;-</span> <span class="fu">ff_summ_percentiles</span>(tb_iris)</span>
<span id="cb183-2"><a href="array-matrix-dataframe.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">t</span>(df_summ_stats)) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
stats
</td>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
unique
</td>
<td style="text-align:left;">
NAobs
</td>
<td style="text-align:left;">
ZEROobs
</td>
<td style="text-align:left;">
mean
</td>
<td style="text-align:left;">
sd
</td>
<td style="text-align:left;">
cv
</td>
<td style="text-align:left;">
min
</td>
<td style="text-align:left;">
p01
</td>
<td style="text-align:left;">
p05
</td>
<td style="text-align:left;">
p10
</td>
<td style="text-align:left;">
p25
</td>
<td style="text-align:left;">
p50
</td>
<td style="text-align:left;">
p75
</td>
<td style="text-align:left;">
p90
</td>
<td style="text-align:left;">
p95
</td>
<td style="text-align:left;">
p99
</td>
<td style="text-align:left;">
max
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
43
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.758000
</td>
<td style="text-align:left;">
1.7652982
</td>
<td style="text-align:left;">
0.4697441
</td>
<td style="text-align:left;">
1.0
</td>
<td style="text-align:left;">
1.149
</td>
<td style="text-align:left;">
1.300
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
4.35
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.100
</td>
<td style="text-align:left;">
6.700
</td>
<td style="text-align:left;">
6.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
22
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1.199333
</td>
<td style="text-align:left;">
0.7622377
</td>
<td style="text-align:left;">
0.6355511
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.100
</td>
<td style="text-align:left;">
0.200
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
1.30
</td>
<td style="text-align:left;">
1.8
</td>
<td style="text-align:left;">
2.20
</td>
<td style="text-align:left;">
2.300
</td>
<td style="text-align:left;">
2.500
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
5.843333
</td>
<td style="text-align:left;">
0.8280661
</td>
<td style="text-align:left;">
0.1417113
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
4.400
</td>
<td style="text-align:left;">
4.600
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.4
</td>
<td style="text-align:left;">
6.90
</td>
<td style="text-align:left;">
7.255
</td>
<td style="text-align:left;">
7.700
</td>
<td style="text-align:left;">
7.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
23
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.057333
</td>
<td style="text-align:left;">
0.4358663
</td>
<td style="text-align:left;">
0.1425642
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
2.200
</td>
<td style="text-align:left;">
2.345
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
2.8
</td>
<td style="text-align:left;">
3.00
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
3.61
</td>
<td style="text-align:left;">
3.800
</td>
<td style="text-align:left;">
4.151
</td>
<td style="text-align:left;">
4.4
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="factor-label-and-combine" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Factor Label and Combine</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="factor-label-cross-and-graph" class="section level4" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Factor, Label, Cross and Graph</h4>
<p>Generate a Scatter plot with different colors representing different categories. There are multiple underlying factor/categorical variables, for example two binary variables. Generate scatter plot with colors for the combinations of these two binary variables.</p>
<p>We combine here the <em>vs</em> and <em>am</em> variables from the <em>mtcars</em> dataset. <em>vs</em> is engine shape, <em>am</em> is auto or manual shift. We will generate a scatter plot of <em>mpg</em> and <em>qsec</em> over four categories with different colors.</p>
<ul>
<li><em>am</em>: Transmission (0 = automatic, 1 = manual)</li>
<li><em>vs</em>: Engine (0 = V-shaped, 1 = straight)</li>
<li><em>mpg</em>: miles per galon</li>
<li><em>qsec</em>: 1/4 mile time</li>
</ul>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="array-matrix-dataframe.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First make sure these are factors</span></span>
<span id="cb184-2"><a href="array-matrix-dataframe.html#cb184-2" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span> </span>
<span id="cb184-3"><a href="array-matrix-dataframe.html#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">as_factor</span>(vs), <span class="at">am =</span> <span class="fu">as_factor</span>(am))</span>
<span id="cb184-4"><a href="array-matrix-dataframe.html#cb184-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-5"><a href="array-matrix-dataframe.html#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Second Label the Factors</span></span>
<span id="cb184-6"><a href="array-matrix-dataframe.html#cb184-6" aria-hidden="true" tabindex="-1"></a>am_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">auto_shift =</span> <span class="st">&quot;0&quot;</span>, <span class="at">manual_shift =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb184-7"><a href="array-matrix-dataframe.html#cb184-7" aria-hidden="true" tabindex="-1"></a>vs_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">vshaped_engine =</span> <span class="st">&quot;0&quot;</span>, <span class="at">straight_engine =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb184-8"><a href="array-matrix-dataframe.html#cb184-8" aria-hidden="true" tabindex="-1"></a>tb_mtcars <span class="ot">&lt;-</span> tb_mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb184-9"><a href="array-matrix-dataframe.html#cb184-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">fct_recode</span>(vs, <span class="sc">!!!</span>vs_levels),</span>
<span id="cb184-10"><a href="array-matrix-dataframe.html#cb184-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">am =</span> <span class="fu">fct_recode</span>(am, <span class="sc">!!!</span>am_levels))</span>
<span id="cb184-11"><a href="array-matrix-dataframe.html#cb184-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-12"><a href="array-matrix-dataframe.html#cb184-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Third Combine Factors</span></span>
<span id="cb184-13"><a href="array-matrix-dataframe.html#cb184-13" aria-hidden="true" tabindex="-1"></a>tb_mtcars_selected <span class="ot">&lt;-</span> tb_mtcars <span class="sc">%&gt;%</span></span>
<span id="cb184-14"><a href="array-matrix-dataframe.html#cb184-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs_am =</span> <span class="fu">fct_cross</span>(vs, am, <span class="at">sep=</span><span class="st">&#39;_&#39;</span>, <span class="at">keep_empty =</span> <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb184-15"><a href="array-matrix-dataframe.html#cb184-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mpg, qsec, vs_am)</span>
<span id="cb184-16"><a href="array-matrix-dataframe.html#cb184-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tb_mtcars_selected)</span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="array-matrix-dataframe.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb185-2"><a href="array-matrix-dataframe.html#cb185-2" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Distribution of MPG and QSEC from mtcars&#39;</span>)</span>
<span id="cb185-3"><a href="array-matrix-dataframe.html#cb185-3" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb185-4"><a href="array-matrix-dataframe.html#cb185-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_factors.html&#39;</span>)</span>
<span id="cb185-5"><a href="array-matrix-dataframe.html#cb185-5" aria-hidden="true" tabindex="-1"></a>st_caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb185-6"><a href="array-matrix-dataframe.html#cb185-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb185-7"><a href="array-matrix-dataframe.html#cb185-7" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb185-8"><a href="array-matrix-dataframe.html#cb185-8" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb185-9"><a href="array-matrix-dataframe.html#cb185-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-10"><a href="array-matrix-dataframe.html#cb185-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphing</span></span>
<span id="cb185-11"><a href="array-matrix-dataframe.html#cb185-11" aria-hidden="true" tabindex="-1"></a>plt_mtcars_scatter <span class="ot">&lt;-</span> </span>
<span id="cb185-12"><a href="array-matrix-dataframe.html#cb185-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(tb_mtcars_selected, </span>
<span id="cb185-13"><a href="array-matrix-dataframe.html#cb185-13" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>qsec, <span class="at">colour=</span>vs_am, <span class="at">shape=</span>vs_am)) <span class="sc">+</span></span>
<span id="cb185-14"><a href="array-matrix-dataframe.html#cb185-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb185-15"><a href="array-matrix-dataframe.html#cb185-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb185-16"><a href="array-matrix-dataframe.html#cb185-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption) <span class="sc">+</span></span>
<span id="cb185-17"><a href="array-matrix-dataframe.html#cb185-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb185-18"><a href="array-matrix-dataframe.html#cb185-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-19"><a href="array-matrix-dataframe.html#cb185-19" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb185-20"><a href="array-matrix-dataframe.html#cb185-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plt_mtcars_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-59-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
<div id="drawly-random-rows" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Drawly Random Rows</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="draw-random-subset-of-sample" class="section level4" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> Draw Random Subset of Sample</h4>
<ul>
<li>r random discrete</li>
</ul>
<p>We have a sample of N individuals in some dataframe. Draw without replacement a subset <span class="math inline">\(M&lt;N\)</span> of rows.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="array-matrix-dataframe.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parameters, it_M &lt; it_N</span></span>
<span id="cb186-2"><a href="array-matrix-dataframe.html#cb186-2" aria-hidden="true" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb186-3"><a href="array-matrix-dataframe.html#cb186-3" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb186-4"><a href="array-matrix-dataframe.html#cb186-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-5"><a href="array-matrix-dataframe.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw it_m from indexed list of it_N</span></span>
<span id="cb186-6"><a href="array-matrix-dataframe.html#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb186-7"><a href="array-matrix-dataframe.html#cb186-7" aria-hidden="true" tabindex="-1"></a>ar_it_rand_idx <span class="ot">&lt;-</span> <span class="fu">sample</span>(it_N, it_M, <span class="at">replace=</span><span class="cn">FALSE</span>)</span>
<span id="cb186-8"><a href="array-matrix-dataframe.html#cb186-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-9"><a href="array-matrix-dataframe.html#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe</span></span>
<span id="cb186-10"><a href="array-matrix-dataframe.html#cb186-10" aria-hidden="true" tabindex="-1"></a>df_full <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span>it_N, <span class="at">ncol=</span><span class="dv">4</span>)) <span class="sc">%&gt;%</span> <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb186-11"><a href="array-matrix-dataframe.html#cb186-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-12"><a href="array-matrix-dataframe.html#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="co"># random Subset</span></span>
<span id="cb186-13"><a href="array-matrix-dataframe.html#cb186-13" aria-hidden="true" tabindex="-1"></a>df_rand_sub_a <span class="ot">&lt;-</span> df_full[ar_it_rand_idx,]</span>
<span id="cb186-14"><a href="array-matrix-dataframe.html#cb186-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-15"><a href="array-matrix-dataframe.html#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Random subset also</span></span>
<span id="cb186-16"><a href="array-matrix-dataframe.html#cb186-16" aria-hidden="true" tabindex="-1"></a>df_rand_sub_b <span class="ot">&lt;-</span> df_full[<span class="fu">sample</span>(<span class="fu">dim</span>(df_full)[<span class="dv">1</span>], it_M, <span class="at">replace=</span><span class="cn">FALSE</span>),]</span>
<span id="cb186-17"><a href="array-matrix-dataframe.html#cb186-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-18"><a href="array-matrix-dataframe.html#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb186-19"><a href="array-matrix-dataframe.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb186-20"><a href="array-matrix-dataframe.html#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df_full) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="array-matrix-dataframe.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df_rand_sub_a) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="array-matrix-dataframe.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df_rand_sub_b) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
</tbody>
</table>
</div>
<div id="random-subset-of-panel" class="section level4" number="1.4.3.2">
<h4><span class="header-section-number">1.4.3.2</span> Random Subset of Panel</h4>
<p>There are <span class="math inline">\(N\)</span> individuals, each could be observed <span class="math inline">\(M\)</span> times, but then select a subset of rows only, so each person is randomly observed only a subset of times. Specifically, there there are 3 unique students with student ids, and the second variable shows the random dates in which the student showed up in class, out of the 10 classes available.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="array-matrix-dataframe.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define</span></span>
<span id="cb189-2"><a href="array-matrix-dataframe.html#cb189-2" aria-hidden="true" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb189-3"><a href="array-matrix-dataframe.html#cb189-3" aria-hidden="true" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb189-4"><a href="array-matrix-dataframe.html#cb189-4" aria-hidden="true" tabindex="-1"></a>svr_id <span class="ot">&lt;-</span> <span class="st">&#39;student_id&#39;</span></span>
<span id="cb189-5"><a href="array-matrix-dataframe.html#cb189-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-6"><a href="array-matrix-dataframe.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe</span></span>
<span id="cb189-7"><a href="array-matrix-dataframe.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb189-8"><a href="array-matrix-dataframe.html#cb189-8" aria-hidden="true" tabindex="-1"></a>df_panel_rand <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">matrix</span>(it_M, <span class="at">nrow=</span>it_N, <span class="at">ncol=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb189-9"><a href="array-matrix-dataframe.html#cb189-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> svr_id) <span class="sc">%&gt;%</span></span>
<span id="cb189-10"><a href="array-matrix-dataframe.html#cb189-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">uncount</span>(V1) <span class="sc">%&gt;%</span></span>
<span id="cb189-11"><a href="array-matrix-dataframe.html#cb189-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">sym</span>(svr_id)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb189-12"><a href="array-matrix-dataframe.html#cb189-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">in_class =</span> <span class="fu">case_when</span>(<span class="fu">rnorm</span>(<span class="fu">n</span>(),<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>) <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb189-13"><a href="array-matrix-dataframe.html#cb189-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(in_class <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!!</span><span class="fu">sym</span>(svr_id), date) <span class="sc">%&gt;%</span></span>
<span id="cb189-14"><a href="array-matrix-dataframe.html#cb189-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date_in_class =</span> date)</span>
<span id="cb189-15"><a href="array-matrix-dataframe.html#cb189-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-16"><a href="array-matrix-dataframe.html#cb189-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb189-17"><a href="array-matrix-dataframe.html#cb189-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df_panel_rand) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
student_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date_in_class
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
9
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="generate-variables-conditional-on-others" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Generate Variables Conditional On Others</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="case_when-basic-example" class="section level4" number="1.4.4.1">
<h4><span class="header-section-number">1.4.4.1</span> case_when Basic Example</h4>
<p>Given several other variables, and generate a new variable when these varaibles satisfy conditions. Note that case_when are ifelse type statements. So below</p>
<ol style="list-style-type: decimal">
<li>group one is below 16 MPG</li>
<li>when do <em>qsec &gt;= 20</em> second line that is elseif, only those that are <em>&gt;=16</em> are considered here</li>
<li>then think about two dimensional mpg and qsec grid, the lower-right area, give another category to manual cars in that group</li>
</ol>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="array-matrix-dataframe.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get mtcars</span></span>
<span id="cb190-2"><a href="array-matrix-dataframe.html#cb190-2" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> mtcars</span>
<span id="cb190-3"><a href="array-matrix-dataframe.html#cb190-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-4"><a href="array-matrix-dataframe.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="co"># case_when with mtcars</span></span>
<span id="cb190-5"><a href="array-matrix-dataframe.html#cb190-5" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> df_mtcars <span class="sc">%&gt;%</span></span>
<span id="cb190-6"><a href="array-matrix-dataframe.html#cb190-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mpg_qsec_am_grp =</span> </span>
<span id="cb190-7"><a href="array-matrix-dataframe.html#cb190-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(mpg <span class="sc">&lt;</span> <span class="dv">16</span> <span class="sc">~</span> <span class="st">&quot;&lt; 16 MPG&quot;</span>,</span>
<span id="cb190-8"><a href="array-matrix-dataframe.html#cb190-8" aria-hidden="true" tabindex="-1"></a>                     qsec <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">&quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</span>
<span id="cb190-9"><a href="array-matrix-dataframe.html#cb190-9" aria-hidden="true" tabindex="-1"></a>                     am <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</span>
<span id="cb190-10"><a href="array-matrix-dataframe.html#cb190-10" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Others&quot;</span>))</span>
<span id="cb190-11"><a href="array-matrix-dataframe.html#cb190-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-12"><a href="array-matrix-dataframe.html#cb190-12" aria-hidden="true" tabindex="-1"></a><span class="co"># # For dataframe</span></span>
<span id="cb190-13"><a href="array-matrix-dataframe.html#cb190-13" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg &lt;-df.reg %&gt;% na_if(-Inf) %&gt;% na_if(Inf)</span></span>
<span id="cb190-14"><a href="array-matrix-dataframe.html#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="co"># # For a specific variable in dataframe</span></span>
<span id="cb190-15"><a href="array-matrix-dataframe.html#cb190-15" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use %&gt;% mutate(!!(var.input) := na_if(!!sym(var.input), 0))</span></span>
<span id="cb190-16"><a href="array-matrix-dataframe.html#cb190-16" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb190-17"><a href="array-matrix-dataframe.html#cb190-17" aria-hidden="true" tabindex="-1"></a><span class="co"># # Setting to NA</span></span>
<span id="cb190-18"><a href="array-matrix-dataframe.html#cb190-18" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></span>
<span id="cb190-19"><a href="array-matrix-dataframe.html#cb190-19" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log &lt;- df.reg.use</span></span>
<span id="cb190-20"><a href="array-matrix-dataframe.html#cb190-20" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></span>
<span id="cb190-21"><a href="array-matrix-dataframe.html#cb190-21" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></span>
<span id="cb190-22"><a href="array-matrix-dataframe.html#cb190-22" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></span>
<span id="cb190-23"><a href="array-matrix-dataframe.html#cb190-23" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></span>
<span id="cb190-24"><a href="array-matrix-dataframe.html#cb190-24" aria-hidden="true" tabindex="-1"></a><span class="co"># # df.reg.use.log$prot.imputed.log</span></span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="array-matrix-dataframe.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb191-2"><a href="array-matrix-dataframe.html#cb191-2" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Use case_when To Generate ifelse Groupings&#39;</span>)</span>
<span id="cb191-3"><a href="array-matrix-dataframe.html#cb191-3" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb191-4"><a href="array-matrix-dataframe.html#cb191-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</span>
<span id="cb191-5"><a href="array-matrix-dataframe.html#cb191-5" aria-hidden="true" tabindex="-1"></a>st_caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb191-6"><a href="array-matrix-dataframe.html#cb191-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb191-7"><a href="array-matrix-dataframe.html#cb191-7" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb191-8"><a href="array-matrix-dataframe.html#cb191-8" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb191-9"><a href="array-matrix-dataframe.html#cb191-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-10"><a href="array-matrix-dataframe.html#cb191-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphing</span></span>
<span id="cb191-11"><a href="array-matrix-dataframe.html#cb191-11" aria-hidden="true" tabindex="-1"></a>plt_mtcars_casewhen_scatter <span class="ot">&lt;-</span> </span>
<span id="cb191-12"><a href="array-matrix-dataframe.html#cb191-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(df_mtcars, </span>
<span id="cb191-13"><a href="array-matrix-dataframe.html#cb191-13" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>qsec, </span>
<span id="cb191-14"><a href="array-matrix-dataframe.html#cb191-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour=</span>mpg_qsec_am_grp, </span>
<span id="cb191-15"><a href="array-matrix-dataframe.html#cb191-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape=</span>mpg_qsec_am_grp)) <span class="sc">+</span></span>
<span id="cb191-16"><a href="array-matrix-dataframe.html#cb191-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb191-17"><a href="array-matrix-dataframe.html#cb191-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb191-18"><a href="array-matrix-dataframe.html#cb191-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption) <span class="sc">+</span></span>
<span id="cb191-19"><a href="array-matrix-dataframe.html#cb191-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb191-20"><a href="array-matrix-dataframe.html#cb191-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-21"><a href="array-matrix-dataframe.html#cb191-21" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb191-22"><a href="array-matrix-dataframe.html#cb191-22" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plt_mtcars_casewhen_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-64-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="generate-na-values-if-variables-have-certain-value" class="section level4" number="1.4.4.2">
<h4><span class="header-section-number">1.4.4.2</span> Generate NA values if Variables have Certain Value</h4>
<p>In the example below, in one line:</p>
<ol style="list-style-type: decimal">
<li>generate a random standard normal vector</li>
<li>two set na methods:
<ul>
<li>if the value of the standard normal is negative, set value to -999, otherwise MPG, replace the value <em>-999</em> with <em>NA</em></li>
<li>case_when only with type specific NA values</li>
<li><a href="https://github.com/tidyverse/dplyr/issues/3202#issuecomment-343601409">Assigning NA yields error in case_when</a></li>
<li>note we need to conform NA to type</li>
</ul></li>
<li>generate new categorical variable based on NA condition using is.na with both string and numeric NAs jointly considered.
<ul>
<li>fake NA string to be printed on chart</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="array-matrix-dataframe.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get mtcars</span></span>
<span id="cb192-2"><a href="array-matrix-dataframe.html#cb192-2" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> mtcars</span>
<span id="cb192-3"><a href="array-matrix-dataframe.html#cb192-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-4"><a href="array-matrix-dataframe.html#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make some values of mpg randomly NA</span></span>
<span id="cb192-5"><a href="array-matrix-dataframe.html#cb192-5" aria-hidden="true" tabindex="-1"></a><span class="co"># the NA has to conform to the type of the remaining values for the new variable</span></span>
<span id="cb192-6"><a href="array-matrix-dataframe.html#cb192-6" aria-hidden="true" tabindex="-1"></a><span class="co"># NA_real_, NA_character_, NA_integer_, NA_complex_</span></span>
<span id="cb192-7"><a href="array-matrix-dataframe.html#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2341</span>)</span>
<span id="cb192-8"><a href="array-matrix-dataframe.html#cb192-8" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> df_mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb192-9"><a href="array-matrix-dataframe.html#cb192-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mpg_wth_NA1 =</span> <span class="fu">na_if</span>(</span>
<span id="cb192-10"><a href="array-matrix-dataframe.html#cb192-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">case_when</span>(</span>
<span id="cb192-11"><a href="array-matrix-dataframe.html#cb192-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rnorm</span>(<span class="fu">n</span>(),<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>) <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">999</span>, </span>
<span id="cb192-12"><a href="array-matrix-dataframe.html#cb192-12" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> mpg), </span>
<span id="cb192-13"><a href="array-matrix-dataframe.html#cb192-13" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">999</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb192-14"><a href="array-matrix-dataframe.html#cb192-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mpg_wth_NA2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb192-15"><a href="array-matrix-dataframe.html#cb192-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rnorm</span>(<span class="fu">n</span>(),<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>) <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_real_</span>, </span>
<span id="cb192-16"><a href="array-matrix-dataframe.html#cb192-16" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> mpg)) <span class="sc">%&gt;%</span></span>
<span id="cb192-17"><a href="array-matrix-dataframe.html#cb192-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mpg_wth_NA3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb192-18"><a href="array-matrix-dataframe.html#cb192-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rnorm</span>(<span class="fu">n</span>(),<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>) <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_character_</span>, </span>
<span id="cb192-19"><a href="array-matrix-dataframe.html#cb192-19" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;shock &gt; 0 string&quot;</span>))</span>
<span id="cb192-20"><a href="array-matrix-dataframe.html#cb192-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb192-21"><a href="array-matrix-dataframe.html#cb192-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate New Variables based on if mpg_wth_NA is NA or not</span></span>
<span id="cb192-22"><a href="array-matrix-dataframe.html#cb192-22" aria-hidden="true" tabindex="-1"></a><span class="co"># same variable as above, but now first a category based on if NA</span></span>
<span id="cb192-23"><a href="array-matrix-dataframe.html#cb192-23" aria-hidden="true" tabindex="-1"></a><span class="co"># And we generate a fake string &quot;NA&quot; variable, this is not NA</span></span>
<span id="cb192-24"><a href="array-matrix-dataframe.html#cb192-24" aria-hidden="true" tabindex="-1"></a><span class="co"># the String NA allows for it to be printed on figure</span></span>
<span id="cb192-25"><a href="array-matrix-dataframe.html#cb192-25" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> df_mtcars <span class="sc">%&gt;%</span></span>
<span id="cb192-26"><a href="array-matrix-dataframe.html#cb192-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group_with_na =</span> </span>
<span id="cb192-27"><a href="array-matrix-dataframe.html#cb192-27" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(<span class="fu">is.na</span>(mpg_wth_NA2) <span class="sc">&amp;</span> <span class="fu">is.na</span>(mpg_wth_NA3) <span class="sc">~</span> </span>
<span id="cb192-28"><a href="array-matrix-dataframe.html#cb192-28" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;Rand String and Rand Numeric both NA&quot;</span>, </span>
<span id="cb192-29"><a href="array-matrix-dataframe.html#cb192-29" aria-hidden="true" tabindex="-1"></a>                     mpg <span class="sc">&lt;</span> <span class="dv">16</span> <span class="sc">~</span> <span class="st">&quot;&lt; 16 MPG&quot;</span>,</span>
<span id="cb192-30"><a href="array-matrix-dataframe.html#cb192-30" aria-hidden="true" tabindex="-1"></a>                     qsec <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">&quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</span>
<span id="cb192-31"><a href="array-matrix-dataframe.html#cb192-31" aria-hidden="true" tabindex="-1"></a>                     am <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</span>
<span id="cb192-32"><a href="array-matrix-dataframe.html#cb192-32" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Fake String NA&quot;</span>))</span>
<span id="cb192-33"><a href="array-matrix-dataframe.html#cb192-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-34"><a href="array-matrix-dataframe.html#cb192-34" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb192-35"><a href="array-matrix-dataframe.html#cb192-35" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df_mtcars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&#39;mpg&#39;</span>)),<span class="dv">13</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb192-36"><a href="array-matrix-dataframe.html#cb192-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="array-matrix-dataframe.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Setting to NA</span></span>
<span id="cb193-2"><a href="array-matrix-dataframe.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></span>
<span id="cb193-3"><a href="array-matrix-dataframe.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log &lt;- df.reg.use</span></span>
<span id="cb193-4"><a href="array-matrix-dataframe.html#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></span>
<span id="cb193-5"><a href="array-matrix-dataframe.html#cb193-5" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></span>
<span id="cb193-6"><a href="array-matrix-dataframe.html#cb193-6" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></span>
<span id="cb193-7"><a href="array-matrix-dataframe.html#cb193-7" aria-hidden="true" tabindex="-1"></a><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></span>
<span id="cb193-8"><a href="array-matrix-dataframe.html#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="co"># # df.reg.use.log$prot.imputed.log</span></span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors, but now with the NA category</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="array-matrix-dataframe.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Labeling</span></span>
<span id="cb194-2"><a href="array-matrix-dataframe.html#cb194-2" aria-hidden="true" tabindex="-1"></a>st_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;Use na_if and is.na to Generate and Distinguish NA Values</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb194-3"><a href="array-matrix-dataframe.html#cb194-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;NA_real_, NA_character_, NA_integer_, NA_complex_&#39;</span>)</span>
<span id="cb194-4"><a href="array-matrix-dataframe.html#cb194-4" aria-hidden="true" tabindex="-1"></a>st_subtitle <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb194-5"><a href="array-matrix-dataframe.html#cb194-5" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</span>
<span id="cb194-6"><a href="array-matrix-dataframe.html#cb194-6" aria-hidden="true" tabindex="-1"></a>st_caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb194-7"><a href="array-matrix-dataframe.html#cb194-7" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb194-8"><a href="array-matrix-dataframe.html#cb194-8" aria-hidden="true" tabindex="-1"></a>st_x_label <span class="ot">&lt;-</span> <span class="st">&#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb194-9"><a href="array-matrix-dataframe.html#cb194-9" aria-hidden="true" tabindex="-1"></a>st_y_label <span class="ot">&lt;-</span> <span class="st">&#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb194-10"><a href="array-matrix-dataframe.html#cb194-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-11"><a href="array-matrix-dataframe.html#cb194-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphing</span></span>
<span id="cb194-12"><a href="array-matrix-dataframe.html#cb194-12" aria-hidden="true" tabindex="-1"></a>plt_mtcars_ifisna_scatter <span class="ot">&lt;-</span> </span>
<span id="cb194-13"><a href="array-matrix-dataframe.html#cb194-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(df_mtcars, </span>
<span id="cb194-14"><a href="array-matrix-dataframe.html#cb194-14" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>qsec, </span>
<span id="cb194-15"><a href="array-matrix-dataframe.html#cb194-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour=</span>group_with_na, </span>
<span id="cb194-16"><a href="array-matrix-dataframe.html#cb194-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape=</span>group_with_na)) <span class="sc">+</span></span>
<span id="cb194-17"><a href="array-matrix-dataframe.html#cb194-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb194-18"><a href="array-matrix-dataframe.html#cb194-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> st_title, <span class="at">subtitle =</span> st_subtitle,</span>
<span id="cb194-19"><a href="array-matrix-dataframe.html#cb194-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> st_x_label, <span class="at">y =</span> st_y_label, <span class="at">caption =</span> st_caption) <span class="sc">+</span></span>
<span id="cb194-20"><a href="array-matrix-dataframe.html#cb194-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb194-21"><a href="array-matrix-dataframe.html#cb194-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-22"><a href="array-matrix-dataframe.html#cb194-22" aria-hidden="true" tabindex="-1"></a><span class="co"># show</span></span>
<span id="cb194-23"><a href="array-matrix-dataframe.html#cb194-23" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plt_mtcars_ifisna_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-66-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="approximate-values-comparison" class="section level4" number="1.4.4.3">
<h4><span class="header-section-number">1.4.4.3</span> Approximate Values Comparison</h4>
<ul>
<li>r values almost the same</li>
<li><a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/all.equal.html">all.equal</a></li>
</ul>
<p>From numeric approximation, often values are very close, and should be set to equal. Use <em>isTRUE(all.equal)</em>. In the example below, we randomly generates four arrays. Two of the arrays have slightly higher variance, two arrays have slightly lower variance. They sd are to be 10 times below or 10 times above the tolerance comparison level. The values are not the same in any of the columns, but by allowing for almost true given some tolerance level, in the low standard deviation case, the values differences are within tolerance, so they are equal.</p>
<p>This is an essential issue when dealing with optimization results.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="array-matrix-dataframe.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set tolerance </span></span>
<span id="cb195-2"><a href="array-matrix-dataframe.html#cb195-2" aria-hidden="true" tabindex="-1"></a>tol_lvl <span class="ot">=</span> <span class="fl">1.5e-3</span></span>
<span id="cb195-3"><a href="array-matrix-dataframe.html#cb195-3" aria-hidden="true" tabindex="-1"></a>sd_lower_than_tol <span class="ot">=</span> tol_lvl<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb195-4"><a href="array-matrix-dataframe.html#cb195-4" aria-hidden="true" tabindex="-1"></a>sd_higher_than_tol <span class="ot">=</span> tol_lvl<span class="sc">*</span><span class="dv">10</span></span>
<span id="cb195-5"><a href="array-matrix-dataframe.html#cb195-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-6"><a href="array-matrix-dataframe.html#cb195-6" aria-hidden="true" tabindex="-1"></a><span class="co"># larger SD</span></span>
<span id="cb195-7"><a href="array-matrix-dataframe.html#cb195-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb195-8"><a href="array-matrix-dataframe.html#cb195-8" aria-hidden="true" tabindex="-1"></a>mt_runif_standard <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span>sd_higher_than_tol), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb195-9"><a href="array-matrix-dataframe.html#cb195-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-10"><a href="array-matrix-dataframe.html#cb195-10" aria-hidden="true" tabindex="-1"></a><span class="co"># small SD</span></span>
<span id="cb195-11"><a href="array-matrix-dataframe.html#cb195-11" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb195-12"><a href="array-matrix-dataframe.html#cb195-12" aria-hidden="true" tabindex="-1"></a>mt_rnorm_small_sd <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span>sd_lower_than_tol), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb195-13"><a href="array-matrix-dataframe.html#cb195-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-14"><a href="array-matrix-dataframe.html#cb195-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Generates Random Matirx</span></span>
<span id="cb195-15"><a href="array-matrix-dataframe.html#cb195-15" aria-hidden="true" tabindex="-1"></a>tb_rnorm_runif <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">cbind</span>(mt_rnorm_small_sd, mt_runif_standard))</span>
<span id="cb195-16"><a href="array-matrix-dataframe.html#cb195-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-17"><a href="array-matrix-dataframe.html#cb195-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Are Variables the same, not for strict comparison</span></span>
<span id="cb195-18"><a href="array-matrix-dataframe.html#cb195-18" aria-hidden="true" tabindex="-1"></a>tb_rnorm_runif_approxi_same <span class="ot">&lt;-</span> tb_rnorm_runif <span class="sc">%&gt;%</span></span>
<span id="cb195-19"><a href="array-matrix-dataframe.html#cb195-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">V1_V2_ALMOST_SAME =</span> </span>
<span id="cb195-20"><a href="array-matrix-dataframe.html#cb195-20" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(<span class="fu">isTRUE</span>(<span class="fu">all.equal</span>(V1, V2, <span class="at">tolerance=</span>tol_lvl)) <span class="sc">~</span> </span>
<span id="cb195-21"><a href="array-matrix-dataframe.html#cb195-21" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</span>
<span id="cb195-22"><a href="array-matrix-dataframe.html#cb195-22" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> </span>
<span id="cb195-23"><a href="array-matrix-dataframe.html#cb195-23" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb195-24"><a href="array-matrix-dataframe.html#cb195-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">V3_V4_ALMOST_SAME =</span></span>
<span id="cb195-25"><a href="array-matrix-dataframe.html#cb195-25" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(<span class="fu">isTRUE</span>(<span class="fu">all.equal</span>(V3, V4, <span class="at">tolerance=</span>tol_lvl)) <span class="sc">~</span> </span>
<span id="cb195-26"><a href="array-matrix-dataframe.html#cb195-26" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</span>
<span id="cb195-27"><a href="array-matrix-dataframe.html#cb195-27" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> </span>
<span id="cb195-28"><a href="array-matrix-dataframe.html#cb195-28" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>)))</span>
<span id="cb195-29"><a href="array-matrix-dataframe.html#cb195-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-30"><a href="array-matrix-dataframe.html#cb195-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Pring</span></span>
<span id="cb195-31"><a href="array-matrix-dataframe.html#cb195-31" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_rnorm_runif_approxi_same) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V1_V2_ALMOST_SAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V3_V4_ALMOST_SAME
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-0.0000841
</td>
<td style="text-align:right;">
0.0002573
</td>
<td style="text-align:right;">
-0.0084071
</td>
<td style="text-align:right;">
0.0257260
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0000345
</td>
<td style="text-align:right;">
0.0000691
</td>
<td style="text-align:right;">
-0.0034527
</td>
<td style="text-align:right;">
0.0069137
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0002338
</td>
<td style="text-align:right;">
-0.0001898
</td>
<td style="text-align:right;">
0.0233806
</td>
<td style="text-align:right;">
-0.0189759
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000106
</td>
<td style="text-align:right;">
-0.0001030
</td>
<td style="text-align:right;">
0.0010576
</td>
<td style="text-align:right;">
-0.0103028
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000194
</td>
<td style="text-align:right;">
-0.0000668
</td>
<td style="text-align:right;">
0.0019393
</td>
<td style="text-align:right;">
-0.0066849
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="string-dataframes" class="section level3" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> String Dataframes</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="list-of-strings-to-tibble-datfare" class="section level4" number="1.4.5.1">
<h4><span class="header-section-number">1.4.5.1</span> List of Strings to Tibble Datfare</h4>
<p>There are several lists of strings, store them as variables in a dataframe.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="array-matrix-dataframe.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sting data inputs</span></span>
<span id="cb196-2"><a href="array-matrix-dataframe.html#cb196-2" aria-hidden="true" tabindex="-1"></a>ls_st_abc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>)</span>
<span id="cb196-3"><a href="array-matrix-dataframe.html#cb196-3" aria-hidden="true" tabindex="-1"></a>ls_st_efg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>, <span class="st">&#39;g&#39;</span>)</span>
<span id="cb196-4"><a href="array-matrix-dataframe.html#cb196-4" aria-hidden="true" tabindex="-1"></a>ls_st_opq <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;o&#39;</span>, <span class="st">&#39;p&#39;</span>, <span class="st">&#39;q&#39;</span>)</span>
<span id="cb196-5"><a href="array-matrix-dataframe.html#cb196-5" aria-hidden="true" tabindex="-1"></a>mt_str <span class="ot">=</span> <span class="fu">cbind</span>(ls_st_abc, ls_st_efg, ls_st_opq)</span>
<span id="cb196-6"><a href="array-matrix-dataframe.html#cb196-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-7"><a href="array-matrix-dataframe.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Column Names</span></span>
<span id="cb196-8"><a href="array-matrix-dataframe.html#cb196-8" aria-hidden="true" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;var2&#39;</span>,<span class="st">&#39;var3&#39;</span>)</span>
<span id="cb196-9"><a href="array-matrix-dataframe.html#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="array-matrix-dataframe.html#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb196-11"><a href="array-matrix-dataframe.html#cb196-11" aria-hidden="true" tabindex="-1"></a>tb_st_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_str) <span class="sc">%&gt;%</span></span>
<span id="cb196-12"><a href="array-matrix-dataframe.html#cb196-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb196-13"><a href="array-matrix-dataframe.html#cb196-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames))</span>
<span id="cb196-14"><a href="array-matrix-dataframe.html#cb196-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-15"><a href="array-matrix-dataframe.html#cb196-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb196-16"><a href="array-matrix-dataframe.html#cb196-16" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tb_st_combine) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var1
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
var3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
e
</td>
<td style="text-align:left;">
o
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
b
</td>
<td style="text-align:left;">
f
</td>
<td style="text-align:left;">
p
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
c
</td>
<td style="text-align:left;">
g
</td>
<td style="text-align:left;">
q
</td>
</tr>
</tbody>
</table>
</div>
<div id="find-and-replace" class="section level4" number="1.4.5.2">
<h4><span class="header-section-number">1.4.5.2</span> Find and Replace</h4>
<p>Find and Replace in Dataframe.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="array-matrix-dataframe.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if string value is contained in variable</span></span>
<span id="cb197-2"><a href="array-matrix-dataframe.html#cb197-2" aria-hidden="true" tabindex="-1"></a>(<span class="st">&quot;bridex.B&quot;</span> <span class="sc">%in%</span> (df.reg.out.all<span class="sc">$</span>vars_var.y))</span>
<span id="cb197-3"><a href="array-matrix-dataframe.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="co"># if string value is not contained in variable:</span></span>
<span id="cb197-4"><a href="array-matrix-dataframe.html#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. type is variable name</span></span>
<span id="cb197-5"><a href="array-matrix-dataframe.html#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Toyota|Mazda are strings to be excluded</span></span>
<span id="cb197-6"><a href="array-matrix-dataframe.html#cb197-6" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mtcars, <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&#39;Toyota|Mazda&#39;</span>, type))</span>
<span id="cb197-7"><a href="array-matrix-dataframe.html#cb197-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-8"><a href="array-matrix-dataframe.html#cb197-8" aria-hidden="true" tabindex="-1"></a><span class="co"># filter does not contain string</span></span>
<span id="cb197-9"><a href="array-matrix-dataframe.html#cb197-9" aria-hidden="true" tabindex="-1"></a>rs_hgt_prot_log_tidy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(term, <span class="st">&#39;prot&#39;</span>))</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarize-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
