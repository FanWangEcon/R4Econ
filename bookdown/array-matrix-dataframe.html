<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R</title>
  <meta name="description" content="Running parallel code in R" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Running parallel code in R" />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Array, Matrix, Dataframe | Data Structures, Estimation and Optimization with R" />
  
  <meta name="twitter:description" content="Running parallel code in R" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2024-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="manipulate-and-summarize-dataframes.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Structures and Estimation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a>
<ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#lists"><i class="fa fa-check"></i><b>1.1.1</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#regular-expression-date-etc."><i class="fa fa-check"></i><b>1.4</b> Regular Expression, Date, etc.</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-regular-expression"><i class="fa fa-check"></i><b>1.4.1</b> String Regular Expression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html"><i class="fa fa-check"></i><b>2</b> Manipulate and Summarize Dataframes</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#variables-in-dataframes"><i class="fa fa-check"></i><b>2.1</b> Variables in Dataframes</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#generate-dataframe"><i class="fa fa-check"></i><b>2.1.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="2.1.2" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#generate-categorical-variables"><i class="fa fa-check"></i><b>2.1.2</b> Generate Categorical Variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#drawly-random-rows"><i class="fa fa-check"></i><b>2.1.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="2.1.4" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>2.1.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="2.1.5" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#string-dataframes"><i class="fa fa-check"></i><b>2.1.5</b> String Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#counting-observation"><i class="fa fa-check"></i><b>2.2</b> Counting Observation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#counting-and-tabulations"><i class="fa fa-check"></i><b>2.2.1</b> Counting and Tabulations</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.3</b> Sorting, Indexing, Slicing</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#sorting-1"><i class="fa fa-check"></i><b>2.3.1</b> Sorting</a></li>
<li class="chapter" data-level="2.3.2" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#group-sort-and-slice"><i class="fa fa-check"></i><b>2.3.2</b> Group, Sort and Slice</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#advanced-group-aggregation"><i class="fa fa-check"></i><b>2.4</b> Advanced Group Aggregation</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#cumulative-statistics-within-group"><i class="fa fa-check"></i><b>2.4.1</b> Cumulative Statistics within Group</a></li>
<li class="chapter" data-level="2.4.2" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#groups-statistics"><i class="fa fa-check"></i><b>2.4.2</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.4.3" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.4.3</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.4.4" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.4.4</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#distributional-statistics"><i class="fa fa-check"></i><b>2.5</b> Distributional Statistics</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#histogram"><i class="fa fa-check"></i><b>2.5.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.6</b> Summarize Multiple Variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="manipulate-and-summarize-dataframes.html"><a href="manipulate-and-summarize-dataframes.html#apply-function-over-multiple-columns-and-rows"><i class="fa fa-check"></i><b>2.6.1</b> Apply Function Over Multiple Columns and Rows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mx1-by-n-to-mxq-by-n1"><i class="fa fa-check"></i><b>3.2.1</b> (Mx1 by N) to (MxQ by N+1)</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mx1-by-1"><i class="fa fa-check"></i><b>3.2.2</b> (MxP by N) to (Mx1 by 1)</a></li>
<li class="chapter" data-level="3.2.3" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mxq-by-nz"><i class="fa fa-check"></i><b>3.2.3</b> (MxP by N) to (MxQ by N+Z)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-and-sapply"><i class="fa fa-check"></i><b>3.3.1</b> Apply and Sapply</a></li>
<li class="chapter" data-level="3.3.2" data-path="functions.html"><a href="functions.html#mutate-evaluate-functions"><i class="fa fa-check"></i><b>3.3.2</b> Mutate Evaluate Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html"><i class="fa fa-check"></i><b>4</b> Multi-dimensional Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-gather-bind-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate, Gather, Bind and Join</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
<li class="chapter" data-level="4.1.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#gather-files"><i class="fa fa-check"></i><b>4.1.3</b> Gather Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#long-table-to-wide-table"><i class="fa fa-check"></i><b>4.2.1</b> Long Table to Wide Table</a></li>
<li class="chapter" data-level="4.2.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#wide-to-long"><i class="fa fa-check"></i><b>4.2.2</b> Wide to Long</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#within-panel-comparisons-and-statistics"><i class="fa fa-check"></i><b>4.3</b> Within Panel Comparisons and Statistics</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#find-closest-neighbor-on-grid"><i class="fa fa-check"></i><b>4.3.1</b> Find Closest Neighbor on Grid</a></li>
<li class="chapter" data-level="4.3.2" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#within-panel-cross-time-and-cross-group-statistics"><i class="fa fa-check"></i><b>4.3.2</b> Within Panel Cross-time and Cross-group Statistics</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#join-and-merge-files-together-by-keys"><i class="fa fa-check"></i><b>4.4</b> Join and Merge Files Together by Keys</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="multi-dimensional-data-structures.html"><a href="multi-dimensional-data-structures.html#mesh-join"><i class="fa fa-check"></i><b>4.4.1</b> Mesh Join</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#linear-and-polynomial-fitting"><i class="fa fa-check"></i><b>5.1</b> Linear and Polynomial Fitting</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#fit-curves-through-points"><i class="fa fa-check"></i><b>5.1.1</b> Fit Curves Through Points</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#polynomial-time-series"><i class="fa fa-check"></i><b>5.1.2</b> Polynomial Time Series</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.2</b> OLS and IV</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.2.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.2.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.2.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.3</b> Decomposition</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.3.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html"><i class="fa fa-check"></i><b>6</b> Nonlinear and Other Regressions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
<li class="chapter" data-level="6.1.2" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#logistic-choice-model-with-aggregate-shares"><i class="fa fa-check"></i><b>6.1.2</b> Logistic Choice Model with Aggregate Shares</a></li>
<li class="chapter" data-level="6.1.3" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#prices-from-aggregate-shares-in-logistic-choice-model"><i class="fa fa-check"></i><b>6.1.3</b> Prices from Aggregate Shares in Logistic Choice Model</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression"><i class="fa fa-check"></i><b>6.2</b> Quantile Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="nonlinear-and-other-regressions.html"><a href="nonlinear-and-other-regressions.html#quantile-regression-basics"><i class="fa fa-check"></i><b>6.2.1</b> Quantile Regression Basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#grid-based-optimization"><i class="fa fa-check"></i><b>7.1</b> Grid Based Optimization</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#find-maximum-by-iterating-over-grids"><i class="fa fa-check"></i><b>7.1.1</b> Find Maximum By Iterating Over Grids</a></li>
<li class="chapter" data-level="7.1.2" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1.2</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathematics.html"><a href="mathematics.html"><i class="fa fa-check"></i><b>8</b> Mathematics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mathematics.html"><a href="mathematics.html#basics"><i class="fa fa-check"></i><b>8.1</b> Basics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="mathematics.html"><a href="mathematics.html#polynomial-formulas-for-points"><i class="fa fa-check"></i><b>8.1.1</b> Polynomial Formulas for Points</a></li>
<li class="chapter" data-level="8.1.2" data-path="mathematics.html"><a href="mathematics.html#rescale-a-parameter-with-fixed-min-and-max"><i class="fa fa-check"></i><b>8.1.2</b> Rescale a Parameter with Fixed Min and Max</a></li>
<li class="chapter" data-level="8.1.3" data-path="mathematics.html"><a href="mathematics.html#log-with-different-bases-and-exponents"><i class="fa fa-check"></i><b>8.1.3</b> Log with Different Bases and Exponents</a></li>
<li class="chapter" data-level="8.1.4" data-path="mathematics.html"><a href="mathematics.html#find-nearest"><i class="fa fa-check"></i><b>8.1.4</b> Find Nearest</a></li>
<li class="chapter" data-level="8.1.5" data-path="mathematics.html"><a href="mathematics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.1.5</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathematics.html"><a href="mathematics.html#production-functions"><i class="fa fa-check"></i><b>8.2</b> Production Functions</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="mathematics.html"><a href="mathematics.html#nested-ces-production-function"><i class="fa fa-check"></i><b>8.2.1</b> Nested CES Production Function</a></li>
<li class="chapter" data-level="8.2.2" data-path="mathematics.html"><a href="mathematics.html#latent-dynamic-health-production-function"><i class="fa fa-check"></i><b>8.2.2</b> Latent Dynamic Health Production Function</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="mathematics.html"><a href="mathematics.html#inequality-models"><i class="fa fa-check"></i><b>8.3</b> Inequality Models</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mathematics.html"><a href="mathematics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.3.1</b> GINI Discrete Sample</a></li>
<li class="chapter" data-level="8.3.2" data-path="mathematics.html"><a href="mathematics.html#gini-formula-for-discrete-random-varialbe"><i class="fa fa-check"></i><b>8.3.2</b> GINI Formula for Discrete Random Varialbe</a></li>
<li class="chapter" data-level="8.3.3" data-path="mathematics.html"><a href="mathematics.html#atkinson-inequality-index"><i class="fa fa-check"></i><b>8.3.3</b> Atkinson Inequality Index</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>9</b> Statistics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistics.html"><a href="statistics.html#random-draws"><i class="fa fa-check"></i><b>9.1</b> Random Draws</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="statistics.html"><a href="statistics.html#randomly-perturbing-a-parameter"><i class="fa fa-check"></i><b>9.1.1</b> Randomly Perturbing a Parameter</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="statistics.html"><a href="statistics.html#distributions"><i class="fa fa-check"></i><b>9.2</b> Distributions</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="statistics.html"><a href="statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>9.2.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="statistics.html"><a href="statistics.html#discrete-random-variable"><i class="fa fa-check"></i><b>9.3</b> Discrete Random Variable</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="statistics.html"><a href="statistics.html#discrete-approximation-of-continuous-random-variables"><i class="fa fa-check"></i><b>9.3.1</b> Discrete Approximation of Continuous Random Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>10</b> Tables and Graphs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>10.1</b> R Base Plots</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>10.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-related-plots"><i class="fa fa-check"></i><b>10.2</b> ggplot Line Related Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-plot-basics"><i class="fa fa-check"></i><b>10.2.1</b> ggplot Line Plot Basics</a></li>
<li class="chapter" data-level="10.2.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-line-advanced"><i class="fa fa-check"></i><b>10.2.2</b> ggplot Line Advanced</a></li>
<li class="chapter" data-level="10.2.3" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#time-series-plots-with-shaded-areas"><i class="fa fa-check"></i><b>10.2.3</b> Time-series Plots with Shaded Areas</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-related-plots"><i class="fa fa-check"></i><b>10.3</b> ggplot Scatter Related Plots</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-scatter-plot"><i class="fa fa-check"></i><b>10.3.1</b> ggplot Scatter Plot</a></li>
<li class="chapter" data-level="10.3.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#ggplot-multiple-scatter-lines-with-facet-wrap"><i class="fa fa-check"></i><b>10.3.2</b> ggplot Multiple Scatter-Lines with Facet Wrap</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>10.4</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>10.4.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>11</b> Get Data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="get-data.html"><a href="get-data.html#environmental-data"><i class="fa fa-check"></i><b>11.1</b> Environmental Data</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="get-data.html"><a href="get-data.html#ecmwf-era5-data"><i class="fa fa-check"></i><b>11.1.1</b> ECMWF ERA5 Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="coding-and-development.html"><a href="coding-and-development.html"><i class="fa fa-check"></i><b>12</b> Coding and Development</a>
<ul>
<li class="chapter" data-level="12.1" data-path="coding-and-development.html"><a href="coding-and-development.html#installation-and-packages"><i class="fa fa-check"></i><b>12.1</b> Installation and Packages</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="coding-and-development.html"><a href="coding-and-development.html#r-installation-and-set-up"><i class="fa fa-check"></i><b>12.1.1</b> R Installation and Set-Up</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="coding-and-development.html"><a href="coding-and-development.html#files-in-and-out"><i class="fa fa-check"></i><b>12.2</b> Files In and Out</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="coding-and-development.html"><a href="coding-and-development.html#file-path"><i class="fa fa-check"></i><b>12.2.1</b> File Path</a></li>
<li class="chapter" data-level="12.2.2" data-path="coding-and-development.html"><a href="coding-and-development.html#text-to-file"><i class="fa fa-check"></i><b>12.2.2</b> Text to File</a></li>
<li class="chapter" data-level="12.2.3" data-path="coding-and-development.html"><a href="coding-and-development.html#rmd-to-html"><i class="fa fa-check"></i><b>12.2.3</b> Rmd to HTML</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="coding-and-development.html"><a href="coding-and-development.html#python-with-r"><i class="fa fa-check"></i><b>12.3</b> Python with R</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="coding-and-development.html"><a href="coding-and-development.html#reticulate-basics"><i class="fa fa-check"></i><b>12.3.1</b> Reticulate Basics</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="coding-and-development.html"><a href="coding-and-development.html#command-line"><i class="fa fa-check"></i><b>12.4</b> Command Line</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="coding-and-development.html"><a href="coding-and-development.html#shell-and-system-commands"><i class="fa fa-check"></i><b>12.4.1</b> Shell and System Commands</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="coding-and-development.html"><a href="coding-and-development.html#run-code-in-parallel-in-r"><i class="fa fa-check"></i><b>12.5</b> Run Code in Parallel in R</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="coding-and-development.html"><a href="coding-and-development.html#parallel-loop-in-r"><i class="fa fa-check"></i><b>12.5.1</b> Parallel Loop in R</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> Section 1.1 List links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> Section 1.2 Array links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> Section 1.3 Matrix links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-regular-expression-date-etc.regular-expression-date-etc.-links"><i class="fa fa-check"></i><b>A.1.4</b> Section 1.4 Regular Expression, Date, etc. links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#manipulate-and-summarize-dataframes-links"><i class="fa fa-check"></i><b>A.2</b> Manipulate and Summarize Dataframes links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.2.1</b> Section 2.1 Variables in Dataframes links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.2</b> Section 2.2 Counting Observation links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.3</b> Section 2.3 Sorting, Indexing, Slicing links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-advanced-group-aggregationadvanced-group-aggregation-links"><i class="fa fa-check"></i><b>A.2.4</b> Section 2.4 Advanced Group Aggregation links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.5</b> Section 2.5 Distributional Statistics links</a></li>
<li class="chapter" data-level="A.2.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.6-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.6</b> Section 2.6 Summarize Multiple Variables links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> Section 3.1 Dataframe Mutate links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> Section 3.2 Dataframe Do Anything links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> Section 3.3 Apply and pmap links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#multi-dimensional-data-structures-links"><i class="fa fa-check"></i><b>A.4</b> Multi-dimensional Data Structures links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-gather-bind-and-joingenerate-gather-bind-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> Section 4.1 Generate, Gather, Bind and Join links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> Section 4.2 Wide and Long links</a></li>
<li class="chapter" data-level="A.4.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.3-within-panel-comparisons-and-statisticswithin-panel-comparisons-and-statistics-links"><i class="fa fa-check"></i><b>A.4.3</b> Section 4.3 Within Panel Comparisons and Statistics links</a></li>
<li class="chapter" data-level="A.4.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.4-join-and-merge-files-together-by-keysjoin-and-merge-files-together-by-keys-links"><i class="fa fa-check"></i><b>A.4.4</b> Section 4.4 Join and Merge Files Together by Keys links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-linear-and-polynomial-fittinglinear-and-polynomial-fitting-links"><i class="fa fa-check"></i><b>A.5.1</b> Section 5.1 Linear and Polynomial Fitting links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.2</b> Section 5.2 OLS and IV links</a></li>
<li class="chapter" data-level="A.5.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.3-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.3</b> Section 5.3 Decomposition links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-and-other-regressions-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear and Other Regressions links</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> Section 6.1 Logit Regression links</a></li>
<li class="chapter" data-level="A.6.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.2-quantile-regressionquantile-regression-links"><i class="fa fa-check"></i><b>A.6.2</b> Section 6.2 Quantile Regression links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-grid-based-optimizationgrid-based-optimization-links"><i class="fa fa-check"></i><b>A.7.1</b> Section 7.1 Grid Based Optimization links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathematics-links"><i class="fa fa-check"></i><b>A.8</b> Mathematics links</a>
<ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-basicsbasics-links"><i class="fa fa-check"></i><b>A.8.1</b> Section 8.1 Basics links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-production-functionsproduction-functions-links"><i class="fa fa-check"></i><b>A.8.2</b> Section 8.2 Production Functions links</a></li>
<li class="chapter" data-level="A.8.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.3-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.3</b> Section 8.3 Inequality Models links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#statistics-links"><i class="fa fa-check"></i><b>A.9</b> Statistics links</a>
<ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-random-drawsrandom-draws-links"><i class="fa fa-check"></i><b>A.9.1</b> Section 9.1 Random Draws links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.9.2</b> Section 9.2 Distributions links</a></li>
<li class="chapter" data-level="A.9.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.3-discrete-random-variablediscrete-random-variable-links"><i class="fa fa-check"></i><b>A.9.3</b> Section 9.3 Discrete Random Variable links</a></li>
</ul></li>
<li class="chapter" data-level="A.10" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.10</b> Tables and Graphs links</a>
<ul>
<li class="chapter" data-level="A.10.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.10.1</b> Section 10.1 R Base Plots links</a></li>
<li class="chapter" data-level="A.10.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.2-ggplot-line-related-plotsggplot-line-related-plots-links"><i class="fa fa-check"></i><b>A.10.2</b> Section 10.2 ggplot Line Related Plots links</a></li>
<li class="chapter" data-level="A.10.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.3-ggplot-scatter-related-plotsggplot-scatter-related-plots-links"><i class="fa fa-check"></i><b>A.10.3</b> Section 10.3 ggplot Scatter Related Plots links</a></li>
<li class="chapter" data-level="A.10.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.4-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.10.4</b> Section 10.4 Write and Read Plots links</a></li>
</ul></li>
<li class="chapter" data-level="A.11" data-path="index-and-code-links.html"><a href="index-and-code-links.html#get-data-links"><i class="fa fa-check"></i><b>A.11</b> Get Data links</a>
<ul>
<li class="chapter" data-level="A.11.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-11.1-environmental-dataenvironmental-data-links"><i class="fa fa-check"></i><b>A.11.1</b> Section 11.1 Environmental Data links</a></li>
</ul></li>
<li class="chapter" data-level="A.12" data-path="index-and-code-links.html"><a href="index-and-code-links.html#coding-and-development-links"><i class="fa fa-check"></i><b>A.12</b> Coding and Development links</a>
<ul>
<li class="chapter" data-level="A.12.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.1-installation-and-packagesinstallation-and-packages-links"><i class="fa fa-check"></i><b>A.12.1</b> Section 12.1 Installation and Packages links</a></li>
<li class="chapter" data-level="A.12.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.2-files-in-and-outfiles-in-and-out-links"><i class="fa fa-check"></i><b>A.12.2</b> Section 12.2 Files In and Out links</a></li>
<li class="chapter" data-level="A.12.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.3-python-with-rpython-with-r-links"><i class="fa fa-check"></i><b>A.12.3</b> Section 12.3 Python with R links</a></li>
<li class="chapter" data-level="A.12.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.4-command-linecommand-line-links"><i class="fa fa-check"></i><b>A.12.4</b> Section 12.4 Command Line links</a></li>
<li class="chapter" data-level="A.12.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-12.5-run-code-in-parallel-in-rrun-code-in-parallel-in-r-links"><i class="fa fa-check"></i><b>A.12.5</b> Section 12.5 Run Code in Parallel in R links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Structures, Estimation and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="array-matrix-dataframe" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Array, Matrix, Dataframe<a href="array-matrix-dataframe.html#array-matrix-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h1>

<div id="list" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> List<a href="array-matrix-dataframe.html#list" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<div id="lists" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Lists<a href="array-matrix-dataframe.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<ul>
<li>r list tutorial</li>
<li>r vector vs list</li>
<li>r initialize empty multiple element list</li>
<li>r name rows and columns of 2 dimensional list</li>
<li>r row and colum names of list</li>
<li>list dimnames</li>
<li>r named list to string</li>
</ul>
<div id="iteratively-build-up-a-list-of-strings" class="section level4 hasAnchor" number="1.1.1.1">
<h4><span class="header-section-number">1.1.1.1</span> Iteratively Build Up a List of Strings<a href="array-matrix-dataframe.html#iteratively-build-up-a-list-of-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Build up a list of strings, where the strings share common components. Iteratre over lists to generate variations in elements of the string list.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="array-matrix-dataframe.html#cb1-1" tabindex="-1"></a><span class="co"># common string components</span></span>
<span id="cb1-2"><a href="array-matrix-dataframe.html#cb1-2" tabindex="-1"></a>st_base_name <span class="ot">&lt;-</span> <span class="st">&#39;snwx_v_planner_docdense&#39;</span></span>
<span id="cb1-3"><a href="array-matrix-dataframe.html#cb1-3" tabindex="-1"></a>st_base_middle <span class="ot">&lt;-</span> <span class="st">&#39;b1_xi0_manna_88&#39;</span></span>
<span id="cb1-4"><a href="array-matrix-dataframe.html#cb1-4" tabindex="-1"></a><span class="co"># numeric values to loop over</span></span>
<span id="cb1-5"><a href="array-matrix-dataframe.html#cb1-5" tabindex="-1"></a>ar_st_beta_val <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;bt60&#39;</span>, <span class="st">&#39;bt70&#39;</span>, <span class="st">&#39;bt80&#39;</span>, <span class="st">&#39;bt90&#39;</span>)</span>
<span id="cb1-6"><a href="array-matrix-dataframe.html#cb1-6" tabindex="-1"></a>ar_st_edu_type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;e1lm2&#39;</span>, <span class="st">&#39;e2hm2&#39;</span>)</span>
<span id="cb1-7"><a href="array-matrix-dataframe.html#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="array-matrix-dataframe.html#cb1-8" tabindex="-1"></a><span class="co"># initialize string list</span></span>
<span id="cb1-9"><a href="array-matrix-dataframe.html#cb1-9" tabindex="-1"></a>ls_snm <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(ar_st_beta_val)<span class="sc">*</span><span class="fu">length</span>(ar_st_edu_type))</span>
<span id="cb1-10"><a href="array-matrix-dataframe.html#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="array-matrix-dataframe.html#cb1-11" tabindex="-1"></a><span class="co"># generate list </span></span>
<span id="cb1-12"><a href="array-matrix-dataframe.html#cb1-12" tabindex="-1"></a>it_ctr <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-13"><a href="array-matrix-dataframe.html#cb1-13" tabindex="-1"></a><span class="cf">for</span> (st_beta_val <span class="cf">in</span> ar_st_beta_val) {</span>
<span id="cb1-14"><a href="array-matrix-dataframe.html#cb1-14" tabindex="-1"></a>  <span class="cf">for</span> (st_edu_type <span class="cf">in</span> ar_st_edu_type) {</span>
<span id="cb1-15"><a href="array-matrix-dataframe.html#cb1-15" tabindex="-1"></a>    it_ctr <span class="ot">=</span> it_ctr <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-16"><a href="array-matrix-dataframe.html#cb1-16" tabindex="-1"></a>    <span class="co"># snm_file_name &lt;- &#39;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt90&#39;</span></span>
<span id="cb1-17"><a href="array-matrix-dataframe.html#cb1-17" tabindex="-1"></a>    snm_file_name <span class="ot">&lt;-</span> <span class="fu">paste</span>(st_base_name, st_edu_type, st_base_middle, st_beta_val, <span class="at">sep =</span><span class="st">&#39;_&#39;</span>)</span>
<span id="cb1-18"><a href="array-matrix-dataframe.html#cb1-18" tabindex="-1"></a>    ls_snm[it_ctr] <span class="ot">&lt;-</span> snm_file_name</span>
<span id="cb1-19"><a href="array-matrix-dataframe.html#cb1-19" tabindex="-1"></a>  }</span>
<span id="cb1-20"><a href="array-matrix-dataframe.html#cb1-20" tabindex="-1"></a>}</span>
<span id="cb1-21"><a href="array-matrix-dataframe.html#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="array-matrix-dataframe.html#cb1-22" tabindex="-1"></a><span class="co"># print</span></span>
<span id="cb1-23"><a href="array-matrix-dataframe.html#cb1-23" tabindex="-1"></a><span class="cf">for</span> (snm <span class="cf">in</span> ls_snm) {</span>
<span id="cb1-24"><a href="array-matrix-dataframe.html#cb1-24" tabindex="-1"></a>  <span class="fu">print</span>(snm)</span>
<span id="cb1-25"><a href="array-matrix-dataframe.html#cb1-25" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt60&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt60&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt70&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt70&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt80&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt80&quot;
## [1] &quot;snwx_v_planner_docdense_e1lm2_b1_xi0_manna_88_bt90&quot;
## [1] &quot;snwx_v_planner_docdense_e2hm2_b1_xi0_manna_88_bt90&quot;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="array-matrix-dataframe.html#cb3-1" tabindex="-1"></a><span class="co"># if string in string</span></span>
<span id="cb3-2"><a href="array-matrix-dataframe.html#cb3-2" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;snwx_v_planner&#39;</span>, snm)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="named-list-of-matrixes" class="section level4 hasAnchor" number="1.1.1.2">
<h4><span class="header-section-number">1.1.1.2</span> Named List of Matrixes<a href="array-matrix-dataframe.html#named-list-of-matrixes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Save a list of matrixes. Retrieve Element of that list via loop.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="array-matrix-dataframe.html#cb5-1" tabindex="-1"></a><span class="co"># Define an array to loop over</span></span>
<span id="cb5-2"><a href="array-matrix-dataframe.html#cb5-2" tabindex="-1"></a>ar_fl_mean <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb5-3"><a href="array-matrix-dataframe.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="array-matrix-dataframe.html#cb5-4" tabindex="-1"></a><span class="co"># store restuls in named list</span></span>
<span id="cb5-5"><a href="array-matrix-dataframe.html#cb5-5" tabindex="-1"></a>ls_mt_res <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(ar_fl_mean))</span>
<span id="cb5-6"><a href="array-matrix-dataframe.html#cb5-6" tabindex="-1"></a>ar_st_names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;mean&#39;</span>, ar_fl_mean)</span>
<span id="cb5-7"><a href="array-matrix-dataframe.html#cb5-7" tabindex="-1"></a><span class="fu">names</span>(ls_mt_res) <span class="ot">&lt;-</span> ar_st_names</span>
<span id="cb5-8"><a href="array-matrix-dataframe.html#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="array-matrix-dataframe.html#cb5-9" tabindex="-1"></a><span class="co"># Loop and generat a list of dataframes</span></span>
<span id="cb5-10"><a href="array-matrix-dataframe.html#cb5-10" tabindex="-1"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(ar_fl_mean))) {</span>
<span id="cb5-11"><a href="array-matrix-dataframe.html#cb5-11" tabindex="-1"></a>  fl_mean <span class="ot">=</span> ar_fl_mean[it_fl_mean]</span>
<span id="cb5-12"><a href="array-matrix-dataframe.html#cb5-12" tabindex="-1"></a></span>
<span id="cb5-13"><a href="array-matrix-dataframe.html#cb5-13" tabindex="-1"></a>  <span class="co"># dataframe</span></span>
<span id="cb5-14"><a href="array-matrix-dataframe.html#cb5-14" tabindex="-1"></a>  <span class="fu">set.seed</span>(it_fl_mean)</span>
<span id="cb5-15"><a href="array-matrix-dataframe.html#cb5-15" tabindex="-1"></a>  tb_combine <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(</span>
<span id="cb5-16"><a href="array-matrix-dataframe.html#cb5-16" tabindex="-1"></a>    <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>,<span class="at">mean=</span>fl_mean,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb5-17"><a href="array-matrix-dataframe.html#cb5-17" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="array-matrix-dataframe.html#cb5-18" tabindex="-1"></a>    <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="array-matrix-dataframe.html#cb5-19" tabindex="-1"></a>    <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(<span class="fu">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;varb&#39;</span>,<span class="st">&#39;vartheta&#39;</span>)))</span>
<span id="cb5-20"><a href="array-matrix-dataframe.html#cb5-20" tabindex="-1"></a></span>
<span id="cb5-21"><a href="array-matrix-dataframe.html#cb5-21" tabindex="-1"></a>  ls_mt_res[[it_fl_mean]] <span class="ot">=</span> tb_combine</span>
<span id="cb5-22"><a href="array-matrix-dataframe.html#cb5-22" tabindex="-1"></a>}</span>
<span id="cb5-23"><a href="array-matrix-dataframe.html#cb5-23" tabindex="-1"></a></span>
<span id="cb5-24"><a href="array-matrix-dataframe.html#cb5-24" tabindex="-1"></a><span class="co"># Retrieve elements</span></span>
<span id="cb5-25"><a href="array-matrix-dataframe.html#cb5-25" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res[[<span class="dv">1</span>]])</span>
<span id="cb5-26"><a href="array-matrix-dataframe.html#cb5-26" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res<span class="sc">$</span>mean10)</span>
<span id="cb5-27"><a href="array-matrix-dataframe.html#cb5-27" tabindex="-1"></a><span class="fu">print</span>(ls_mt_res[[<span class="st">&#39;mean10&#39;</span>]])</span>
<span id="cb5-28"><a href="array-matrix-dataframe.html#cb5-28" tabindex="-1"></a></span>
<span id="cb5-29"><a href="array-matrix-dataframe.html#cb5-29" tabindex="-1"></a><span class="co"># Print via Loop </span></span>
<span id="cb5-30"><a href="array-matrix-dataframe.html#cb5-30" tabindex="-1"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(ar_fl_mean))) {</span>
<span id="cb5-31"><a href="array-matrix-dataframe.html#cb5-31" tabindex="-1"></a>  tb_combine <span class="ot">=</span> ls_mt_res[[it_fl_mean]]</span>
<span id="cb5-32"><a href="array-matrix-dataframe.html#cb5-32" tabindex="-1"></a>  <span class="fu">print</span>(tb_combine)</span>
<span id="cb5-33"><a href="array-matrix-dataframe.html#cb5-33" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="one-dimensional-named-list" class="section level4 hasAnchor" number="1.1.1.3">
<h4><span class="header-section-number">1.1.1.3</span> One Dimensional Named List<a href="array-matrix-dataframe.html#one-dimensional-named-list" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>define list</li>
<li>slice list</li>
<li>print r named list as a single line string</li>
</ol>
<ul>
<li><a href="https://stackoverflow.com/a/55622024/8280804">R Unlist named list into one string with preserving list names</a></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="array-matrix-dataframe.html#cb6-1" tabindex="-1"></a><span class="co"># Define Lists</span></span>
<span id="cb6-2"><a href="array-matrix-dataframe.html#cb6-2" tabindex="-1"></a>ls_num <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb6-3"><a href="array-matrix-dataframe.html#cb6-3" tabindex="-1"></a>ls_str <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;1&#39;</span>,<span class="st">&#39;2&#39;</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb6-4"><a href="array-matrix-dataframe.html#cb6-4" tabindex="-1"></a>ls_num_str <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb6-5"><a href="array-matrix-dataframe.html#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="array-matrix-dataframe.html#cb6-6" tabindex="-1"></a><span class="co"># Named Lists</span></span>
<span id="cb6-7"><a href="array-matrix-dataframe.html#cb6-7" tabindex="-1"></a>ar_st_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;e1&#39;</span>,<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>)</span>
<span id="cb6-8"><a href="array-matrix-dataframe.html#cb6-8" tabindex="-1"></a>ls_num_str_named <span class="ot">&lt;-</span> ls_num_str</span>
<span id="cb6-9"><a href="array-matrix-dataframe.html#cb6-9" tabindex="-1"></a><span class="fu">names</span>(ls_num_str_named) <span class="ot">&lt;-</span> ar_st_names</span>
<span id="cb6-10"><a href="array-matrix-dataframe.html#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="array-matrix-dataframe.html#cb6-11" tabindex="-1"></a><span class="co"># Add Element to Named List</span></span>
<span id="cb6-12"><a href="array-matrix-dataframe.html#cb6-12" tabindex="-1"></a>ls_num_str_named<span class="sc">$</span>e4 <span class="ot">&lt;-</span> <span class="st">&#39;this is added&#39;</span></span></code></pre></div>
<p>Initiate an empty list and add to it</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="array-matrix-dataframe.html#cb7-1" tabindex="-1"></a><span class="co"># Initiate List</span></span>
<span id="cb7-2"><a href="array-matrix-dataframe.html#cb7-2" tabindex="-1"></a>ls_abc <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">0</span>)</span>
<span id="cb7-3"><a href="array-matrix-dataframe.html#cb7-3" tabindex="-1"></a><span class="co"># Add Named Elements to List Sequentially</span></span>
<span id="cb7-4"><a href="array-matrix-dataframe.html#cb7-4" tabindex="-1"></a>ls_abc<span class="sc">$</span>a <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb7-5"><a href="array-matrix-dataframe.html#cb7-5" tabindex="-1"></a>ls_abc<span class="sc">$</span>b <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb7-6"><a href="array-matrix-dataframe.html#cb7-6" tabindex="-1"></a>ls_abc<span class="sc">$</span>c <span class="ot">=</span> <span class="st">&#39;abc</span><span class="sc">\&#39;</span><span class="st">s third element&#39;</span></span>
<span id="cb7-7"><a href="array-matrix-dataframe.html#cb7-7" tabindex="-1"></a><span class="co"># Get all Names Added to List</span></span>
<span id="cb7-8"><a href="array-matrix-dataframe.html#cb7-8" tabindex="-1"></a>ar_st_list_names <span class="ot">&lt;-</span> <span class="fu">names</span>(ls_abc)</span>
<span id="cb7-9"><a href="array-matrix-dataframe.html#cb7-9" tabindex="-1"></a><span class="co"># Print list in a loop</span></span>
<span id="cb7-10"><a href="array-matrix-dataframe.html#cb7-10" tabindex="-1"></a><span class="fu">print</span>(ls_abc)</span></code></pre></div>
<pre><code>## $a
## [1] 1
## 
## $b
## [1] 2
## 
## $c
## [1] &quot;abc&#39;s third element&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="array-matrix-dataframe.html#cb9-1" tabindex="-1"></a><span class="cf">for</span> (it_list_ele_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">length</span>(ar_st_list_names))) {</span>
<span id="cb9-2"><a href="array-matrix-dataframe.html#cb9-2" tabindex="-1"></a>  st_list_ele_name <span class="ot">&lt;-</span> ar_st_list_names[it_list_ele_ctr]</span>
<span id="cb9-3"><a href="array-matrix-dataframe.html#cb9-3" tabindex="-1"></a>  st_list_ele_val <span class="ot">&lt;-</span> ls_abc[it_list_ele_ctr]</span>
<span id="cb9-4"><a href="array-matrix-dataframe.html#cb9-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(st_list_ele_name,<span class="st">&#39;=&#39;</span>,st_list_ele_val))</span>
<span id="cb9-5"><a href="array-matrix-dataframe.html#cb9-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;a=1&quot;
## [1] &quot;b=2&quot;
## [1] &quot;c=abc&#39;s third element&quot;</code></pre>
</div>
<div id="named-list-print-function" class="section level4 hasAnchor" number="1.1.1.4">
<h4><span class="header-section-number">1.1.1.4</span> Named List Print Function<a href="array-matrix-dataframe.html#named-list-print-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>r print input as string</li>
<li>r print parameter code as string</li>
<li><a href="https://stackoverflow.com/a/14577878/8280804">How to convert variable (object) name into String</a></li>
</ul>
<p>The function below ffi_lst2str is also a function in <a href="https://fanwangecon.github.io/REconTools/index.html">REconTools</a>: <a href="https://fanwangecon.github.io/REconTools/reference/ff_sup_lst2str.html">ff_sup_lst2str</a>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="array-matrix-dataframe.html#cb11-1" tabindex="-1"></a><span class="co"># list to String printing function</span></span>
<span id="cb11-2"><a href="array-matrix-dataframe.html#cb11-2" tabindex="-1"></a>ffi_lst2str <span class="ot">&lt;-</span> <span class="cf">function</span>(ls_list, st_desc, <span class="at">bl_print=</span><span class="cn">TRUE</span>) {</span>
<span id="cb11-3"><a href="array-matrix-dataframe.html#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="array-matrix-dataframe.html#cb11-4" tabindex="-1"></a>  <span class="co"># string desc</span></span>
<span id="cb11-5"><a href="array-matrix-dataframe.html#cb11-5" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">missing</span>(st_desc)){</span>
<span id="cb11-6"><a href="array-matrix-dataframe.html#cb11-6" tabindex="-1"></a>    st_desc <span class="ot">&lt;-</span> <span class="fu">deparse</span>(<span class="fu">substitute</span>(ls_list))</span>
<span id="cb11-7"><a href="array-matrix-dataframe.html#cb11-7" tabindex="-1"></a>  }</span>
<span id="cb11-8"><a href="array-matrix-dataframe.html#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="array-matrix-dataframe.html#cb11-9" tabindex="-1"></a>  <span class="co"># create string</span></span>
<span id="cb11-10"><a href="array-matrix-dataframe.html#cb11-10" tabindex="-1"></a>  st_string_from_list <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">paste0</span>(st_desc, <span class="st">&#39;:&#39;</span>),</span>
<span id="cb11-11"><a href="array-matrix-dataframe.html#cb11-11" tabindex="-1"></a>                               <span class="fu">paste</span>(<span class="fu">names</span>(ls_list), ls_list, <span class="at">sep=</span><span class="st">&quot;=&quot;</span>, <span class="at">collapse=</span><span class="st">&quot;;&quot;</span> ))</span>
<span id="cb11-12"><a href="array-matrix-dataframe.html#cb11-12" tabindex="-1"></a></span>
<span id="cb11-13"><a href="array-matrix-dataframe.html#cb11-13" tabindex="-1"></a>  <span class="cf">if</span> (bl_print){</span>
<span id="cb11-14"><a href="array-matrix-dataframe.html#cb11-14" tabindex="-1"></a>    <span class="fu">print</span>(st_string_from_list)</span>
<span id="cb11-15"><a href="array-matrix-dataframe.html#cb11-15" tabindex="-1"></a>  }</span>
<span id="cb11-16"><a href="array-matrix-dataframe.html#cb11-16" tabindex="-1"></a>}</span>
<span id="cb11-17"><a href="array-matrix-dataframe.html#cb11-17" tabindex="-1"></a></span>
<span id="cb11-18"><a href="array-matrix-dataframe.html#cb11-18" tabindex="-1"></a><span class="co"># print full</span></span>
<span id="cb11-19"><a href="array-matrix-dataframe.html#cb11-19" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="array-matrix-dataframe.html#cb13-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="array-matrix-dataframe.html#cb15-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="array-matrix-dataframe.html#cb17-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named:e1=1;e2=2;e3=3;e4=this is added&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="array-matrix-dataframe.html#cb19-1" tabindex="-1"></a><span class="co"># print subset</span></span>
<span id="cb19-2"><a href="array-matrix-dataframe.html#cb19-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="array-matrix-dataframe.html#cb21-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_str[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_str[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="array-matrix-dataframe.html#cb23-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str[2:4]:=2;=3;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="array-matrix-dataframe.html#cb25-1" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_num_str_named[<span class="fu">c</span>(<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>,<span class="st">&#39;e4&#39;</span>)])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named[c(\&quot;e2\&quot;, \&quot;e3\&quot;, \&quot;e4\&quot;)]:e2=2;e3=3;e4=this is added&quot;</code></pre>
</div>
<div id="two-dimensional-unnamed-list" class="section level4 hasAnchor" number="1.1.1.5">
<h4><span class="header-section-number">1.1.1.5</span> Two Dimensional Unnamed List<a href="array-matrix-dataframe.html#two-dimensional-unnamed-list" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Generate a multiple dimensional list:</p>
<ol style="list-style-type: decimal">
<li>Initiate with an N element empty list</li>
<li>Reshape list to M by Q</li>
<li>Fill list elements</li>
<li>Get list element by row and column number</li>
</ol>
<p>List allows for different data types to be stored together.</p>
<p>Note that element specific names in named list are not preserved when the list is reshaped to be two dimensional. Two dimensional list, however, could have row and column names.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="array-matrix-dataframe.html#cb27-1" tabindex="-1"></a><span class="co"># Dimensions</span></span>
<span id="cb27-2"><a href="array-matrix-dataframe.html#cb27-2" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb27-3"><a href="array-matrix-dataframe.html#cb27-3" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb27-4"><a href="array-matrix-dataframe.html#cb27-4" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> it_M<span class="sc">*</span>it_Q</span>
<span id="cb27-5"><a href="array-matrix-dataframe.html#cb27-5" tabindex="-1"></a></span>
<span id="cb27-6"><a href="array-matrix-dataframe.html#cb27-6" tabindex="-1"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb27-7"><a href="array-matrix-dataframe.html#cb27-7" tabindex="-1"></a>ls_2d_flat <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_N)</span>
<span id="cb27-8"><a href="array-matrix-dataframe.html#cb27-8" tabindex="-1"></a>ls_2d <span class="ot">&lt;-</span> ls_2d_flat</span>
<span id="cb27-9"><a href="array-matrix-dataframe.html#cb27-9" tabindex="-1"></a></span>
<span id="cb27-10"><a href="array-matrix-dataframe.html#cb27-10" tabindex="-1"></a><span class="co"># Named flat</span></span>
<span id="cb27-11"><a href="array-matrix-dataframe.html#cb27-11" tabindex="-1"></a>ls_2d_flat_named <span class="ot">&lt;-</span> ls_2d_flat</span>
<span id="cb27-12"><a href="array-matrix-dataframe.html#cb27-12" tabindex="-1"></a><span class="fu">names</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb27-13"><a href="array-matrix-dataframe.html#cb27-13" tabindex="-1"></a>ls_2d_named <span class="ot">&lt;-</span> ls_2d_flat_named</span>
<span id="cb27-14"><a href="array-matrix-dataframe.html#cb27-14" tabindex="-1"></a></span>
<span id="cb27-15"><a href="array-matrix-dataframe.html#cb27-15" tabindex="-1"></a><span class="co"># Reshape</span></span>
<span id="cb27-16"><a href="array-matrix-dataframe.html#cb27-16" tabindex="-1"></a><span class="fu">dim</span>(ls_2d) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span>
<span id="cb27-17"><a href="array-matrix-dataframe.html#cb27-17" tabindex="-1"></a><span class="co"># named 2d list can not carry 1d name after reshape</span></span>
<span id="cb27-18"><a href="array-matrix-dataframe.html#cb27-18" tabindex="-1"></a><span class="fu">dim</span>(ls_2d_named) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span></code></pre></div>
<p>Print Various objects generated above, print list flattened.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="array-matrix-dataframe.html#cb28-1" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb28-2"><a href="array-matrix-dataframe.html#cb28-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named:e1=NULL;e2=NULL;e3=NULL;e4=NULL;e5=NULL;e6=NULL&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="array-matrix-dataframe.html#cb30-1" tabindex="-1"></a><span class="co"># print(ls_2d_flat_named)</span></span>
<span id="cb30-2"><a href="array-matrix-dataframe.html#cb30-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_named:=NULL;=NULL;=NULL;=NULL;=NULL;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="array-matrix-dataframe.html#cb32-1" tabindex="-1"></a><span class="fu">print</span>(ls_2d_named)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] NULL NULL NULL
## [2,] NULL NULL NULL</code></pre>
<p>Select element from list:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="array-matrix-dataframe.html#cb34-1" tabindex="-1"></a><span class="co"># Select Values, double bracket to select from 2dim list</span></span>
<span id="cb34-2"><a href="array-matrix-dataframe.html#cb34-2" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_2d[[1,2]]&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d[[1,2]]&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="array-matrix-dataframe.html#cb36-1" tabindex="-1"></a><span class="fu">print</span>(ls_2d[[<span class="dv">1</span>,<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="define-two-dimensional-named-list" class="section level4 hasAnchor" number="1.1.1.6">
<h4><span class="header-section-number">1.1.1.6</span> Define Two Dimensional Named LIst<a href="array-matrix-dataframe.html#define-two-dimensional-named-list" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For naming two dimensional lists, <em>rowname</em> and <em>colname</em> does not work. Rather, we need to use <em>dimnames</em>. Note that in addition to dimnames, we can continue to have element specific names. Both can co-exist. But note that the element specific names are not preserved after dimension transform, so need to be redefined afterwards.</p>
<p>How to select an element of a two dimensional list:</p>
<ol style="list-style-type: decimal">
<li>row and column names: <em>dimnames</em>, <em>ls_2d_flat_named[[‘row2’,‘col2’]]</em></li>
<li>named elements: <em>names</em>, <em>ls_2d_flat_named[[‘e5’]]</em></li>
<li>select by index: <em>index</em>, <em>ls_2d_flat_named[[5]]</em></li>
<li>converted two dimensional named list to tibble/matrix</li>
</ol>
<p>Neither <em>dimnames</em> nor <em>names</em> are required, but both can be used to select elements.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="array-matrix-dataframe.html#cb38-1" tabindex="-1"></a><span class="co"># Dimensions</span></span>
<span id="cb38-2"><a href="array-matrix-dataframe.html#cb38-2" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb38-3"><a href="array-matrix-dataframe.html#cb38-3" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb38-4"><a href="array-matrix-dataframe.html#cb38-4" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> it_M<span class="sc">*</span>it_Q</span>
<span id="cb38-5"><a href="array-matrix-dataframe.html#cb38-5" tabindex="-1"></a></span>
<span id="cb38-6"><a href="array-matrix-dataframe.html#cb38-6" tabindex="-1"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb38-7"><a href="array-matrix-dataframe.html#cb38-7" tabindex="-1"></a>ls_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_N)</span>
<span id="cb38-8"><a href="array-matrix-dataframe.html#cb38-8" tabindex="-1"></a><span class="fu">dim</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_M, it_Q)</span>
<span id="cb38-9"><a href="array-matrix-dataframe.html#cb38-9" tabindex="-1"></a></span>
<span id="cb38-10"><a href="array-matrix-dataframe.html#cb38-10" tabindex="-1"></a><span class="co"># Fill with values</span></span>
<span id="cb38-11"><a href="array-matrix-dataframe.html#cb38-11" tabindex="-1"></a><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_Q)) {</span>
<span id="cb38-12"><a href="array-matrix-dataframe.html#cb38-12" tabindex="-1"></a>  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_M)) {</span>
<span id="cb38-13"><a href="array-matrix-dataframe.html#cb38-13" tabindex="-1"></a>    <span class="co"># linear index</span></span>
<span id="cb38-14"><a href="array-matrix-dataframe.html#cb38-14" tabindex="-1"></a>    ls_2d_flat_named[[it_M_ctr, it_Q_ctr]] <span class="ot">&lt;-</span> (it_Q_ctr<span class="dv">-1</span>)<span class="sc">*</span>it_M<span class="sc">+</span>it_M_ctr</span>
<span id="cb38-15"><a href="array-matrix-dataframe.html#cb38-15" tabindex="-1"></a>  }</span>
<span id="cb38-16"><a href="array-matrix-dataframe.html#cb38-16" tabindex="-1"></a>}</span>
<span id="cb38-17"><a href="array-matrix-dataframe.html#cb38-17" tabindex="-1"></a></span>
<span id="cb38-18"><a href="array-matrix-dataframe.html#cb38-18" tabindex="-1"></a><span class="co"># Replace row names, note rownames does not work</span></span>
<span id="cb38-19"><a href="array-matrix-dataframe.html#cb38-19" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d_flat_named)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;row&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_M))</span>
<span id="cb38-20"><a href="array-matrix-dataframe.html#cb38-20" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d_flat_named)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;col&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_Q))</span>
<span id="cb38-21"><a href="array-matrix-dataframe.html#cb38-21" tabindex="-1"></a></span>
<span id="cb38-22"><a href="array-matrix-dataframe.html#cb38-22" tabindex="-1"></a><span class="co"># Element Specific Names</span></span>
<span id="cb38-23"><a href="array-matrix-dataframe.html#cb38-23" tabindex="-1"></a><span class="fu">names</span>(ls_2d_flat_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb38-24"><a href="array-matrix-dataframe.html#cb38-24" tabindex="-1"></a></span>
<span id="cb38-25"><a href="array-matrix-dataframe.html#cb38-25" tabindex="-1"></a><span class="co"># Convert to Matrix</span></span>
<span id="cb38-26"><a href="array-matrix-dataframe.html#cb38-26" tabindex="-1"></a>tb_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ls_2d_flat_named) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>()</span>
<span id="cb38-27"><a href="array-matrix-dataframe.html#cb38-27" tabindex="-1"></a>mt_2d_flat_named <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(tb_2d_flat_named)</span></code></pre></div>
<p>Print various objects generated above:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="array-matrix-dataframe.html#cb39-1" tabindex="-1"></a><span class="co"># These are not element names, can still name each element</span></span>
<span id="cb39-2"><a href="array-matrix-dataframe.html#cb39-2" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb39-3"><a href="array-matrix-dataframe.html#cb39-3" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="array-matrix-dataframe.html#cb41-1" tabindex="-1"></a><span class="fu">print</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## row1 1    4    7    10  
## row2 2    5    8    11  
## row3 3    6    9    12  
## attr(,&quot;names&quot;)
##  [1] &quot;e1&quot;  &quot;e2&quot;  &quot;e3&quot;  &quot;e4&quot;  &quot;e5&quot;  &quot;e6&quot;  &quot;e7&quot;  &quot;e8&quot;  &quot;e9&quot;  &quot;e10&quot; &quot;e11&quot; &quot;e12&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="array-matrix-dataframe.html#cb43-1" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;tb_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;tb_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="array-matrix-dataframe.html#cb45-1" tabindex="-1"></a><span class="fu">print</span>(tb_2d_flat_named)</span>
<span id="cb45-2"><a href="array-matrix-dataframe.html#cb45-2" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;mt_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;mt_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="array-matrix-dataframe.html#cb47-1" tabindex="-1"></a><span class="fu">print</span>(mt_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12</code></pre>
<p>Select elements from list:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="array-matrix-dataframe.html#cb49-1" tabindex="-1"></a><span class="co"># Select elements with with dimnames</span></span>
<span id="cb49-2"><a href="array-matrix-dataframe.html#cb49-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;row2&#39;</span>,<span class="st">&#39;col2&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;row2\&quot;, \&quot;col2\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="array-matrix-dataframe.html#cb51-1" tabindex="-1"></a><span class="co"># Select elements with element names</span></span>
<span id="cb51-2"><a href="array-matrix-dataframe.html#cb51-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;e5&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;e5\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="array-matrix-dataframe.html#cb53-1" tabindex="-1"></a><span class="co"># Select elements with index</span></span>
<span id="cb53-2"><a href="array-matrix-dataframe.html#cb53-2" tabindex="-1"></a><span class="fu">ffi_lst2str</span>(ls_2d_flat_named[[<span class="dv">5</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[5]]:=5&quot;</code></pre>
</div>
<div id="two-dimensional-named-list-for-joint-probability-mass" class="section level4 hasAnchor" number="1.1.1.7">
<h4><span class="header-section-number">1.1.1.7</span> Two-Dimensional Named List for Joint Probability Mass<a href="array-matrix-dataframe.html#two-dimensional-named-list-for-joint-probability-mass" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are two discrete random variables, generate some random discrete probability mass, name the columns and rows, and then convert to matrix.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="array-matrix-dataframe.html#cb55-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb55-2"><a href="array-matrix-dataframe.html#cb55-2" tabindex="-1"></a></span>
<span id="cb55-3"><a href="array-matrix-dataframe.html#cb55-3" tabindex="-1"></a><span class="co"># Generate prob list </span></span>
<span id="cb55-4"><a href="array-matrix-dataframe.html#cb55-4" tabindex="-1"></a>it_Q <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb55-5"><a href="array-matrix-dataframe.html#cb55-5" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb55-6"><a href="array-matrix-dataframe.html#cb55-6" tabindex="-1"></a>ls_2d <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> it_Q<span class="sc">*</span>it_M)</span>
<span id="cb55-7"><a href="array-matrix-dataframe.html#cb55-7" tabindex="-1"></a><span class="fu">dim</span>(ls_2d) <span class="ot">&lt;-</span> <span class="fu">c</span>(it_Q, it_M)</span>
<span id="cb55-8"><a href="array-matrix-dataframe.html#cb55-8" tabindex="-1"></a><span class="co"># Random joint mass </span></span>
<span id="cb55-9"><a href="array-matrix-dataframe.html#cb55-9" tabindex="-1"></a>ar_rand <span class="ot">&lt;-</span> <span class="fu">runif</span>(it_Q<span class="sc">*</span>it_M)</span>
<span id="cb55-10"><a href="array-matrix-dataframe.html#cb55-10" tabindex="-1"></a>ar_rand <span class="ot">&lt;-</span> ar_rand<span class="sc">/</span><span class="fu">sum</span>(ar_rand)</span>
<span id="cb55-11"><a href="array-matrix-dataframe.html#cb55-11" tabindex="-1"></a><span class="co"># Fill with values</span></span>
<span id="cb55-12"><a href="array-matrix-dataframe.html#cb55-12" tabindex="-1"></a>it_ctr <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb55-13"><a href="array-matrix-dataframe.html#cb55-13" tabindex="-1"></a><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_Q)) {</span>
<span id="cb55-14"><a href="array-matrix-dataframe.html#cb55-14" tabindex="-1"></a>  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,it_M)) {</span>
<span id="cb55-15"><a href="array-matrix-dataframe.html#cb55-15" tabindex="-1"></a>    <span class="co"># linear index</span></span>
<span id="cb55-16"><a href="array-matrix-dataframe.html#cb55-16" tabindex="-1"></a>    ls_2d[[it_M_ctr, it_Q_ctr]] <span class="ot">&lt;-</span> ar_rand[(it_Q_ctr<span class="dv">-1</span>)<span class="sc">*</span>it_M<span class="sc">+</span>it_M_ctr]</span>
<span id="cb55-17"><a href="array-matrix-dataframe.html#cb55-17" tabindex="-1"></a>  }</span>
<span id="cb55-18"><a href="array-matrix-dataframe.html#cb55-18" tabindex="-1"></a>}</span>
<span id="cb55-19"><a href="array-matrix-dataframe.html#cb55-19" tabindex="-1"></a><span class="co"># Replace row names, note rownames does not work</span></span>
<span id="cb55-20"><a href="array-matrix-dataframe.html#cb55-20" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;E&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_M))</span>
<span id="cb55-21"><a href="array-matrix-dataframe.html#cb55-21" tabindex="-1"></a><span class="fu">dimnames</span>(ls_2d)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;A&#39;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,it_Q))</span>
<span id="cb55-22"><a href="array-matrix-dataframe.html#cb55-22" tabindex="-1"></a><span class="co"># rename </span></span>
<span id="cb55-23"><a href="array-matrix-dataframe.html#cb55-23" tabindex="-1"></a>ls_prob_joint_E_A <span class="ot">&lt;-</span> ls_2d</span>
<span id="cb55-24"><a href="array-matrix-dataframe.html#cb55-24" tabindex="-1"></a>mt_prob_joint_E_A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">unlist</span>(ls_prob_joint_E_A), <span class="at">ncol=</span>it_M, <span class="at">byrow=</span>F)</span>
<span id="cb55-25"><a href="array-matrix-dataframe.html#cb55-25" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&#39;ls_prob_joint_E_A&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_prob_joint_E_A&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="array-matrix-dataframe.html#cb57-1" tabindex="-1"></a><span class="fu">print</span>(ls_prob_joint_E_A)</span></code></pre></div>
<pre><code>##    A1        A2       
## E1 0.1214495 0.1727188
## E2 0.3329164 0.3729152</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="array-matrix-dataframe.html#cb59-1" tabindex="-1"></a><span class="fu">print</span>(mt_prob_joint_E_A)</span></code></pre></div>
<pre><code>##           [,1]      [,2]
## [1,] 0.1214495 0.1727188
## [2,] 0.3329164 0.3729152</code></pre>
<p>Create conditional probabilities: <span class="math inline">\(F=P(A_1|E_1)\)</span>, <span class="math inline">\(B=P(A_1|E_2)\)</span>, <span class="math inline">\(C=P(E_1|A_1)\)</span>, <span class="math inline">\(D=P(E_1|A_2)\)</span></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="array-matrix-dataframe.html#cb61-1" tabindex="-1"></a>fl_F <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[<span class="dv">1</span>,])</span>
<span id="cb61-2"><a href="array-matrix-dataframe.html#cb61-2" tabindex="-1"></a>fl_B <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">2</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[<span class="dv">2</span>,])</span>
<span id="cb61-3"><a href="array-matrix-dataframe.html#cb61-3" tabindex="-1"></a>fl_C <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[,<span class="dv">1</span>])</span>
<span id="cb61-4"><a href="array-matrix-dataframe.html#cb61-4" tabindex="-1"></a>fl_D <span class="ot">&lt;-</span> mt_prob_joint_E_A[<span class="dv">1</span>,<span class="dv">2</span>]<span class="sc">/</span><span class="fu">sum</span>(mt_prob_joint_E_A[,<span class="dv">2</span>])</span>
<span id="cb61-5"><a href="array-matrix-dataframe.html#cb61-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;fl_F=&#39;</span>, fl_F, <span class="st">&#39;,fl_B=&#39;</span>,fl_B,<span class="st">&#39;,fl_C=&#39;</span>,fl_C,<span class="st">&#39;,fl_D=&#39;</span>,fl_D))</span></code></pre></div>
<pre><code>## [1] &quot;fl_F=0.412857205138471,fl_B=0.471665472604598,fl_C=0.267294503388642,fl_D=0.316546995323062&quot;</code></pre>

</div>
</div>
</div>
<div id="array" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Array<a href="array-matrix-dataframe.html#array" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<div id="array-basics" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Array Basics<a href="array-matrix-dataframe.html#array-basics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="sum-and-product-of-elements-in-array" class="section level4 hasAnchor" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Sum and Product of Elements in Array<a href="array-matrix-dataframe.html#sum-and-product-of-elements-in-array" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Product of Elements in Array.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="array-matrix-dataframe.html#cb63-1" tabindex="-1"></a>ar_a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb63-2"><a href="array-matrix-dataframe.html#cb63-2" tabindex="-1"></a>ar_b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb63-3"><a href="array-matrix-dataframe.html#cb63-3" tabindex="-1"></a><span class="fu">prod</span>(ar_a)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="array-matrix-dataframe.html#cb65-1" tabindex="-1"></a><span class="fu">prod</span>(ar_b)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
</div>
<div id="multidimesional-arrays" class="section level4 hasAnchor" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Multidimesional Arrays<a href="array-matrix-dataframe.html#multidimesional-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="repeat-one-number-by-the-size-of-an-array" class="section level5 hasAnchor" number="1.2.1.2.1">
<h5><span class="header-section-number">1.2.1.2.1</span> Repeat one Number by the Size of an Array<a href="array-matrix-dataframe.html#repeat-one-number-by-the-size-of-an-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="array-matrix-dataframe.html#cb67-1" tabindex="-1"></a>ar_a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb67-2"><a href="array-matrix-dataframe.html#cb67-2" tabindex="-1"></a>ar_b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span><span class="sc">/</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb67-3"><a href="array-matrix-dataframe.html#cb67-3" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">length</span>(ar_a))</span></code></pre></div>
<pre><code>## [1] 0 0 0</code></pre>
</div>
<div id="generate-2-dimensional-array" class="section level5 hasAnchor" number="1.2.1.2.2">
<h5><span class="header-section-number">1.2.1.2.2</span> Generate 2 Dimensional Array<a href="array-matrix-dataframe.html#generate-2-dimensional-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>First, we will generate an NaN matrix with 3 rows and 3 columnes.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="array-matrix-dataframe.html#cb69-1" tabindex="-1"></a>mt_x <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="cn">NA</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb69-2"><a href="array-matrix-dataframe.html#cb69-2" tabindex="-1"></a><span class="fu">dim</span>(mt_x)</span></code></pre></div>
<pre><code>## [1] 3 3</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="array-matrix-dataframe.html#cb71-1" tabindex="-1"></a><span class="fu">print</span>(mt_x)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   NA   NA   NA
## [2,]   NA   NA   NA
## [3,]   NA   NA   NA</code></pre>
<p>Second, we will generate a matrix with 2 rows and four columns.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="array-matrix-dataframe.html#cb73-1" tabindex="-1"></a>mt_x <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb73-2"><a href="array-matrix-dataframe.html#cb73-2" tabindex="-1"></a><span class="fu">dim</span>(mt_x)</span></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="array-matrix-dataframe.html#cb75-1" tabindex="-1"></a><span class="fu">print</span>(mt_x)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]  1.0    0    0    0
## [2,]  1.5    2    4    3</code></pre>
</div>
<div id="generate-3-dimensional-array" class="section level5 hasAnchor" number="1.2.1.2.3">
<h5><span class="header-section-number">1.2.1.2.3</span> Generate 3 Dimensional Array<a href="array-matrix-dataframe.html#generate-3-dimensional-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>First, we will create a three dimensional array with the same data as what was used to create the 2-dimensional array on top.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="array-matrix-dataframe.html#cb77-1" tabindex="-1"></a><span class="co"># Multidimensional Array</span></span>
<span id="cb77-2"><a href="array-matrix-dataframe.html#cb77-2" tabindex="-1"></a><span class="co"># 1 is r1c1t1, 1.5 in r2c1t1, 0 in r1c2t1, etc.</span></span>
<span id="cb77-3"><a href="array-matrix-dataframe.html#cb77-3" tabindex="-1"></a><span class="co"># Three dimensions, row first, column second, and tensor third</span></span>
<span id="cb77-4"><a href="array-matrix-dataframe.html#cb77-4" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb77-5"><a href="array-matrix-dataframe.html#cb77-5" tabindex="-1"></a><span class="fu">dim</span>(x)</span></code></pre></div>
<pre><code>## [1] 2 2 2</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="array-matrix-dataframe.html#cb79-1" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]  1.0    0
## [2,]  1.5    2
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    0    0
## [2,]    4    3</code></pre>
<p>Second, in the example below, we will generate a 3-dimensional array. The first dimension corresponds to different income levels, the second marital status, and the third the number of kids.We compute in the example below taxable income in 2008 given income levels given IRS rules.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="array-matrix-dataframe.html#cb81-1" tabindex="-1"></a><span class="co"># A, Income Array</span></span>
<span id="cb81-2"><a href="array-matrix-dataframe.html#cb81-2" tabindex="-1"></a>ar_income <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">200000</span>,<span class="at">length.out=</span><span class="dv">3</span>)</span>
<span id="cb81-3"><a href="array-matrix-dataframe.html#cb81-3" tabindex="-1"></a></span>
<span id="cb81-4"><a href="array-matrix-dataframe.html#cb81-4" tabindex="-1"></a><span class="co"># B. Exemptions and Deductions</span></span>
<span id="cb81-5"><a href="array-matrix-dataframe.html#cb81-5" tabindex="-1"></a>fl_exemption <span class="ot">&lt;-</span> <span class="dv">3500</span><span class="co"># exemption amount per household member</span></span>
<span id="cb81-6"><a href="array-matrix-dataframe.html#cb81-6" tabindex="-1"></a>mt_deduction <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">5</span>)<span class="co"># Marital-status and number of children-specific deduction</span></span>
<span id="cb81-7"><a href="array-matrix-dataframe.html#cb81-7" tabindex="-1"></a>mt_deduction[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5450</span><span class="co"># Single filers</span></span>
<span id="cb81-8"><a href="array-matrix-dataframe.html#cb81-8" tabindex="-1"></a>mt_deduction[<span class="dv">1</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="dv">8000</span><span class="co"># Single filer with children</span></span>
<span id="cb81-9"><a href="array-matrix-dataframe.html#cb81-9" tabindex="-1"></a>mt_deduction[<span class="dv">2</span>,] <span class="ot">&lt;-</span> <span class="dv">10900</span><span class="co"># Married couples filing jointly</span></span>
<span id="cb81-10"><a href="array-matrix-dataframe.html#cb81-10" tabindex="-1"></a></span>
<span id="cb81-11"><a href="array-matrix-dataframe.html#cb81-11" tabindex="-1"></a><span class="co"># C. Taxable Income</span></span>
<span id="cb81-12"><a href="array-matrix-dataframe.html#cb81-12" tabindex="-1"></a>mn_taxable_income <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="cn">NA</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="fu">length</span>(ar_income), <span class="dv">2</span>, <span class="dv">5</span>))</span>
<span id="cb81-13"><a href="array-matrix-dataframe.html#cb81-13" tabindex="-1"></a><span class="cf">for</span> (y <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ar_income)){</span>
<span id="cb81-14"><a href="array-matrix-dataframe.html#cb81-14" tabindex="-1"></a>    <span class="cf">for</span> (m <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb81-15"><a href="array-matrix-dataframe.html#cb81-15" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb81-16"><a href="array-matrix-dataframe.html#cb81-16" tabindex="-1"></a>            mn_taxable_income[y,m,k<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> ar_income[y]<span class="sc">-</span>fl_exemption<span class="sc">*</span>m<span class="sc">-</span>fl_exemption<span class="sc">*</span>k<span class="sc">-</span>mt_deduction[m,k<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb81-17"><a href="array-matrix-dataframe.html#cb81-17" tabindex="-1"></a>        }</span>
<span id="cb81-18"><a href="array-matrix-dataframe.html#cb81-18" tabindex="-1"></a>    }</span>
<span id="cb81-19"><a href="array-matrix-dataframe.html#cb81-19" tabindex="-1"></a>}</span>
<span id="cb81-20"><a href="array-matrix-dataframe.html#cb81-20" tabindex="-1"></a></span>
<span id="cb81-21"><a href="array-matrix-dataframe.html#cb81-21" tabindex="-1"></a><span class="co"># D. Name dimensions</span></span>
<span id="cb81-22"><a href="array-matrix-dataframe.html#cb81-22" tabindex="-1"></a><span class="fu">dimnames</span>(mn_taxable_income)[[<span class="dv">1</span>]] <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&#39;income=&#39;</span>, <span class="fu">round</span>(ar_income, <span class="dv">0</span>))</span>
<span id="cb81-23"><a href="array-matrix-dataframe.html#cb81-23" tabindex="-1"></a><span class="fu">dimnames</span>(mn_taxable_income)[[<span class="dv">2</span>]] <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&#39;married=&#39;</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb81-24"><a href="array-matrix-dataframe.html#cb81-24" tabindex="-1"></a><span class="fu">dimnames</span>(mn_taxable_income)[[<span class="dv">3</span>]] <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&#39;kids=&#39;</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb81-25"><a href="array-matrix-dataframe.html#cb81-25" tabindex="-1"></a></span>
<span id="cb81-26"><a href="array-matrix-dataframe.html#cb81-26" tabindex="-1"></a><span class="co"># E. Print</span></span>
<span id="cb81-27"><a href="array-matrix-dataframe.html#cb81-27" tabindex="-1"></a><span class="fu">dim</span>(mn_taxable_income)</span></code></pre></div>
<pre><code>## [1] 3 2 5</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="array-matrix-dataframe.html#cb83-1" tabindex="-1"></a><span class="fu">print</span>(mn_taxable_income)</span></code></pre></div>
<pre><code>## , , kids=0
## 
##              married=0 married=1
## income=0         -8950    -17900
## income=1e+05     91050     82100
## income=2e+05    191050    182100
## 
## , , kids=1
## 
##              married=0 married=1
## income=0        -15000    -21400
## income=1e+05     85000     78600
## income=2e+05    185000    178600
## 
## , , kids=2
## 
##              married=0 married=1
## income=0        -18500    -24900
## income=1e+05     81500     75100
## income=2e+05    181500    175100
## 
## , , kids=3
## 
##              married=0 married=1
## income=0        -22000    -28400
## income=1e+05     78000     71600
## income=2e+05    178000    171600
## 
## , , kids=4
## 
##              married=0 married=1
## income=0        -25500    -31900
## income=1e+05     74500     68100
## income=2e+05    174500    168100</code></pre>
</div>
</div>
<div id="array-slicing" class="section level4 hasAnchor" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> Array Slicing<a href="array-matrix-dataframe.html#array-slicing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="get-a-subset-of-array-elements-n-cuts-from-m-points" class="section level5 hasAnchor" number="1.2.1.3.1">
<h5><span class="header-section-number">1.2.1.3.1</span> Get a Subset of Array Elements, N Cuts from M Points<a href="array-matrix-dataframe.html#get-a-subset-of-array-elements-n-cuts-from-m-points" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>There is an array with M elements, get N elements from the M elements.</p>
<p>First cut including the starting and ending points.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="array-matrix-dataframe.html#cb85-1" tabindex="-1"></a>it_M <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb85-2"><a href="array-matrix-dataframe.html#cb85-2" tabindex="-1"></a>it_N <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb85-3"><a href="array-matrix-dataframe.html#cb85-3" tabindex="-1"></a>ar_all_elements <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="remove-elements-of-array" class="section level5 hasAnchor" number="1.2.1.3.2">
<h5><span class="header-section-number">1.2.1.3.2</span> Remove Elements of Array<a href="array-matrix-dataframe.html#remove-elements-of-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Select elements with direct indexing, or with head and tail functions. Get the first two elements of three elements array.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="array-matrix-dataframe.html#cb86-1" tabindex="-1"></a><span class="co"># Remove last element of array</span></span>
<span id="cb86-2"><a href="array-matrix-dataframe.html#cb86-2" tabindex="-1"></a>vars.group.bydf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb86-3"><a href="array-matrix-dataframe.html#cb86-3" tabindex="-1"></a>vars.group.bydf[<span class="sc">-</span><span class="fu">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="array-matrix-dataframe.html#cb88-1" tabindex="-1"></a><span class="co"># Use the head function to remove last element</span></span>
<span id="cb88-2"><a href="array-matrix-dataframe.html#cb88-2" tabindex="-1"></a><span class="fu">head</span>(vars.group.bydf, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="array-matrix-dataframe.html#cb90-1" tabindex="-1"></a><span class="fu">head</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<p>Get last two elements of array.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="array-matrix-dataframe.html#cb92-1" tabindex="-1"></a><span class="co"># Remove first element of array</span></span>
<span id="cb92-2"><a href="array-matrix-dataframe.html#cb92-2" tabindex="-1"></a>vars.group.bydf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb92-3"><a href="array-matrix-dataframe.html#cb92-3" tabindex="-1"></a>vars.group.bydf[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="array-matrix-dataframe.html#cb94-1" tabindex="-1"></a><span class="co"># Use Tail function</span></span>
<span id="cb94-2"><a href="array-matrix-dataframe.html#cb94-2" tabindex="-1"></a><span class="fu">tail</span>(vars.group.bydf, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="array-matrix-dataframe.html#cb96-1" tabindex="-1"></a><span class="fu">tail</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<p>Select all except for the first and the last element of an array.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="array-matrix-dataframe.html#cb98-1" tabindex="-1"></a><span class="co"># define array</span></span>
<span id="cb98-2"><a href="array-matrix-dataframe.html#cb98-2" tabindex="-1"></a>ar_amin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb98-3"><a href="array-matrix-dataframe.html#cb98-3" tabindex="-1"></a><span class="co"># select without head and tail</span></span>
<span id="cb98-4"><a href="array-matrix-dataframe.html#cb98-4" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">head</span>(ar_amin, <span class="sc">-</span><span class="dv">1</span>), <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.25 0.50 0.75</code></pre>
<p>Select the first and the last element of an array. The extreme values.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="array-matrix-dataframe.html#cb100-1" tabindex="-1"></a><span class="co"># define array</span></span>
<span id="cb100-2"><a href="array-matrix-dataframe.html#cb100-2" tabindex="-1"></a>ar_amin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb100-3"><a href="array-matrix-dataframe.html#cb100-3" tabindex="-1"></a><span class="co"># select head and tail</span></span>
<span id="cb100-4"><a href="array-matrix-dataframe.html#cb100-4" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">head</span>(ar_amin, <span class="dv">1</span>), <span class="fu">tail</span>(ar_amin, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] 0 1</code></pre>
</div>
</div>
<div id="na-in-array" class="section level4 hasAnchor" number="1.2.1.4">
<h4><span class="header-section-number">1.2.1.4</span> NA in Array<a href="array-matrix-dataframe.html#na-in-array" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="check-if-na-is-in-array" class="section level5 hasAnchor" number="1.2.1.4.1">
<h5><span class="header-section-number">1.2.1.4.1</span> Check if NA is in Array<a href="array-matrix-dataframe.html#check-if-na-is-in-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="array-matrix-dataframe.html#cb102-1" tabindex="-1"></a><span class="co"># Convert Inf and -Inf to NA</span></span>
<span id="cb102-2"><a href="array-matrix-dataframe.html#cb102-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="cn">Inf</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="cn">Inf</span>)</span>
<span id="cb102-3"><a href="array-matrix-dataframe.html#cb102-3" tabindex="-1"></a><span class="fu">na_if</span>(<span class="fu">na_if</span>(x, <span class="sc">-</span><span class="cn">Inf</span>), <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## [1]  1 -1 NA 10 NA</code></pre>
</div>
</div>
<div id="complex-number" class="section level4 hasAnchor" number="1.2.1.5">
<h4><span class="header-section-number">1.2.1.5</span> Complex Number<a href="array-matrix-dataframe.html#complex-number" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Handling numbers with real and imaginary components. Two separate issues, given an array of numbers that includes real as well as imaginary numbers, keep subset that only has real components. Additionally, for the same array, generate an equal length version of the array that includes the real components of all numbers.</p>
<p>Define complex numbers.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="array-matrix-dataframe.html#cb104-1" tabindex="-1"></a><span class="co"># Define a complex number</span></span>
<span id="cb104-2"><a href="array-matrix-dataframe.html#cb104-2" tabindex="-1"></a>cx_number_a <span class="ot">&lt;-</span> <span class="dv">0</span><span class="fl">+0.0460246857561777</span>i</span>
<span id="cb104-3"><a href="array-matrix-dataframe.html#cb104-3" tabindex="-1"></a><span class="co"># Define another complex number</span></span>
<span id="cb104-4"><a href="array-matrix-dataframe.html#cb104-4" tabindex="-1"></a>cx_number_b <span class="ot">&lt;-</span> <span class="fu">complex</span>(<span class="at">real =</span> <span class="fl">0.02560982</span>, <span class="at">imaginary =</span> <span class="fl">0.0460246857561777</span>)</span>
<span id="cb104-5"><a href="array-matrix-dataframe.html#cb104-5" tabindex="-1"></a><span class="co"># An array of numbers some of which are complex</span></span>
<span id="cb104-6"><a href="array-matrix-dataframe.html#cb104-6" tabindex="-1"></a>ar_cx_number <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.02560982+0.000000000</span>i, <span class="fl">0.00000000+0.044895305</span>i, </span>
<span id="cb104-7"><a href="array-matrix-dataframe.html#cb104-7" tabindex="-1"></a>                  <span class="fl">0.00000000+0.009153429</span>i, <span class="fl">0.05462045+0.000000000</span>i, </span>
<span id="cb104-8"><a href="array-matrix-dataframe.html#cb104-8" tabindex="-1"></a>                  <span class="fl">0.00000000+0.001198538</span>i, <span class="fl">0.00000000+0.019267050</span>i)</span></code></pre></div>
<p>Extract real components from a complex array.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="array-matrix-dataframe.html#cb105-1" tabindex="-1"></a><span class="co"># equi-length real component</span></span>
<span id="cb105-2"><a href="array-matrix-dataframe.html#cb105-2" tabindex="-1"></a>ar_fl_number_re <span class="ot">&lt;-</span> <span class="fu">Re</span>(ar_cx_number)</span>
<span id="cb105-3"><a href="array-matrix-dataframe.html#cb105-3" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_re)</span></code></pre></div>
<pre><code>## [1] 0.02560982 0.00000000 0.00000000 0.05462045 0.00000000 0.00000000</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="array-matrix-dataframe.html#cb107-1" tabindex="-1"></a><span class="co"># equi-length img component</span></span>
<span id="cb107-2"><a href="array-matrix-dataframe.html#cb107-2" tabindex="-1"></a>ar_fl_number_im <span class="ot">&lt;-</span> <span class="fu">Im</span>(ar_cx_number)</span>
<span id="cb107-3"><a href="array-matrix-dataframe.html#cb107-3" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_im)</span></code></pre></div>
<pre><code>## [1] 0.000000000 0.044895305 0.009153429 0.000000000 0.001198538 0.019267050</code></pre>
<p>Keep only real elements of array.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="array-matrix-dataframe.html#cb109-1" tabindex="-1"></a><span class="co"># subset of array that is real</span></span>
<span id="cb109-2"><a href="array-matrix-dataframe.html#cb109-2" tabindex="-1"></a>ar_fl_number_re_subset <span class="ot">&lt;-</span> <span class="fu">Re</span>(ar_cx_number[<span class="fu">Re</span>(ar_cx_number)<span class="sc">!=</span><span class="dv">0</span>])</span>
<span id="cb109-3"><a href="array-matrix-dataframe.html#cb109-3" tabindex="-1"></a><span class="fu">print</span>(ar_fl_number_re_subset)</span></code></pre></div>
<pre><code>## [1] 0.02560982 0.05462045</code></pre>
</div>
<div id="number-formatting" class="section level4 hasAnchor" number="1.2.1.6">
<h4><span class="header-section-number">1.2.1.6</span> Number Formatting<a href="array-matrix-dataframe.html#number-formatting" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="e-notation" class="section level5 hasAnchor" number="1.2.1.6.1">
<h5><span class="header-section-number">1.2.1.6.1</span> e notation<a href="array-matrix-dataframe.html#e-notation" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ol style="list-style-type: decimal">
<li>Case one: <em>1.149946e+00</em>
<ul>
<li>this is approximately: 1.14995</li>
</ul></li>
<li>Case two: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
<li>Case three: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
</ol>
</div>
</div>
<div id="string-conversions" class="section level4 hasAnchor" number="1.2.1.7">
<h4><span class="header-section-number">1.2.1.7</span> String Conversions<a href="array-matrix-dataframe.html#string-conversions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="add-positive-and-negative-sign-in-front-of-values" class="section level5 hasAnchor" number="1.2.1.7.1">
<h5><span class="header-section-number">1.2.1.7.1</span> Add Positive and Negative Sign in Front of Values<a href="array-matrix-dataframe.html#add-positive-and-negative-sign-in-front-of-values" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We have a sequence of integers, some positive and some negative. We convert this into a string array, and append positive sign in front of positive values.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="array-matrix-dataframe.html#cb111-1" tabindex="-1"></a><span class="co"># An array of integers</span></span>
<span id="cb111-2"><a href="array-matrix-dataframe.html#cb111-2" tabindex="-1"></a>ar_it_vals <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb111-3"><a href="array-matrix-dataframe.html#cb111-3" tabindex="-1"></a><span class="co"># Add positive sign in front of positive and zero elements</span></span>
<span id="cb111-4"><a href="array-matrix-dataframe.html#cb111-4" tabindex="-1"></a>st_it_vals <span class="ot">&lt;-</span> <span class="fu">paste0</span>(ar_it_vals)</span>
<span id="cb111-5"><a href="array-matrix-dataframe.html#cb111-5" tabindex="-1"></a>st_it_vals[ar_it_vals<span class="sc">&gt;</span><span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;+&quot;</span>, st_it_vals[ar_it_vals<span class="sc">&gt;</span><span class="dv">0</span>])</span>
<span id="cb111-6"><a href="array-matrix-dataframe.html#cb111-6" tabindex="-1"></a>st_it_vals[ar_it_vals<span class="sc">==</span><span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;±&quot;</span>, st_it_vals[ar_it_vals<span class="sc">==</span><span class="dv">0</span>])</span>
<span id="cb111-7"><a href="array-matrix-dataframe.html#cb111-7" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb111-8"><a href="array-matrix-dataframe.html#cb111-8" tabindex="-1"></a><span class="fu">print</span>(st_it_vals)</span></code></pre></div>
<pre><code>##  [1] &quot;-5&quot; &quot;-4&quot; &quot;-3&quot; &quot;-2&quot; &quot;-1&quot; &quot;±0&quot; &quot;+1&quot; &quot;+2&quot; &quot;+3&quot; &quot;+4&quot; &quot;+5&quot;</code></pre>
</div>
</div>
<div id="basic-array-calculations" class="section level4 hasAnchor" number="1.2.1.8">
<h4><span class="header-section-number">1.2.1.8</span> Basic array calculations<a href="array-matrix-dataframe.html#basic-array-calculations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, we demonstrate how purrr::reduce() works with a simple summation example. We use the addition operator.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="array-matrix-dataframe.html#cb113-1" tabindex="-1"></a><span class="co"># Using R pipe operator</span></span>
<span id="cb113-2"><a href="array-matrix-dataframe.html#cb113-2" tabindex="-1"></a><span class="co"># 1 + 2 + 3 = 6</span></span>
<span id="cb113-3"><a href="array-matrix-dataframe.html#cb113-3" tabindex="-1"></a>fl_sum <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">|&gt;</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(<span class="st">`</span><span class="at">+</span><span class="st">`</span>)</span>
<span id="cb113-4"><a href="array-matrix-dataframe.html#cb113-4" tabindex="-1"></a><span class="fu">print</span>(fl_sum)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Second, what if there is an NA value? NA will be ignored, we will write a custom function. The custom function, to work with reduce, should be such that it is “a binary function that takes two values and returns a single value”.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="array-matrix-dataframe.html#cb115-1" tabindex="-1"></a><span class="co"># define sum function that ignores NA</span></span>
<span id="cb115-2"><a href="array-matrix-dataframe.html#cb115-2" tabindex="-1"></a>sum_ignore_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y) {</span>
<span id="cb115-3"><a href="array-matrix-dataframe.html#cb115-3" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(y)) {</span>
<span id="cb115-4"><a href="array-matrix-dataframe.html#cb115-4" tabindex="-1"></a>    x <span class="sc">+</span> y</span>
<span id="cb115-5"><a href="array-matrix-dataframe.html#cb115-5" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.na</span>(x)) {</span>
<span id="cb115-6"><a href="array-matrix-dataframe.html#cb115-6" tabindex="-1"></a>    y</span>
<span id="cb115-7"><a href="array-matrix-dataframe.html#cb115-7" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.na</span>(y)) {</span>
<span id="cb115-8"><a href="array-matrix-dataframe.html#cb115-8" tabindex="-1"></a>    x</span>
<span id="cb115-9"><a href="array-matrix-dataframe.html#cb115-9" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb115-10"><a href="array-matrix-dataframe.html#cb115-10" tabindex="-1"></a>    <span class="cn">NA</span></span>
<span id="cb115-11"><a href="array-matrix-dataframe.html#cb115-11" tabindex="-1"></a>  }</span>
<span id="cb115-12"><a href="array-matrix-dataframe.html#cb115-12" tabindex="-1"></a>}</span>
<span id="cb115-13"><a href="array-matrix-dataframe.html#cb115-13" tabindex="-1"></a></span>
<span id="cb115-14"><a href="array-matrix-dataframe.html#cb115-14" tabindex="-1"></a><span class="co"># Using R pipe operator</span></span>
<span id="cb115-15"><a href="array-matrix-dataframe.html#cb115-15" tabindex="-1"></a><span class="co"># 1 + 10 + 1 = 12</span></span>
<span id="cb115-16"><a href="array-matrix-dataframe.html#cb115-16" tabindex="-1"></a>fl_sum <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="cn">NA</span>, <span class="dv">1</span>) <span class="sc">|&gt;</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(sum_ignore_na)</span>
<span id="cb115-17"><a href="array-matrix-dataframe.html#cb115-17" tabindex="-1"></a><span class="fu">print</span>(fl_sum)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>

</div>
</div>
<div id="generate-arrays" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Generate Arrays<a href="array-matrix-dataframe.html#generate-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="generate-often-used-arrays" class="section level4 hasAnchor" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Generate Often Used Arrays<a href="array-matrix-dataframe.html#generate-often-used-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="equi-distance-array-with-bound" class="section level5 hasAnchor" number="1.2.2.1.1">
<h5><span class="header-section-number">1.2.2.1.1</span> Equi-distance Array with Bound<a href="array-matrix-dataframe.html#equi-distance-array-with-bound" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Consider multiple income groups in income bins that are equal-width, for the final income group, consider all individuals above some final bin minimum bound. Below the code generates this array of numbers: <span class="math inline">\(0, 20000, 40000, 60000, 80000, 100000, 100000000\)</span>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="array-matrix-dataframe.html#cb117-1" tabindex="-1"></a><span class="co"># generate income cut-offs</span></span>
<span id="cb117-2"><a href="array-matrix-dataframe.html#cb117-2" tabindex="-1"></a>fl_bin_start <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb117-3"><a href="array-matrix-dataframe.html#cb117-3" tabindex="-1"></a><span class="co"># width equal to 20,000</span></span>
<span id="cb117-4"><a href="array-matrix-dataframe.html#cb117-4" tabindex="-1"></a>fl_bin_width <span class="ot">&lt;-</span> <span class="fl">2e4</span></span>
<span id="cb117-5"><a href="array-matrix-dataframe.html#cb117-5" tabindex="-1"></a><span class="co"># final point is 100 million</span></span>
<span id="cb117-6"><a href="array-matrix-dataframe.html#cb117-6" tabindex="-1"></a>fl_bin_final_end <span class="ot">&lt;-</span> <span class="fl">1e8</span></span>
<span id="cb117-7"><a href="array-matrix-dataframe.html#cb117-7" tabindex="-1"></a><span class="co"># final segment starting point is 100,000 dollars</span></span>
<span id="cb117-8"><a href="array-matrix-dataframe.html#cb117-8" tabindex="-1"></a>fl_bin_final_start <span class="ot">&lt;-</span> <span class="fl">1e5</span></span>
<span id="cb117-9"><a href="array-matrix-dataframe.html#cb117-9" tabindex="-1"></a><span class="co"># generate tincome bins</span></span>
<span id="cb117-10"><a href="array-matrix-dataframe.html#cb117-10" tabindex="-1"></a>ar_income_bins <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb117-11"><a href="array-matrix-dataframe.html#cb117-11" tabindex="-1"></a>  <span class="fu">seq</span>(fl_bin_start, fl_bin_final_start, <span class="at">by =</span> fl_bin_width),</span>
<span id="cb117-12"><a href="array-matrix-dataframe.html#cb117-12" tabindex="-1"></a>  fl_bin_final_end</span>
<span id="cb117-13"><a href="array-matrix-dataframe.html#cb117-13" tabindex="-1"></a>)</span>
<span id="cb117-14"><a href="array-matrix-dataframe.html#cb117-14" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb117-15"><a href="array-matrix-dataframe.html#cb117-15" tabindex="-1"></a><span class="fu">print</span>(ar_income_bins)</span></code></pre></div>
<pre><code>## [1] 0e+00 2e+04 4e+04 6e+04 8e+04 1e+05 1e+08</code></pre>
<p>Generate finer bins, at 5000 USD intervals, and stopping at 200 thousand dollars.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="array-matrix-dataframe.html#cb119-1" tabindex="-1"></a>fl_bin_start <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb119-2"><a href="array-matrix-dataframe.html#cb119-2" tabindex="-1"></a>fl_bin_width <span class="ot">&lt;-</span> <span class="fl">5e3</span></span>
<span id="cb119-3"><a href="array-matrix-dataframe.html#cb119-3" tabindex="-1"></a>fl_bin_final_end <span class="ot">&lt;-</span> <span class="fl">1e8</span></span>
<span id="cb119-4"><a href="array-matrix-dataframe.html#cb119-4" tabindex="-1"></a>fl_bin_final_start <span class="ot">&lt;-</span> <span class="fl">2e5</span></span>
<span id="cb119-5"><a href="array-matrix-dataframe.html#cb119-5" tabindex="-1"></a>ar_income_bins <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb119-6"><a href="array-matrix-dataframe.html#cb119-6" tabindex="-1"></a>  <span class="fu">seq</span>(fl_bin_start, fl_bin_final_start, <span class="at">by =</span> fl_bin_width),</span>
<span id="cb119-7"><a href="array-matrix-dataframe.html#cb119-7" tabindex="-1"></a>  fl_bin_final_end</span>
<span id="cb119-8"><a href="array-matrix-dataframe.html#cb119-8" tabindex="-1"></a>)</span>
<span id="cb119-9"><a href="array-matrix-dataframe.html#cb119-9" tabindex="-1"></a><span class="fu">print</span>(ar_income_bins)</span></code></pre></div>
<pre><code>##  [1] 0.00e+00 5.00e+03 1.00e+04 1.50e+04 2.00e+04 2.50e+04 3.00e+04 3.50e+04 4.00e+04
## [10] 4.50e+04 5.00e+04 5.50e+04 6.00e+04 6.50e+04 7.00e+04 7.50e+04 8.00e+04 8.50e+04
## [19] 9.00e+04 9.50e+04 1.00e+05 1.05e+05 1.10e+05 1.15e+05 1.20e+05 1.25e+05 1.30e+05
## [28] 1.35e+05 1.40e+05 1.45e+05 1.50e+05 1.55e+05 1.60e+05 1.65e+05 1.70e+05 1.75e+05
## [37] 1.80e+05 1.85e+05 1.90e+05 1.95e+05 2.00e+05 1.00e+08</code></pre>
</div>
<div id="log-space-arrays" class="section level5 hasAnchor" number="1.2.2.1.2">
<h5><span class="header-section-number">1.2.2.1.2</span> Log Space Arrays<a href="array-matrix-dataframe.html#log-space-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Often need to generate arrays on log rather than linear scale, below is log 10 scaled grid.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="array-matrix-dataframe.html#cb121-1" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb121-2"><a href="array-matrix-dataframe.html#cb121-2" tabindex="-1"></a>it.lower.bd.inc.cnt <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb121-3"><a href="array-matrix-dataframe.html#cb121-3" tabindex="-1"></a>fl.log.lower <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb121-4"><a href="array-matrix-dataframe.html#cb121-4" tabindex="-1"></a>fl.log.higher <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">9</span></span>
<span id="cb121-5"><a href="array-matrix-dataframe.html#cb121-5" tabindex="-1"></a>fl.min.rescale <span class="ot">&lt;-</span> <span class="fl">0.01</span></span>
<span id="cb121-6"><a href="array-matrix-dataframe.html#cb121-6" tabindex="-1"></a>it.log.count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb121-7"><a href="array-matrix-dataframe.html#cb121-7" tabindex="-1"></a><span class="co"># Generate</span></span>
<span id="cb121-8"><a href="array-matrix-dataframe.html#cb121-8" tabindex="-1"></a>ar.fl.log.rescaled <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">log</span>(<span class="dv">10</span>) <span class="sc">*</span> <span class="fu">seq</span>(<span class="fu">log10</span>(fl.min.rescale),</span>
<span id="cb121-9"><a href="array-matrix-dataframe.html#cb121-9" tabindex="-1"></a>  <span class="fu">log10</span>(fl.min.rescale <span class="sc">+</span></span>
<span id="cb121-10"><a href="array-matrix-dataframe.html#cb121-10" tabindex="-1"></a>    (fl.log.higher <span class="sc">-</span> fl.log.lower)),</span>
<span id="cb121-11"><a href="array-matrix-dataframe.html#cb121-11" tabindex="-1"></a>  <span class="at">length.out =</span> it.log.count</span>
<span id="cb121-12"><a href="array-matrix-dataframe.html#cb121-12" tabindex="-1"></a>))</span>
<span id="cb121-13"><a href="array-matrix-dataframe.html#cb121-13" tabindex="-1"></a>ar.fl.log <span class="ot">&lt;-</span> ar.fl.log.rescaled <span class="sc">+</span> fl.log.lower <span class="sc">-</span> fl.min.rescale</span>
<span id="cb121-14"><a href="array-matrix-dataframe.html#cb121-14" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb121-15"><a href="array-matrix-dataframe.html#cb121-15" tabindex="-1"></a>ar.fl.log</span></code></pre></div>
<pre><code>## [1] -10.000000  -9.963430  -9.793123  -9.000000</code></pre>
</div>
</div>
<div id="generate-arrays-based-on-existing-arrays" class="section level4 hasAnchor" number="1.2.2.2">
<h4><span class="header-section-number">1.2.2.2</span> Generate Arrays Based on Existing Arrays<a href="array-matrix-dataframe.html#generate-arrays-based-on-existing-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="probability-mass-array-and-discrete-value-array" class="section level5 hasAnchor" number="1.2.2.2.1">
<h5><span class="header-section-number">1.2.2.2.1</span> Probability Mass Array and Discrete Value Array<a href="array-matrix-dataframe.html#probability-mass-array-and-discrete-value-array" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>There are two arrays, an array of values, and an array of probabilities. The probability array sums to 1. The array of values, however, might not be unique.</p>
<p>First, generate some array of numbers not sorted and some proability mass for each non-sorted, non-unique element of the array.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="array-matrix-dataframe.html#cb123-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb123-2"><a href="array-matrix-dataframe.html#cb123-2" tabindex="-1"></a>it_len <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb123-3"><a href="array-matrix-dataframe.html#cb123-3" tabindex="-1"></a>ar_x <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">runif</span>(it_len) <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb123-4"><a href="array-matrix-dataframe.html#cb123-4" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> <span class="fu">dbinom</span>(<span class="fu">seq</span>(<span class="dv">0</span>, it_len <span class="sc">-</span> <span class="dv">1</span>, <span class="at">length.out =</span> it_len), it_len <span class="sc">-</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.5</span>)</span>
<span id="cb123-5"><a href="array-matrix-dataframe.html#cb123-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x, ar_prob))</span></code></pre></div>
<pre><code>##       ar_x     ar_prob
##  [1,]   12 0.001953125
##  [2,]   14 0.017578125
##  [3,]   13 0.070312500
##  [4,]   15 0.164062500
##  [5,]   15 0.246093750
##  [6,]   11 0.246093750
##  [7,]   13 0.164062500
##  [8,]   15 0.070312500
##  [9,]   13 0.017578125
## [10,]   13 0.001953125</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="array-matrix-dataframe.html#cb125-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;sum(ar_prob)=&quot;</span>, <span class="fu">sum</span>(ar_prob)))</span></code></pre></div>
<pre><code>## [1] &quot;sum(ar_prob)=1&quot;</code></pre>
<p>Second, sorting index for ar_x, and resort ar_prob with the same index:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="array-matrix-dataframe.html#cb127-1" tabindex="-1"></a>ls_sorted_res <span class="ot">&lt;-</span> <span class="fu">sort</span>(ar_x, <span class="at">decreasing =</span> <span class="cn">FALSE</span>, <span class="at">index.return =</span> <span class="cn">TRUE</span>)</span>
<span id="cb127-2"><a href="array-matrix-dataframe.html#cb127-2" tabindex="-1"></a>ar_idx_increasing_x <span class="ot">&lt;-</span> ls_sorted_res<span class="sc">$</span>ix</span>
<span id="cb127-3"><a href="array-matrix-dataframe.html#cb127-3" tabindex="-1"></a>ar_x_sorted <span class="ot">&lt;-</span> ls_sorted_res<span class="sc">$</span>x</span>
<span id="cb127-4"><a href="array-matrix-dataframe.html#cb127-4" tabindex="-1"></a>ar_prob_sorted <span class="ot">&lt;-</span> ar_prob[ar_idx_increasing_x]</span>
<span id="cb127-5"><a href="array-matrix-dataframe.html#cb127-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_sorted, ar_prob_sorted))</span></code></pre></div>
<pre><code>##       ar_x_sorted ar_prob_sorted
##  [1,]          11    0.246093750
##  [2,]          12    0.001953125
##  [3,]          13    0.070312500
##  [4,]          13    0.164062500
##  [5,]          13    0.017578125
##  [6,]          13    0.001953125
##  [7,]          14    0.017578125
##  [8,]          15    0.164062500
##  [9,]          15    0.246093750
## [10,]          15    0.070312500</code></pre>
<p>Third, sum within group and generate unique, using the <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/aggregate">aggregate</a> function. Then we have a column of unique values and associated probabilities.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="array-matrix-dataframe.html#cb129-1" tabindex="-1"></a>ar_x_unique <span class="ot">&lt;-</span> <span class="fu">unique</span>(ar_x_sorted)</span>
<span id="cb129-2"><a href="array-matrix-dataframe.html#cb129-2" tabindex="-1"></a>mt_prob_unique <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ar_prob_sorted, <span class="at">by =</span> <span class="fu">list</span>(ar_x_sorted), <span class="at">FUN =</span> sum)</span>
<span id="cb129-3"><a href="array-matrix-dataframe.html#cb129-3" tabindex="-1"></a>ar_x_unique_prob <span class="ot">&lt;-</span> mt_prob_unique<span class="sc">$</span>x</span>
<span id="cb129-4"><a href="array-matrix-dataframe.html#cb129-4" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_unique, ar_x_unique_prob))</span></code></pre></div>
<pre><code>##      ar_x_unique ar_x_unique_prob
## [1,]          11      0.246093750
## [2,]          12      0.001953125
## [3,]          13      0.253906250
## [4,]          14      0.017578125
## [5,]          15      0.480468750</code></pre>
<p>Finally, the several steps together.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="array-matrix-dataframe.html#cb131-1" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb131-2"><a href="array-matrix-dataframe.html#cb131-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb131-3"><a href="array-matrix-dataframe.html#cb131-3" tabindex="-1"></a>it_len <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb131-4"><a href="array-matrix-dataframe.html#cb131-4" tabindex="-1"></a>ar_x <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">runif</span>(it_len) <span class="sc">*</span> <span class="dv">20</span> <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb131-5"><a href="array-matrix-dataframe.html#cb131-5" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> <span class="fu">runif</span>(it_len)</span>
<span id="cb131-6"><a href="array-matrix-dataframe.html#cb131-6" tabindex="-1"></a>ar_prob <span class="ot">&lt;-</span> ar_prob <span class="sc">/</span> <span class="fu">sum</span>(ar_prob)</span>
<span id="cb131-7"><a href="array-matrix-dataframe.html#cb131-7" tabindex="-1"></a><span class="co"># step 1, sort</span></span>
<span id="cb131-8"><a href="array-matrix-dataframe.html#cb131-8" tabindex="-1"></a>ls_sorted_res <span class="ot">&lt;-</span> <span class="fu">sort</span>(ar_x, <span class="at">decreasing =</span> <span class="cn">FALSE</span>, <span class="at">index.return =</span> <span class="cn">TRUE</span>)</span>
<span id="cb131-9"><a href="array-matrix-dataframe.html#cb131-9" tabindex="-1"></a><span class="co"># step 2, unique sorted</span></span>
<span id="cb131-10"><a href="array-matrix-dataframe.html#cb131-10" tabindex="-1"></a>ar_x_unique <span class="ot">&lt;-</span> <span class="fu">unique</span>(ls_sorted_res<span class="sc">$</span>x)</span>
<span id="cb131-11"><a href="array-matrix-dataframe.html#cb131-11" tabindex="-1"></a><span class="co"># step 3, mass for each unique</span></span>
<span id="cb131-12"><a href="array-matrix-dataframe.html#cb131-12" tabindex="-1"></a>mt_prob_unique <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ar_prob[ls_sorted_res<span class="sc">$</span>ix], <span class="at">by =</span> <span class="fu">list</span>(ls_sorted_res<span class="sc">$</span>x), <span class="at">FUN =</span> sum)</span>
<span id="cb131-13"><a href="array-matrix-dataframe.html#cb131-13" tabindex="-1"></a>ar_x_unique_prob <span class="ot">&lt;-</span> mt_prob_unique<span class="sc">$</span>x</span>
<span id="cb131-14"><a href="array-matrix-dataframe.html#cb131-14" tabindex="-1"></a><span class="co"># results</span></span>
<span id="cb131-15"><a href="array-matrix-dataframe.html#cb131-15" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cbind</span>(ar_x_unique, ar_x_unique_prob))</span></code></pre></div>
<pre><code>##       ar_x_unique ar_x_unique_prob
##  [1,]          11      0.071718383
##  [2,]          13      0.040040920
##  [3,]          15      0.017708800
##  [4,]          16      0.141199002
##  [5,]          17      0.020211876
##  [6,]          19      0.052488290
##  [7,]          20      0.049104113
##  [8,]          21      0.067328518
##  [9,]          22      0.109454333
## [10,]          23      0.060712145
## [11,]          24      0.107671406
## [12,]          25      0.015694798
## [13,]          26      0.068567789
## [14,]          28      0.090925756
## [15,]          29      0.001870451
## [16,]          30      0.085303420</code></pre>
</div>
</div>
<div id="generate-integer-sequences" class="section level4 hasAnchor" number="1.2.2.3">
<h4><span class="header-section-number">1.2.2.3</span> Generate Integer Sequences<a href="array-matrix-dataframe.html#generate-integer-sequences" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="gapped-possibly-overlapping-consecutive-sequences" class="section level5 hasAnchor" number="1.2.2.3.1">
<h5><span class="header-section-number">1.2.2.3.1</span> Gapped Possibly Overlapping Consecutive Sequences<a href="array-matrix-dataframe.html#gapped-possibly-overlapping-consecutive-sequences" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Now, we generate a set of integer sequences, with gaps in between, but possibly overlapping, for example: <span class="math inline">\((1,2,3,4,5), (5,6), (10,11)\)</span>.</p>
<p>First, we select a small random subset of integers between min and max, and we generate randomly a sequence of <code>length.out</code> of the same length. Each <code>length.out</code> up to a max. (we adjust in apply in the next block to make sure max given duration does not exceed bound.)</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="array-matrix-dataframe.html#cb133-1" tabindex="-1"></a><span class="co"># Number of random starting index</span></span>
<span id="cb133-2"><a href="array-matrix-dataframe.html#cb133-2" tabindex="-1"></a>it_start_idx <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb133-3"><a href="array-matrix-dataframe.html#cb133-3" tabindex="-1"></a>it_end_idx <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb133-4"><a href="array-matrix-dataframe.html#cb133-4" tabindex="-1"></a>it_startdraws <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb133-5"><a href="array-matrix-dataframe.html#cb133-5" tabindex="-1"></a><span class="co"># Maximum duration</span></span>
<span id="cb133-6"><a href="array-matrix-dataframe.html#cb133-6" tabindex="-1"></a>it_duramax <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb133-7"><a href="array-matrix-dataframe.html#cb133-7" tabindex="-1"></a></span>
<span id="cb133-8"><a href="array-matrix-dataframe.html#cb133-8" tabindex="-1"></a><span class="co"># Random seed</span></span>
<span id="cb133-9"><a href="array-matrix-dataframe.html#cb133-9" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">987</span>)</span>
<span id="cb133-10"><a href="array-matrix-dataframe.html#cb133-10" tabindex="-1"></a><span class="co"># Draw random index between min and max</span></span>
<span id="cb133-11"><a href="array-matrix-dataframe.html#cb133-11" tabindex="-1"></a>ar_it_start_idx <span class="ot">&lt;-</span> <span class="fu">sample</span>(</span>
<span id="cb133-12"><a href="array-matrix-dataframe.html#cb133-12" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="at">from =</span> it_start_idx, <span class="at">to =</span> it_end_idx, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb133-13"><a href="array-matrix-dataframe.html#cb133-13" tabindex="-1"></a>  <span class="at">size =</span> it_startdraws, <span class="at">replace =</span> <span class="cn">FALSE</span></span>
<span id="cb133-14"><a href="array-matrix-dataframe.html#cb133-14" tabindex="-1"></a>)</span>
<span id="cb133-15"><a href="array-matrix-dataframe.html#cb133-15" tabindex="-1"></a>ar_it_start_idx <span class="ot">&lt;-</span> <span class="fu">sort</span>(ar_it_start_idx)</span>
<span id="cb133-16"><a href="array-matrix-dataframe.html#cb133-16" tabindex="-1"></a><span class="co"># Draw random durations, replace = TRUE because can repeat</span></span>
<span id="cb133-17"><a href="array-matrix-dataframe.html#cb133-17" tabindex="-1"></a>ar_it_duration <span class="ot">&lt;-</span> <span class="fu">sample</span>(</span>
<span id="cb133-18"><a href="array-matrix-dataframe.html#cb133-18" tabindex="-1"></a>  <span class="at">x =</span> it_duramax, <span class="at">size =</span> it_startdraws, <span class="at">replace =</span> <span class="cn">TRUE</span></span>
<span id="cb133-19"><a href="array-matrix-dataframe.html#cb133-19" tabindex="-1"></a>)</span>
<span id="cb133-20"><a href="array-matrix-dataframe.html#cb133-20" tabindex="-1"></a></span>
<span id="cb133-21"><a href="array-matrix-dataframe.html#cb133-21" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb133-22"><a href="array-matrix-dataframe.html#cb133-22" tabindex="-1"></a><span class="fu">print</span>(glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb133-23"><a href="array-matrix-dataframe.html#cb133-23" tabindex="-1"></a>  <span class="st">&quot;random starts + duration: &quot;</span>,</span>
<span id="cb133-24"><a href="array-matrix-dataframe.html#cb133-24" tabindex="-1"></a>  <span class="st">&quot;{ar_it_start_idx} + {ar_it_duration}&quot;</span></span>
<span id="cb133-25"><a href="array-matrix-dataframe.html#cb133-25" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## random starts + duration: 35 + 3
## random starts + duration: 39 + 3
## random starts + duration: 42 + 1
## random starts + duration: 56 + 2
## random starts + duration: 57 + 1
## random starts + duration: 73 + 1</code></pre>
<p>Second, we expand the indexes with neighboring values, and create a list of consecutive integer sequences.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="array-matrix-dataframe.html#cb135-1" tabindex="-1"></a><span class="co"># start and end sequences</span></span>
<span id="cb135-2"><a href="array-matrix-dataframe.html#cb135-2" tabindex="-1"></a><span class="co"># note the min operator inside, the makes sure we do not exceed max</span></span>
<span id="cb135-3"><a href="array-matrix-dataframe.html#cb135-3" tabindex="-1"></a>ls_ar_it_recession <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb135-4"><a href="array-matrix-dataframe.html#cb135-4" tabindex="-1"></a>  <span class="fu">cbind</span>(ar_it_start_idx, ar_it_start_idx <span class="sc">+</span> ar_it_duration),</span>
<span id="cb135-5"><a href="array-matrix-dataframe.html#cb135-5" tabindex="-1"></a>  <span class="dv">1</span>, <span class="cf">function</span>(row) {</span>
<span id="cb135-6"><a href="array-matrix-dataframe.html#cb135-6" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">seq</span>(row[<span class="dv">1</span>], <span class="fu">min</span>(row[<span class="dv">2</span>], it_end_idx)))</span>
<span id="cb135-7"><a href="array-matrix-dataframe.html#cb135-7" tabindex="-1"></a>  }</span>
<span id="cb135-8"><a href="array-matrix-dataframe.html#cb135-8" tabindex="-1"></a>)</span>
<span id="cb135-9"><a href="array-matrix-dataframe.html#cb135-9" tabindex="-1"></a><span class="co"># Draw it_m from indexed list of it_N</span></span>
<span id="cb135-10"><a href="array-matrix-dataframe.html#cb135-10" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;ls_ar_it_recession&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_ar_it_recession&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="array-matrix-dataframe.html#cb137-1" tabindex="-1"></a><span class="fu">print</span>(ls_ar_it_recession)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 35 36 37 38
## 
## [[2]]
## [1] 39 40 41 42
## 
## [[3]]
## [1] 42 43
## 
## [[4]]
## [1] 56 57 58
## 
## [[5]]
## [1] 57 58
## 
## [[6]]
## [1] 73 74</code></pre>
<p>Third, we can bring the sequences generated together if we want to</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="array-matrix-dataframe.html#cb139-1" tabindex="-1"></a><span class="co"># Combine arrays</span></span>
<span id="cb139-2"><a href="array-matrix-dataframe.html#cb139-2" tabindex="-1"></a>ar_it_recession_year <span class="ot">&lt;-</span> (</span>
<span id="cb139-3"><a href="array-matrix-dataframe.html#cb139-3" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="fu">do.call</span>(base<span class="sc">::</span>c, ls_ar_it_recession))</span>
<span id="cb139-4"><a href="array-matrix-dataframe.html#cb139-4" tabindex="-1"></a>)</span>
<span id="cb139-5"><a href="array-matrix-dataframe.html#cb139-5" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb139-6"><a href="array-matrix-dataframe.html#cb139-6" tabindex="-1"></a><span class="fu">print</span>(glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb139-7"><a href="array-matrix-dataframe.html#cb139-7" tabindex="-1"></a>  <span class="st">&quot;print full as array:&quot;</span>,</span>
<span id="cb139-8"><a href="array-matrix-dataframe.html#cb139-8" tabindex="-1"></a>  <span class="st">&quot;{ar_it_recession_year}&quot;</span></span>
<span id="cb139-9"><a href="array-matrix-dataframe.html#cb139-9" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## print full as array:35
## print full as array:36
## print full as array:37
## print full as array:38
## print full as array:39
## print full as array:40
## print full as array:41
## print full as array:42
## print full as array:42
## print full as array:43
## print full as array:56
## print full as array:57
## print full as array:57
## print full as array:58
## print full as array:58
## print full as array:73
## print full as array:74</code></pre>
</div>
<div id="gapped-non-overlapping-consecutive-sequences" class="section level5 hasAnchor" number="1.2.2.3.2">
<h5><span class="header-section-number">1.2.2.3.2</span> Gapped non-Overlapping Consecutive Sequences<a href="array-matrix-dataframe.html#gapped-non-overlapping-consecutive-sequences" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Now, we generate a set of integer sequences, with gaps in between, but not overlapping, for example: <span class="math inline">\((1,2,3), (5,6), (10,11)\)</span>. We follow a very similar structure as above, but now adjust starting draws by prior accumulated durations.</p>
<p>Note that in the code below, we could end up with less that <code>it_startdraws</code> if there are consecutive start draws. We can only have non-consecutive start draws to avoid overlaps.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="array-matrix-dataframe.html#cb141-1" tabindex="-1"></a><span class="co"># Number of random starting index</span></span>
<span id="cb141-2"><a href="array-matrix-dataframe.html#cb141-2" tabindex="-1"></a>it_start_idx <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb141-3"><a href="array-matrix-dataframe.html#cb141-3" tabindex="-1"></a>it_end_idx <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb141-4"><a href="array-matrix-dataframe.html#cb141-4" tabindex="-1"></a>it_startdraws_max <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb141-5"><a href="array-matrix-dataframe.html#cb141-5" tabindex="-1"></a>it_duramax <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb141-6"><a href="array-matrix-dataframe.html#cb141-6" tabindex="-1"></a></span>
<span id="cb141-7"><a href="array-matrix-dataframe.html#cb141-7" tabindex="-1"></a><span class="co"># Random seed</span></span>
<span id="cb141-8"><a href="array-matrix-dataframe.html#cb141-8" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">987</span>)</span>
<span id="cb141-9"><a href="array-matrix-dataframe.html#cb141-9" tabindex="-1"></a><span class="co"># Draw random index between min and max</span></span>
<span id="cb141-10"><a href="array-matrix-dataframe.html#cb141-10" tabindex="-1"></a>ar_it_start_idx <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">sample</span>(</span>
<span id="cb141-11"><a href="array-matrix-dataframe.html#cb141-11" tabindex="-1"></a>  <span class="fu">seq</span>(it_start_idx, it_end_idx),</span>
<span id="cb141-12"><a href="array-matrix-dataframe.html#cb141-12" tabindex="-1"></a>  it_startdraws_max,</span>
<span id="cb141-13"><a href="array-matrix-dataframe.html#cb141-13" tabindex="-1"></a>  <span class="at">replace =</span> <span class="cn">FALSE</span></span>
<span id="cb141-14"><a href="array-matrix-dataframe.html#cb141-14" tabindex="-1"></a>))</span>
<span id="cb141-15"><a href="array-matrix-dataframe.html#cb141-15" tabindex="-1"></a><span class="co"># Draw random durations, replace = TRUE because can repeat</span></span>
<span id="cb141-16"><a href="array-matrix-dataframe.html#cb141-16" tabindex="-1"></a>ar_it_duration <span class="ot">&lt;-</span> <span class="fu">sample</span>(it_duramax, it_startdraws_max, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb141-17"><a href="array-matrix-dataframe.html#cb141-17" tabindex="-1"></a></span>
<span id="cb141-18"><a href="array-matrix-dataframe.html#cb141-18" tabindex="-1"></a><span class="co"># Check space between starts</span></span>
<span id="cb141-19"><a href="array-matrix-dataframe.html#cb141-19" tabindex="-1"></a>ar_it_startgap <span class="ot">&lt;-</span> <span class="fu">diff</span>(ar_it_start_idx)</span>
<span id="cb141-20"><a href="array-matrix-dataframe.html#cb141-20" tabindex="-1"></a>ar_it_dura_lenm1 <span class="ot">&lt;-</span> ar_it_duration[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(ar_it_duration) <span class="sc">-</span> <span class="dv">1</span>)]</span>
<span id="cb141-21"><a href="array-matrix-dataframe.html#cb141-21" tabindex="-1"></a><span class="co"># Adjust durations</span></span>
<span id="cb141-22"><a href="array-matrix-dataframe.html#cb141-22" tabindex="-1"></a>ar_it_dura_bd <span class="ot">&lt;-</span> <span class="fu">pmin</span>(ar_it_startgap <span class="sc">-</span> <span class="dv">2</span>, ar_it_dura_lenm1)</span>
<span id="cb141-23"><a href="array-matrix-dataframe.html#cb141-23" tabindex="-1"></a>ar_it_duration[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(ar_it_duration) <span class="sc">-</span> <span class="dv">1</span>)] <span class="ot">&lt;-</span> ar_it_dura_bd</span>
<span id="cb141-24"><a href="array-matrix-dataframe.html#cb141-24" tabindex="-1"></a></span>
<span id="cb141-25"><a href="array-matrix-dataframe.html#cb141-25" tabindex="-1"></a><span class="co"># Drop consecutive starts</span></span>
<span id="cb141-26"><a href="array-matrix-dataframe.html#cb141-26" tabindex="-1"></a>ar_bl_dura_nonneg <span class="ot">&lt;-</span> <span class="fu">which</span>(ar_it_duration <span class="sc">&gt;=</span> <span class="dv">0</span>)</span>
<span id="cb141-27"><a href="array-matrix-dataframe.html#cb141-27" tabindex="-1"></a>ar_it_start_idx <span class="ot">&lt;-</span> ar_it_start_idx[ar_bl_dura_nonneg]</span>
<span id="cb141-28"><a href="array-matrix-dataframe.html#cb141-28" tabindex="-1"></a>ar_it_duration <span class="ot">&lt;-</span> ar_it_duration[ar_bl_dura_nonneg]</span>
<span id="cb141-29"><a href="array-matrix-dataframe.html#cb141-29" tabindex="-1"></a></span>
<span id="cb141-30"><a href="array-matrix-dataframe.html#cb141-30" tabindex="-1"></a><span class="co"># list of recession periods</span></span>
<span id="cb141-31"><a href="array-matrix-dataframe.html#cb141-31" tabindex="-1"></a>ls_ar_it_recession_non_overlap <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb141-32"><a href="array-matrix-dataframe.html#cb141-32" tabindex="-1"></a>  <span class="fu">cbind</span>(ar_it_start_idx, ar_it_start_idx <span class="sc">+</span> ar_it_duration),</span>
<span id="cb141-33"><a href="array-matrix-dataframe.html#cb141-33" tabindex="-1"></a>  <span class="dv">1</span>, <span class="cf">function</span>(row) {</span>
<span id="cb141-34"><a href="array-matrix-dataframe.html#cb141-34" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">seq</span>(row[<span class="dv">1</span>], <span class="fu">min</span>(row[<span class="dv">2</span>], it_end_idx)))</span>
<span id="cb141-35"><a href="array-matrix-dataframe.html#cb141-35" tabindex="-1"></a>  }</span>
<span id="cb141-36"><a href="array-matrix-dataframe.html#cb141-36" tabindex="-1"></a>)</span>
<span id="cb141-37"><a href="array-matrix-dataframe.html#cb141-37" tabindex="-1"></a></span>
<span id="cb141-38"><a href="array-matrix-dataframe.html#cb141-38" tabindex="-1"></a><span class="co"># print</span></span>
<span id="cb141-39"><a href="array-matrix-dataframe.html#cb141-39" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;ls_ar_it_recession_non_overlap&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_ar_it_recession_non_overlap&quot;</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="array-matrix-dataframe.html#cb143-1" tabindex="-1"></a><span class="fu">print</span>(ls_ar_it_recession_non_overlap)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 35 36 37
## 
## [[2]]
## [1] 39 40
## 
## [[3]]
## [1] 42 43
## 
## [[4]]
## [1] 57 58
## 
## [[5]]
## [1] 73 74</code></pre>

</div>
</div>
</div>
<div id="string-arrays" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> String Arrays<a href="array-matrix-dataframe.html#string-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="positive-or-negative-floating-number-to-string" class="section level4 hasAnchor" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> Positive or Negative Floating Number to String<a href="array-matrix-dataframe.html#positive-or-negative-floating-number-to-string" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There is a number, that contains decimal and possibly negative sign and has some decimals, convert this to a string that is more easily used as a file or folder name.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="array-matrix-dataframe.html#cb145-1" tabindex="-1"></a>ls_fl_rho <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="fl">1.5</span> <span class="sc">-</span><span class="dv">100</span>, <span class="fl">0.5</span>, <span class="fl">0.11111111</span>, <span class="sc">-</span><span class="fl">199.22123</span>)</span>
<span id="cb145-2"><a href="array-matrix-dataframe.html#cb145-2" tabindex="-1"></a><span class="cf">for</span> (fl_rho <span class="cf">in</span> ls_fl_rho) {</span>
<span id="cb145-3"><a href="array-matrix-dataframe.html#cb145-3" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">round</span>(fl_rho, <span class="dv">4</span>))</span>
<span id="cb145-4"><a href="array-matrix-dataframe.html#cb145-4" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">x =</span> st_rho,  <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;n&quot;</span>)</span>
<span id="cb145-5"><a href="array-matrix-dataframe.html#cb145-5" tabindex="-1"></a>  st_rho <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">x =</span> st_rho,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb145-6"><a href="array-matrix-dataframe.html#cb145-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_rho=&#39;</span>, st_rho))</span>
<span id="cb145-7"><a href="array-matrix-dataframe.html#cb145-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;st_rho=1&quot;
## [1] &quot;st_rho=n1&quot;
## [1] &quot;st_rho=n101p5&quot;
## [1] &quot;st_rho=0p5&quot;
## [1] &quot;st_rho=0p1111&quot;
## [1] &quot;st_rho=n199p2212&quot;</code></pre>
</div>
<div id="string-replace" class="section level4 hasAnchor" number="1.2.3.2">
<h4><span class="header-section-number">1.2.3.2</span> String Replace<a href="array-matrix-dataframe.html#string-replace" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>r string wildcard replace between regex</li>
<li><a href="https://stackoverflow.com/a/27246520/8280804">R - replace part of a string using wildcards</a></li>
</ul>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="array-matrix-dataframe.html#cb147-1" tabindex="-1"></a><span class="co"># String replacement</span></span>
<span id="cb147-2"><a href="array-matrix-dataframe.html#cb147-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> <span class="fu">paste0</span>(<span class="fu">unique</span>(df.slds.stats.perc<span class="sc">$</span>it.inner.counter), <span class="st">&#39;:&#39;</span>,</span>
<span id="cb147-3"><a href="array-matrix-dataframe.html#cb147-3" tabindex="-1"></a>                <span class="fu">unique</span>(df.slds.stats.perc<span class="sc">$</span>z_n_a_n), <span class="at">collapse =</span> <span class="st">&#39;;&#39;</span>),</span>
<span id="cb147-4"><a href="array-matrix-dataframe.html#cb147-4" tabindex="-1"></a>     <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb147-5"><a href="array-matrix-dataframe.html#cb147-5" tabindex="-1"></a>     <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb147-6"><a href="array-matrix-dataframe.html#cb147-6" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> var,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb147-7"><a href="array-matrix-dataframe.html#cb147-7" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">x =</span> var.input,  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<p>String replaces a segment, search by wildcard. Given the string below, delete all text between carriage return and pound sign:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="array-matrix-dataframe.html#cb148-1" tabindex="-1"></a>st_tex_text <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">% Lat2ex Comments</span><span class="sc">\n\\</span><span class="st">newcommand{</span><span class="sc">\\</span><span class="st">exa}{</span><span class="sc">\\</span><span class="st">text{from external file: } </span><span class="sc">\\</span><span class="st">alpha + </span><span class="sc">\\</span><span class="st">beta}</span><span class="sc">\n</span><span class="st">% More LaLatex Comments</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb148-2"><a href="array-matrix-dataframe.html#cb148-2" tabindex="-1"></a>st_clean_a1 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">%.*?</span><span class="sc">\\\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb148-3"><a href="array-matrix-dataframe.html#cb148-3" tabindex="-1"></a>st_clean_a2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;L.*?x&quot;</span>, <span class="st">&quot;[LATEX]&quot;</span>, st_tex_text)</span>
<span id="cb148-4"><a href="array-matrix-dataframe.html#cb148-4" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\n% Lat2ex Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More LaLatex Comments\n&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="array-matrix-dataframe.html#cb150-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="array-matrix-dataframe.html#cb152-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a2:&#39;</span>, st_clean_a2))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a2:\n% [LATEX] Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More [LATEX] Comments\n&quot;</code></pre>
<p>String delete after a particular string:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="array-matrix-dataframe.html#cb154-1" tabindex="-1"></a>st_tex_text <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">end{equation}</span><span class="sc">\n</span><span class="st">}</span><span class="sc">\n</span><span class="st">% Even more comments from Latex preamble&quot;</span></span>
<span id="cb154-2"><a href="array-matrix-dataframe.html#cb154-2" tabindex="-1"></a>st_clean_a1 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">%.*&quot;</span>,<span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb154-3"><a href="array-matrix-dataframe.html#cb154-3" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\\end{equation}\n}\n% Even more comments from Latex preamble&quot;</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="array-matrix-dataframe.html#cb156-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\\end{equation}\n}&quot;</code></pre>
</div>
<div id="search-if-and-which-string-contains" class="section level4 hasAnchor" number="1.2.3.3">
<h4><span class="header-section-number">1.2.3.3</span> Search If and Which String Contains<a href="array-matrix-dataframe.html#search-if-and-which-string-contains" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>r if string contains</li>
<li>r if string contains either or grepl</li>
<li><a href="https://stackoverflow.com/a/26319765/8280804">Use grepl to search either of multiple substrings in a text</a></li>
</ul>
<p>Search for a single substring in a single string:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="array-matrix-dataframe.html#cb158-1" tabindex="-1"></a>st_example_a <span class="ot">&lt;-</span> <span class="st">&#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></span>
<span id="cb158-2"><a href="array-matrix-dataframe.html#cb158-2" tabindex="-1"></a>st_example_b <span class="ot">&lt;-</span> <span class="st">&#39;C:/Users/fan/R4Econ/amto/tibble/_main.html&#39;</span></span>
<span id="cb158-3"><a href="array-matrix-dataframe.html#cb158-3" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_a)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="array-matrix-dataframe.html#cb160-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_b)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Search for if one of a set of substring exists in a set of strings. In particular which one of the elements of <em>ls_spn</em> contains at least one of the elements of <em>ls_str_if_contains</em>. In the example below, only the first path does not contain either the word <em>aggregate</em> or <em>index</em> in the path. This can be used after all paths have been found recursively in some folder to select only desired paths from the full set of possibilities:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="array-matrix-dataframe.html#cb162-1" tabindex="-1"></a>ls_spn <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;C:/Users/fan/R4Econ//panel/basic/fs_genpanel.Rmd&quot;</span>,</span>
<span id="cb162-2"><a href="array-matrix-dataframe.html#cb162-2" tabindex="-1"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/aggregate/main.Rmd&quot;</span>,</span>
<span id="cb162-3"><a href="array-matrix-dataframe.html#cb162-3" tabindex="-1"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/index/fs_index_populate.Rmd&quot;</span>)</span>
<span id="cb162-4"><a href="array-matrix-dataframe.html#cb162-4" tabindex="-1"></a>ls_str_if_contains <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;aggregate&quot;</span>, <span class="st">&quot;index&quot;</span>)</span>
<span id="cb162-5"><a href="array-matrix-dataframe.html#cb162-5" tabindex="-1"></a>str_if_contains <span class="ot">&lt;-</span> <span class="fu">paste</span>(ls_str_if_contains, <span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>)</span>
<span id="cb162-6"><a href="array-matrix-dataframe.html#cb162-6" tabindex="-1"></a><span class="fu">grepl</span>(str_if_contains, ls_spn)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
</div>
<div id="string-split" class="section level4 hasAnchor" number="1.2.3.4">
<h4><span class="header-section-number">1.2.3.4</span> String Split<a href="array-matrix-dataframe.html#string-split" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given some string, generated for example by cut, get the lower cut starting points, and also the higher end point</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="array-matrix-dataframe.html#cb164-1" tabindex="-1"></a><span class="co"># Extract 0.216 and 0.500 as lower and upper bounds</span></span>
<span id="cb164-2"><a href="array-matrix-dataframe.html#cb164-2" tabindex="-1"></a>st_cut_cate <span class="ot">&lt;-</span> <span class="st">&#39;(0.216,0.500]&#39;</span></span>
<span id="cb164-3"><a href="array-matrix-dataframe.html#cb164-3" tabindex="-1"></a><span class="co"># Extract Lower Part</span></span>
<span id="cb164-4"><a href="array-matrix-dataframe.html#cb164-4" tabindex="-1"></a><span class="fu">substring</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>], <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;0.216&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="array-matrix-dataframe.html#cb166-1" tabindex="-1"></a><span class="co"># Extract second part except final bracket Option 1</span></span>
<span id="cb166-2"><a href="array-matrix-dataframe.html#cb166-2" tabindex="-1"></a><span class="fu">intToUtf8</span>(<span class="fu">rev</span>(<span class="fu">utf8ToInt</span>(<span class="fu">substring</span>(<span class="fu">intToUtf8</span>(<span class="fu">rev</span>(<span class="fu">utf8ToInt</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">2</span>]))), <span class="dv">2</span>))))</span></code></pre></div>
<pre><code>## [1] &quot;0.500&quot;</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="array-matrix-dataframe.html#cb168-1" tabindex="-1"></a><span class="co"># Extract second part except final bracket Option 2</span></span>
<span id="cb168-2"><a href="array-matrix-dataframe.html#cb168-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="fu">strsplit</span>(st_cut_cate, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">2</span>],  <span class="at">pattern =</span> <span class="st">&quot;]&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;0.500&quot;</code></pre>
<p>Make a part of a string bold. Go from “ABC EFG, OPQ, RST” to “<strong>ABC EFG</strong>, OPQ, RST”. This could be for making the name of an author bold, and preserve affiliation information.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="array-matrix-dataframe.html#cb170-1" tabindex="-1"></a>st_paper_author_ori <span class="ot">&lt;-</span> <span class="st">&quot;ABC EFG, OPQ, RST&quot;</span></span>
<span id="cb170-2"><a href="array-matrix-dataframe.html#cb170-2" tabindex="-1"></a>ar_st_ori <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(st_paper_author_ori, <span class="st">&quot;, &quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb170-3"><a href="array-matrix-dataframe.html#cb170-3" tabindex="-1"></a>st_after_1stcomma <span class="ot">&lt;-</span> <span class="fu">paste0</span>(ar_st_ori[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(ar_st_ori)], <span class="at">collapse=</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb170-4"><a href="array-matrix-dataframe.html#cb170-4" tabindex="-1"></a>st_paper_author <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;&lt;b&gt;&#39;</span>, ar_st_ori[<span class="dv">1</span>], <span class="st">&quot;&lt;/b&gt;, &quot;</span>, st_after_1stcomma )</span>
<span id="cb170-5"><a href="array-matrix-dataframe.html#cb170-5" tabindex="-1"></a><span class="fu">print</span>(st_paper_author)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;b&gt;ABC EFG&lt;/b&gt;, OPQ, RST&quot;</code></pre>
</div>
<div id="string-concatenate" class="section level4 hasAnchor" number="1.2.3.5">
<h4><span class="header-section-number">1.2.3.5</span> String Concatenate<a href="array-matrix-dataframe.html#string-concatenate" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Concatenate string array into a single string.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="array-matrix-dataframe.html#cb172-1" tabindex="-1"></a><span class="co"># Simple Collapse</span></span>
<span id="cb172-2"><a href="array-matrix-dataframe.html#cb172-2" tabindex="-1"></a>vars.group.by <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;abc&#39;</span>, <span class="st">&#39;efg&#39;</span>)</span>
<span id="cb172-3"><a href="array-matrix-dataframe.html#cb172-3" tabindex="-1"></a><span class="fu">paste0</span>(vars.group.by, <span class="at">collapse=</span><span class="st">&#39;|&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;abc|efg&quot;</code></pre>
<p>Concatenate a numeric array into a single string.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="array-matrix-dataframe.html#cb174-1" tabindex="-1"></a><span class="co"># Simple Collapse</span></span>
<span id="cb174-2"><a href="array-matrix-dataframe.html#cb174-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb174-3"><a href="array-matrix-dataframe.html#cb174-3" tabindex="-1"></a>ar_fl_numbers <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">5</span>)</span>
<span id="cb174-4"><a href="array-matrix-dataframe.html#cb174-4" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&#39;ar_fl_numbers = &#39;</span>, </span>
<span id="cb174-5"><a href="array-matrix-dataframe.html#cb174-5" tabindex="-1"></a>       <span class="fu">paste</span>(<span class="fu">round</span>(ar_fl_numbers,<span class="dv">3</span>), <span class="at">collapse=</span><span class="st">&#39;, &#39;</span>)</span>
<span id="cb174-6"><a href="array-matrix-dataframe.html#cb174-6" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;ar_fl_numbers = 0.288, 0.788, 0.409, 0.883, 0.94&quot;</code></pre>
</div>
<div id="string-add-leading-zero" class="section level4 hasAnchor" number="1.2.3.6">
<h4><span class="header-section-number">1.2.3.6</span> String Add Leading Zero<a href="array-matrix-dataframe.html#string-add-leading-zero" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="array-matrix-dataframe.html#cb176-1" tabindex="-1"></a><span class="co"># Add Leading zero for integer values to allow for sorting when</span></span>
<span id="cb176-2"><a href="array-matrix-dataframe.html#cb176-2" tabindex="-1"></a><span class="co"># integers are combined into strings</span></span>
<span id="cb176-3"><a href="array-matrix-dataframe.html#cb176-3" tabindex="-1"></a>it_z_n <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb176-4"><a href="array-matrix-dataframe.html#cb176-4" tabindex="-1"></a>it_a_n <span class="ot">&lt;-</span> <span class="dv">192</span></span>
<span id="cb176-5"><a href="array-matrix-dataframe.html#cb176-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%02d&quot;</span>, it_z_n))</span></code></pre></div>
<pre><code>## [1] &quot;01&quot;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="array-matrix-dataframe.html#cb178-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%04d&quot;</span>, it_a_n))</span></code></pre></div>
<pre><code>## [1] &quot;0192&quot;</code></pre>
</div>
<div id="substring-components" class="section level4 hasAnchor" number="1.2.3.7">
<h4><span class="header-section-number">1.2.3.7</span> Substring Components<a href="array-matrix-dataframe.html#substring-components" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given a string, with certain structure, get components.</p>
<ul>
<li>r time string get month and year and day</li>
</ul>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="array-matrix-dataframe.html#cb180-1" tabindex="-1"></a>snm_full <span class="ot">&lt;-</span> <span class="st">&quot;20100701&quot;</span></span>
<span id="cb180-2"><a href="array-matrix-dataframe.html#cb180-2" tabindex="-1"></a>snm_year <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">0</span>,<span class="dv">4</span>)</span>
<span id="cb180-3"><a href="array-matrix-dataframe.html#cb180-3" tabindex="-1"></a>snm_month <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb180-4"><a href="array-matrix-dataframe.html#cb180-4" tabindex="-1"></a>snm_day <span class="ot">&lt;-</span><span class="fu">substr</span>(snm_full,<span class="dv">7</span>,<span class="dv">8</span>)</span>
<span id="cb180-5"><a href="array-matrix-dataframe.html#cb180-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;full:&#39;</span>, snm_full,</span>
<span id="cb180-6"><a href="array-matrix-dataframe.html#cb180-6" tabindex="-1"></a>             <span class="st">&#39;, year:&#39;</span>, snm_year,</span>
<span id="cb180-7"><a href="array-matrix-dataframe.html#cb180-7" tabindex="-1"></a>             <span class="st">&#39;, month:&#39;</span>, snm_month,</span>
<span id="cb180-8"><a href="array-matrix-dataframe.html#cb180-8" tabindex="-1"></a>             <span class="st">&#39;, day:&#39;</span>, snm_day))</span></code></pre></div>
<pre><code>## [1] &quot;full:20100701, year:2010, month:07, day:01&quot;</code></pre>

</div>
</div>
<div id="mesh-matrices-arrays-and-scalars" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Mesh Matrices, Arrays and Scalars<a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<ul>
<li>r expand.grid meshed array to matrix</li>
<li>r meshgrid</li>
<li>r array to matrix</li>
<li>r reshape array to matrix</li>
<li>dplyr permuations rows of matrix and element of array</li>
<li>tidyr expand_grid mesh matrix and vector</li>
</ul>
<div id="mesh-two-or-more-vectors-with-expand_grid" class="section level4 hasAnchor" number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> Mesh Two or More Vectors with expand_grid<a href="array-matrix-dataframe.html#mesh-two-or-more-vectors-with-expand_grid" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the example below, we have a matrix that is 2 by 2 (endogenous states), a vector that is 3 by 1 (choices), and another matrix that is 4 by 3 (exogenous states shocks).</p>
<p>We want to generate a tibble dataset that meshes the matrix and the vector, so that all combinations show up. Additionally, we want to add some additional values that are common across all rows to the meshed dataframe.</p>
<p>Note <em>expand_grid</em> is a from tidyr 1.0.0.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="array-matrix-dataframe.html#cb182-1" tabindex="-1"></a><span class="co"># A. Generate the 5 by 2 Matrix (ENDO STATES)</span></span>
<span id="cb182-2"><a href="array-matrix-dataframe.html#cb182-2" tabindex="-1"></a><span class="co"># it_child_count = N, the number of children</span></span>
<span id="cb182-3"><a href="array-matrix-dataframe.html#cb182-3" tabindex="-1"></a>it_N_child_cnt <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb182-4"><a href="array-matrix-dataframe.html#cb182-4" tabindex="-1"></a><span class="co"># P fixed parameters, nN is N dimensional, nP is P dimensional</span></span>
<span id="cb182-5"><a href="array-matrix-dataframe.html#cb182-5" tabindex="-1"></a>ar_nN_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out =</span> it_N_child_cnt)</span>
<span id="cb182-6"><a href="array-matrix-dataframe.html#cb182-6" tabindex="-1"></a>ar_nN_alpha <span class="ot">=</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="at">length.out =</span> it_N_child_cnt)</span>
<span id="cb182-7"><a href="array-matrix-dataframe.html#cb182-7" tabindex="-1"></a>fl_rho <span class="ot">=</span> <span class="fl">0.1</span></span>
<span id="cb182-8"><a href="array-matrix-dataframe.html#cb182-8" tabindex="-1"></a>fl_lambda <span class="ot">=</span> <span class="fl">1.1</span></span>
<span id="cb182-9"><a href="array-matrix-dataframe.html#cb182-9" tabindex="-1"></a>mt_nP_A_alpha <span class="ot">=</span> <span class="fu">cbind</span>(ar_nN_A, ar_nN_alpha, fl_rho, fl_lambda)</span>
<span id="cb182-10"><a href="array-matrix-dataframe.html#cb182-10" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;s_A&#39;</span>, <span class="st">&#39;s_alpha&#39;</span>, <span class="st">&#39;p_rho&#39;</span>, <span class="st">&#39;p_lambda&#39;</span>)</span>
<span id="cb182-11"><a href="array-matrix-dataframe.html#cb182-11" tabindex="-1"></a>tb_states_endo <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mt_nP_A_alpha) <span class="sc">%&gt;%</span></span>
<span id="cb182-12"><a href="array-matrix-dataframe.html#cb182-12" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb182-13"><a href="array-matrix-dataframe.html#cb182-13" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;state_id&quot;</span>)</span>
<span id="cb182-14"><a href="array-matrix-dataframe.html#cb182-14" tabindex="-1"></a></span>
<span id="cb182-15"><a href="array-matrix-dataframe.html#cb182-15" tabindex="-1"></a><span class="co"># B. Choice Grid</span></span>
<span id="cb182-16"><a href="array-matrix-dataframe.html#cb182-16" tabindex="-1"></a>it_N_choice_cnt <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb182-17"><a href="array-matrix-dataframe.html#cb182-17" tabindex="-1"></a>fl_max <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb182-18"><a href="array-matrix-dataframe.html#cb182-18" tabindex="-1"></a>fl_min <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb182-19"><a href="array-matrix-dataframe.html#cb182-19" tabindex="-1"></a>ar_nN_d <span class="ot">=</span> <span class="fu">seq</span>(fl_min, fl_max, <span class="at">length.out =</span> it_N_choice_cnt)</span>
<span id="cb182-20"><a href="array-matrix-dataframe.html#cb182-20" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;c_food&#39;</span>)</span>
<span id="cb182-21"><a href="array-matrix-dataframe.html#cb182-21" tabindex="-1"></a>tb_choices <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ar_nN_d) <span class="sc">%&gt;%</span></span>
<span id="cb182-22"><a href="array-matrix-dataframe.html#cb182-22" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb182-23"><a href="array-matrix-dataframe.html#cb182-23" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;choice_id&quot;</span>)</span>
<span id="cb182-24"><a href="array-matrix-dataframe.html#cb182-24" tabindex="-1"></a></span>
<span id="cb182-25"><a href="array-matrix-dataframe.html#cb182-25" tabindex="-1"></a><span class="co"># C. Shock Grid</span></span>
<span id="cb182-26"><a href="array-matrix-dataframe.html#cb182-26" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb182-27"><a href="array-matrix-dataframe.html#cb182-27" tabindex="-1"></a>it_N_shock_cnt <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb182-28"><a href="array-matrix-dataframe.html#cb182-28" tabindex="-1"></a>ar_nQ_shocks <span class="ot">=</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(it_N_shock_cnt, <span class="at">mean=</span><span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>))</span>
<span id="cb182-29"><a href="array-matrix-dataframe.html#cb182-29" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;s_eps&#39;</span>)</span>
<span id="cb182-30"><a href="array-matrix-dataframe.html#cb182-30" tabindex="-1"></a>tb_states_exo <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ar_nQ_shocks) <span class="sc">%&gt;%</span></span>
<span id="cb182-31"><a href="array-matrix-dataframe.html#cb182-31" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="sc">~</span><span class="fu">c</span>(ar_st_varnames)) <span class="sc">%&gt;%</span></span>
<span id="cb182-32"><a href="array-matrix-dataframe.html#cb182-32" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;shock_id&quot;</span>)</span>
<span id="cb182-33"><a href="array-matrix-dataframe.html#cb182-33" tabindex="-1"></a></span>
<span id="cb182-34"><a href="array-matrix-dataframe.html#cb182-34" tabindex="-1"></a><span class="co"># dataframe expand with other non expanded variables</span></span>
<span id="cb182-35"><a href="array-matrix-dataframe.html#cb182-35" tabindex="-1"></a>ar_st_varnames <span class="ot">&lt;-</span></span>
<span id="cb182-36"><a href="array-matrix-dataframe.html#cb182-36" tabindex="-1"></a>tb_states_shk_choices <span class="ot">&lt;-</span> tb_states_endo <span class="sc">%&gt;%</span></span>
<span id="cb182-37"><a href="array-matrix-dataframe.html#cb182-37" tabindex="-1"></a>  <span class="fu">expand_grid</span>(tb_choices) <span class="sc">%&gt;%</span></span>
<span id="cb182-38"><a href="array-matrix-dataframe.html#cb182-38" tabindex="-1"></a>  <span class="fu">expand_grid</span>(tb_states_exo) <span class="sc">%&gt;%</span></span>
<span id="cb182-39"><a href="array-matrix-dataframe.html#cb182-39" tabindex="-1"></a>  <span class="fu">select</span>(state_id, choice_id, shock_id,</span>
<span id="cb182-40"><a href="array-matrix-dataframe.html#cb182-40" tabindex="-1"></a>         s_A, s_alpha, s_eps, c_food,</span>
<span id="cb182-41"><a href="array-matrix-dataframe.html#cb182-41" tabindex="-1"></a>         p_rho, p_lambda)</span>
<span id="cb182-42"><a href="array-matrix-dataframe.html#cb182-42" tabindex="-1"></a></span>
<span id="cb182-43"><a href="array-matrix-dataframe.html#cb182-43" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb182-44"><a href="array-matrix-dataframe.html#cb182-44" tabindex="-1"></a><span class="fu">kable</span>(tb_states_shk_choices) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
state_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
choice_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
shock_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_A
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_alpha
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_eps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
c_food
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_rho
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_lambda
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
</tbody>
</table>
<p>Using expand_grid directly over arrays</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="array-matrix-dataframe.html#cb183-1" tabindex="-1"></a><span class="co"># expand grid with dplyr</span></span>
<span id="cb183-2"><a href="array-matrix-dataframe.html#cb183-2" tabindex="-1"></a><span class="fu">expand_grid</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">z =</span> <span class="sc">-</span><span class="dv">3</span><span class="sc">:-</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="mesh-arrays-with-expand.grid" class="section level4 hasAnchor" number="1.2.4.2">
<h4><span class="header-section-number">1.2.4.2</span> Mesh Arrays with expand.grid<a href="array-matrix-dataframe.html#mesh-arrays-with-expand.grid" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given two arrays, mesh the two arrays together.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="array-matrix-dataframe.html#cb184-1" tabindex="-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb184-2"><a href="array-matrix-dataframe.html#cb184-2" tabindex="-1"></a></span>
<span id="cb184-3"><a href="array-matrix-dataframe.html#cb184-3" tabindex="-1"></a>it_ar_A <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb184-4"><a href="array-matrix-dataframe.html#cb184-4" tabindex="-1"></a>it_ar_alpha <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb184-5"><a href="array-matrix-dataframe.html#cb184-5" tabindex="-1"></a></span>
<span id="cb184-6"><a href="array-matrix-dataframe.html#cb184-6" tabindex="-1"></a>ar_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out=</span>it_ar_A)</span>
<span id="cb184-7"><a href="array-matrix-dataframe.html#cb184-7" tabindex="-1"></a>ar_alpha <span class="ot">=</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="at">length.out=</span>it_ar_alpha)</span>
<span id="cb184-8"><a href="array-matrix-dataframe.html#cb184-8" tabindex="-1"></a></span>
<span id="cb184-9"><a href="array-matrix-dataframe.html#cb184-9" tabindex="-1"></a>mt_A_alpha <span class="ot">=</span> <span class="fu">expand.grid</span>(<span class="at">A =</span> ar_A, <span class="at">alpha =</span> ar_alpha)</span>
<span id="cb184-10"><a href="array-matrix-dataframe.html#cb184-10" tabindex="-1"></a></span>
<span id="cb184-11"><a href="array-matrix-dataframe.html#cb184-11" tabindex="-1"></a>mt_A_meshed <span class="ot">=</span> mt_A_alpha[,<span class="dv">1</span>]</span>
<span id="cb184-12"><a href="array-matrix-dataframe.html#cb184-12" tabindex="-1"></a><span class="fu">dim</span>(mt_A_meshed) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb184-13"><a href="array-matrix-dataframe.html#cb184-13" tabindex="-1"></a></span>
<span id="cb184-14"><a href="array-matrix-dataframe.html#cb184-14" tabindex="-1"></a>mt_alpha_meshed <span class="ot">=</span> mt_A_alpha[,<span class="dv">2</span>]</span>
<span id="cb184-15"><a href="array-matrix-dataframe.html#cb184-15" tabindex="-1"></a><span class="fu">dim</span>(mt_alpha_meshed) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb184-16"><a href="array-matrix-dataframe.html#cb184-16" tabindex="-1"></a></span>
<span id="cb184-17"><a href="array-matrix-dataframe.html#cb184-17" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb184-18"><a href="array-matrix-dataframe.html#cb184-18" tabindex="-1"></a><span class="fu">kable</span>(mt_A_meshed) <span class="sc">%&gt;%</span></span>
<span id="cb184-19"><a href="array-matrix-dataframe.html#cb184-19" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="array-matrix-dataframe.html#cb185-1" tabindex="-1"></a><span class="fu">kable</span>(mt_alpha_meshed) <span class="sc">%&gt;%</span></span>
<span id="cb185-2"><a href="array-matrix-dataframe.html#cb185-2" tabindex="-1"></a>  <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
</tbody>
</table>
</div>
<p>Two Identical Arrays, individual attributes, each column is an individual for a matrix, and each row is also an individual.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="array-matrix-dataframe.html#cb186-1" tabindex="-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb186-2"><a href="array-matrix-dataframe.html#cb186-2" tabindex="-1"></a></span>
<span id="cb186-3"><a href="array-matrix-dataframe.html#cb186-3" tabindex="-1"></a>it_ar_A <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb186-4"><a href="array-matrix-dataframe.html#cb186-4" tabindex="-1"></a></span>
<span id="cb186-5"><a href="array-matrix-dataframe.html#cb186-5" tabindex="-1"></a>ar_A <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out=</span>it_ar_A)</span>
<span id="cb186-6"><a href="array-matrix-dataframe.html#cb186-6" tabindex="-1"></a>mt_A_A <span class="ot">=</span> <span class="fu">expand.grid</span>(<span class="at">Arow =</span> ar_A, <span class="at">Arow =</span> ar_A)</span>
<span id="cb186-7"><a href="array-matrix-dataframe.html#cb186-7" tabindex="-1"></a>mt_Arow <span class="ot">=</span> mt_A_A[,<span class="dv">1</span>]</span>
<span id="cb186-8"><a href="array-matrix-dataframe.html#cb186-8" tabindex="-1"></a><span class="fu">dim</span>(mt_Arow) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb186-9"><a href="array-matrix-dataframe.html#cb186-9" tabindex="-1"></a>mt_Acol <span class="ot">=</span> mt_A_A[,<span class="dv">2</span>]</span>
<span id="cb186-10"><a href="array-matrix-dataframe.html#cb186-10" tabindex="-1"></a><span class="fu">dim</span>(mt_Acol) <span class="ot">=</span> <span class="fu">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb186-11"><a href="array-matrix-dataframe.html#cb186-11" tabindex="-1"></a></span>
<span id="cb186-12"><a href="array-matrix-dataframe.html#cb186-12" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb186-13"><a href="array-matrix-dataframe.html#cb186-13" tabindex="-1"></a><span class="fu">kable</span>(mt_Arow) <span class="sc">%&gt;%</span></span>
<span id="cb186-14"><a href="array-matrix-dataframe.html#cb186-14" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="array-matrix-dataframe.html#cb187-1" tabindex="-1"></a><span class="fu">kable</span>(mt_Acol) <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="array-matrix-dataframe.html#cb187-2" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="matrix" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Matrix<a href="array-matrix-dataframe.html#matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<div id="generate-matrixes" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Generate Matrixes<a href="array-matrix-dataframe.html#generate-matrixes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="create-a-n-by-2-matrix-from-3-arrays" class="section level4 hasAnchor" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Create a N by 2 Matrix from 3 arrays<a href="array-matrix-dataframe.html#create-a-n-by-2-matrix-from-3-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Names of each array become row names automatically.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="array-matrix-dataframe.html#cb188-1" tabindex="-1"></a>ar_row_one <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb188-2"><a href="array-matrix-dataframe.html#cb188-2" tabindex="-1"></a>ar_row_two <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb188-3"><a href="array-matrix-dataframe.html#cb188-3" tabindex="-1"></a>ar_row_three <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb188-4"><a href="array-matrix-dataframe.html#cb188-4" tabindex="-1"></a></span>
<span id="cb188-5"><a href="array-matrix-dataframe.html#cb188-5" tabindex="-1"></a>mt_n_by_2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb188-6"><a href="array-matrix-dataframe.html#cb188-6" tabindex="-1"></a><span class="fu">kable</span>(mt_n_by_2) <span class="sc">%&gt;%</span></span>
<span id="cb188-7"><a href="array-matrix-dataframe.html#cb188-7" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
ar_row_one
</td>
<td style="text-align:right;">
-1.00
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_two
</td>
<td style="text-align:right;">
-3.00
</td>
<td style="text-align:right;">
-2.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_three
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
</tbody>
</table>
</div>
<div id="name-matrix-columns-and-rows" class="section level4 hasAnchor" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Name Matrix Columns and Rows<a href="array-matrix-dataframe.html#name-matrix-columns-and-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="array-matrix-dataframe.html#cb189-1" tabindex="-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb189-2"><a href="array-matrix-dataframe.html#cb189-2" tabindex="-1"></a>mt_named <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb189-3"><a href="array-matrix-dataframe.html#cb189-3" tabindex="-1"></a><span class="fu">colnames</span>(mt_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;c&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb189-4"><a href="array-matrix-dataframe.html#cb189-4" tabindex="-1"></a><span class="fu">rownames</span>(mt_named) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&#39;r&#39;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb189-5"><a href="array-matrix-dataframe.html#cb189-5" tabindex="-1"></a>mt_named</span></code></pre></div>
<pre><code>##    c1 c2
## r1 NA NA
## r2 NA NA</code></pre>
</div>
<div id="generate-na-matrix" class="section level4 hasAnchor" number="1.3.1.3">
<h4><span class="header-section-number">1.3.1.3</span> Generate NA Matrix<a href="array-matrix-dataframe.html#generate-na-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><a href="https://stackoverflow.com/a/26724451/8280804">Best way to allocate matrix in R, NULL vs NA?</a></li>
</ul>
<p>Allocate with NA or NA_real_ or NA_int_. Clarity in type definition is preferred.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="array-matrix-dataframe.html#cb191-1" tabindex="-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb191-2"><a href="array-matrix-dataframe.html#cb191-2" tabindex="-1"></a>mt_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb191-3"><a href="array-matrix-dataframe.html#cb191-3" tabindex="-1"></a><span class="fu">str</span>(mt_na)</span></code></pre></div>
<pre><code>##  logi [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="array-matrix-dataframe.html#cb193-1" tabindex="-1"></a><span class="co"># An empty matrix with numerica NA</span></span>
<span id="cb193-2"><a href="array-matrix-dataframe.html#cb193-2" tabindex="-1"></a>mt_fl_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA_real_</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb193-3"><a href="array-matrix-dataframe.html#cb193-3" tabindex="-1"></a>mt_it_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA_integer_</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb193-4"><a href="array-matrix-dataframe.html#cb193-4" tabindex="-1"></a></span>
<span id="cb193-5"><a href="array-matrix-dataframe.html#cb193-5" tabindex="-1"></a><span class="fu">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="array-matrix-dataframe.html#cb195-1" tabindex="-1"></a><span class="fu">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
</div>
<div id="generate-matrixes-with-values" class="section level4 hasAnchor" number="1.3.1.4">
<h4><span class="header-section-number">1.3.1.4</span> Generate Matrixes with values<a href="array-matrix-dataframe.html#generate-matrixes-with-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Random draw from the normal distribution, random draw from the uniform distribution, and combine resulting matrixes.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="array-matrix-dataframe.html#cb197-1" tabindex="-1"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb197-2"><a href="array-matrix-dataframe.html#cb197-2" tabindex="-1"></a>mt_rnorm <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">15</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb197-3"><a href="array-matrix-dataframe.html#cb197-3" tabindex="-1"></a></span>
<span id="cb197-4"><a href="array-matrix-dataframe.html#cb197-4" tabindex="-1"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb197-5"><a href="array-matrix-dataframe.html#cb197-5" tabindex="-1"></a>mt_runif <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">15</span>,<span class="at">min=</span><span class="dv">0</span>,<span class="at">max=</span><span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">5</span>)</span>
<span id="cb197-6"><a href="array-matrix-dataframe.html#cb197-6" tabindex="-1"></a></span>
<span id="cb197-7"><a href="array-matrix-dataframe.html#cb197-7" tabindex="-1"></a><span class="co"># Combine</span></span>
<span id="cb197-8"><a href="array-matrix-dataframe.html#cb197-8" tabindex="-1"></a>mt_rnorm_runif <span class="ot">&lt;-</span> <span class="fu">cbind</span>(mt_rnorm, mt_runif)</span>
<span id="cb197-9"><a href="array-matrix-dataframe.html#cb197-9" tabindex="-1"></a></span>
<span id="cb197-10"><a href="array-matrix-dataframe.html#cb197-10" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb197-11"><a href="array-matrix-dataframe.html#cb197-11" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">round</span>(mt_rnorm_runif, <span class="dv">3</span>)) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.129
</td>
<td style="text-align:right;">
-0.446
</td>
<td style="text-align:right;">
-0.556
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.369
</td>
<td style="text-align:right;">
0.266
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.369
</td>
</tr>
<tr>
<td style="text-align:right;">
1.715
</td>
<td style="text-align:right;">
1.224
</td>
<td style="text-align:right;">
1.787
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.152
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.152
</td>
</tr>
<tr>
<td style="text-align:right;">
0.461
</td>
<td style="text-align:right;">
0.360
</td>
<td style="text-align:right;">
0.498
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.139
</td>
<td style="text-align:right;">
0.046
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.139
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.265
</td>
<td style="text-align:right;">
0.401
</td>
<td style="text-align:right;">
-1.967
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.233
</td>
<td style="text-align:right;">
0.442
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.233
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.687
</td>
<td style="text-align:right;">
0.111
</td>
<td style="text-align:right;">
0.701
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
0.799
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.466
</td>
</tr>
</tbody>
</table>
<p>Now we generate a matrix with sequential integers, and either fill matrix by columns or fill matrix by rows.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="array-matrix-dataframe.html#cb198-1" tabindex="-1"></a><span class="co"># with byrow set to FALSE, will fill first col, then second col, etc..</span></span>
<span id="cb198-2"><a href="array-matrix-dataframe.html#cb198-2" tabindex="-1"></a>mt_index_colbycol <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">4</span>, <span class="at">ncol=</span><span class="dv">4</span>, <span class="at">byrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb198-3"><a href="array-matrix-dataframe.html#cb198-3" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb198-4"><a href="array-matrix-dataframe.html#cb198-4" tabindex="-1"></a><span class="fu">kable</span>(mt_index_colbycol,</span>
<span id="cb198-5"><a href="array-matrix-dataframe.html#cb198-5" tabindex="-1"></a>  <span class="at">caption=</span> <span class="st">&quot;with byrow=FALSE, the default, will fill col by col&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb198-6"><a href="array-matrix-dataframe.html#cb198-6" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-63">Table 1.1: </span>with byrow=FALSE, the default, will fill col by col
</caption>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
15
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="array-matrix-dataframe.html#cb199-1" tabindex="-1"></a><span class="co"># with byrow set to TRUE, will fill row by row</span></span>
<span id="cb199-2"><a href="array-matrix-dataframe.html#cb199-2" tabindex="-1"></a>mt_index_rowbyrow <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">4</span>, <span class="at">ncol=</span><span class="dv">4</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb199-3"><a href="array-matrix-dataframe.html#cb199-3" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb199-4"><a href="array-matrix-dataframe.html#cb199-4" tabindex="-1"></a><span class="fu">kable</span>(mt_index_rowbyrow,</span>
<span id="cb199-5"><a href="array-matrix-dataframe.html#cb199-5" tabindex="-1"></a>  <span class="at">caption=</span> <span class="st">&quot; with byrow=TRUE, will fill row by row&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb199-6"><a href="array-matrix-dataframe.html#cb199-6" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-63">Table 1.1: </span> with byrow=TRUE, will fill row by row
</caption>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
15
</td>
</tr>
</tbody>
</table>
</div>
<div id="replace-a-subset-of-matrix-values-by-na_real_" class="section level4 hasAnchor" number="1.3.1.5">
<h4><span class="header-section-number">1.3.1.5</span> Replace a Subset of Matrix Values by NA_real_<a href="array-matrix-dataframe.html#replace-a-subset-of-matrix-values-by-na_real_" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For values in matrix that fall below or above some thresholds, we will replace these values by NA_real_.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="array-matrix-dataframe.html#cb200-1" tabindex="-1"></a>fl_max_val <span class="ot">&lt;-</span> <span class="fl">0.8</span></span>
<span id="cb200-2"><a href="array-matrix-dataframe.html#cb200-2" tabindex="-1"></a>fl_min_val <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb200-3"><a href="array-matrix-dataframe.html#cb200-3" tabindex="-1"></a>mt_rnorm_runif_bd <span class="ot">&lt;-</span> mt_rnorm_runif</span>
<span id="cb200-4"><a href="array-matrix-dataframe.html#cb200-4" tabindex="-1"></a>mt_rnorm_runif_bd[<span class="fu">which</span>(mt_rnorm_runif <span class="sc">&lt;</span> fl_min_val)] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb200-5"><a href="array-matrix-dataframe.html#cb200-5" tabindex="-1"></a>mt_rnorm_runif_bd[<span class="fu">which</span>(mt_rnorm_runif <span class="sc">&gt;</span> fl_max_val)] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb200-6"><a href="array-matrix-dataframe.html#cb200-6" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb200-7"><a href="array-matrix-dataframe.html#cb200-7" tabindex="-1"></a><span class="fu">print</span>(mt_rnorm_runif_bd)</span></code></pre></div>
<pre><code>##           [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]      [,8]
## [1,]        NA        NA        NA 0.3181810 0.3688455 0.2659726 0.3181810 0.3688455
## [2,]        NA        NA        NA 0.2316258        NA        NA 0.2316258        NA
## [3,] 0.4609162 0.3598138 0.4978505        NA        NA        NA        NA        NA
## [4,]        NA 0.4007715        NA 0.4145463 0.2330341 0.4422001 0.4145463 0.2330341
## [5,]        NA        NA 0.7013559 0.4137243 0.4659625 0.7989248 0.4137243 0.4659625</code></pre>
</div>
<div id="sort-each-matrix-row-or-column" class="section level4 hasAnchor" number="1.3.1.6">
<h4><span class="header-section-number">1.3.1.6</span> Sort Each Matrix Row or Column<a href="array-matrix-dataframe.html#sort-each-matrix-row-or-column" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now we sort within each row or within each column of the random matrix.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="array-matrix-dataframe.html#cb202-1" tabindex="-1"></a><span class="co"># Within row sort</span></span>
<span id="cb202-2"><a href="array-matrix-dataframe.html#cb202-2" tabindex="-1"></a>mt_rnorm_runif_row_sort <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">apply</span>(</span>
<span id="cb202-3"><a href="array-matrix-dataframe.html#cb202-3" tabindex="-1"></a>  mt_rnorm_runif, <span class="dv">1</span>, sort</span>
<span id="cb202-4"><a href="array-matrix-dataframe.html#cb202-4" tabindex="-1"></a>))</span>
<span id="cb202-5"><a href="array-matrix-dataframe.html#cb202-5" tabindex="-1"></a><span class="co"># Within column sort, note no transpose</span></span>
<span id="cb202-6"><a href="array-matrix-dataframe.html#cb202-6" tabindex="-1"></a>mt_rnorm_runif_col_sort <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb202-7"><a href="array-matrix-dataframe.html#cb202-7" tabindex="-1"></a>  mt_rnorm_runif, <span class="dv">2</span>, sort</span>
<span id="cb202-8"><a href="array-matrix-dataframe.html#cb202-8" tabindex="-1"></a>)</span>
<span id="cb202-9"><a href="array-matrix-dataframe.html#cb202-9" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb202-10"><a href="array-matrix-dataframe.html#cb202-10" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">round</span>(mt_rnorm_runif_row_sort, <span class="dv">3</span>),</span>
<span id="cb202-11"><a href="array-matrix-dataframe.html#cb202-11" tabindex="-1"></a>      <span class="at">caption=</span><span class="st">&quot;Each row sort low to high&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb202-12"><a href="array-matrix-dataframe.html#cb202-12" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-65">Table 1.2: </span>Each row sort low to high
</caption>
<tbody>
<tr>
<td style="text-align:right;">
-0.556
</td>
<td style="text-align:right;">
-0.446
</td>
<td style="text-align:right;">
0.129
</td>
<td style="text-align:right;">
0.266
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.369
</td>
<td style="text-align:right;">
0.369
</td>
</tr>
<tr>
<td style="text-align:right;">
0.152
</td>
<td style="text-align:right;">
0.152
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
1.224
</td>
<td style="text-align:right;">
1.715
</td>
<td style="text-align:right;">
1.787
</td>
</tr>
<tr>
<td style="text-align:right;">
0.046
</td>
<td style="text-align:right;">
0.139
</td>
<td style="text-align:right;">
0.139
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.360
</td>
<td style="text-align:right;">
0.461
</td>
<td style="text-align:right;">
0.498
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.967
</td>
<td style="text-align:right;">
-1.265
</td>
<td style="text-align:right;">
0.233
</td>
<td style="text-align:right;">
0.233
</td>
<td style="text-align:right;">
0.401
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.442
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.687
</td>
<td style="text-align:right;">
0.111
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
0.701
</td>
<td style="text-align:right;">
0.799
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="array-matrix-dataframe.html#cb203-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">round</span>(mt_rnorm_runif_col_sort, <span class="dv">3</span>),</span>
<span id="cb203-2"><a href="array-matrix-dataframe.html#cb203-2" tabindex="-1"></a>      <span class="at">caption=</span><span class="st">&quot;Each column sort low to high&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb203-3"><a href="array-matrix-dataframe.html#cb203-3" tabindex="-1"></a>  <span class="fu">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-65">Table 1.2: </span>Each column sort low to high
</caption>
<tbody>
<tr>
<td style="text-align:right;">
-1.265
</td>
<td style="text-align:right;">
-0.446
</td>
<td style="text-align:right;">
-1.967
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.139
</td>
<td style="text-align:right;">
0.046
</td>
<td style="text-align:right;">
0.143
</td>
<td style="text-align:right;">
0.139
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.687
</td>
<td style="text-align:right;">
0.111
</td>
<td style="text-align:right;">
-0.556
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.152
</td>
<td style="text-align:right;">
0.266
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.152
</td>
</tr>
<tr>
<td style="text-align:right;">
0.129
</td>
<td style="text-align:right;">
0.360
</td>
<td style="text-align:right;">
0.498
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.233
</td>
<td style="text-align:right;">
0.442
</td>
<td style="text-align:right;">
0.318
</td>
<td style="text-align:right;">
0.233
</td>
</tr>
<tr>
<td style="text-align:right;">
0.461
</td>
<td style="text-align:right;">
0.401
</td>
<td style="text-align:right;">
0.701
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.369
</td>
<td style="text-align:right;">
0.799
</td>
<td style="text-align:right;">
0.414
</td>
<td style="text-align:right;">
0.369
</td>
</tr>
<tr>
<td style="text-align:right;">
1.715
</td>
<td style="text-align:right;">
1.224
</td>
<td style="text-align:right;">
1.787
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
0.415
</td>
<td style="text-align:right;">
0.466
</td>
</tr>
</tbody>
</table>
</div>
<div id="compute-column-and-row-statistics" class="section level4 hasAnchor" number="1.3.1.7">
<h4><span class="header-section-number">1.3.1.7</span> Compute Column and Row Statistics<a href="array-matrix-dataframe.html#compute-column-and-row-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Compute column and row means, and also column and row sums</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="array-matrix-dataframe.html#cb204-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;colSums=&#39;</span>,</span>
<span id="cb204-2"><a href="array-matrix-dataframe.html#cb204-2" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="fu">round</span>(</span>
<span id="cb204-3"><a href="array-matrix-dataframe.html#cb204-3" tabindex="-1"></a>               <span class="fu">colSums</span>(mt_rnorm_runif),<span class="dv">3</span>), <span class="at">collapse=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb204-4"><a href="array-matrix-dataframe.html#cb204-4" tabindex="-1"></a>             ))</span></code></pre></div>
<pre><code>## [1] &quot;colSums=0.353,1.65,0.464,1.521,1.359,2.411,1.521,1.359&quot;</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="array-matrix-dataframe.html#cb206-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;colMeans=&#39;</span>,</span>
<span id="cb206-2"><a href="array-matrix-dataframe.html#cb206-2" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="fu">round</span>(</span>
<span id="cb206-3"><a href="array-matrix-dataframe.html#cb206-3" tabindex="-1"></a>               <span class="fu">colMeans</span>(mt_rnorm_runif),<span class="dv">3</span>), <span class="at">collapse=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb206-4"><a href="array-matrix-dataframe.html#cb206-4" tabindex="-1"></a>             ))</span></code></pre></div>
<pre><code>## [1] &quot;colMeans=0.071,0.33,0.093,0.304,0.272,0.482,0.304,0.272&quot;</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="array-matrix-dataframe.html#cb208-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;rowSums=&#39;</span>,</span>
<span id="cb208-2"><a href="array-matrix-dataframe.html#cb208-2" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="fu">round</span>(</span>
<span id="cb208-3"><a href="array-matrix-dataframe.html#cb208-3" tabindex="-1"></a>               <span class="fu">rowSums</span>(mt_rnorm_runif),<span class="dv">3</span>), <span class="at">collapse=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb208-4"><a href="array-matrix-dataframe.html#cb208-4" tabindex="-1"></a>             ))</span></code></pre></div>
<pre><code>## [1] &quot;rowSums=0.768,6.352,1.928,-1.094,2.683&quot;</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="array-matrix-dataframe.html#cb210-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&#39;rowMeans=&#39;</span>,</span>
<span id="cb210-2"><a href="array-matrix-dataframe.html#cb210-2" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="fu">round</span>(</span>
<span id="cb210-3"><a href="array-matrix-dataframe.html#cb210-3" tabindex="-1"></a>               <span class="fu">rowMeans</span>(mt_rnorm_runif),<span class="dv">3</span>), <span class="at">collapse=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb210-4"><a href="array-matrix-dataframe.html#cb210-4" tabindex="-1"></a>             ))</span></code></pre></div>
<pre><code>## [1] &quot;rowMeans=0.096,0.794,0.241,-0.137,0.335&quot;</code></pre>
</div>
<div id="add-column-to-matrix-with-common-scalar-value" class="section level4 hasAnchor" number="1.3.1.8">
<h4><span class="header-section-number">1.3.1.8</span> Add Column to Matrix with Common Scalar Value<a href="array-matrix-dataframe.html#add-column-to-matrix-with-common-scalar-value" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given some matrix of information, add a column, where all rows of the column have the same numerical value. Use the matrix created prior.
- R add column to matrix
- r append column to matrix constant value</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="array-matrix-dataframe.html#cb212-1" tabindex="-1"></a>fl_new_first_col_val <span class="ot">&lt;-</span> <span class="dv">111</span></span>
<span id="cb212-2"><a href="array-matrix-dataframe.html#cb212-2" tabindex="-1"></a>fl_new_last_col_val <span class="ot">&lt;-</span> <span class="dv">999</span></span>
<span id="cb212-3"><a href="array-matrix-dataframe.html#cb212-3" tabindex="-1"></a>mt_with_more_columns <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">rep</span>(fl_new_first_col_val, <span class="fu">dim</span>(mt_rnorm_runif)[<span class="dv">1</span>]),</span>
<span id="cb212-4"><a href="array-matrix-dataframe.html#cb212-4" tabindex="-1"></a>                              mt_rnorm_runif,</span>
<span id="cb212-5"><a href="array-matrix-dataframe.html#cb212-5" tabindex="-1"></a>                              <span class="fu">rep</span>(fl_new_last_col_val, <span class="fu">dim</span>(mt_rnorm_runif)[<span class="dv">1</span>]))</span>
<span id="cb212-6"><a href="array-matrix-dataframe.html#cb212-6" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb212-7"><a href="array-matrix-dataframe.html#cb212-7" tabindex="-1"></a><span class="fu">kable</span>(mt_with_more_columns) <span class="sc">%&gt;%</span> <span class="fu">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
0.2659726
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
1.7869131
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
0.8578277
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
0.4978505
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
0.0458312
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-1.9666172
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
0.4422001
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
999
</td>
</tr>
<tr>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
0.7013559
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
0.7989248
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
999
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="linear-algebra" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Linear Algebra<a href="array-matrix-dataframe.html#linear-algebra" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="matrix-multiplication" class="section level4 hasAnchor" number="1.3.2.1">
<h4><span class="header-section-number">1.3.2.1</span> Matrix Multiplication<a href="array-matrix-dataframe.html#matrix-multiplication" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Multiply Together a 3 by 2 matrix and a 2 by 1 vector</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="array-matrix-dataframe.html#cb213-1" tabindex="-1"></a>ar_row_one <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb213-2"><a href="array-matrix-dataframe.html#cb213-2" tabindex="-1"></a>ar_row_two <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb213-3"><a href="array-matrix-dataframe.html#cb213-3" tabindex="-1"></a>ar_row_three <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb213-4"><a href="array-matrix-dataframe.html#cb213-4" tabindex="-1"></a>mt_n_by_2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb213-5"><a href="array-matrix-dataframe.html#cb213-5" tabindex="-1"></a></span>
<span id="cb213-6"><a href="array-matrix-dataframe.html#cb213-6" tabindex="-1"></a>ar_row_four <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb213-7"><a href="array-matrix-dataframe.html#cb213-7" tabindex="-1"></a></span>
<span id="cb213-8"><a href="array-matrix-dataframe.html#cb213-8" tabindex="-1"></a><span class="co"># Matrix Multiplication</span></span>
<span id="cb213-9"><a href="array-matrix-dataframe.html#cb213-9" tabindex="-1"></a>mt_out <span class="ot">&lt;-</span> mt_n_by_2 <span class="sc">%*%</span> ar_row_four</span>
<span id="cb213-10"><a href="array-matrix-dataframe.html#cb213-10" tabindex="-1"></a><span class="fu">print</span>(mt_n_by_2)</span></code></pre></div>
<pre><code>##               [,1]  [,2]
## ar_row_one   -1.00  1.00
## ar_row_two   -3.00 -2.00
## ar_row_three  0.35  0.75</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="array-matrix-dataframe.html#cb215-1" tabindex="-1"></a><span class="fu">print</span>(ar_row_four)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="array-matrix-dataframe.html#cb217-1" tabindex="-1"></a><span class="fu">print</span>(mt_out)</span></code></pre></div>
<pre><code>##                [,1]
## ar_row_one     1.00
## ar_row_two   -17.00
## ar_row_three   4.05</code></pre>

</div>
</div>
</div>
<div id="regular-expression-date-etc." class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Regular Expression, Date, etc.<a href="array-matrix-dataframe.html#regular-expression-date-etc." class="anchor-section" aria-label="Anchor link to header"></a></h2>

<div id="string-regular-expression" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> String Regular Expression<a href="array-matrix-dataframe.html#string-regular-expression" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> research support package, <a href="https://fanwangecon.github.io/R4Econ/">R4Econ</a> examples page, <a href="https://fanwangecon.github.io/PkgTestR/">PkgTestR</a> packaging guide, or <a href="https://fanwangecon.github.io/Stat4Econ/">Stat4Econ</a> course page.</p>
</blockquote>
<div id="character-class" class="section level4 hasAnchor" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> Character Class<a href="array-matrix-dataframe.html#character-class" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The regex documentation states that: “A character class is a list of characters enclosed between ‘[’ and ’]’ which matches any single character in that list”</p>
<p>First, in the example below, we look for strings that contain at a single letter, symbol, or number in the string list enclosed in square brackets.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="array-matrix-dataframe.html#cb219-1" tabindex="-1"></a><span class="co"># Fou words with metacharacters</span></span>
<span id="cb219-2"><a href="array-matrix-dataframe.html#cb219-2" tabindex="-1"></a>ls_st_regex_charclass <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb219-3"><a href="array-matrix-dataframe.html#cb219-3" tabindex="-1"></a>  <span class="st">&#39;00d&#39;</span>,</span>
<span id="cb219-4"><a href="array-matrix-dataframe.html#cb219-4" tabindex="-1"></a>  <span class="st">&#39;z</span><span class="sc">\\</span><span class="st">12323_4&#39;</span>, </span>
<span id="cb219-5"><a href="array-matrix-dataframe.html#cb219-5" tabindex="-1"></a>  <span class="st">&#39;pa(_2+</span><span class="sc">\\</span><span class="st">3&#39;</span>, </span>
<span id="cb219-6"><a href="array-matrix-dataframe.html#cb219-6" tabindex="-1"></a>  <span class="st">&#39;p99.9_sdfasdpf0&#39;</span>, </span>
<span id="cb219-7"><a href="array-matrix-dataframe.html#cb219-7" tabindex="-1"></a>  <span class="st">&#39;k9p.e_d+fd&#39;</span>)</span>
<span id="cb219-8"><a href="array-matrix-dataframe.html#cb219-8" tabindex="-1"></a><span class="co"># Matches any characters with the letter p</span></span>
<span id="cb219-9"><a href="array-matrix-dataframe.html#cb219-9" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;[p]&quot;</span>, ls_st_regex_charclass))</span>
<span id="cb219-10"><a href="array-matrix-dataframe.html#cb219-10" tabindex="-1"></a><span class="co"># Matches any characters with backslash</span></span>
<span id="cb219-11"><a href="array-matrix-dataframe.html#cb219-11" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;[</span><span class="sc">\\</span><span class="st">]&quot;</span>, ls_st_regex_charclass))</span>
<span id="cb219-12"><a href="array-matrix-dataframe.html#cb219-12" tabindex="-1"></a><span class="co"># Matches any characters with the number 3</span></span>
<span id="cb219-13"><a href="array-matrix-dataframe.html#cb219-13" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;[3]&quot;</span>, ls_st_regex_charclass))</span>
<span id="cb219-14"><a href="array-matrix-dataframe.html#cb219-14" tabindex="-1"></a></span>
<span id="cb219-15"><a href="array-matrix-dataframe.html#cb219-15" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;[p]&quot;, ls_st_regex_charclass))</span></span>
<span id="cb219-16"><a href="array-matrix-dataframe.html#cb219-16" tabindex="-1"></a><span class="co"># [1] FALSE FALSE  TRUE  TRUE  TRUE</span></span>
<span id="cb219-17"><a href="array-matrix-dataframe.html#cb219-17" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;[\\]&quot;, ls_st_regex_charclass))</span></span>
<span id="cb219-18"><a href="array-matrix-dataframe.html#cb219-18" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE  TRUE FALSE FALSE</span></span>
<span id="cb219-19"><a href="array-matrix-dataframe.html#cb219-19" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;[3]&quot;, ls_st_regex_charclass))</span></span>
<span id="cb219-20"><a href="array-matrix-dataframe.html#cb219-20" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE  TRUE FALSE FALSEZ</span></span></code></pre></div>
<p>Second, using the same set of words as examples, we now test if the strings contain at least a letter, symbol, or number in the string lis enclosed in square brakets.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="array-matrix-dataframe.html#cb220-1" tabindex="-1"></a><span class="co"># Matches any characters eithr with letter p or d</span></span>
<span id="cb220-2"><a href="array-matrix-dataframe.html#cb220-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&#39;[pd]&#39;</span>, ls_st_regex_charclass))</span>
<span id="cb220-3"><a href="array-matrix-dataframe.html#cb220-3" tabindex="-1"></a><span class="co"># Matches any characters eithr with letter p or _</span></span>
<span id="cb220-4"><a href="array-matrix-dataframe.html#cb220-4" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&#39;[p_]&#39;</span>, ls_st_regex_charclass))</span>
<span id="cb220-5"><a href="array-matrix-dataframe.html#cb220-5" tabindex="-1"></a><span class="co"># Matches any characters eithr with letter p or _ or 0</span></span>
<span id="cb220-6"><a href="array-matrix-dataframe.html#cb220-6" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&#39;[p_0]&#39;</span>, ls_st_regex_charclass))</span>
<span id="cb220-7"><a href="array-matrix-dataframe.html#cb220-7" tabindex="-1"></a></span>
<span id="cb220-8"><a href="array-matrix-dataframe.html#cb220-8" tabindex="-1"></a><span class="co"># &gt; print(grepl(&#39;[pd]&#39;, ls_st_regex_charclass))</span></span>
<span id="cb220-9"><a href="array-matrix-dataframe.html#cb220-9" tabindex="-1"></a><span class="co"># [1]  TRUE FALSE  TRUE  TRUE  TRUE</span></span>
<span id="cb220-10"><a href="array-matrix-dataframe.html#cb220-10" tabindex="-1"></a><span class="co"># &gt; print(grepl(&#39;[p_]&#39;, ls_st_regex_charclass))</span></span>
<span id="cb220-11"><a href="array-matrix-dataframe.html#cb220-11" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE  TRUE  TRUE  TRUE</span></span>
<span id="cb220-12"><a href="array-matrix-dataframe.html#cb220-12" tabindex="-1"></a><span class="co"># &gt; print(grepl(&#39;[p_0]&#39;, ls_st_regex_charclass))</span></span>
<span id="cb220-13"><a href="array-matrix-dataframe.html#cb220-13" tabindex="-1"></a><span class="co"># [1] TRUE TRUE TRUE TRUE TRUE</span></span></code></pre></div>
<p>Third, using ‘^’, carat, we exclude strings that include characters, letters, and symols. The documentation states that: “unless the first character of the list is the caret ‘^’, when it matches any character not in the list”.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="array-matrix-dataframe.html#cb221-1" tabindex="-1"></a><span class="co"># Finds strings that has anything other than d and 0</span></span>
<span id="cb221-2"><a href="array-matrix-dataframe.html#cb221-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&#39;[^d0]&#39;</span>, ls_st_regex_charclass))</span>
<span id="cb221-3"><a href="array-matrix-dataframe.html#cb221-3" tabindex="-1"></a></span>
<span id="cb221-4"><a href="array-matrix-dataframe.html#cb221-4" tabindex="-1"></a><span class="co"># &gt; print(grepl(&#39;[^d0]&#39;, ls_st_regex_charclass))</span></span>
<span id="cb221-5"><a href="array-matrix-dataframe.html#cb221-5" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE  TRUE  TRUE  TRUE</span></span></code></pre></div>
</div>
<div id="repetition-quantifiers" class="section level4 hasAnchor" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> Repetition Quantifiers<a href="array-matrix-dataframe.html#repetition-quantifiers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We have the following quantifiers:</p>
<ul>
<li><p>‘?’: The preceding item is optional and will be matched at most once.</p></li>
<li><p>’*’: The preceding item will be matched zero or more times.</p></li>
<li><p>‘+’:The preceding item will be matched one or more times.</p></li>
<li><p>‘{n}’: The preceding item is matched exactly n times.</p></li>
<li><p>‘{n,}’: The preceding item is matched n or more times.</p></li>
<li><p>‘{n,m}’: The preceding item is matched at least n times, but not more than m times.</p></li>
</ul>
<p>Now, we identifier strings where certain characters appear a certain number of times.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="array-matrix-dataframe.html#cb222-1" tabindex="-1"></a><span class="co"># Fou words with metacharacters</span></span>
<span id="cb222-2"><a href="array-matrix-dataframe.html#cb222-2" tabindex="-1"></a>ls_st_regex_rep_quantifer <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb222-3"><a href="array-matrix-dataframe.html#cb222-3" tabindex="-1"></a>  <span class="st">&#39;00d&#39;</span>,</span>
<span id="cb222-4"><a href="array-matrix-dataframe.html#cb222-4" tabindex="-1"></a>  <span class="st">&#39;z</span><span class="sc">\\</span><span class="st">12323_40&#39;</span>, </span>
<span id="cb222-5"><a href="array-matrix-dataframe.html#cb222-5" tabindex="-1"></a>  <span class="st">&#39;ppa(_2+</span><span class="sc">\\</span><span class="st">3&#39;</span>, </span>
<span id="cb222-6"><a href="array-matrix-dataframe.html#cb222-6" tabindex="-1"></a>  <span class="st">&#39;p99.9_sdfasdpf0&#39;</span>, </span>
<span id="cb222-7"><a href="array-matrix-dataframe.html#cb222-7" tabindex="-1"></a>  <span class="st">&#39;k9p.e_d+fd&#39;</span>)</span>
<span id="cb222-8"><a href="array-matrix-dataframe.html#cb222-8" tabindex="-1"></a><span class="co"># Matches any characters pp</span></span>
<span id="cb222-9"><a href="array-matrix-dataframe.html#cb222-9" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;[p]{2}&quot;</span>, ls_st_regex_rep_quantifer))</span>
<span id="cb222-10"><a href="array-matrix-dataframe.html#cb222-10" tabindex="-1"></a><span class="co"># Matches any characters with the number 3</span></span>
<span id="cb222-11"><a href="array-matrix-dataframe.html#cb222-11" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;[9]{2}&quot;</span>, ls_st_regex_rep_quantifer))</span>
<span id="cb222-12"><a href="array-matrix-dataframe.html#cb222-12" tabindex="-1"></a></span>
<span id="cb222-13"><a href="array-matrix-dataframe.html#cb222-13" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;[p]{2}&quot;, ls_st_regex_rep_quantifer))</span></span>
<span id="cb222-14"><a href="array-matrix-dataframe.html#cb222-14" tabindex="-1"></a><span class="co"># [1] FALSE FALSE  TRUE FALSE FALSE</span></span>
<span id="cb222-15"><a href="array-matrix-dataframe.html#cb222-15" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;[9]{2}&quot;, ls_st_regex_rep_quantifer))</span></span>
<span id="cb222-16"><a href="array-matrix-dataframe.html#cb222-16" tabindex="-1"></a><span class="co"># [1] FALSE FALSE FALSE  TRUE FALSE</span></span></code></pre></div>
</div>
<div id="matches-strings-with-multiple-conditions-with-repetition-quantifiers" class="section level4 hasAnchor" number="1.4.1.3">
<h4><span class="header-section-number">1.4.1.3</span> Matches Strings With Multiple Conditions with Repetition Quantifiers<a href="array-matrix-dataframe.html#matches-strings-with-multiple-conditions-with-repetition-quantifiers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now we match string that satisfy multiple conditions jointly. We have the following quantifiers:</p>
<ul>
<li>‘?’: The preceding item is optional and will be matched at most once.</li>
<li>’*’: The preceding item will be matched zero or more times.</li>
<li>‘+’:The preceding item will be matched one or more times.</li>
<li>‘{n}’: The preceding item is matched exactly n times.</li>
<li>‘{n,}’: The preceding item is matched n or more times.</li>
<li>‘{n,m}’: The preceding item is matched at least n times, but not more than m times.</li>
</ul>
<p>First, we define our string array.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="array-matrix-dataframe.html#cb223-1" tabindex="-1"></a>ls_st_regex_joint <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb223-2"><a href="array-matrix-dataframe.html#cb223-2" tabindex="-1"></a>  <span class="st">&#39;_asdf123p&#39;</span>,</span>
<span id="cb223-3"><a href="array-matrix-dataframe.html#cb223-3" tabindex="-1"></a>  <span class="st">&#39;pz12p323_40_&#39;</span>, </span>
<span id="cb223-4"><a href="array-matrix-dataframe.html#cb223-4" tabindex="-1"></a>  <span class="st">&#39;ppa(_2+</span><span class="sc">\\</span><span class="st">3&#39;</span>, </span>
<span id="cb223-5"><a href="array-matrix-dataframe.html#cb223-5" tabindex="-1"></a>  <span class="st">&#39;p9_sdfasdpf0&#39;</span>, </span>
<span id="cb223-6"><a href="array-matrix-dataframe.html#cb223-6" tabindex="-1"></a>  <span class="st">&#39;p_k9p.e_d+fd&#39;</span>, </span>
<span id="cb223-7"><a href="array-matrix-dataframe.html#cb223-7" tabindex="-1"></a>  <span class="st">&#39;p123k_dfk&#39;</span>)</span></code></pre></div>
<p>Second, we identify three cases below:</p>
<ol style="list-style-type: decimal">
<li>Matching words containing just “p_”</li>
<li>Matching words containing “p9_” (replace 9 by another other alpha-numeric)</li>
<li>Matching words containing either “p_” or “p9_”</li>
</ol>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="array-matrix-dataframe.html#cb224-1" tabindex="-1"></a><span class="co"># Start with p, followed by _</span></span>
<span id="cb224-2"><a href="array-matrix-dataframe.html#cb224-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;p_&quot;</span>, ls_st_regex_joint))</span>
<span id="cb224-3"><a href="array-matrix-dataframe.html#cb224-3" tabindex="-1"></a><span class="co"># Start with p, followed by a single alpha-numeric, then _</span></span>
<span id="cb224-4"><a href="array-matrix-dataframe.html#cb224-4" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;p[[:alnum:]]_&quot;</span>, ls_st_regex_joint))</span>
<span id="cb224-5"><a href="array-matrix-dataframe.html#cb224-5" tabindex="-1"></a><span class="co"># Start with p, followed by either: </span></span>
<span id="cb224-6"><a href="array-matrix-dataframe.html#cb224-6" tabindex="-1"></a><span class="co"># 1 single alpha-numeric, then _</span></span>
<span id="cb224-7"><a href="array-matrix-dataframe.html#cb224-7" tabindex="-1"></a><span class="co"># no alpha-numeric, then _</span></span>
<span id="cb224-8"><a href="array-matrix-dataframe.html#cb224-8" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;p[[:alnum:]]?_&quot;</span>, ls_st_regex_joint))</span>
<span id="cb224-9"><a href="array-matrix-dataframe.html#cb224-9" tabindex="-1"></a></span>
<span id="cb224-10"><a href="array-matrix-dataframe.html#cb224-10" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;p_&quot;, ls_st_regex_joint))</span></span>
<span id="cb224-11"><a href="array-matrix-dataframe.html#cb224-11" tabindex="-1"></a><span class="co"># [1] FALSE FALSE FALSE FALSE  TRUE FALSE</span></span>
<span id="cb224-12"><a href="array-matrix-dataframe.html#cb224-12" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;p[[:alnum:]]_&quot;, ls_st_regex_joint))</span></span>
<span id="cb224-13"><a href="array-matrix-dataframe.html#cb224-13" tabindex="-1"></a><span class="co"># [1] FALSE FALSE FALSE  TRUE FALSE FALSE</span></span>
<span id="cb224-14"><a href="array-matrix-dataframe.html#cb224-14" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;p[[:alnum:]]?_&quot;, ls_st_regex_joint))</span></span>
<span id="cb224-15"><a href="array-matrix-dataframe.html#cb224-15" tabindex="-1"></a><span class="co"># [1] FALSE FALSE FALSE  TRUE  TRUE FALSE</span></span></code></pre></div>
<p>Third, we identify cases, where there the word contains substring starting with “p” and ending with “_“, with any number (including 0) of alpha-numeric characters in between. Note:</p>
<ol style="list-style-type: decimal">
<li>In the first string, both “_” and “p” appear, but “p” appears after, so does not match</li>
<li>Note in the second word, “p” and “_” appear multiple times</li>
<li>Note in the third word, “p” and “_” both appear, but are separated by a non-alpha-numeric character</li>
</ol>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="array-matrix-dataframe.html#cb225-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;p[[:alnum:]]*_&quot;</span>, ls_st_regex_joint))</span>
<span id="cb225-2"><a href="array-matrix-dataframe.html#cb225-2" tabindex="-1"></a></span>
<span id="cb225-3"><a href="array-matrix-dataframe.html#cb225-3" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;p[[:alnum:]]*_&quot;, ls_st_regex_joint))</span></span>
<span id="cb225-4"><a href="array-matrix-dataframe.html#cb225-4" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE FALSE  TRUE  TRUE  TRUE</span></span></code></pre></div>
<p>Fourth, we use alternative repetition quantifiers, plus, rather than asterisks, which means we must have at least one alpha-numeric character in between “p” and the “_“, in which case, the fifth word no longer satisfies the search condition.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="array-matrix-dataframe.html#cb226-1" tabindex="-1"></a><span class="co"># p and _ separated by at least 1 alpha numerics</span></span>
<span id="cb226-2"><a href="array-matrix-dataframe.html#cb226-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">&quot;p[[:alnum:]]+_&quot;</span>, ls_st_regex_joint))</span>
<span id="cb226-3"><a href="array-matrix-dataframe.html#cb226-3" tabindex="-1"></a></span>
<span id="cb226-4"><a href="array-matrix-dataframe.html#cb226-4" tabindex="-1"></a><span class="co"># &gt; print(grepl(&quot;p[[:alnum:]]+_&quot;, ls_st_regex_joint))</span></span>
<span id="cb226-5"><a href="array-matrix-dataframe.html#cb226-5" tabindex="-1"></a><span class="co"># [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</span></span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manipulate-and-summarize-dataframes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
