<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R</title>
  <meta name="description" content="R Examples Panel and Optimization." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Examples Panel and Optimization." />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R" />
  
  <meta name="twitter:description" content="R Examples Panel and Optimization." />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2020-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="summarize-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Panel Data and Optimization with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a><ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a><ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#multiple-dimensional-list"><i class="fa fa-check"></i><b>1.1.1</b> Multiple Dimensional List</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a><ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a><ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#variables-in-dataframes"><i class="fa fa-check"></i><b>1.4</b> Variables in Dataframes</a><ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-dataframe"><i class="fa fa-check"></i><b>1.4.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="1.4.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#factor-label-and-combine"><i class="fa fa-check"></i><b>1.4.2</b> Factor Label and Combine</a></li>
<li class="chapter" data-level="1.4.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#drawly-random-rows"><i class="fa fa-check"></i><b>1.4.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="1.4.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>1.4.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="1.4.5" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-values"><i class="fa fa-check"></i><b>1.4.5</b> String Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>2</b> Summarize Data</a><ul>
<li class="chapter" data-level="2.1" data-path="summarize-data.html"><a href="summarize-data.html#counting-observation"><i class="fa fa-check"></i><b>2.1</b> Counting Observation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-data.html"><a href="summarize-data.html#uncount"><i class="fa fa-check"></i><b>2.1.1</b> Uncount</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="summarize-data.html"><a href="summarize-data.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.2</b> Sorting, Indexing, Slicing</a><ul>
<li class="chapter" data-level="2.2.1" data-path="summarize-data.html"><a href="summarize-data.html#sorting"><i class="fa fa-check"></i><b>2.2.1</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="summarize-data.html"><a href="summarize-data.html#group-statistics"><i class="fa fa-check"></i><b>2.3</b> Group Statistics</a><ul>
<li class="chapter" data-level="2.3.1" data-path="summarize-data.html"><a href="summarize-data.html#groups-statistics"><i class="fa fa-check"></i><b>2.3.1</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.3.2" data-path="summarize-data.html"><a href="summarize-data.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.3.2</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.3.3" data-path="summarize-data.html"><a href="summarize-data.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.3.3</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="summarize-data.html"><a href="summarize-data.html#distributional-statistics"><i class="fa fa-check"></i><b>2.4</b> Distributional Statistics</a><ul>
<li class="chapter" data-level="2.4.1" data-path="summarize-data.html"><a href="summarize-data.html#histogram"><i class="fa fa-check"></i><b>2.4.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summarize-data.html"><a href="summarize-data.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.5</b> Summarize Multiple Variables</a><ul>
<li class="chapter" data-level="2.5.1" data-path="summarize-data.html"><a href="summarize-data.html#generate-replace-variables"><i class="fa fa-check"></i><b>2.5.1</b> Generate Replace Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a><ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a><ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mxq-to-mxp-rows"><i class="fa fa-check"></i><b>3.2.1</b> MxQ to MxP Rows</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mx1-to-mxq-rows"><i class="fa fa-check"></i><b>3.2.2</b> Mx1 to MxQ Rows</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a><ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-sapply-mutate"><i class="fa fa-check"></i><b>3.3.1</b> Apply, Sapply, Mutate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>4</b> Panel</a><ul>
<li class="chapter" data-level="4.1" data-path="panel.html"><a href="panel.html#generate-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate and Join</a><ul>
<li class="chapter" data-level="4.1.1" data-path="panel.html"><a href="panel.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="panel.html"><a href="panel.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="panel.html"><a href="panel.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a><ul>
<li class="chapter" data-level="4.2.1" data-path="panel.html"><a href="panel.html#long-to-wide"><i class="fa fa-check"></i><b>4.2.1</b> Long to Wide</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a><ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.1</b> OLS and IV</a><ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.1.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.1.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a><ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.2.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html"><i class="fa fa-check"></i><b>6</b> Nonlinear Regression</a><ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a><ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a><ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1</b> Bisection</a><ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#bisection-1"><i class="fa fa-check"></i><b>7.1.1</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html"><i class="fa fa-check"></i><b>8</b> Mathmatics and Statistics</a><ul>
<li class="chapter" data-level="8.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#distributions"><i class="fa fa-check"></i><b>8.1</b> Distributions</a><ul>
<li class="chapter" data-level="8.1.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>8.1.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#analytical-solutions"><i class="fa fa-check"></i><b>8.2</b> Analytical Solutions</a><ul>
<li class="chapter" data-level="8.2.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.2.1</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#inequality-models"><i class="fa fa-check"></i><b>8.3</b> Inequality Models</a><ul>
<li class="chapter" data-level="8.3.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.3.1</b> Gini Discrete Sample</a></li>
<li class="chapter" data-level="8.3.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#atkinson-family-utility"><i class="fa fa-check"></i><b>8.3.2</b> Atkinson Family Utility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>9</b> Tables and Graphs</a><ul>
<li class="chapter" data-level="9.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>9.1</b> R Base Plots</a><ul>
<li class="chapter" data-level="9.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>9.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>9.2</b> Write and Read Plots</a><ul>
<li class="chapter" data-level="9.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>9.2.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a><ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a><ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 List</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Array</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Matrix</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Variables in Dataframes</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-data-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Data links</a><ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 Counting Observation</span> links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.2</b> <span>Section 2.2 Sorting, Indexing, Slicing</span> links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-group-statisticsgroup-statistics-links"><i class="fa fa-check"></i><b>A.2.3</b> <span>Section 2.3 Group Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.4</b> <span>Section 2.4 Distributional Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.5</b> <span>Section 2.5 Summarize Multiple Variables</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a><ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Dataframe Mutate</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Dataframe Do Anything</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Apply and pmap</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#panel-links"><i class="fa fa-check"></i><b>A.4</b> Panel links</a><ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-and-joingenerate-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Generate and Join</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Wide and Long</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a><ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 OLS and IV</span> links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.2</b> <span>Section 5.2 Decomposition</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-regression-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear Regression links</a><ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> <span>Section 6.1 Logit Regression</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a><ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-bisectionbisection-links"><i class="fa fa-check"></i><b>A.7.1</b> <span>Section 7.1 Bisection</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathmatics-and-statistics-links"><i class="fa fa-check"></i><b>A.8</b> Mathmatics and Statistics links</a><ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.8.1</b> <span>Section 8.1 Distributions</span> links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-analytical-solutionsanalytical-solutions-links"><i class="fa fa-check"></i><b>A.8.2</b> <span>Section 8.2 Analytical Solutions</span> links</a></li>
<li class="chapter" data-level="A.8.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.3-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.3</b> <span>Section 8.3 Inequality Models</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.9</b> Tables and Graphs links</a><ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.9.1</b> <span>Section 9.1 R Base Plots</span> links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.9.2</b> <span>Section 9.2 Write and Read Plots</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Panel Data and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="array-matrix-dataframe" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Array, Matrix, Dataframe</h1>

<div id="list" class="section level2">
<h2><span class="header-section-number">1.1</span> List</h2>

<div id="multiple-dimensional-list" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Multiple Dimensional List</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r list tutorial</li>
<li>r vector vs list</li>
<li>r initialize empty multiple element list</li>
<li>r name rows and columns of 2 dimensional list</li>
<li>r row and colum names of list</li>
<li>list dimnames</li>
<li>r named list to string</li>
</ul>
<div id="one-dimensional-named-list" class="section level4">
<h4><span class="header-section-number">1.1.1.1</span> One Dimensional Named List</h4>
<ol style="list-style-type: decimal">
<li>define list</li>
<li>slice list</li>
<li>print r named list as a single line string</li>
</ol>
<ul>
<li><a href="https://stackoverflow.com/a/55622024/8280804">R Unlist named list into one string with preserving list names</a></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Define Lists</span></a>
<a class="sourceLine" id="cb1-2" title="2">ls_num &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" title="3">ls_str &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&#39;1&#39;</span>,<span class="st">&#39;2&#39;</span>,<span class="st">&#39;3&#39;</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">ls_num_str &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&#39;3&#39;</span>)</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co"># Named Lists</span></a>
<a class="sourceLine" id="cb1-7" title="7">ar_st_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;e1&#39;</span>,<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>)</a>
<a class="sourceLine" id="cb1-8" title="8">ls_num_str_named &lt;-<span class="st"> </span>ls_num_str</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">names</span>(ls_num_str_named) &lt;-<span class="st"> </span>ar_st_names</a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co"># Add Element to Named List</span></a>
<a class="sourceLine" id="cb1-12" title="12">ls_num_str_named<span class="op">$</span>e4 &lt;-<span class="st"> &#39;this is added&#39;</span></a></code></pre></div>
<ul>
<li>r print input as string</li>
<li>r print parameter code as string</li>
<li><a href="https://stackoverflow.com/a/14577878/8280804">How to convert variable (object) name into String</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># list to String printing function</span></a>
<a class="sourceLine" id="cb2-2" title="2">ffi_lst2str &lt;-<span class="st"> </span><span class="cf">function</span>(ls_list, st_desc, <span class="dt">bl_print=</span><span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb2-3" title="3">  </a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="co"># string desc</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="cf">if</span>(<span class="kw">missing</span>(st_desc)){</a>
<a class="sourceLine" id="cb2-6" title="6">    st_desc &lt;-<span class="st"> </span><span class="kw">deparse</span>(<span class="kw">substitute</span>(ls_list))</a>
<a class="sourceLine" id="cb2-7" title="7">  }</a>
<a class="sourceLine" id="cb2-8" title="8">    </a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="co"># create string</span></a>
<a class="sourceLine" id="cb2-10" title="10">  st_string_from_list =<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">paste0</span>(st_desc, <span class="st">&#39;:&#39;</span>), </a>
<a class="sourceLine" id="cb2-11" title="11">                               <span class="kw">paste</span>(<span class="kw">names</span>(ls_list), ls_list, <span class="dt">sep=</span><span class="st">&quot;=&quot;</span>, <span class="dt">collapse=</span><span class="st">&quot;;&quot;</span> ))</a>
<a class="sourceLine" id="cb2-12" title="12">  </a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="cf">if</span> (bl_print){</a>
<a class="sourceLine" id="cb2-14" title="14">    <span class="kw">print</span>(st_string_from_list)</a>
<a class="sourceLine" id="cb2-15" title="15">  }</a>
<a class="sourceLine" id="cb2-16" title="16">}</a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co"># print full</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="kw">ffi_lst2str</span>(ls_num)</a></code></pre></div>
<pre><code>[1] &quot;ls_num:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">ffi_lst2str</span>(ls_str)</a></code></pre></div>
<pre><code>[1] &quot;ls_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">ffi_lst2str</span>(ls_num_str)</a></code></pre></div>
<pre><code>[1] &quot;ls_num_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">ffi_lst2str</span>(ls_num_str_named)</a></code></pre></div>
<pre><code>[1] &quot;ls_num_str_named:e1=1;e2=2;e3=3;e4=this is added&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># print subset</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">ffi_lst2str</span>(ls_num[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</a></code></pre></div>
<pre><code>[1] &quot;ls_num[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">ffi_lst2str</span>(ls_str[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</a></code></pre></div>
<pre><code>[1] &quot;ls_str[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">ffi_lst2str</span>(ls_num_str[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>])</a></code></pre></div>
<pre><code>[1] &quot;ls_num_str[2:4]:=2;=3;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">ffi_lst2str</span>(ls_num_str_named[<span class="kw">c</span>(<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>,<span class="st">&#39;e4&#39;</span>)])</a></code></pre></div>
<pre><code>[1] &quot;ls_num_str_named[c(\&quot;e2\&quot;, \&quot;e3\&quot;, \&quot;e4\&quot;)]:e2=2;e3=3;e4=this is added&quot;</code></pre>
</div>
<div id="two-dimensional-unnamed-list" class="section level4">
<h4><span class="header-section-number">1.1.1.2</span> Two Dimensional Unnamed List</h4>
<p>Generate a multiple dimensional list:</p>
<ol style="list-style-type: decimal">
<li>Initiate with an N element empty list</li>
<li>Reshape list to M by Q</li>
<li>Fill list elements</li>
<li>Get list element by row and column number</li>
</ol>
<p>List allows for different data types to be stored together.</p>
<p>Note that element specific names in named list are not preserved when the list is reshaped to be two dimensional. Two dimensional list, however, could have row and column names.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># Dimensions</span></a>
<a class="sourceLine" id="cb18-2" title="2">it_M &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb18-3" title="3">it_Q &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb18-4" title="4">it_N &lt;-<span class="st"> </span>it_M<span class="op">*</span>it_Q</a>
<a class="sourceLine" id="cb18-5" title="5"></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co"># Initiate an Empty MxQ=N element list</span></a>
<a class="sourceLine" id="cb18-7" title="7">ls_2d_flat &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> it_N)</a>
<a class="sourceLine" id="cb18-8" title="8">ls_2d &lt;-<span class="st"> </span>ls_2d_flat</a>
<a class="sourceLine" id="cb18-9" title="9"></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co"># Named flat</span></a>
<a class="sourceLine" id="cb18-11" title="11">ls_2d_flat_named &lt;-<span class="st"> </span>ls_2d_flat</a>
<a class="sourceLine" id="cb18-12" title="12"><span class="kw">names</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_N))</a>
<a class="sourceLine" id="cb18-13" title="13">ls_2d_named &lt;-<span class="st"> </span>ls_2d_flat_named</a>
<a class="sourceLine" id="cb18-14" title="14"></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co"># Reshape</span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="kw">dim</span>(ls_2d) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</a>
<a class="sourceLine" id="cb18-17" title="17"><span class="co"># named 2d list can not carry 1d name after reshape</span></a>
<a class="sourceLine" id="cb18-18" title="18"><span class="kw">dim</span>(ls_2d_named) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</a></code></pre></div>
<p>Print Various objects generated above, print list flattened.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># display</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="kw">ffi_lst2str</span>(ls_2d_flat_named)</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_flat_named:e1=NULL;e2=NULL;e3=NULL;e4=NULL;e5=NULL;e6=NULL&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="co"># print(ls_2d_flat_named)</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">ffi_lst2str</span>(ls_2d_named)</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_named:=NULL;=NULL;=NULL;=NULL;=NULL;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">print</span>(ls_2d_named)</a></code></pre></div>
<pre><code>     [,1] [,2] [,3]
[1,] NULL NULL NULL
[2,] NULL NULL NULL</code></pre>
<p>Select element from list:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># Select Values, double bracket to select from 2dim list</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">print</span>(<span class="st">&#39;ls_2d[[1,2]]&#39;</span>)</a></code></pre></div>
<pre><code>[1] &quot;ls_2d[[1,2]]&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">print</span>(ls_2d[[<span class="dv">1</span>,<span class="dv">2</span>]])</a></code></pre></div>
<pre><code>NULL</code></pre>
</div>
<div id="define-two-dimensional-named-list" class="section level4">
<h4><span class="header-section-number">1.1.1.3</span> Define Two Dimensional Named LIst</h4>
<p>For naming two dimensional lists, <em>rowname</em> and <em>colname</em> does not work. Rather, we need to use <em>dimnames</em>. Note that in addition to dimnames, we can continue to have element specific names. Both can co-exist. But note that the element specific names are not preserved after dimension transform, so need to be redefined afterwards.</p>
<p>How to select an element of a two dimensional list:</p>
<ol style="list-style-type: decimal">
<li>row and column names: <em>dimnames</em>, <em>ls_2d_flat_named[[‘row2’,‘col2’]]</em></li>
<li>named elements: <em>names</em>, <em>ls_2d_flat_named[[‘e5’]]</em></li>
<li>select by index: <em>index</em>, <em>ls_2d_flat_named[[5]]</em></li>
<li>converted two dimensional named list to tibble/matrix</li>
</ol>
<p>Neither <em>dimnames</em> nor <em>names</em> are required, but both can be used to select elements.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co"># Dimensions</span></a>
<a class="sourceLine" id="cb29-2" title="2">it_M &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb29-3" title="3">it_Q &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb29-4" title="4">it_N &lt;-<span class="st"> </span>it_M<span class="op">*</span>it_Q</a>
<a class="sourceLine" id="cb29-5" title="5"></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co"># Initiate an Empty MxQ=N element list</span></a>
<a class="sourceLine" id="cb29-7" title="7">ls_2d_flat_named &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> it_N)</a>
<a class="sourceLine" id="cb29-8" title="8"><span class="kw">dim</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</a>
<a class="sourceLine" id="cb29-9" title="9"></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co"># Fill with values</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>,it_Q)) {</a>
<a class="sourceLine" id="cb29-12" title="12">  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>,it_M)) {</a>
<a class="sourceLine" id="cb29-13" title="13">    <span class="co"># linear index</span></a>
<a class="sourceLine" id="cb29-14" title="14">    ls_2d_flat_named[[it_M_ctr, it_Q_ctr]] &lt;-<span class="st"> </span>(it_Q_ctr<span class="dv">-1</span>)<span class="op">*</span>it_M<span class="op">+</span>it_M_ctr</a>
<a class="sourceLine" id="cb29-15" title="15">  }</a>
<a class="sourceLine" id="cb29-16" title="16">}</a>
<a class="sourceLine" id="cb29-17" title="17"></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co"># Replace row names, note rownames does not work</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="kw">dimnames</span>(ls_2d_flat_named)[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;row&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_M))</a>
<a class="sourceLine" id="cb29-20" title="20"><span class="kw">dimnames</span>(ls_2d_flat_named)[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;col&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_Q))</a>
<a class="sourceLine" id="cb29-21" title="21"></a>
<a class="sourceLine" id="cb29-22" title="22"><span class="co"># Element Specific Names</span></a>
<a class="sourceLine" id="cb29-23" title="23"><span class="kw">names</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_N))</a>
<a class="sourceLine" id="cb29-24" title="24"></a>
<a class="sourceLine" id="cb29-25" title="25"><span class="co"># Convert to Matrix</span></a>
<a class="sourceLine" id="cb29-26" title="26">tb_2d_flat_named &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ls_2d_flat_named) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()</a>
<a class="sourceLine" id="cb29-27" title="27">mt_2d_flat_named &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(tb_2d_flat_named)</a></code></pre></div>
<p>Print various objects generated above:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># These are not element names, can still name each element</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="co"># display</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="kw">print</span>(<span class="st">&#39;ls_2d_flat_named&#39;</span>)</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">print</span>(ls_2d_flat_named)</a></code></pre></div>
<pre><code>     col1 col2 col3 col4
row1 1    4    7    10  
row2 2    5    8    11  
row3 3    6    9    12  
attr(,&quot;names&quot;)
 [1] &quot;e1&quot;  &quot;e2&quot;  &quot;e3&quot;  &quot;e4&quot;  &quot;e5&quot;  &quot;e6&quot;  &quot;e7&quot;  &quot;e8&quot;  &quot;e9&quot;  &quot;e10&quot; &quot;e11&quot; &quot;e12&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">print</span>(<span class="st">&#39;tb_2d_flat_named&#39;</span>)</a></code></pre></div>
<pre><code>[1] &quot;tb_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">print</span>(tb_2d_flat_named)</a>
<a class="sourceLine" id="cb36-2" title="2"><span class="kw">print</span>(<span class="st">&#39;mt_2d_flat_named&#39;</span>)</a></code></pre></div>
<pre><code>[1] &quot;mt_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">print</span>(mt_2d_flat_named)</a></code></pre></div>
<pre><code>     col1 col2 col3 col4
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
<p>Select elements from list:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="co"># Select elements with with dimnames</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;row2&#39;</span>,<span class="st">&#39;col2&#39;</span>]])</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_flat_named[[\&quot;row2\&quot;, \&quot;col2\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># Select elements with element names</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;e5&#39;</span>]])</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_flat_named[[\&quot;e5\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co"># Select elements with index</span></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="dv">5</span>]])</a></code></pre></div>
<pre><code>[1] &quot;ls_2d_flat_named[[5]]:=5&quot;</code></pre>
<!-- # Fill values
ls_2d_fill <- ls_2d
ls_2d_fill[1,1] -->

</div>
</div>
</div>
<div id="array" class="section level2">
<h2><span class="header-section-number">1.2</span> Array</h2>

<div id="array-basics" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Array Basics</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="multidimesional-arrays" class="section level4">
<h4><span class="header-section-number">1.2.1.1</span> Multidimesional Arrays</h4>
<div id="generate-2-dimensional-array" class="section level5">
<h5><span class="header-section-number">1.2.1.1.1</span> Generate 2 Dimensional Array</h5>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="co"># Multidimensional Array</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="co"># 1 is r1c1t1, 1.5 in r2c1t1, 0 in r1c2t1, etc.</span></a>
<a class="sourceLine" id="cb46-3" title="3"><span class="co"># Three dimensions, row first, column second, and tensor third</span></a>
<a class="sourceLine" id="cb46-4" title="4">x &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="dt">dim=</span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb46-5" title="5"><span class="kw">dim</span>(x)</a></code></pre></div>
<pre><code>[1] 2 2 2</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>, , 1

     [,1] [,2]
[1,]  1.0    0
[2,]  1.5    2

, , 2

     [,1] [,2]
[1,]    0    0
[2,]    4    3</code></pre>
</div>
</div>
<div id="array-slicing" class="section level4">
<h4><span class="header-section-number">1.2.1.2</span> Array Slicing</h4>
<div id="remove-elements-of-array" class="section level5">
<h5><span class="header-section-number">1.2.1.2.1</span> Remove Elements of Array</h5>
<p>Select elements with direct indexing, or with head and tail functions. Get the first two elements of three elements array.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="co"># Remove last element of array</span></a>
<a class="sourceLine" id="cb50-2" title="2">vars.group.bydf &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</a>
<a class="sourceLine" id="cb50-3" title="3">vars.group.bydf[<span class="op">-</span><span class="kw">length</span>(vars.group.bydf)]</a></code></pre></div>
<pre><code>[1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co"># Use the head function to remove last element</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="kw">head</span>(vars.group.bydf, <span class="dv">-1</span>)</a></code></pre></div>
<pre><code>[1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">head</span>(vars.group.bydf, <span class="dv">2</span>)</a></code></pre></div>
<pre><code>[1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<p>Get last two elements of array.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="co"># Remove first element of array</span></a>
<a class="sourceLine" id="cb56-2" title="2">vars.group.bydf &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</a>
<a class="sourceLine" id="cb56-3" title="3">vars.group.bydf[<span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(vars.group.bydf)]</a></code></pre></div>
<pre><code>[1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="co"># Use Tail function</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="kw">tail</span>(vars.group.bydf, <span class="dv">-1</span>)</a></code></pre></div>
<pre><code>[1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="kw">tail</span>(vars.group.bydf, <span class="dv">2</span>)</a></code></pre></div>
<pre><code>[1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
</div>
</div>
<div id="na-in-array" class="section level4">
<h4><span class="header-section-number">1.2.1.3</span> NA in Array</h4>
<div id="check-if-na-is-in-array" class="section level5">
<h5><span class="header-section-number">1.2.1.3.1</span> Check if NA is in Array</h5>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="co"># Convert Inf and -Inf to NA</span></a>
<a class="sourceLine" id="cb62-2" title="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">-1</span>, <span class="ot">Inf</span>, <span class="dv">10</span>, <span class="op">-</span><span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb62-3" title="3"><span class="kw">na_if</span>(<span class="kw">na_if</span>(x, <span class="op">-</span><span class="ot">Inf</span>), <span class="ot">Inf</span>)</a></code></pre></div>
<pre><code>[1]  1 -1 NA 10 NA</code></pre>

</div>
</div>
</div>
<div id="generate-arrays" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Generate Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-special-arrays" class="section level4">
<h4><span class="header-section-number">1.2.2.1</span> Generate Special Arrays</h4>
<div id="log-space-arrays" class="section level5">
<h5><span class="header-section-number">1.2.2.1.1</span> Log Space Arrays</h5>
<p>Often need to generate arrays on log rather than linear scale, below is log 10 scaled grid.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="co"># Parameters</span></a>
<a class="sourceLine" id="cb64-2" title="2">it.lower.bd.inc.cnt &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb64-3" title="3">fl.log.lower &lt;-<span class="st"> </span><span class="dv">-10</span></a>
<a class="sourceLine" id="cb64-4" title="4">fl.log.higher &lt;-<span class="st"> </span><span class="dv">-9</span></a>
<a class="sourceLine" id="cb64-5" title="5">fl.min.rescale &lt;-<span class="st"> </span><span class="fl">0.01</span></a>
<a class="sourceLine" id="cb64-6" title="6">it.log.count &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb64-7" title="7"><span class="co"># Generate</span></a>
<a class="sourceLine" id="cb64-8" title="8">ar.fl.log.rescaled &lt;-<span class="st"> </span><span class="kw">exp</span>(<span class="kw">log</span>(<span class="dv">10</span>)<span class="op">*</span><span class="kw">seq</span>(<span class="kw">log10</span>(fl.min.rescale),</a>
<a class="sourceLine" id="cb64-9" title="9">                                      <span class="kw">log10</span>(fl.min.rescale <span class="op">+</span></a>
<a class="sourceLine" id="cb64-10" title="10"><span class="st">                                              </span>(fl.log.higher<span class="op">-</span>fl.log.lower)),</a>
<a class="sourceLine" id="cb64-11" title="11">                                      <span class="dt">length.out=</span>it.log.count))</a>
<a class="sourceLine" id="cb64-12" title="12">ar.fl.log &lt;-<span class="st"> </span>ar.fl.log.rescaled <span class="op">+</span><span class="st"> </span>fl.log.lower <span class="op">-</span><span class="st"> </span>fl.min.rescale</a>
<a class="sourceLine" id="cb64-13" title="13"><span class="co"># Print</span></a>
<a class="sourceLine" id="cb64-14" title="14">ar.fl.log</a></code></pre></div>
<pre><code>[1] -10.000000  -9.963430  -9.793123  -9.000000</code></pre>

</div>
</div>
</div>
<div id="string-arrays" class="section level3">
<h3><span class="header-section-number">1.2.3</span> String Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="string-replace" class="section level4">
<h4><span class="header-section-number">1.2.3.1</span> String Replace</h4>
<ul>
<li>r string wildcard replace between regex</li>
<li><a href="https://stackoverflow.com/a/27246520/8280804">R - replace part of a string using wildcards</a></li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="co"># String replacement</span></a>
<a class="sourceLine" id="cb66-2" title="2"><span class="kw">gsub</span>(<span class="dt">x =</span> <span class="kw">paste0</span>(<span class="kw">unique</span>(df.slds.stats.perc<span class="op">$</span>it.inner.counter), <span class="st">&#39;:&#39;</span>,</a>
<a class="sourceLine" id="cb66-3" title="3">                <span class="kw">unique</span>(df.slds.stats.perc<span class="op">$</span>z_n_a_n), <span class="dt">collapse =</span> <span class="st">&#39;;&#39;</span>),</a>
<a class="sourceLine" id="cb66-4" title="4">     <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>,</a>
<a class="sourceLine" id="cb66-5" title="5">     <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb66-6" title="6"><span class="kw">gsub</span>(<span class="dt">x =</span> var,  <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb66-7" title="7"><span class="kw">gsub</span>(<span class="dt">x =</span> var.input,  <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;_&quot;</span>)</a></code></pre></div>
<p>String replaces a segment, search by wildcard. Given the string below, delete all text between carriage return and pound sign:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">st_tex_text &lt;-<span class="st"> &quot;</span><span class="ch">\n</span><span class="st">% Lat2ex Comments</span><span class="ch">\n\\</span><span class="st">newcommand{</span><span class="ch">\\</span><span class="st">exa}{</span><span class="ch">\\</span><span class="st">text{from external file: } </span><span class="ch">\\</span><span class="st">alpha + </span><span class="ch">\\</span><span class="st">beta}</span><span class="ch">\n</span><span class="st">% More LaLatex Comments</span><span class="ch">\n</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb67-2" title="2">st_clean_a1 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">%.*?</span><span class="ch">\\\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>, st_tex_text)</a>
<a class="sourceLine" id="cb67-3" title="3">st_clean_a2 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;L.*?x&quot;</span>, <span class="st">&quot;[LATEX]&quot;</span>, st_tex_text)</a>
<a class="sourceLine" id="cb67-4" title="4"><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</a></code></pre></div>
<pre><code>[1] &quot;st_tex_text:\n% Lat2ex Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More LaLatex Comments\n&quot;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</a></code></pre></div>
<pre><code>[1] &quot;st_clean_a1:\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a2:&#39;</span>, st_clean_a2))</a></code></pre></div>
<pre><code>[1] &quot;st_clean_a2:\n% [LATEX] Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More [LATEX] Comments\n&quot;</code></pre>
<p>String delete after a particular string:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">st_tex_text &lt;-<span class="st"> &quot;</span><span class="ch">\\</span><span class="st">end{equation}</span><span class="ch">\n</span><span class="st">}</span><span class="ch">\n</span><span class="st">% Even more comments from Latex preamble&quot;</span></a>
<a class="sourceLine" id="cb73-2" title="2">st_clean_a1 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\\n</span><span class="st">%.*&quot;</span>,<span class="st">&quot;&quot;</span>, st_tex_text)</a>
<a class="sourceLine" id="cb73-3" title="3"><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</a></code></pre></div>
<pre><code>[1] &quot;st_tex_text:\\end{equation}\n}\n% Even more comments from Latex preamble&quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</a></code></pre></div>
<pre><code>[1] &quot;st_clean_a1:\\end{equation}\n}&quot;</code></pre>
<div id="search-if-and-which-string-contains" class="section level5">
<h5><span class="header-section-number">1.2.3.1.1</span> Search If and Which String Contains</h5>
<ul>
<li>r if string contains</li>
<li>r if string contains either or grepl</li>
<li><a href="https://stackoverflow.com/a/26319765/8280804">Use grepl to search either of multiple substrings in a text</a></li>
</ul>
<p>Search for a single substring in a single string:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">st_example_a &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></a>
<a class="sourceLine" id="cb77-2" title="2">st_example_b &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/_main.html&#39;</span></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="kw">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_a)</a></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_b)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Search for if one of a set of substring exists in a set of strings. In particular which one of the elements of <em>ls_spn</em> contains at least one of the elements of <em>ls_str_if_contains</em>. In the example below, only the first path does not contain either the word <em>aggregate</em> or <em>index</em> in the path. This can be used after all paths have been found recursively in some folder to select only desired paths from the full set of possibilities:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">ls_spn &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C:/Users/fan/R4Econ//panel/basic/fs_genpanel.Rmd&quot;</span>,</a>
<a class="sourceLine" id="cb81-2" title="2">            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/aggregate/_main.Rmd&quot;</span>,</a>
<a class="sourceLine" id="cb81-3" title="3">            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/index/fs_index_populate.Rmd&quot;</span>)</a>
<a class="sourceLine" id="cb81-4" title="4">ls_str_if_contains &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aggregate&quot;</span>, <span class="st">&quot;index&quot;</span>)</a>
<a class="sourceLine" id="cb81-5" title="5">str_if_contains &lt;-<span class="st"> </span><span class="kw">paste</span>(ls_str_if_contains, <span class="dt">collapse =</span> <span class="st">&quot;|&quot;</span>)</a>
<a class="sourceLine" id="cb81-6" title="6"><span class="kw">grepl</span>(str_if_contains, ls_spn)</a></code></pre></div>
<pre><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
</div>
<div id="string-concatenate" class="section level4">
<h4><span class="header-section-number">1.2.3.2</span> String Concatenate</h4>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1"><span class="co"># Simple Collapse</span></a>
<a class="sourceLine" id="cb83-2" title="2">vars.group.by &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;abc&#39;</span>, <span class="st">&#39;efg&#39;</span>)</a>
<a class="sourceLine" id="cb83-3" title="3"><span class="kw">paste0</span>(vars.group.by, <span class="dt">collapse=</span><span class="st">&#39;|&#39;</span>)</a></code></pre></div>
<pre><code>[1] &quot;abc|efg&quot;</code></pre>
</div>
<div id="string-add-leading-zero" class="section level4">
<h4><span class="header-section-number">1.2.3.3</span> String Add Leading Zero</h4>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1"><span class="co"># Add Leading zero for integer values to allow for sorting when</span></a>
<a class="sourceLine" id="cb85-2" title="2"><span class="co"># integers are combined into strings</span></a>
<a class="sourceLine" id="cb85-3" title="3">it_z_n &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb85-4" title="4">it_a_n &lt;-<span class="st"> </span><span class="dv">192</span></a>
<a class="sourceLine" id="cb85-5" title="5"><span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">&quot;%02d&quot;</span>, it_z_n))</a></code></pre></div>
<pre><code>[1] &quot;01&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">&quot;%04d&quot;</span>, it_a_n))</a></code></pre></div>
<pre><code>[1] &quot;0192&quot;</code></pre>
</div>
<div id="substring-and-file-name" class="section level4">
<h4><span class="header-section-number">1.2.3.4</span> Substring and File Name</h4>
<p>From path, get file name without suffix.</p>
<ul>
<li>r string split</li>
<li><a href="https://stackoverflow.com/a/83222/8280804">r list last element</a></li>
<li><a href="https://stackoverflow.com/a/29114007/8280804">r get file name from path</a></li>
<li><a href="https://stackoverflow.com/a/47189541/8280804">r get file path no name</a></li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1">st_example &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></a>
<a class="sourceLine" id="cb89-2" title="2">st_file_wth_suffix &lt;-<span class="st"> </span><span class="kw">tail</span>(<span class="kw">strsplit</span>(st_example, <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]],<span class="dt">n=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb89-3" title="3">st_file_wno_suffix &lt;-<span class="st"> </span><span class="kw">sub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">.Rmd$&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="kw">basename</span>(st_example))</a>
<a class="sourceLine" id="cb89-4" title="4">st_fullpath_nosufx &lt;-<span class="st"> </span><span class="kw">sub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">.Rmd$&#39;</span>, <span class="st">&#39;&#39;</span>, st_example)</a>
<a class="sourceLine" id="cb89-5" title="5">st_lastpath_noname &lt;-<span class="st"> </span>(<span class="kw">dirname</span>(st_example))</a>
<a class="sourceLine" id="cb89-6" title="6">st_fullpath_noname &lt;-<span class="st"> </span><span class="kw">dirname</span>(st_example)</a>
<a class="sourceLine" id="cb89-7" title="7"></a>
<a class="sourceLine" id="cb89-8" title="8"><span class="kw">print</span>(<span class="kw">strsplit</span>(st_example, <span class="st">&quot;/&quot;</span>))</a></code></pre></div>
<pre><code>[[1]]
[1] &quot;C:&quot;                &quot;Users&quot;             &quot;fan&quot;               &quot;R4Econ&quot;            &quot;amto&quot;              &quot;tibble&quot;            &quot;fs_tib_basics.Rmd&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">print</span>(st_file_wth_suffix)</a></code></pre></div>
<pre><code>[1] &quot;fs_tib_basics.Rmd&quot;</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="kw">print</span>(st_file_wno_suffix)</a></code></pre></div>
<pre><code>[1] &quot;fs_tib_basics&quot;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">print</span>(st_fullpath_nosufx)</a></code></pre></div>
<pre><code>[1] &quot;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="kw">print</span>(st_lastpath_noname)</a></code></pre></div>
<pre><code>[1] &quot;C:/Users/fan/R4Econ/amto/tibble&quot;</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">print</span>(st_fullpath_noname)</a></code></pre></div>
<pre><code>[1] &quot;C:/Users/fan/R4Econ/amto/tibble&quot;</code></pre>

</div>
</div>
<div id="mesh-matrices-arrays-and-scalars" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Mesh Matrices, Arrays and Scalars</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r expand.grid meshed array to matrix</li>
<li>r meshgrid</li>
<li>r array to matrix</li>
<li>r reshape array to matrix</li>
<li>dplyr permuations rows of matrix and element of array</li>
<li>tidyr expand_grid mesh matrix and vector</li>
</ul>
<div id="mesh-two-or-more-vectors-with-expand_grid" class="section level4">
<h4><span class="header-section-number">1.2.4.1</span> Mesh Two or More Vectors with expand_grid</h4>
<p>In the example below, we have a matrix that is 2 by 2 (endogenous states), a vector that is 3 by 1 (choices), and another matrix that is 4 by 3 (exogenous states shocks).</p>
<p>We want to generate a tibble dataset that meshes the matrix and the vector, so that all combinations show up. Additionally, we want to add some additional values that are common across all rows to the meshed dataframe.</p>
<p>Note <em>expand_grid</em> is a from tidyr 1.0.0.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1"><span class="co"># A. Generate the 5 by 2 Matrix (ENDO STATES)</span></a>
<a class="sourceLine" id="cb101-2" title="2"><span class="co"># it_child_count = N, the number of children</span></a>
<a class="sourceLine" id="cb101-3" title="3">it_N_child_cnt =<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb101-4" title="4"><span class="co"># P fixed parameters, nN is N dimensional, nP is P dimensional</span></a>
<a class="sourceLine" id="cb101-5" title="5">ar_nN_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out =</span> it_N_child_cnt)</a>
<a class="sourceLine" id="cb101-6" title="6">ar_nN_alpha =<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="dt">length.out =</span> it_N_child_cnt)</a>
<a class="sourceLine" id="cb101-7" title="7">fl_rho =<span class="st"> </span><span class="fl">0.1</span></a>
<a class="sourceLine" id="cb101-8" title="8">fl_lambda =<span class="st"> </span><span class="fl">1.1</span></a>
<a class="sourceLine" id="cb101-9" title="9">mt_nP_A_alpha =<span class="st"> </span><span class="kw">cbind</span>(ar_nN_A, ar_nN_alpha, fl_rho, fl_lambda)</a>
<a class="sourceLine" id="cb101-10" title="10">ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;s_A&#39;</span>, <span class="st">&#39;s_alpha&#39;</span>, <span class="st">&#39;p_rho&#39;</span>, <span class="st">&#39;p_lambda&#39;</span>)</a>
<a class="sourceLine" id="cb101-11" title="11">tb_states_endo &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_nP_A_alpha) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-12" title="12"><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-13" title="13"><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;state_id&quot;</span>) </a>
<a class="sourceLine" id="cb101-14" title="14"></a>
<a class="sourceLine" id="cb101-15" title="15"><span class="co"># B. Choice Grid</span></a>
<a class="sourceLine" id="cb101-16" title="16">it_N_choice_cnt =<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb101-17" title="17">fl_max =<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb101-18" title="18">fl_min =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb101-19" title="19">ar_nN_d =<span class="st"> </span><span class="kw">seq</span>(fl_min, fl_max, <span class="dt">length.out =</span> it_N_choice_cnt)</a>
<a class="sourceLine" id="cb101-20" title="20">ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;c_food&#39;</span>)</a>
<a class="sourceLine" id="cb101-21" title="21">tb_choices &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ar_nN_d) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-22" title="22"><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-23" title="23"><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;choice_id&quot;</span>) </a>
<a class="sourceLine" id="cb101-24" title="24"></a>
<a class="sourceLine" id="cb101-25" title="25"><span class="co"># C. Shock Grid</span></a>
<a class="sourceLine" id="cb101-26" title="26"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb101-27" title="27">it_N_shock_cnt =<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb101-28" title="28">ar_nQ_shocks =<span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(it_N_shock_cnt, <span class="dt">mean=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb101-29" title="29">ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;s_eps&#39;</span>)</a>
<a class="sourceLine" id="cb101-30" title="30">tb_states_exo &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ar_nQ_shocks) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-31" title="31"><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-32" title="32"><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;shock_id&quot;</span>) </a>
<a class="sourceLine" id="cb101-33" title="33"></a>
<a class="sourceLine" id="cb101-34" title="34"><span class="co"># dataframe expand with other non expanded variables</span></a>
<a class="sourceLine" id="cb101-35" title="35">ar_st_varnames &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb101-36" title="36">tb_states_shk_choices &lt;-<span class="st"> </span>tb_states_endo <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-37" title="37"><span class="st">  </span><span class="kw">expand_grid</span>(tb_choices) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-38" title="38"><span class="st">  </span><span class="kw">expand_grid</span>(tb_states_exo) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-39" title="39"><span class="st">  </span><span class="kw">select</span>(state_id, choice_id, shock_id, </a>
<a class="sourceLine" id="cb101-40" title="40">         s_A, s_alpha, s_eps, c_food,</a>
<a class="sourceLine" id="cb101-41" title="41">         p_rho, p_lambda)</a>
<a class="sourceLine" id="cb101-42" title="42">  </a>
<a class="sourceLine" id="cb101-43" title="43"><span class="co"># display</span></a>
<a class="sourceLine" id="cb101-44" title="44"><span class="kw">kable</span>(tb_states_shk_choices) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
state_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
choice_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
shock_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_A
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_alpha
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_eps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
c_food
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_rho
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_lambda
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
</tbody>
</table>
<p>Using expand_grid directly over arrays</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="co"># expand grid with dplyr</span></a>
<a class="sourceLine" id="cb102-2" title="2"><span class="kw">expand_grid</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">z =</span> <span class="dv">-3</span><span class="op">:-</span><span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="mesh-arrays-with-expand.grid" class="section level4">
<h4><span class="header-section-number">1.2.4.2</span> Mesh Arrays with expand.grid</h4>
<p>Given two arrays, mesh the two arrays together.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="co"># use expand.grid to generate all combinations of two arrays</span></a>
<a class="sourceLine" id="cb103-2" title="2"></a>
<a class="sourceLine" id="cb103-3" title="3">it_ar_A =<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb103-4" title="4">it_ar_alpha =<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb103-5" title="5"></a>
<a class="sourceLine" id="cb103-6" title="6">ar_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out=</span>it_ar_A)</a>
<a class="sourceLine" id="cb103-7" title="7">ar_alpha =<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="dt">length.out=</span>it_ar_alpha)</a>
<a class="sourceLine" id="cb103-8" title="8"></a>
<a class="sourceLine" id="cb103-9" title="9">mt_A_alpha =<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">A =</span> ar_A, <span class="dt">alpha =</span> ar_alpha)</a>
<a class="sourceLine" id="cb103-10" title="10"></a>
<a class="sourceLine" id="cb103-11" title="11">mt_A_meshed =<span class="st"> </span>mt_A_alpha[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb103-12" title="12"><span class="kw">dim</span>(mt_A_meshed) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_alpha)</a>
<a class="sourceLine" id="cb103-13" title="13"></a>
<a class="sourceLine" id="cb103-14" title="14">mt_alpha_meshed =<span class="st"> </span>mt_A_alpha[,<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb103-15" title="15"><span class="kw">dim</span>(mt_alpha_meshed) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_alpha)</a>
<a class="sourceLine" id="cb103-16" title="16"></a>
<a class="sourceLine" id="cb103-17" title="17"><span class="co"># display</span></a>
<a class="sourceLine" id="cb103-18" title="18"><span class="kw">kable</span>(mt_A_meshed) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb103-19" title="19"><span class="st">  </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">kable</span>(mt_alpha_meshed) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-2" title="2"><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
</tbody>
</table>
</div>
<p>Two Identical Arrays, individual attributes, each column is an individual for a matrix, and each row is also an individual.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="co"># use expand.grid to generate all combinations of two arrays</span></a>
<a class="sourceLine" id="cb105-2" title="2"></a>
<a class="sourceLine" id="cb105-3" title="3">it_ar_A =<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb105-4" title="4"></a>
<a class="sourceLine" id="cb105-5" title="5">ar_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out=</span>it_ar_A)</a>
<a class="sourceLine" id="cb105-6" title="6">mt_A_A =<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">Arow =</span> ar_A, <span class="dt">Arow =</span> ar_A)</a>
<a class="sourceLine" id="cb105-7" title="7">mt_Arow =<span class="st"> </span>mt_A_A[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb105-8" title="8"><span class="kw">dim</span>(mt_Arow) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_A)</a>
<a class="sourceLine" id="cb105-9" title="9">mt_Acol =<span class="st"> </span>mt_A_A[,<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb105-10" title="10"><span class="kw">dim</span>(mt_Acol) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_A)</a>
<a class="sourceLine" id="cb105-11" title="11"></a>
<a class="sourceLine" id="cb105-12" title="12"><span class="co"># display</span></a>
<a class="sourceLine" id="cb105-13" title="13"><span class="kw">kable</span>(mt_Arow) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb105-14" title="14"><span class="st">  </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1"><span class="kw">kable</span>(mt_Acol) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-2" title="2"><span class="st">  </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="matrix" class="section level2">
<h2><span class="header-section-number">1.3</span> Matrix</h2>

<div id="generate-matrixes" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Generate Matrixes</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="create-a-n-by-2-matrix-from-3-arrays" class="section level4">
<h4><span class="header-section-number">1.3.1.1</span> Create a N by 2 Matrix from 3 arrays</h4>
<p>Names of each array become row names automatically.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1">ar_row_one &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb107-2" title="2">ar_row_two &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb107-3" title="3">ar_row_three &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb107-4" title="4"></a>
<a class="sourceLine" id="cb107-5" title="5">mt_n_by_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</a>
<a class="sourceLine" id="cb107-6" title="6"><span class="kw">kable</span>(mt_n_by_<span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-7" title="7"><span class="st">  </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
ar_row_one
</td>
<td style="text-align:right;">
-1.00
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_two
</td>
<td style="text-align:right;">
-3.00
</td>
<td style="text-align:right;">
-2.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_three
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
</tbody>
</table>
</div>
<div id="name-matrix-columns-and-rows" class="section level4">
<h4><span class="header-section-number">1.3.1.2</span> Name Matrix Columns and Rows</h4>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1"><span class="co"># An empty matrix with Logical NA</span></a>
<a class="sourceLine" id="cb108-2" title="2">mt_named &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb108-3" title="3"><span class="kw">colnames</span>(mt_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;c&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb108-4" title="4"><span class="kw">rownames</span>(mt_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;r&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb108-5" title="5">mt_named</a></code></pre></div>
<pre><code>   c1 c2
r1 NA NA
r2 NA NA</code></pre>
</div>
<div id="generate-na-matrix" class="section level4">
<h4><span class="header-section-number">1.3.1.3</span> Generate NA Matrix</h4>
<ul>
<li><a href="https://stackoverflow.com/a/26724451/8280804">Best way to allocate matrix in R, NULL vs NA?</a></li>
</ul>
<p>Allocate with NA or NA_real_ or NA_int_. Clarity in type definition is preferred.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="co"># An empty matrix with Logical NA</span></a>
<a class="sourceLine" id="cb110-2" title="2">mt_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb110-3" title="3"><span class="kw">str</span>(mt_na)</a></code></pre></div>
<pre><code> logi [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="co"># An empty matrix with numerica NA</span></a>
<a class="sourceLine" id="cb112-2" title="2">mt_fl_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA_real_</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb112-3" title="3">mt_it_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA_integer_</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb112-4" title="4"></a>
<a class="sourceLine" id="cb112-5" title="5"><span class="kw">str</span>(mt_fl_na)</a></code></pre></div>
<pre><code> num [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="kw">str</span>(mt_fl_na)</a></code></pre></div>
<pre><code> num [1:2, 1:2] NA NA NA NA</code></pre>
</div>
<div id="generate-random-matrixes" class="section level4">
<h4><span class="header-section-number">1.3.1.4</span> Generate Random Matrixes</h4>
<p>Random draw from the normal distribution, random draw from the uniform distribution, and combine resulting matrixes.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></a>
<a class="sourceLine" id="cb116-2" title="2">mt_rnorm &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">15</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb116-3" title="3"></a>
<a class="sourceLine" id="cb116-4" title="4"><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></a>
<a class="sourceLine" id="cb116-5" title="5">mt_runif &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">15</span>,<span class="dt">min=</span><span class="dv">0</span>,<span class="dt">max=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb116-6" title="6"></a>
<a class="sourceLine" id="cb116-7" title="7"><span class="co"># Combine</span></a>
<a class="sourceLine" id="cb116-8" title="8">mt_rnorm_runif &lt;-<span class="st"> </span><span class="kw">cbind</span>(mt_rnorm, mt_runif)</a>
<a class="sourceLine" id="cb116-9" title="9"></a>
<a class="sourceLine" id="cb116-10" title="10"><span class="co"># Display</span></a>
<a class="sourceLine" id="cb116-11" title="11"><span class="kw">kable</span>(mt_rnorm_runif) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb116-12" title="12"><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
0.2659726
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
</tr>
<tr>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
1.7869131
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
0.8578277
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
</tr>
<tr>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
0.4978505
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
0.0458312
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-1.9666172
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
0.4422001
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
0.7013559
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
0.7989248
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="linear-algebra" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Linear Algebra</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="matrix-multiplication" class="section level4">
<h4><span class="header-section-number">1.3.2.1</span> Matrix Multiplication</h4>
<p>Multiply Together a 3 by 2 matrix and a 2 by 1 vector</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1">ar_row_one &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb117-2" title="2">ar_row_two &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb117-3" title="3">ar_row_three &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb117-4" title="4">mt_n_by_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</a>
<a class="sourceLine" id="cb117-5" title="5"></a>
<a class="sourceLine" id="cb117-6" title="6">ar_row_four &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb117-7" title="7"></a>
<a class="sourceLine" id="cb117-8" title="8"><span class="co"># Matrix Multiplication</span></a>
<a class="sourceLine" id="cb117-9" title="9">mt_out &lt;-<span class="st"> </span>mt_n_by_<span class="dv">2</span> <span class="op">%*%</span><span class="st"> </span>ar_row_four</a>
<a class="sourceLine" id="cb117-10" title="10"><span class="kw">print</span>(mt_n_by_<span class="dv">2</span>)</a></code></pre></div>
<pre><code>              [,1]  [,2]
ar_row_one   -1.00  1.00
ar_row_two   -3.00 -2.00
ar_row_three  0.35  0.75</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="kw">print</span>(ar_row_four)</a></code></pre></div>
<pre><code>[1] 3 4</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="kw">print</span>(mt_out)</a></code></pre></div>
<pre><code>               [,1]
ar_row_one     1.00
ar_row_two   -17.00
ar_row_three   4.05</code></pre>

</div>
</div>
</div>
<div id="variables-in-dataframes" class="section level2">
<h2><span class="header-section-number">1.4</span> Variables in Dataframes</h2>

<!-- includes:
  in_header: ../../preamble.tex -->
<div id="generate-dataframe" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Generate Dataframe</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-tibble-given-matrixes-and-arrays" class="section level4">
<h4><span class="header-section-number">1.4.1.1</span> Generate Tibble given Matrixes and Arrays</h4>
<p>Given Arrays and Matrixes, Generate Tibble and Name Variables/Columns</p>
<ul>
<li>naming tibble columns</li>
<li>tibble variable names</li>
<li>dplyr rename tibble</li>
<li>dplyr rename tibble all variables</li>
<li>dplyr rename all columns by index</li>
<li>dplyr tibble add index column</li>
<li>see also: <a href="https://stackoverflow.com/questions/45535157/difference-between-dplyrrename-and-dplyrrename-all">SO-51205520</a></li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="co"># Base Inputs</span></a>
<a class="sourceLine" id="cb123-2" title="2">ar_col &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb123-3" title="3">mt_rnorm_a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb123-4" title="4">mt_rnorm_b &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb123-5" title="5"></a>
<a class="sourceLine" id="cb123-6" title="6"><span class="co"># Combine Matrix</span></a>
<a class="sourceLine" id="cb123-7" title="7">mt_combine &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_col, mt_rnorm_a, mt_rnorm_b)</a>
<a class="sourceLine" id="cb123-8" title="8"><span class="kw">colnames</span>(mt_combine) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;ar_col&#39;</span>,</a>
<a class="sourceLine" id="cb123-9" title="9">                          <span class="kw">paste0</span>(<span class="st">&#39;matcolvar_grpa_&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">dim</span>(mt_rnorm_a)[<span class="dv">2</span>])),</a>
<a class="sourceLine" id="cb123-10" title="10">                          <span class="kw">paste0</span>(<span class="st">&#39;matcolvar_grpb_&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">dim</span>(mt_rnorm_b)[<span class="dv">2</span>])))</a>
<a class="sourceLine" id="cb123-11" title="11"></a>
<a class="sourceLine" id="cb123-12" title="12"><span class="co"># Variable Names</span></a>
<a class="sourceLine" id="cb123-13" title="13">ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;var_one&#39;</span>,</a>
<a class="sourceLine" id="cb123-14" title="14">                    <span class="kw">paste0</span>(<span class="st">&#39;tibcolvar_ga_&#39;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb123-15" title="15">                    <span class="kw">paste0</span>(<span class="st">&#39;tibcolvar_gb_&#39;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)))</a>
<a class="sourceLine" id="cb123-16" title="16"></a>
<a class="sourceLine" id="cb123-17" title="17"><span class="co"># Combine to tibble, add name col1, col2, etc.</span></a>
<a class="sourceLine" id="cb123-18" title="18">tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</a>
<a class="sourceLine" id="cb123-19" title="19"></a>
<a class="sourceLine" id="cb123-20" title="20"><span class="co"># Add an index column to the dataframe, ID column</span></a>
<a class="sourceLine" id="cb123-21" title="21">tb_combine &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</a>
<a class="sourceLine" id="cb123-22" title="22"></a>
<a class="sourceLine" id="cb123-23" title="23"><span class="co"># Change all gb variable names</span></a>
<a class="sourceLine" id="cb123-24" title="24">tb_combine &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb123-25" title="25"><span class="st">                  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&quot;tibcolvar_gb_&quot;</span>)),</a>
<a class="sourceLine" id="cb123-26" title="26">                            <span class="kw">funs</span>(<span class="kw">str_replace</span>(., <span class="st">&quot;_gb_&quot;</span>, <span class="st">&quot;_gbrenamed_&quot;</span>)))</a>
<a class="sourceLine" id="cb123-27" title="27"></a>
<a class="sourceLine" id="cb123-28" title="28"><span class="co"># Tibble back to matrix</span></a>
<a class="sourceLine" id="cb123-29" title="29">mt_tb_combine_back &lt;-<span class="st"> </span><span class="kw">data.matrix</span>(tb_combine)</a>
<a class="sourceLine" id="cb123-30" title="30"></a>
<a class="sourceLine" id="cb123-31" title="31"><span class="co"># Display</span></a>
<a class="sourceLine" id="cb123-32" title="32"><span class="kw">kable</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ar_col
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1"><span class="kw">kable</span>(tb_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1"><span class="kw">kable</span>(mt_tb_combine_back) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rename-tibble-with-numeric-column-names" class="section level4">
<h4><span class="header-section-number">1.4.1.2</span> Rename Tibble with Numeric Column Names</h4>
<p>After reshaping, often could end up with variable names that are all numeric, intgers for example, how to rename these variables to add a common prefix for example.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1"><span class="co"># Base Inputs</span></a>
<a class="sourceLine" id="cb126-2" title="2">ar_col &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb126-3" title="3">mt_rnorm_c &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb126-4" title="4">mt_combine &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_col, mt_rnorm_c)</a>
<a class="sourceLine" id="cb126-5" title="5"></a>
<a class="sourceLine" id="cb126-6" title="6"><span class="co"># Variable Names</span></a>
<a class="sourceLine" id="cb126-7" title="7">ar_it_cols_ctr &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">dim</span>(mt_rnorm_c)[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb126-8" title="8">ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;var_one&#39;</span>, ar_it_cols_ctr)</a>
<a class="sourceLine" id="cb126-9" title="9"></a>
<a class="sourceLine" id="cb126-10" title="10"><span class="co"># Combine to tibble, add name col1, col2, etc.</span></a>
<a class="sourceLine" id="cb126-11" title="11">tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</a>
<a class="sourceLine" id="cb126-12" title="12"></a>
<a class="sourceLine" id="cb126-13" title="13"><span class="co"># Add an index column to the dataframe, ID column</span></a>
<a class="sourceLine" id="cb126-14" title="14">tb_combine_ori &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</a>
<a class="sourceLine" id="cb126-15" title="15"></a>
<a class="sourceLine" id="cb126-16" title="16"><span class="co"># Change all gb variable names</span></a>
<a class="sourceLine" id="cb126-17" title="17">tb_combine &lt;-<span class="st"> </span>tb_combine_ori <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-18" title="18"><span class="st">                  </span><span class="kw">rename_at</span>(</a>
<a class="sourceLine" id="cb126-19" title="19">                    <span class="kw">vars</span>(<span class="kw">num_range</span>(<span class="st">&#39;&#39;</span>,ar_it_cols_ctr)),</a>
<a class="sourceLine" id="cb126-20" title="20">                    <span class="kw">funs</span>(<span class="kw">paste0</span>(<span class="st">&quot;rho&quot;</span>, . , <span class="st">&#39;var&#39;</span>))</a>
<a class="sourceLine" id="cb126-21" title="21">                    )</a>
<a class="sourceLine" id="cb126-22" title="22"></a>
<a class="sourceLine" id="cb126-23" title="23"><span class="co"># Display</span></a>
<a class="sourceLine" id="cb126-24" title="24"><span class="kw">kable</span>(tb_combine_ori) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
6
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
7
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
8
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
9
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
10
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1"><span class="kw">kable</span>(tb_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho1var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho2var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho3var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho4var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho5var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho6var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho7var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho8var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho9var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho10var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
0.3297912
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="tibble-row-and-column-and-summarize" class="section level4">
<h4><span class="header-section-number">1.4.1.3</span> Tibble Row and Column and Summarize</h4>
<p>Show what is in the table: 1, column and row names; 2, contents inside table.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1">tb_iris &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(iris)</a>
<a class="sourceLine" id="cb128-2" title="2"><span class="kw">print</span>(<span class="kw">rownames</span>(tb_iris))</a></code></pre></div>
<pre><code>  [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot;  &quot;12&quot;  &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot;  &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot;  &quot;22&quot;  &quot;23&quot;  &quot;24&quot; 
 [25] &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot;  &quot;33&quot;  &quot;34&quot;  &quot;35&quot;  &quot;36&quot;  &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot;  &quot;43&quot;  &quot;44&quot;  &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot; 
 [49] &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot;  &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot;  &quot;61&quot;  &quot;62&quot;  &quot;63&quot;  &quot;64&quot;  &quot;65&quot;  &quot;66&quot;  &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot; 
 [73] &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot;  &quot;78&quot;  &quot;79&quot;  &quot;80&quot;  &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot;  &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot;  &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot; 
 [97] &quot;97&quot;  &quot;98&quot;  &quot;99&quot;  &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot; &quot;106&quot; &quot;107&quot; &quot;108&quot; &quot;109&quot; &quot;110&quot; &quot;111&quot; &quot;112&quot; &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot;
[121] &quot;121&quot; &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot; &quot;127&quot; &quot;128&quot; &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot; &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot; &quot;144&quot;
[145] &quot;145&quot; &quot;146&quot; &quot;147&quot; &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">colnames</span>(tb_iris)</a></code></pre></div>
<pre><code>[1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;     </code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">colnames</span>(tb_iris)</a></code></pre></div>
<pre><code>[1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;     </code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="kw">summary</span>(tb_iris)</a></code></pre></div>
<pre><code>  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
 Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  
 1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  
 Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  
 Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  
 3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  
 Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500                  </code></pre>
</div>
<div id="tibble-sorting" class="section level4">
<h4><span class="header-section-number">1.4.1.4</span> Tibble Sorting</h4>
<ul>
<li>dplyr arrange desc reverse</li>
<li>dplyr sort</li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1"><span class="co"># Sort in Ascending Order</span></a>
<a class="sourceLine" id="cb136-2" title="2">tb_iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species, Sepal.Length, <span class="kw">everything</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb136-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(Species, Sepal.Length) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb136-4" title="4"><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.1
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="co"># Sort in Descending Order</span></a>
<a class="sourceLine" id="cb137-2" title="2">tb_iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species, Sepal.Length, <span class="kw">everything</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Species), <span class="kw">desc</span>(Sepal.Length)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-4" title="4"><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.4
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.6
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
</tbody>
</table>
</div>
<div id="recontools-summarize-over-tible" class="section level4">
<h4><span class="header-section-number">1.4.1.5</span> REconTools Summarize over Tible</h4>
<p>Use R4Econ’s summary tool.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1">df_summ_stats &lt;-<span class="st"> </span><span class="kw">ff_summ_percentiles</span>(tb_iris)</a>
<a class="sourceLine" id="cb138-2" title="2"><span class="kw">kable</span>(<span class="kw">t</span>(df_summ_stats)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
stats
</td>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
NAobs
</td>
<td style="text-align:left;">
ZEROobs
</td>
<td style="text-align:left;">
mean
</td>
<td style="text-align:left;">
sd
</td>
<td style="text-align:left;">
cv
</td>
<td style="text-align:left;">
min
</td>
<td style="text-align:left;">
p01
</td>
<td style="text-align:left;">
p05
</td>
<td style="text-align:left;">
p10
</td>
<td style="text-align:left;">
p25
</td>
<td style="text-align:left;">
p50
</td>
<td style="text-align:left;">
p75
</td>
<td style="text-align:left;">
p90
</td>
<td style="text-align:left;">
p95
</td>
<td style="text-align:left;">
p99
</td>
<td style="text-align:left;">
max
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.758000
</td>
<td style="text-align:left;">
1.7652982
</td>
<td style="text-align:left;">
0.4697441
</td>
<td style="text-align:left;">
1.0
</td>
<td style="text-align:left;">
1.149
</td>
<td style="text-align:left;">
1.300
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
4.35
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.100
</td>
<td style="text-align:left;">
6.700
</td>
<td style="text-align:left;">
6.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1.199333
</td>
<td style="text-align:left;">
0.7622377
</td>
<td style="text-align:left;">
0.6355511
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.100
</td>
<td style="text-align:left;">
0.200
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
1.30
</td>
<td style="text-align:left;">
1.8
</td>
<td style="text-align:left;">
2.20
</td>
<td style="text-align:left;">
2.300
</td>
<td style="text-align:left;">
2.500
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
5.843333
</td>
<td style="text-align:left;">
0.8280661
</td>
<td style="text-align:left;">
0.1417113
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
4.400
</td>
<td style="text-align:left;">
4.600
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.4
</td>
<td style="text-align:left;">
6.90
</td>
<td style="text-align:left;">
7.255
</td>
<td style="text-align:left;">
7.700
</td>
<td style="text-align:left;">
7.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.057333
</td>
<td style="text-align:left;">
0.4358663
</td>
<td style="text-align:left;">
0.1425642
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
2.200
</td>
<td style="text-align:left;">
2.345
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
2.8
</td>
<td style="text-align:left;">
3.00
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
3.61
</td>
<td style="text-align:left;">
3.800
</td>
<td style="text-align:left;">
4.151
</td>
<td style="text-align:left;">
4.4
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="factor-label-and-combine" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Factor Label and Combine</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="factor-label-cross-and-graph" class="section level4">
<h4><span class="header-section-number">1.4.2.1</span> Factor, Label, Cross and Graph</h4>
<p>Generate a Scatter plot with different colors representing different categories. There are multiple underlying factor/categorical variables, for example two binary variables. Generate scatter plot with colors for the combinations of these two binary variables.</p>
<p>We combine here the <em>vs</em> and <em>am</em> variables from the <em>mtcars</em> dataset. <em>vs</em> is engine shape, <em>am</em> is auto or manual shift. We will generate a scatter plot of <em>mpg</em> and <em>qsec</em> over four categories with different colors.</p>
<ul>
<li><em>am</em>: Transmission (0 = automatic, 1 = manual)</li>
<li><em>vs</em>: Engine (0 = V-shaped, 1 = straight)</li>
<li><em>mpg</em>: miles per galon</li>
<li><em>qsec</em>: 1/4 mile time</li>
</ul>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1"><span class="co"># First make sure these are factors</span></a>
<a class="sourceLine" id="cb139-2" title="2">tb_mtcars &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mtcars) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb139-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs =</span> <span class="kw">as_factor</span>(vs), <span class="dt">am =</span> <span class="kw">as_factor</span>(am))</a>
<a class="sourceLine" id="cb139-4" title="4"></a>
<a class="sourceLine" id="cb139-5" title="5"><span class="co"># Second Label the Factors</span></a>
<a class="sourceLine" id="cb139-6" title="6">am_levels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">auto_shift =</span> <span class="st">&quot;0&quot;</span>, <span class="dt">manual_shift =</span> <span class="st">&quot;1&quot;</span>)</a>
<a class="sourceLine" id="cb139-7" title="7">vs_levels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">vshaped_engine =</span> <span class="st">&quot;0&quot;</span>, <span class="dt">straight_engine =</span> <span class="st">&quot;1&quot;</span>)</a>
<a class="sourceLine" id="cb139-8" title="8">tb_mtcars &lt;-<span class="st"> </span>tb_mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb139-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs =</span> <span class="kw">fct_recode</span>(vs, <span class="op">!!!</span>vs_levels),</a>
<a class="sourceLine" id="cb139-10" title="10">         <span class="dt">am =</span> <span class="kw">fct_recode</span>(am, <span class="op">!!!</span>am_levels))</a>
<a class="sourceLine" id="cb139-11" title="11"></a>
<a class="sourceLine" id="cb139-12" title="12"><span class="co"># Third Combine Factors</span></a>
<a class="sourceLine" id="cb139-13" title="13">tb_mtcars_selected &lt;-<span class="st"> </span>tb_mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs_am =</span> <span class="kw">fct_cross</span>(vs, am, <span class="dt">sep=</span><span class="st">&#39;_&#39;</span>, <span class="dt">keep_empty =</span> <span class="ot">FALSE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-15" title="15"><span class="st">  </span><span class="kw">select</span>(mpg, qsec, vs_am)</a>
<a class="sourceLine" id="cb139-16" title="16"><span class="kw">print</span>(tb_mtcars_selected)</a></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1"><span class="co"># Labeling</span></a>
<a class="sourceLine" id="cb140-2" title="2">st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Distribution of MPG and QSEC from mtcars&#39;</span>)</a>
<a class="sourceLine" id="cb140-3" title="3">st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</a>
<a class="sourceLine" id="cb140-4" title="4">                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_factors.html&#39;</span>)</a>
<a class="sourceLine" id="cb140-5" title="5">st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</a>
<a class="sourceLine" id="cb140-6" title="6">                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</a>
<a class="sourceLine" id="cb140-7" title="7">st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></a>
<a class="sourceLine" id="cb140-8" title="8">st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></a>
<a class="sourceLine" id="cb140-9" title="9"></a>
<a class="sourceLine" id="cb140-10" title="10"><span class="co"># Graphing</span></a>
<a class="sourceLine" id="cb140-11" title="11">plt_mtcars_scatter &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb140-12" title="12"><span class="st">  </span><span class="kw">ggplot</span>(tb_mtcars_selected, </a>
<a class="sourceLine" id="cb140-13" title="13">         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, <span class="dt">colour=</span>vs_am, <span class="dt">shape=</span>vs_am)) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-14" title="14"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-15" title="15"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</a>
<a class="sourceLine" id="cb140-16" title="16">       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-17" title="17"><span class="st">  </span><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb140-18" title="18"></a>
<a class="sourceLine" id="cb140-19" title="19"><span class="co"># show</span></a>
<a class="sourceLine" id="cb140-20" title="20"><span class="kw">print</span>(plt_mtcars_scatter)</a></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-37-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
<div id="drawly-random-rows" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Drawly Random Rows</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="draw-random-subset-of-sample" class="section level4">
<h4><span class="header-section-number">1.4.3.1</span> Draw Random Subset of Sample</h4>
<ul>
<li>r random discrete</li>
</ul>
<p>We have a sample of N individuals in some dataframe. Draw without replacement a subset <span class="math inline">\(M&lt;N\)</span> of rows.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1"><span class="co"># parameters, it_M &lt; it_N</span></a>
<a class="sourceLine" id="cb141-2" title="2">it_N &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb141-3" title="3">it_M &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb141-4" title="4"></a>
<a class="sourceLine" id="cb141-5" title="5"><span class="co"># Draw it_m from indexed list of it_N</span></a>
<a class="sourceLine" id="cb141-6" title="6"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb141-7" title="7">ar_it_rand_idx &lt;-<span class="st"> </span><span class="kw">sample</span>(it_N, it_M, <span class="dt">replace=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb141-8" title="8"></a>
<a class="sourceLine" id="cb141-9" title="9"><span class="co"># dataframe</span></a>
<a class="sourceLine" id="cb141-10" title="10">df_full &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span><span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</a>
<a class="sourceLine" id="cb141-11" title="11"></a>
<a class="sourceLine" id="cb141-12" title="12"><span class="co"># random Subset</span></a>
<a class="sourceLine" id="cb141-13" title="13">df_rand_sub_a &lt;-<span class="st"> </span>df_full[ar_it_rand_idx,]</a>
<a class="sourceLine" id="cb141-14" title="14"></a>
<a class="sourceLine" id="cb141-15" title="15"><span class="co"># Random subset also</span></a>
<a class="sourceLine" id="cb141-16" title="16">df_rand_sub_b &lt;-<span class="st"> </span>df_full[<span class="kw">sample</span>(<span class="kw">dim</span>(df_full)[<span class="dv">1</span>], it_M, <span class="dt">replace=</span><span class="ot">FALSE</span>),]</a>
<a class="sourceLine" id="cb141-17" title="17"></a>
<a class="sourceLine" id="cb141-18" title="18"><span class="co"># Print</span></a>
<a class="sourceLine" id="cb141-19" title="19"><span class="co"># Display</span></a>
<a class="sourceLine" id="cb141-20" title="20"><span class="kw">kable</span>(df_full) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="kw">kable</span>(df_rand_sub_a) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1"><span class="kw">kable</span>(df_rand_sub_b) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
</tbody>
</table>
</div>
<div id="random-subset-of-panel" class="section level4">
<h4><span class="header-section-number">1.4.3.2</span> Random Subset of Panel</h4>
<p>There are <span class="math inline">\(N\)</span> individuals, each could be observed <span class="math inline">\(M\)</span> times, but then select a subset of rows only, so each person is randomly observed only a subset of times. Specifically, there there are 3 unique students with student ids, and the second variable shows the random dates in which the student showed up in class, out of the 10 classes available.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" title="1"><span class="co"># Define</span></a>
<a class="sourceLine" id="cb144-2" title="2">it_N &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb144-3" title="3">it_M &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb144-4" title="4">svr_id &lt;-<span class="st"> &#39;student_id&#39;</span></a>
<a class="sourceLine" id="cb144-5" title="5"></a>
<a class="sourceLine" id="cb144-6" title="6"><span class="co"># dataframe</span></a>
<a class="sourceLine" id="cb144-7" title="7"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb144-8" title="8">df_panel_rand &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(it_M, <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span><span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-9" title="9"><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> svr_id) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-10" title="10"><span class="st">  </span><span class="kw">uncount</span>(V1) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-11" title="11"><span class="st">  </span><span class="kw">group_by</span>(<span class="op">!!</span><span class="kw">sym</span>(svr_id)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-12" title="12"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">in_class =</span> <span class="kw">case_when</span>(<span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-13" title="13"><span class="st">  </span><span class="kw">filter</span>(in_class <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">!!</span><span class="kw">sym</span>(svr_id), date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-14" title="14"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">date_in_class =</span> date)</a>
<a class="sourceLine" id="cb144-15" title="15"></a>
<a class="sourceLine" id="cb144-16" title="16"><span class="co"># Print</span></a>
<a class="sourceLine" id="cb144-17" title="17"><span class="kw">kable</span>(df_panel_rand) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
student_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date_in_class
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
9
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="generate-variables-conditional-on-others" class="section level3">
<h3><span class="header-section-number">1.4.4</span> Generate Variables Conditional On Others</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="case_when-basic-example" class="section level4">
<h4><span class="header-section-number">1.4.4.1</span> case_when Basic Example</h4>
<p>Given several other variables, and generate a new variable when these varaibles satisfy conditions. Note that case_when are ifelse type statements. So below</p>
<ol style="list-style-type: decimal">
<li>group one is below 16 MPG</li>
<li>when do <em>qsec &gt;= 20</em> second line that is elseif, only those that are <em>&gt;=16</em> are considered here</li>
<li>then think about two dimensional mpg and qsec grid, the lower-right area, give another category to manual cars in that group</li>
</ol>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1"><span class="co"># Get mtcars</span></a>
<a class="sourceLine" id="cb145-2" title="2">df_mtcars &lt;-<span class="st"> </span>mtcars</a>
<a class="sourceLine" id="cb145-3" title="3"></a>
<a class="sourceLine" id="cb145-4" title="4"><span class="co"># case_when with mtcars</span></a>
<a class="sourceLine" id="cb145-5" title="5">df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_qsec_am_grp =</span> </a>
<a class="sourceLine" id="cb145-7" title="7">           <span class="kw">case_when</span>(mpg <span class="op">&lt;</span><span class="st"> </span><span class="dv">16</span> <span class="op">~</span><span class="st"> &quot;&lt; 16 MPG&quot;</span>,</a>
<a class="sourceLine" id="cb145-8" title="8">                     qsec <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</a>
<a class="sourceLine" id="cb145-9" title="9">                     am <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</a>
<a class="sourceLine" id="cb145-10" title="10">                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Others&quot;</span>))</a>
<a class="sourceLine" id="cb145-11" title="11"></a>
<a class="sourceLine" id="cb145-12" title="12"><span class="co"># # For dataframe</span></a>
<a class="sourceLine" id="cb145-13" title="13"><span class="co"># df.reg &lt;-df.reg %&gt;% na_if(-Inf) %&gt;% na_if(Inf)</span></a>
<a class="sourceLine" id="cb145-14" title="14"><span class="co"># # For a specific variable in dataframe</span></a>
<a class="sourceLine" id="cb145-15" title="15"><span class="co"># df.reg.use %&gt;% mutate(!!(var.input) := na_if(!!sym(var.input), 0))</span></a>
<a class="sourceLine" id="cb145-16" title="16"><span class="co"># </span></a>
<a class="sourceLine" id="cb145-17" title="17"><span class="co"># # Setting to NA</span></a>
<a class="sourceLine" id="cb145-18" title="18"><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></a>
<a class="sourceLine" id="cb145-19" title="19"><span class="co"># df.reg.use.log &lt;- df.reg.use</span></a>
<a class="sourceLine" id="cb145-20" title="20"><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></a>
<a class="sourceLine" id="cb145-21" title="21"><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></a>
<a class="sourceLine" id="cb145-22" title="22"><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></a>
<a class="sourceLine" id="cb145-23" title="23"><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></a>
<a class="sourceLine" id="cb145-24" title="24"><span class="co"># # df.reg.use.log$prot.imputed.log</span></a></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" title="1"><span class="co"># Labeling</span></a>
<a class="sourceLine" id="cb146-2" title="2">st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Use case_when To Generate ifelse Groupings&#39;</span>)</a>
<a class="sourceLine" id="cb146-3" title="3">st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</a>
<a class="sourceLine" id="cb146-4" title="4">                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</a>
<a class="sourceLine" id="cb146-5" title="5">st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</a>
<a class="sourceLine" id="cb146-6" title="6">                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</a>
<a class="sourceLine" id="cb146-7" title="7">st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></a>
<a class="sourceLine" id="cb146-8" title="8">st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></a>
<a class="sourceLine" id="cb146-9" title="9"></a>
<a class="sourceLine" id="cb146-10" title="10"><span class="co"># Graphing</span></a>
<a class="sourceLine" id="cb146-11" title="11">plt_mtcars_casewhen_scatter &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb146-12" title="12"><span class="st">  </span><span class="kw">ggplot</span>(df_mtcars, </a>
<a class="sourceLine" id="cb146-13" title="13">         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, </a>
<a class="sourceLine" id="cb146-14" title="14">             <span class="dt">colour=</span>mpg_qsec_am_grp, </a>
<a class="sourceLine" id="cb146-15" title="15">             <span class="dt">shape=</span>mpg_qsec_am_grp)) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-16" title="16"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-17" title="17"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</a>
<a class="sourceLine" id="cb146-18" title="18">       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-19" title="19"><span class="st">  </span><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb146-20" title="20"></a>
<a class="sourceLine" id="cb146-21" title="21"><span class="co"># show</span></a>
<a class="sourceLine" id="cb146-22" title="22"><span class="kw">print</span>(plt_mtcars_casewhen_scatter)</a></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-42-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="generate-na-values-if-variables-have-certain-value" class="section level4">
<h4><span class="header-section-number">1.4.4.2</span> Generate NA values if Variables have Certain Value</h4>
<p>In the example below, in one line:</p>
<ol style="list-style-type: decimal">
<li>generate a random standard normal vector</li>
<li>two set na methods:
<ul>
<li>if the value of the standard normal is negative, set value to -999, otherwise MPG, replace the value <em>-999</em> with <em>NA</em></li>
<li>case_when only with type specific NA values</li>
<li><a href="https://github.com/tidyverse/dplyr/issues/3202#issuecomment-343601409">Assigning NA yields error in case_when</a></li>
<li>note we need to conform NA to type</li>
</ul></li>
<li>generate new categorical variable based on NA condition using is.na with both string and numeric NAs jointly considered.
<ul>
<li>fake NA string to be printed on chart</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="co"># Get mtcars</span></a>
<a class="sourceLine" id="cb147-2" title="2">df_mtcars &lt;-<span class="st"> </span>mtcars</a>
<a class="sourceLine" id="cb147-3" title="3"></a>
<a class="sourceLine" id="cb147-4" title="4"><span class="co"># Make some values of mpg randomly NA</span></a>
<a class="sourceLine" id="cb147-5" title="5"><span class="co"># the NA has to conform to the type of the remaining values for the new variable</span></a>
<a class="sourceLine" id="cb147-6" title="6"><span class="co"># NA_real_, NA_character_, NA_integer_, NA_complex_</span></a>
<a class="sourceLine" id="cb147-7" title="7"><span class="kw">set.seed</span>(<span class="dv">2341</span>)</a>
<a class="sourceLine" id="cb147-8" title="8">df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA1 =</span> <span class="kw">na_if</span>(</a>
<a class="sourceLine" id="cb147-10" title="10">    <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb147-11" title="11">      <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">-999</span>, </a>
<a class="sourceLine" id="cb147-12" title="12">      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>mpg), </a>
<a class="sourceLine" id="cb147-13" title="13">    <span class="dv">-999</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA2 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb147-15" title="15">    <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_real_</span>, </a>
<a class="sourceLine" id="cb147-16" title="16">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-17" title="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA3 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb147-18" title="18">    <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_character_</span>, </a>
<a class="sourceLine" id="cb147-19" title="19">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;shock &gt; 0 string&quot;</span>))</a>
<a class="sourceLine" id="cb147-20" title="20">  </a>
<a class="sourceLine" id="cb147-21" title="21"><span class="co"># Generate New Variables based on if mpg_wth_NA is NA or not</span></a>
<a class="sourceLine" id="cb147-22" title="22"><span class="co"># same variable as above, but now first a category based on if NA</span></a>
<a class="sourceLine" id="cb147-23" title="23"><span class="co"># And we generate a fake string &quot;NA&quot; variable, this is not NA</span></a>
<a class="sourceLine" id="cb147-24" title="24"><span class="co"># the String NA allows for it to be printed on figure</span></a>
<a class="sourceLine" id="cb147-25" title="25">df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-26" title="26"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group_with_na =</span> </a>
<a class="sourceLine" id="cb147-27" title="27">           <span class="kw">case_when</span>(<span class="kw">is.na</span>(mpg_wth_NA2) <span class="op">&amp;</span><span class="st"> </span><span class="kw">is.na</span>(mpg_wth_NA3) <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-28" title="28"><span class="st">                       &quot;Rand String and Rand Numeric both NA&quot;</span>, </a>
<a class="sourceLine" id="cb147-29" title="29">                     mpg <span class="op">&lt;</span><span class="st"> </span><span class="dv">16</span> <span class="op">~</span><span class="st"> &quot;&lt; 16 MPG&quot;</span>,</a>
<a class="sourceLine" id="cb147-30" title="30">                     qsec <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</a>
<a class="sourceLine" id="cb147-31" title="31">                     am <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</a>
<a class="sourceLine" id="cb147-32" title="32">                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Fake String NA&quot;</span>))</a>
<a class="sourceLine" id="cb147-33" title="33"></a>
<a class="sourceLine" id="cb147-34" title="34"><span class="co"># show</span></a>
<a class="sourceLine" id="cb147-35" title="35"><span class="kw">kable</span>(<span class="kw">head</span>(df_mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&#39;mpg&#39;</span>)),<span class="dv">13</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-36" title="36"><span class="st">  </span><span class="kw">kable_styling_fc</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" title="1"><span class="co"># # Setting to NA</span></a>
<a class="sourceLine" id="cb148-2" title="2"><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></a>
<a class="sourceLine" id="cb148-3" title="3"><span class="co"># df.reg.use.log &lt;- df.reg.use</span></a>
<a class="sourceLine" id="cb148-4" title="4"><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></a>
<a class="sourceLine" id="cb148-5" title="5"><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></a>
<a class="sourceLine" id="cb148-6" title="6"><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></a>
<a class="sourceLine" id="cb148-7" title="7"><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></a>
<a class="sourceLine" id="cb148-8" title="8"><span class="co"># # df.reg.use.log$prot.imputed.log</span></a></code></pre></div>
<p>Now we generate scatter plot based on the combined factors, but now with the NA category</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="co"># Labeling</span></a>
<a class="sourceLine" id="cb149-2" title="2">st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Use na_if and is.na to Generate and Distinguish NA Values</span><span class="ch">\n</span><span class="st">&#39;</span>,</a>
<a class="sourceLine" id="cb149-3" title="3">                   <span class="st">&#39;NA_real_, NA_character_, NA_integer_, NA_complex_&#39;</span>)</a>
<a class="sourceLine" id="cb149-4" title="4">st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</a>
<a class="sourceLine" id="cb149-5" title="5">                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</a>
<a class="sourceLine" id="cb149-6" title="6">st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</a>
<a class="sourceLine" id="cb149-7" title="7">                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</a>
<a class="sourceLine" id="cb149-8" title="8">st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></a>
<a class="sourceLine" id="cb149-9" title="9">st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></a>
<a class="sourceLine" id="cb149-10" title="10"></a>
<a class="sourceLine" id="cb149-11" title="11"><span class="co"># Graphing</span></a>
<a class="sourceLine" id="cb149-12" title="12">plt_mtcars_ifisna_scatter &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb149-13" title="13"><span class="st">  </span><span class="kw">ggplot</span>(df_mtcars, </a>
<a class="sourceLine" id="cb149-14" title="14">         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, </a>
<a class="sourceLine" id="cb149-15" title="15">             <span class="dt">colour=</span>group_with_na, </a>
<a class="sourceLine" id="cb149-16" title="16">             <span class="dt">shape=</span>group_with_na)) <span class="op">+</span></a>
<a class="sourceLine" id="cb149-17" title="17"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb149-18" title="18"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</a>
<a class="sourceLine" id="cb149-19" title="19">       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></a>
<a class="sourceLine" id="cb149-20" title="20"><span class="st">  </span><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb149-21" title="21"></a>
<a class="sourceLine" id="cb149-22" title="22"><span class="co"># show</span></a>
<a class="sourceLine" id="cb149-23" title="23"><span class="kw">print</span>(plt_mtcars_ifisna_scatter)</a></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-44-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="approximate-values-comparison" class="section level4">
<h4><span class="header-section-number">1.4.4.3</span> Approximate Values Comparison</h4>
<ul>
<li>r values almost the same</li>
<li><a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/all.equal.html">all.equal</a></li>
</ul>
<p>From numeric approximation, often values are very close, and should be set to equal. Use <em>isTRUE(all.equal)</em>. In the example below, we randomly generates four arrays. Two of the arrays have slightly higher variance, two arrays have slightly lower variance. They sd are to be 10 times below or 10 times above the tolerance comparison level. The values are not the same in any of the columns, but by allowing for almost true given some tolerance level, in the low standard deviation case, the values differences are within tolerance, so they are equal.</p>
<p>This is an essential issue when dealing with optimization results.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" title="1"><span class="co"># Set tolerance </span></a>
<a class="sourceLine" id="cb150-2" title="2">tol_lvl =<span class="st"> </span><span class="fl">1.5e-3</span></a>
<a class="sourceLine" id="cb150-3" title="3">sd_lower_than_tol =<span class="st"> </span>tol_lvl<span class="op">/</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb150-4" title="4">sd_higher_than_tol =<span class="st"> </span>tol_lvl<span class="op">*</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb150-5" title="5"></a>
<a class="sourceLine" id="cb150-6" title="6"><span class="co"># larger SD</span></a>
<a class="sourceLine" id="cb150-7" title="7"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb150-8" title="8">mt_runif_standard &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span>sd_higher_than_tol), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb150-9" title="9"></a>
<a class="sourceLine" id="cb150-10" title="10"><span class="co"># small SD</span></a>
<a class="sourceLine" id="cb150-11" title="11"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb150-12" title="12">mt_rnorm_small_sd &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span>sd_lower_than_tol), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb150-13" title="13"></a>
<a class="sourceLine" id="cb150-14" title="14"><span class="co"># Generates Random Matirx</span></a>
<a class="sourceLine" id="cb150-15" title="15">tb_rnorm_runif &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">cbind</span>(mt_rnorm_small_sd, mt_runif_standard))</a>
<a class="sourceLine" id="cb150-16" title="16"></a>
<a class="sourceLine" id="cb150-17" title="17"><span class="co"># Are Variables the same, not for strict comparison</span></a>
<a class="sourceLine" id="cb150-18" title="18">tb_rnorm_runif_approxi_same &lt;-<span class="st"> </span>tb_rnorm_runif <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb150-19" title="19"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">V1_V2_ALMOST_SAME =</span> </a>
<a class="sourceLine" id="cb150-20" title="20">           <span class="kw">case_when</span>(<span class="kw">isTRUE</span>(<span class="kw">all.equal</span>(V1, V2, <span class="dt">tolerance=</span>tol_lvl)) <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb150-21" title="21"><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</a>
<a class="sourceLine" id="cb150-22" title="22">                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb150-23" title="23"><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb150-24" title="24"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">V3_V4_ALMOST_SAME =</span></a>
<a class="sourceLine" id="cb150-25" title="25">           <span class="kw">case_when</span>(<span class="kw">isTRUE</span>(<span class="kw">all.equal</span>(V3, V4, <span class="dt">tolerance=</span>tol_lvl)) <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb150-26" title="26"><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</a>
<a class="sourceLine" id="cb150-27" title="27">                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb150-28" title="28"><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>)))</a>
<a class="sourceLine" id="cb150-29" title="29"></a>
<a class="sourceLine" id="cb150-30" title="30"><span class="co"># Pring</span></a>
<a class="sourceLine" id="cb150-31" title="31"><span class="kw">kable</span>(tb_rnorm_runif_approxi_same) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V1_V2_ALMOST_SAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V3_V4_ALMOST_SAME
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-0.0000841
</td>
<td style="text-align:right;">
0.0002573
</td>
<td style="text-align:right;">
-0.0084071
</td>
<td style="text-align:right;">
0.0257260
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0000345
</td>
<td style="text-align:right;">
0.0000691
</td>
<td style="text-align:right;">
-0.0034527
</td>
<td style="text-align:right;">
0.0069137
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0002338
</td>
<td style="text-align:right;">
-0.0001898
</td>
<td style="text-align:right;">
0.0233806
</td>
<td style="text-align:right;">
-0.0189759
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000106
</td>
<td style="text-align:right;">
-0.0001030
</td>
<td style="text-align:right;">
0.0010576
</td>
<td style="text-align:right;">
-0.0103028
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000194
</td>
<td style="text-align:right;">
-0.0000668
</td>
<td style="text-align:right;">
0.0019393
</td>
<td style="text-align:right;">
-0.0066849
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="string-values" class="section level3">
<h3><span class="header-section-number">1.4.5</span> String Values</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="find-and-replace" class="section level4">
<h4><span class="header-section-number">1.4.5.1</span> Find and Replace</h4>
<p>Find and Replace in Dataframe.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1"><span class="co"># if string value is contained in variable</span></a>
<a class="sourceLine" id="cb151-2" title="2">(<span class="st">&quot;bridex.B&quot;</span> <span class="op">%in%</span><span class="st"> </span>(df.reg.out.all<span class="op">$</span>vars_var.y))</a>
<a class="sourceLine" id="cb151-3" title="3"><span class="co"># if string value is not contained in variable:</span></a>
<a class="sourceLine" id="cb151-4" title="4"><span class="co"># 1. type is variable name</span></a>
<a class="sourceLine" id="cb151-5" title="5"><span class="co"># 2. Toyota|Mazda are strings to be excluded</span></a>
<a class="sourceLine" id="cb151-6" title="6"><span class="kw">filter</span>(mtcars, <span class="op">!</span><span class="kw">grepl</span>(<span class="st">&#39;Toyota|Mazda&#39;</span>, type))</a>
<a class="sourceLine" id="cb151-7" title="7"></a>
<a class="sourceLine" id="cb151-8" title="8"><span class="co"># filter does not contain string</span></a>
<a class="sourceLine" id="cb151-9" title="9">rs_hgt_prot_log_tidy <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_detect</span>(term, <span class="st">&#39;prot&#39;</span>))</a></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarize-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
