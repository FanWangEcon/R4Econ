<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R</title>
  <meta name="description" content="<p>Find all files in a folder with a particula suffix, with exclusion.
Convert R Markdow File to R, PDF and HTML.
Modify markdown pounds hierarchy.</p>" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>Find all files in a folder with a particula suffix, with exclusion.
Convert R Markdow File to R, PDF and HTML.
Modify markdown pounds hierarchy.</p>" />
  <meta name="github-repo" content="fanwangecon/R4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Array, Matrix, Dataframe | Panel Data and Optimization with R" />
  
  <meta name="twitter:description" content="<p>Find all files in a folder with a particula suffix, with exclusion.
Convert R Markdow File to R, PDF and HTML.
Modify markdown pounds hierarchy.</p>" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2020-05-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="summarize-data.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Panel Data and Optimization with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html"><i class="fa fa-check"></i><b>1</b> Array, Matrix, Dataframe</a>
<ul>
<li class="chapter" data-level="1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#list"><i class="fa fa-check"></i><b>1.1</b> List</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#multiple-dimensional-list"><i class="fa fa-check"></i><b>1.1.1</b> Multiple Dimensional List</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array"><i class="fa fa-check"></i><b>1.2</b> Array</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#array-basics"><i class="fa fa-check"></i><b>1.2.1</b> Array Basics</a></li>
<li class="chapter" data-level="1.2.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-arrays"><i class="fa fa-check"></i><b>1.2.2</b> Generate Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-arrays"><i class="fa fa-check"></i><b>1.2.3</b> String Arrays</a></li>
<li class="chapter" data-level="1.2.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#mesh-matrices-arrays-and-scalars"><i class="fa fa-check"></i><b>1.2.4</b> Mesh Matrices, Arrays and Scalars</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#matrix"><i class="fa fa-check"></i><b>1.3</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-matrixes"><i class="fa fa-check"></i><b>1.3.1</b> Generate Matrixes</a></li>
<li class="chapter" data-level="1.3.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#linear-algebra"><i class="fa fa-check"></i><b>1.3.2</b> Linear Algebra</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#variables-in-dataframes"><i class="fa fa-check"></i><b>1.4</b> Variables in Dataframes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-dataframe"><i class="fa fa-check"></i><b>1.4.1</b> Generate Dataframe</a></li>
<li class="chapter" data-level="1.4.2" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#factor-label-and-combine"><i class="fa fa-check"></i><b>1.4.2</b> Factor Label and Combine</a></li>
<li class="chapter" data-level="1.4.3" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#drawly-random-rows"><i class="fa fa-check"></i><b>1.4.3</b> Drawly Random Rows</a></li>
<li class="chapter" data-level="1.4.4" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#generate-variables-conditional-on-others"><i class="fa fa-check"></i><b>1.4.4</b> Generate Variables Conditional On Others</a></li>
<li class="chapter" data-level="1.4.5" data-path="array-matrix-dataframe.html"><a href="array-matrix-dataframe.html#string-values"><i class="fa fa-check"></i><b>1.4.5</b> String Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>2</b> Summarize Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="summarize-data.html"><a href="summarize-data.html#counting-observation"><i class="fa fa-check"></i><b>2.1</b> Counting Observation</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-data.html"><a href="summarize-data.html#uncount"><i class="fa fa-check"></i><b>2.1.1</b> Uncount</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="summarize-data.html"><a href="summarize-data.html#sorting-indexing-slicing"><i class="fa fa-check"></i><b>2.2</b> Sorting, Indexing, Slicing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="summarize-data.html"><a href="summarize-data.html#sorting"><i class="fa fa-check"></i><b>2.2.1</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="summarize-data.html"><a href="summarize-data.html#group-statistics"><i class="fa fa-check"></i><b>2.3</b> Group Statistics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="summarize-data.html"><a href="summarize-data.html#groups-statistics"><i class="fa fa-check"></i><b>2.3.1</b> Groups Statistics</a></li>
<li class="chapter" data-level="2.3.2" data-path="summarize-data.html"><a href="summarize-data.html#one-variable-group-summary"><i class="fa fa-check"></i><b>2.3.2</b> One Variable Group Summary</a></li>
<li class="chapter" data-level="2.3.3" data-path="summarize-data.html"><a href="summarize-data.html#nested-within-group-stats"><i class="fa fa-check"></i><b>2.3.3</b> Nested within Group Stats</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="summarize-data.html"><a href="summarize-data.html#distributional-statistics"><i class="fa fa-check"></i><b>2.4</b> Distributional Statistics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="summarize-data.html"><a href="summarize-data.html#histogram"><i class="fa fa-check"></i><b>2.4.1</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summarize-data.html"><a href="summarize-data.html#summarize-multiple-variables"><i class="fa fa-check"></i><b>2.5</b> Summarize Multiple Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="summarize-data.html"><a href="summarize-data.html#generate-replace-variables"><i class="fa fa-check"></i><b>2.5.1</b> Generate Replace Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#dataframe-mutate"><i class="fa fa-check"></i><b>3.1</b> Dataframe Mutate</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="functions.html"><a href="functions.html#row-input-functions"><i class="fa fa-check"></i><b>3.1.1</b> Row Input Functions</a></li>
<li class="chapter" data-level="3.1.2" data-path="functions.html"><a href="functions.html#evaluate-choices-across-states"><i class="fa fa-check"></i><b>3.1.2</b> Evaluate Choices Across States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#dataframe-do-anything"><i class="fa fa-check"></i><b>3.2</b> Dataframe Do Anything</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#mx1-by-n-to-mxq-by-n1"><i class="fa fa-check"></i><b>3.2.1</b> (Mx1 by N) to (MxQ by N+1)</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mx1-by-1"><i class="fa fa-check"></i><b>3.2.2</b> (MxP by N) to (Mx1 by 1)</a></li>
<li class="chapter" data-level="3.2.3" data-path="functions.html"><a href="functions.html#mxp-by-n-to-mxq-by-nz"><i class="fa fa-check"></i><b>3.2.3</b> (MxP by N) to (MxQ by N+Z)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#apply-and-pmap"><i class="fa fa-check"></i><b>3.3</b> Apply and pmap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#apply-and-sapply"><i class="fa fa-check"></i><b>3.3.1</b> Apply and Sapply</a></li>
<li class="chapter" data-level="3.3.2" data-path="functions.html"><a href="functions.html#mutate-evaluate-functions"><i class="fa fa-check"></i><b>3.3.2</b> Mutate Evaluate Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>4</b> Panel</a>
<ul>
<li class="chapter" data-level="4.1" data-path="panel.html"><a href="panel.html#generate-and-join"><i class="fa fa-check"></i><b>4.1</b> Generate and Join</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="panel.html"><a href="panel.html#generate-panel-structure"><i class="fa fa-check"></i><b>4.1.1</b> Generate Panel Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="panel.html"><a href="panel.html#join-datasets"><i class="fa fa-check"></i><b>4.1.2</b> Join Datasets</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="panel.html"><a href="panel.html#wide-and-long"><i class="fa fa-check"></i><b>4.2</b> Wide and Long</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="panel.html"><a href="panel.html#long-to-wide"><i class="fa fa-check"></i><b>4.2.1</b> Long to Wide</a></li>
<li class="chapter" data-level="4.2.2" data-path="panel.html"><a href="panel.html#wide-to-long"><i class="fa fa-check"></i><b>4.2.2</b> Wide to Long</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv"><i class="fa fa-check"></i><b>5.1</b> OLS and IV</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear-regression.html"><a href="linear-regression.html#ols-and-iv-regression"><i class="fa fa-check"></i><b>5.1.1</b> OLS and IV Regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear-regression.html"><a href="linear-regression.html#iv-loop-over-rhs"><i class="fa fa-check"></i><b>5.1.2</b> IV Loop over RHS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear-regression.html"><a href="linear-regression.html#decompose-rhs"><i class="fa fa-check"></i><b>5.2.1</b> Decompose RHS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html"><i class="fa fa-check"></i><b>6</b> Nonlinear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#logit-regression"><i class="fa fa-check"></i><b>6.1</b> Logit Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html#binary-logit"><i class="fa fa-check"></i><b>6.1.1</b> Binary Logit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>7</b> Optimization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="optimization.html"><a href="optimization.html#bisection"><i class="fa fa-check"></i><b>7.1</b> Bisection</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="optimization.html"><a href="optimization.html#bisection-1"><i class="fa fa-check"></i><b>7.1.1</b> Bisection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html"><i class="fa fa-check"></i><b>8</b> Mathmatics and Statistics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#distributions"><i class="fa fa-check"></i><b>8.1</b> Distributions</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#integrate-over-normal-guassian-process-shock"><i class="fa fa-check"></i><b>8.1.1</b> Integrate Over Normal Guassian Process Shock</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#analytical-solutions"><i class="fa fa-check"></i><b>8.2</b> Analytical Solutions</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#linear-scalar-fx0-solutions"><i class="fa fa-check"></i><b>8.2.1</b> Linear Scalar f(x)=0 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#inequality-models"><i class="fa fa-check"></i><b>8.3</b> Inequality Models</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#gini-discrete-sample"><i class="fa fa-check"></i><b>8.3.1</b> Gini Discrete Sample</a></li>
<li class="chapter" data-level="8.3.2" data-path="mathmatics-and-statistics.html"><a href="mathmatics-and-statistics.html#atkinson-family-utility"><i class="fa fa-check"></i><b>8.3.2</b> Atkinson Family Utility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html"><i class="fa fa-check"></i><b>9</b> Tables and Graphs</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#r-base-plots"><i class="fa fa-check"></i><b>9.1</b> R Base Plots</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#plot-curve-line-and-points"><i class="fa fa-check"></i><b>9.1.1</b> Plot Curve, Line and Points</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>9.2</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="tables-and-graphs.html"><a href="tables-and-graphs.html#import-and-export-images"><i class="fa fa-check"></i><b>9.2.1</b> Import and Export Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>10</b> Programming</a>
<ul>
<li class="chapter" data-level="10.1" data-path="programming.html"><a href="programming.html#file-in-and-out"><i class="fa fa-check"></i><b>10.1</b> File in and Out</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="programming.html"><a href="programming.html#text-to-file"><i class="fa fa-check"></i><b>10.1.1</b> Text to File</a></li>
<li class="chapter" data-level="10.1.2" data-path="programming.html"><a href="programming.html#rmd-to-html"><i class="fa fa-check"></i><b>10.1.2</b> Rmd to HTML</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#array-matrix-dataframe-links"><i class="fa fa-check"></i><b>A.1</b> Array, Matrix, Dataframe links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-listlist-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 List</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-arrayarray-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Array</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-matrixmatrix-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Matrix</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-variables-in-dataframesvariables-in-dataframes-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Variables in Dataframes</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-data-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Data links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-counting-observationcounting-observation-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 Counting Observation</span> links</a></li>
<li class="chapter" data-level="A.2.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.2-sorting-indexing-slicingsorting-indexing-slicing-links"><i class="fa fa-check"></i><b>A.2.2</b> <span>Section 2.2 Sorting, Indexing, Slicing</span> links</a></li>
<li class="chapter" data-level="A.2.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.3-group-statisticsgroup-statistics-links"><i class="fa fa-check"></i><b>A.2.3</b> <span>Section 2.3 Group Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.4-distributional-statisticsdistributional-statistics-links"><i class="fa fa-check"></i><b>A.2.4</b> <span>Section 2.4 Distributional Statistics</span> links</a></li>
<li class="chapter" data-level="A.2.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.5-summarize-multiple-variablessummarize-multiple-variables-links"><i class="fa fa-check"></i><b>A.2.5</b> <span>Section 2.5 Summarize Multiple Variables</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.3</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-dataframe-mutatedataframe-mutate-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Dataframe Mutate</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-dataframe-do-anythingdataframe-do-anything-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Dataframe Do Anything</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-apply-and-pmapapply-and-pmap-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Apply and pmap</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#panel-links"><i class="fa fa-check"></i><b>A.4</b> Panel links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-generate-and-joingenerate-and-join-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Generate and Join</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-wide-and-longwide-and-long-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Wide and Long</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#linear-regression-links"><i class="fa fa-check"></i><b>A.5</b> Linear Regression links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-ols-and-ivols-and-iv-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 OLS and IV</span> links</a></li>
<li class="chapter" data-level="A.5.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.2-decompositiondecomposition-links"><i class="fa fa-check"></i><b>A.5.2</b> <span>Section 5.2 Decomposition</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#nonlinear-regression-links"><i class="fa fa-check"></i><b>A.6</b> Nonlinear Regression links</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-6.1-logit-regressionlogit-regression-links"><i class="fa fa-check"></i><b>A.6.1</b> <span>Section 6.1 Logit Regression</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimization-links"><i class="fa fa-check"></i><b>A.7</b> Optimization links</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-7.1-bisectionbisection-links"><i class="fa fa-check"></i><b>A.7.1</b> <span>Section 7.1 Bisection</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#mathmatics-and-statistics-links"><i class="fa fa-check"></i><b>A.8</b> Mathmatics and Statistics links</a>
<ul>
<li class="chapter" data-level="A.8.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.1-distributionsdistributions-links"><i class="fa fa-check"></i><b>A.8.1</b> <span>Section 8.1 Distributions</span> links</a></li>
<li class="chapter" data-level="A.8.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.2-analytical-solutionsanalytical-solutions-links"><i class="fa fa-check"></i><b>A.8.2</b> <span>Section 8.2 Analytical Solutions</span> links</a></li>
<li class="chapter" data-level="A.8.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-8.3-inequality-modelsinequality-models-links"><i class="fa fa-check"></i><b>A.8.3</b> <span>Section 8.3 Inequality Models</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-and-graphs-links"><i class="fa fa-check"></i><b>A.9</b> Tables and Graphs links</a>
<ul>
<li class="chapter" data-level="A.9.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.1-r-base-plotsr-base-plots-links"><i class="fa fa-check"></i><b>A.9.1</b> <span>Section 9.1 R Base Plots</span> links</a></li>
<li class="chapter" data-level="A.9.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-9.2-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.9.2</b> <span>Section 9.2 Write and Read Plots</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.10" data-path="index-and-code-links.html"><a href="index-and-code-links.html#programming-links"><i class="fa fa-check"></i><b>A.10</b> Programming links</a>
<ul>
<li class="chapter" data-level="A.10.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-10.1-file-in-and-outfile-in-and-out-links"><i class="fa fa-check"></i><b>A.10.1</b> <span>Section 10.1 File in and Out</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/R4Econ/bookdown/index.html" target="blank">R4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Panel Data and Optimization with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="array-matrix-dataframe" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Array, Matrix, Dataframe</h1>

<div id="list" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> List</h2>

<div id="multiple-dimensional-list" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Multiple Dimensional List</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r list tutorial</li>
<li>r vector vs list</li>
<li>r initialize empty multiple element list</li>
<li>r name rows and columns of 2 dimensional list</li>
<li>r row and colum names of list</li>
<li>list dimnames</li>
<li>r named list to string</li>
</ul>
<div id="named-list-of-matrixes" class="section level4" number="1.1.1.1">
<h4><span class="header-section-number">1.1.1.1</span> Named List of Matrixes</h4>
<p>Save a list of matrixes. Retrieve Element of that list via loop.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="array-matrix-dataframe.html#cb1-1"></a><span class="co"># Define an array to loop over</span></span>
<span id="cb1-2"><a href="array-matrix-dataframe.html#cb1-2"></a>ar_fl_mean &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb1-3"><a href="array-matrix-dataframe.html#cb1-3"></a></span>
<span id="cb1-4"><a href="array-matrix-dataframe.html#cb1-4"></a><span class="co"># store restuls in named list</span></span>
<span id="cb1-5"><a href="array-matrix-dataframe.html#cb1-5"></a>ls_mt_res =<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> <span class="kw">length</span>(ar_fl_mean))</span>
<span id="cb1-6"><a href="array-matrix-dataframe.html#cb1-6"></a>ar_st_names &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mean&#39;</span>, ar_fl_mean)</span>
<span id="cb1-7"><a href="array-matrix-dataframe.html#cb1-7"></a><span class="kw">names</span>(ls_mt_res) &lt;-<span class="st"> </span>ar_st_names</span>
<span id="cb1-8"><a href="array-matrix-dataframe.html#cb1-8"></a></span>
<span id="cb1-9"><a href="array-matrix-dataframe.html#cb1-9"></a><span class="co"># Loop and generat a list of dataframes</span></span>
<span id="cb1-10"><a href="array-matrix-dataframe.html#cb1-10"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">length</span>(ar_fl_mean))) {</span>
<span id="cb1-11"><a href="array-matrix-dataframe.html#cb1-11"></a>  fl_mean =<span class="st"> </span>ar_fl_mean[it_fl_mean]</span>
<span id="cb1-12"><a href="array-matrix-dataframe.html#cb1-12"></a></span>
<span id="cb1-13"><a href="array-matrix-dataframe.html#cb1-13"></a>  <span class="co"># dataframe</span></span>
<span id="cb1-14"><a href="array-matrix-dataframe.html#cb1-14"></a>  <span class="kw">set.seed</span>(it_fl_mean)</span>
<span id="cb1-15"><a href="array-matrix-dataframe.html#cb1-15"></a>  tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(</span>
<span id="cb1-16"><a href="array-matrix-dataframe.html#cb1-16"></a>    <span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span>fl_mean,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">3</span>)</span>
<span id="cb1-17"><a href="array-matrix-dataframe.html#cb1-17"></a>    ) <span class="op">%&gt;%</span></span>
<span id="cb1-18"><a href="array-matrix-dataframe.html#cb1-18"></a><span class="st">    </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;id&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1-19"><a href="array-matrix-dataframe.html#cb1-19"></a><span class="st">    </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(<span class="kw">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;varb&#39;</span>,<span class="st">&#39;vartheta&#39;</span>)))</span>
<span id="cb1-20"><a href="array-matrix-dataframe.html#cb1-20"></a></span>
<span id="cb1-21"><a href="array-matrix-dataframe.html#cb1-21"></a>  ls_mt_res[[it_fl_mean]] =<span class="st"> </span>tb_combine</span>
<span id="cb1-22"><a href="array-matrix-dataframe.html#cb1-22"></a>}</span>
<span id="cb1-23"><a href="array-matrix-dataframe.html#cb1-23"></a></span>
<span id="cb1-24"><a href="array-matrix-dataframe.html#cb1-24"></a><span class="co"># Retrieve elements</span></span>
<span id="cb1-25"><a href="array-matrix-dataframe.html#cb1-25"></a><span class="kw">print</span>(ls_mt_res[[<span class="dv">1</span>]])</span>
<span id="cb1-26"><a href="array-matrix-dataframe.html#cb1-26"></a><span class="kw">print</span>(ls_mt_res<span class="op">$</span>mean10)</span>
<span id="cb1-27"><a href="array-matrix-dataframe.html#cb1-27"></a><span class="kw">print</span>(ls_mt_res[[<span class="st">&#39;mean10&#39;</span>]])</span>
<span id="cb1-28"><a href="array-matrix-dataframe.html#cb1-28"></a></span>
<span id="cb1-29"><a href="array-matrix-dataframe.html#cb1-29"></a><span class="co"># Print via Loop </span></span>
<span id="cb1-30"><a href="array-matrix-dataframe.html#cb1-30"></a><span class="cf">for</span> (it_fl_mean <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">length</span>(ar_fl_mean))) {</span>
<span id="cb1-31"><a href="array-matrix-dataframe.html#cb1-31"></a>  tb_combine =<span class="st"> </span>ls_mt_res[[it_fl_mean]]</span>
<span id="cb1-32"><a href="array-matrix-dataframe.html#cb1-32"></a>  <span class="kw">print</span>(tb_combine)</span>
<span id="cb1-33"><a href="array-matrix-dataframe.html#cb1-33"></a>}</span></code></pre></div>
</div>
<div id="one-dimensional-named-list" class="section level4" number="1.1.1.2">
<h4><span class="header-section-number">1.1.1.2</span> One Dimensional Named List</h4>
<ol style="list-style-type: decimal">
<li>define list</li>
<li>slice list</li>
<li>print r named list as a single line string</li>
</ol>
<ul>
<li><a href="https://stackoverflow.com/a/55622024/8280804">R Unlist named list into one string with preserving list names</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="array-matrix-dataframe.html#cb2-1"></a><span class="co"># Define Lists</span></span>
<span id="cb2-2"><a href="array-matrix-dataframe.html#cb2-2"></a>ls_num &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb2-3"><a href="array-matrix-dataframe.html#cb2-3"></a>ls_str &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&#39;1&#39;</span>,<span class="st">&#39;2&#39;</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb2-4"><a href="array-matrix-dataframe.html#cb2-4"></a>ls_num_str &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&#39;3&#39;</span>)</span>
<span id="cb2-5"><a href="array-matrix-dataframe.html#cb2-5"></a></span>
<span id="cb2-6"><a href="array-matrix-dataframe.html#cb2-6"></a><span class="co"># Named Lists</span></span>
<span id="cb2-7"><a href="array-matrix-dataframe.html#cb2-7"></a>ar_st_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;e1&#39;</span>,<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>)</span>
<span id="cb2-8"><a href="array-matrix-dataframe.html#cb2-8"></a>ls_num_str_named &lt;-<span class="st"> </span>ls_num_str</span>
<span id="cb2-9"><a href="array-matrix-dataframe.html#cb2-9"></a><span class="kw">names</span>(ls_num_str_named) &lt;-<span class="st"> </span>ar_st_names</span>
<span id="cb2-10"><a href="array-matrix-dataframe.html#cb2-10"></a></span>
<span id="cb2-11"><a href="array-matrix-dataframe.html#cb2-11"></a><span class="co"># Add Element to Named List</span></span>
<span id="cb2-12"><a href="array-matrix-dataframe.html#cb2-12"></a>ls_num_str_named<span class="op">$</span>e4 &lt;-<span class="st"> &#39;this is added&#39;</span></span></code></pre></div>
<ul>
<li>r print input as string</li>
<li>r print parameter code as string</li>
<li><a href="https://stackoverflow.com/a/14577878/8280804">How to convert variable (object) name into String</a></li>
</ul>
<p>The function below ffi_lst2str is also a function in <a href="https://fanwangecon.github.io/REconTools/index.html">REconTools</a>: <a href="https://fanwangecon.github.io/REconTools/reference/ff_sup_lst2str.html">ff_sup_lst2str</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="array-matrix-dataframe.html#cb3-1"></a><span class="co"># list to String printing function</span></span>
<span id="cb3-2"><a href="array-matrix-dataframe.html#cb3-2"></a>ffi_lst2str &lt;-<span class="st"> </span><span class="cf">function</span>(ls_list, st_desc, <span class="dt">bl_print=</span><span class="ot">TRUE</span>) {</span>
<span id="cb3-3"><a href="array-matrix-dataframe.html#cb3-3"></a></span>
<span id="cb3-4"><a href="array-matrix-dataframe.html#cb3-4"></a>  <span class="co"># string desc</span></span>
<span id="cb3-5"><a href="array-matrix-dataframe.html#cb3-5"></a>  <span class="cf">if</span>(<span class="kw">missing</span>(st_desc)){</span>
<span id="cb3-6"><a href="array-matrix-dataframe.html#cb3-6"></a>    st_desc &lt;-<span class="st"> </span><span class="kw">deparse</span>(<span class="kw">substitute</span>(ls_list))</span>
<span id="cb3-7"><a href="array-matrix-dataframe.html#cb3-7"></a>  }</span>
<span id="cb3-8"><a href="array-matrix-dataframe.html#cb3-8"></a></span>
<span id="cb3-9"><a href="array-matrix-dataframe.html#cb3-9"></a>  <span class="co"># create string</span></span>
<span id="cb3-10"><a href="array-matrix-dataframe.html#cb3-10"></a>  st_string_from_list =<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">paste0</span>(st_desc, <span class="st">&#39;:&#39;</span>),</span>
<span id="cb3-11"><a href="array-matrix-dataframe.html#cb3-11"></a>                               <span class="kw">paste</span>(<span class="kw">names</span>(ls_list), ls_list, <span class="dt">sep=</span><span class="st">&quot;=&quot;</span>, <span class="dt">collapse=</span><span class="st">&quot;;&quot;</span> ))</span>
<span id="cb3-12"><a href="array-matrix-dataframe.html#cb3-12"></a></span>
<span id="cb3-13"><a href="array-matrix-dataframe.html#cb3-13"></a>  <span class="cf">if</span> (bl_print){</span>
<span id="cb3-14"><a href="array-matrix-dataframe.html#cb3-14"></a>    <span class="kw">print</span>(st_string_from_list)</span>
<span id="cb3-15"><a href="array-matrix-dataframe.html#cb3-15"></a>  }</span>
<span id="cb3-16"><a href="array-matrix-dataframe.html#cb3-16"></a>}</span>
<span id="cb3-17"><a href="array-matrix-dataframe.html#cb3-17"></a></span>
<span id="cb3-18"><a href="array-matrix-dataframe.html#cb3-18"></a><span class="co"># print full</span></span>
<span id="cb3-19"><a href="array-matrix-dataframe.html#cb3-19"></a><span class="kw">ffi_lst2str</span>(ls_num)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="array-matrix-dataframe.html#cb5-1"></a><span class="kw">ffi_lst2str</span>(ls_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="array-matrix-dataframe.html#cb7-1"></a><span class="kw">ffi_lst2str</span>(ls_num_str)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str:=1;=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="array-matrix-dataframe.html#cb9-1"></a><span class="kw">ffi_lst2str</span>(ls_num_str_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named:e1=1;e2=2;e3=3;e4=this is added&quot;</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="array-matrix-dataframe.html#cb11-1"></a><span class="co"># print subset</span></span>
<span id="cb11-2"><a href="array-matrix-dataframe.html#cb11-2"></a><span class="kw">ffi_lst2str</span>(ls_num[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="array-matrix-dataframe.html#cb13-1"></a><span class="kw">ffi_lst2str</span>(ls_str[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_str[2:3]:=2;=3&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="array-matrix-dataframe.html#cb15-1"></a><span class="kw">ffi_lst2str</span>(ls_num_str[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str[2:4]:=2;=3;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="array-matrix-dataframe.html#cb17-1"></a><span class="kw">ffi_lst2str</span>(ls_num_str_named[<span class="kw">c</span>(<span class="st">&#39;e2&#39;</span>,<span class="st">&#39;e3&#39;</span>,<span class="st">&#39;e4&#39;</span>)])</span></code></pre></div>
<pre><code>## [1] &quot;ls_num_str_named[c(\&quot;e2\&quot;, \&quot;e3\&quot;, \&quot;e4\&quot;)]:e2=2;e3=3;e4=this is added&quot;</code></pre>
</div>
<div id="two-dimensional-unnamed-list" class="section level4" number="1.1.1.3">
<h4><span class="header-section-number">1.1.1.3</span> Two Dimensional Unnamed List</h4>
<p>Generate a multiple dimensional list:</p>
<ol style="list-style-type: decimal">
<li>Initiate with an N element empty list</li>
<li>Reshape list to M by Q</li>
<li>Fill list elements</li>
<li>Get list element by row and column number</li>
</ol>
<p>List allows for different data types to be stored together.</p>
<p>Note that element specific names in named list are not preserved when the list is reshaped to be two dimensional. Two dimensional list, however, could have row and column names.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="array-matrix-dataframe.html#cb19-1"></a><span class="co"># Dimensions</span></span>
<span id="cb19-2"><a href="array-matrix-dataframe.html#cb19-2"></a>it_M &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb19-3"><a href="array-matrix-dataframe.html#cb19-3"></a>it_Q &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb19-4"><a href="array-matrix-dataframe.html#cb19-4"></a>it_N &lt;-<span class="st"> </span>it_M<span class="op">*</span>it_Q</span>
<span id="cb19-5"><a href="array-matrix-dataframe.html#cb19-5"></a></span>
<span id="cb19-6"><a href="array-matrix-dataframe.html#cb19-6"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb19-7"><a href="array-matrix-dataframe.html#cb19-7"></a>ls_2d_flat &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> it_N)</span>
<span id="cb19-8"><a href="array-matrix-dataframe.html#cb19-8"></a>ls_2d &lt;-<span class="st"> </span>ls_2d_flat</span>
<span id="cb19-9"><a href="array-matrix-dataframe.html#cb19-9"></a></span>
<span id="cb19-10"><a href="array-matrix-dataframe.html#cb19-10"></a><span class="co"># Named flat</span></span>
<span id="cb19-11"><a href="array-matrix-dataframe.html#cb19-11"></a>ls_2d_flat_named &lt;-<span class="st"> </span>ls_2d_flat</span>
<span id="cb19-12"><a href="array-matrix-dataframe.html#cb19-12"></a><span class="kw">names</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb19-13"><a href="array-matrix-dataframe.html#cb19-13"></a>ls_2d_named &lt;-<span class="st"> </span>ls_2d_flat_named</span>
<span id="cb19-14"><a href="array-matrix-dataframe.html#cb19-14"></a></span>
<span id="cb19-15"><a href="array-matrix-dataframe.html#cb19-15"></a><span class="co"># Reshape</span></span>
<span id="cb19-16"><a href="array-matrix-dataframe.html#cb19-16"></a><span class="kw">dim</span>(ls_2d) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</span>
<span id="cb19-17"><a href="array-matrix-dataframe.html#cb19-17"></a><span class="co"># named 2d list can not carry 1d name after reshape</span></span>
<span id="cb19-18"><a href="array-matrix-dataframe.html#cb19-18"></a><span class="kw">dim</span>(ls_2d_named) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</span></code></pre></div>
<p>Print Various objects generated above, print list flattened.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="array-matrix-dataframe.html#cb20-1"></a><span class="co"># display</span></span>
<span id="cb20-2"><a href="array-matrix-dataframe.html#cb20-2"></a><span class="kw">ffi_lst2str</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named:e1=NULL;e2=NULL;e3=NULL;e4=NULL;e5=NULL;e6=NULL&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="array-matrix-dataframe.html#cb22-1"></a><span class="co"># print(ls_2d_flat_named)</span></span>
<span id="cb22-2"><a href="array-matrix-dataframe.html#cb22-2"></a><span class="kw">ffi_lst2str</span>(ls_2d_named)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_named:=NULL;=NULL;=NULL;=NULL;=NULL;=NULL&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="array-matrix-dataframe.html#cb24-1"></a><span class="kw">print</span>(ls_2d_named)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] NULL NULL NULL
## [2,] NULL NULL NULL</code></pre>
<p>Select element from list:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="array-matrix-dataframe.html#cb26-1"></a><span class="co"># Select Values, double bracket to select from 2dim list</span></span>
<span id="cb26-2"><a href="array-matrix-dataframe.html#cb26-2"></a><span class="kw">print</span>(<span class="st">&#39;ls_2d[[1,2]]&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d[[1,2]]&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="array-matrix-dataframe.html#cb28-1"></a><span class="kw">print</span>(ls_2d[[<span class="dv">1</span>,<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="define-two-dimensional-named-list" class="section level4" number="1.1.1.4">
<h4><span class="header-section-number">1.1.1.4</span> Define Two Dimensional Named LIst</h4>
<p>For naming two dimensional lists, <em>rowname</em> and <em>colname</em> does not work. Rather, we need to use <em>dimnames</em>. Note that in addition to dimnames, we can continue to have element specific names. Both can co-exist. But note that the element specific names are not preserved after dimension transform, so need to be redefined afterwards.</p>
<p>How to select an element of a two dimensional list:</p>
<ol style="list-style-type: decimal">
<li>row and column names: <em>dimnames</em>, <em>ls_2d_flat_named[[â€˜row2â€™,â€˜col2â€™]]</em></li>
<li>named elements: <em>names</em>, <em>ls_2d_flat_named[[â€˜e5â€™]]</em></li>
<li>select by index: <em>index</em>, <em>ls_2d_flat_named[[5]]</em></li>
<li>converted two dimensional named list to tibble/matrix</li>
</ol>
<p>Neither <em>dimnames</em> nor <em>names</em> are required, but both can be used to select elements.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="array-matrix-dataframe.html#cb30-1"></a><span class="co"># Dimensions</span></span>
<span id="cb30-2"><a href="array-matrix-dataframe.html#cb30-2"></a>it_M &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb30-3"><a href="array-matrix-dataframe.html#cb30-3"></a>it_Q &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb30-4"><a href="array-matrix-dataframe.html#cb30-4"></a>it_N &lt;-<span class="st"> </span>it_M<span class="op">*</span>it_Q</span>
<span id="cb30-5"><a href="array-matrix-dataframe.html#cb30-5"></a></span>
<span id="cb30-6"><a href="array-matrix-dataframe.html#cb30-6"></a><span class="co"># Initiate an Empty MxQ=N element list</span></span>
<span id="cb30-7"><a href="array-matrix-dataframe.html#cb30-7"></a>ls_2d_flat_named &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> it_N)</span>
<span id="cb30-8"><a href="array-matrix-dataframe.html#cb30-8"></a><span class="kw">dim</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">c</span>(it_M, it_Q)</span>
<span id="cb30-9"><a href="array-matrix-dataframe.html#cb30-9"></a></span>
<span id="cb30-10"><a href="array-matrix-dataframe.html#cb30-10"></a><span class="co"># Fill with values</span></span>
<span id="cb30-11"><a href="array-matrix-dataframe.html#cb30-11"></a><span class="cf">for</span> (it_Q_ctr <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>,it_Q)) {</span>
<span id="cb30-12"><a href="array-matrix-dataframe.html#cb30-12"></a>  <span class="cf">for</span> (it_M_ctr <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>,it_M)) {</span>
<span id="cb30-13"><a href="array-matrix-dataframe.html#cb30-13"></a>    <span class="co"># linear index</span></span>
<span id="cb30-14"><a href="array-matrix-dataframe.html#cb30-14"></a>    ls_2d_flat_named[[it_M_ctr, it_Q_ctr]] &lt;-<span class="st"> </span>(it_Q_ctr<span class="dv">-1</span>)<span class="op">*</span>it_M<span class="op">+</span>it_M_ctr</span>
<span id="cb30-15"><a href="array-matrix-dataframe.html#cb30-15"></a>  }</span>
<span id="cb30-16"><a href="array-matrix-dataframe.html#cb30-16"></a>}</span>
<span id="cb30-17"><a href="array-matrix-dataframe.html#cb30-17"></a></span>
<span id="cb30-18"><a href="array-matrix-dataframe.html#cb30-18"></a><span class="co"># Replace row names, note rownames does not work</span></span>
<span id="cb30-19"><a href="array-matrix-dataframe.html#cb30-19"></a><span class="kw">dimnames</span>(ls_2d_flat_named)[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;row&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_M))</span>
<span id="cb30-20"><a href="array-matrix-dataframe.html#cb30-20"></a><span class="kw">dimnames</span>(ls_2d_flat_named)[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;col&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_Q))</span>
<span id="cb30-21"><a href="array-matrix-dataframe.html#cb30-21"></a></span>
<span id="cb30-22"><a href="array-matrix-dataframe.html#cb30-22"></a><span class="co"># Element Specific Names</span></span>
<span id="cb30-23"><a href="array-matrix-dataframe.html#cb30-23"></a><span class="kw">names</span>(ls_2d_flat_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;e&#39;</span>,<span class="kw">seq</span>(<span class="dv">1</span>,it_N))</span>
<span id="cb30-24"><a href="array-matrix-dataframe.html#cb30-24"></a></span>
<span id="cb30-25"><a href="array-matrix-dataframe.html#cb30-25"></a><span class="co"># Convert to Matrix</span></span>
<span id="cb30-26"><a href="array-matrix-dataframe.html#cb30-26"></a>tb_2d_flat_named &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ls_2d_flat_named) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()</span>
<span id="cb30-27"><a href="array-matrix-dataframe.html#cb30-27"></a>mt_2d_flat_named &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(tb_2d_flat_named)</span></code></pre></div>
<p>Print various objects generated above:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="array-matrix-dataframe.html#cb31-1"></a><span class="co"># These are not element names, can still name each element</span></span>
<span id="cb31-2"><a href="array-matrix-dataframe.html#cb31-2"></a><span class="co"># display</span></span>
<span id="cb31-3"><a href="array-matrix-dataframe.html#cb31-3"></a><span class="kw">print</span>(<span class="st">&#39;ls_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="array-matrix-dataframe.html#cb33-1"></a><span class="kw">print</span>(ls_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## row1 1    4    7    10  
## row2 2    5    8    11  
## row3 3    6    9    12  
## attr(,&quot;names&quot;)
##  [1] &quot;e1&quot;  &quot;e2&quot;  &quot;e3&quot;  &quot;e4&quot;  &quot;e5&quot;  &quot;e6&quot;  &quot;e7&quot;  &quot;e8&quot;  &quot;e9&quot;  &quot;e10&quot; &quot;e11&quot; &quot;e12&quot;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="array-matrix-dataframe.html#cb35-1"></a><span class="kw">print</span>(<span class="st">&#39;tb_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;tb_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="array-matrix-dataframe.html#cb37-1"></a><span class="kw">print</span>(tb_2d_flat_named)</span>
<span id="cb37-2"><a href="array-matrix-dataframe.html#cb37-2"></a><span class="kw">print</span>(<span class="st">&#39;mt_2d_flat_named&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;mt_2d_flat_named&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="array-matrix-dataframe.html#cb39-1"></a><span class="kw">print</span>(mt_2d_flat_named)</span></code></pre></div>
<pre><code>##      col1 col2 col3 col4
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12</code></pre>
<p>Select elements from list:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="array-matrix-dataframe.html#cb41-1"></a><span class="co"># Select elements with with dimnames</span></span>
<span id="cb41-2"><a href="array-matrix-dataframe.html#cb41-2"></a><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;row2&#39;</span>,<span class="st">&#39;col2&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;row2\&quot;, \&quot;col2\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="array-matrix-dataframe.html#cb43-1"></a><span class="co"># Select elements with element names</span></span>
<span id="cb43-2"><a href="array-matrix-dataframe.html#cb43-2"></a><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="st">&#39;e5&#39;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[\&quot;e5\&quot;]]:=5&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="array-matrix-dataframe.html#cb45-1"></a><span class="co"># Select elements with index</span></span>
<span id="cb45-2"><a href="array-matrix-dataframe.html#cb45-2"></a><span class="kw">ffi_lst2str</span>(ls_2d_flat_named[[<span class="dv">5</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;ls_2d_flat_named[[5]]:=5&quot;</code></pre>
<!-- # Fill values
ls_2d_fill <- ls_2d
ls_2d_fill[1,1] -->

</div>
</div>
</div>
<div id="array" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Array</h2>

<div id="array-basics" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Array Basics</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="multidimesional-arrays" class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Multidimesional Arrays</h4>
<div id="repeat-one-number-by-the-size-of-an-array" class="section level5" number="1.2.1.1.1">
<h5><span class="header-section-number">1.2.1.1.1</span> Repeat one Number by the Size of an Array</h5>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="array-matrix-dataframe.html#cb47-1"></a>ar_a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb47-2"><a href="array-matrix-dataframe.html#cb47-2"></a>ar_b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span><span class="op">/</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb47-3"><a href="array-matrix-dataframe.html#cb47-3"></a><span class="kw">rep</span>(<span class="dv">0</span>, <span class="kw">length</span>(ar_a))</span></code></pre></div>
<pre><code>## [1] 0 0 0</code></pre>
</div>
<div id="generate-2-dimensional-array" class="section level5" number="1.2.1.1.2">
<h5><span class="header-section-number">1.2.1.1.2</span> Generate 2 Dimensional Array</h5>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="array-matrix-dataframe.html#cb49-1"></a><span class="co"># Multidimensional Array</span></span>
<span id="cb49-2"><a href="array-matrix-dataframe.html#cb49-2"></a><span class="co"># 1 is r1c1t1, 1.5 in r2c1t1, 0 in r1c2t1, etc.</span></span>
<span id="cb49-3"><a href="array-matrix-dataframe.html#cb49-3"></a><span class="co"># Three dimensions, row first, column second, and tensor third</span></span>
<span id="cb49-4"><a href="array-matrix-dataframe.html#cb49-4"></a>x &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="dt">dim=</span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb49-5"><a href="array-matrix-dataframe.html#cb49-5"></a><span class="kw">dim</span>(x)</span></code></pre></div>
<pre><code>## [1] 2 2 2</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="array-matrix-dataframe.html#cb51-1"></a><span class="kw">print</span>(x)</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]  1.0    0
## [2,]  1.5    2
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    0    0
## [2,]    4    3</code></pre>
</div>
</div>
<div id="array-slicing" class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Array Slicing</h4>
<div id="remove-elements-of-array" class="section level5" number="1.2.1.2.1">
<h5><span class="header-section-number">1.2.1.2.1</span> Remove Elements of Array</h5>
<p>Select elements with direct indexing, or with head and tail functions. Get the first two elements of three elements array.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="array-matrix-dataframe.html#cb53-1"></a><span class="co"># Remove last element of array</span></span>
<span id="cb53-2"><a href="array-matrix-dataframe.html#cb53-2"></a>vars.group.bydf &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb53-3"><a href="array-matrix-dataframe.html#cb53-3"></a>vars.group.bydf[<span class="op">-</span><span class="kw">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="array-matrix-dataframe.html#cb55-1"></a><span class="co"># Use the head function to remove last element</span></span>
<span id="cb55-2"><a href="array-matrix-dataframe.html#cb55-2"></a><span class="kw">head</span>(vars.group.bydf, <span class="dv">-1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="array-matrix-dataframe.html#cb57-1"></a><span class="kw">head</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;23&quot;  &quot;dfa&quot;</code></pre>
<p>Get last two elements of array.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="array-matrix-dataframe.html#cb59-1"></a><span class="co"># Remove first element of array</span></span>
<span id="cb59-2"><a href="array-matrix-dataframe.html#cb59-2"></a>vars.group.bydf &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;23&#39;</span>,<span class="st">&#39;dfa&#39;</span>, <span class="st">&#39;wer&#39;</span>)</span>
<span id="cb59-3"><a href="array-matrix-dataframe.html#cb59-3"></a>vars.group.bydf[<span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(vars.group.bydf)]</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="array-matrix-dataframe.html#cb61-1"></a><span class="co"># Use Tail function</span></span>
<span id="cb61-2"><a href="array-matrix-dataframe.html#cb61-2"></a><span class="kw">tail</span>(vars.group.bydf, <span class="dv">-1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="array-matrix-dataframe.html#cb63-1"></a><span class="kw">tail</span>(vars.group.bydf, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;dfa&quot; &quot;wer&quot;</code></pre>
</div>
</div>
<div id="na-in-array" class="section level4" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> NA in Array</h4>
<div id="check-if-na-is-in-array" class="section level5" number="1.2.1.3.1">
<h5><span class="header-section-number">1.2.1.3.1</span> Check if NA is in Array</h5>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="array-matrix-dataframe.html#cb65-1"></a><span class="co"># Convert Inf and -Inf to NA</span></span>
<span id="cb65-2"><a href="array-matrix-dataframe.html#cb65-2"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">-1</span>, <span class="ot">Inf</span>, <span class="dv">10</span>, <span class="op">-</span><span class="ot">Inf</span>)</span>
<span id="cb65-3"><a href="array-matrix-dataframe.html#cb65-3"></a><span class="kw">na_if</span>(<span class="kw">na_if</span>(x, <span class="op">-</span><span class="ot">Inf</span>), <span class="ot">Inf</span>)</span></code></pre></div>
<pre><code>## [1]  1 -1 NA 10 NA</code></pre>
</div>
</div>
<div id="notations" class="section level4" number="1.2.1.4">
<h4><span class="header-section-number">1.2.1.4</span> Notations</h4>
<div id="e-notation" class="section level5" number="1.2.1.4.1">
<h5><span class="header-section-number">1.2.1.4.1</span> e notation</h5>
<ol style="list-style-type: decimal">
<li>Case one: <em>1.149946e+00</em>
<ul>
<li>this is approximately: 1.14995</li>
</ul></li>
<li>Case two: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
<li>Case three: <em>9.048038e-01</em>
<ul>
<li>this is approximately: 0.90480</li>
</ul></li>
</ol>

</div>
</div>
</div>
<div id="generate-arrays" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Generate Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-special-arrays" class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Generate Special Arrays</h4>
<div id="log-space-arrays" class="section level5" number="1.2.2.1.1">
<h5><span class="header-section-number">1.2.2.1.1</span> Log Space Arrays</h5>
<p>Often need to generate arrays on log rather than linear scale, below is log 10 scaled grid.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="array-matrix-dataframe.html#cb67-1"></a><span class="co"># Parameters</span></span>
<span id="cb67-2"><a href="array-matrix-dataframe.html#cb67-2"></a>it.lower.bd.inc.cnt &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb67-3"><a href="array-matrix-dataframe.html#cb67-3"></a>fl.log.lower &lt;-<span class="st"> </span><span class="dv">-10</span></span>
<span id="cb67-4"><a href="array-matrix-dataframe.html#cb67-4"></a>fl.log.higher &lt;-<span class="st"> </span><span class="dv">-9</span></span>
<span id="cb67-5"><a href="array-matrix-dataframe.html#cb67-5"></a>fl.min.rescale &lt;-<span class="st"> </span><span class="fl">0.01</span></span>
<span id="cb67-6"><a href="array-matrix-dataframe.html#cb67-6"></a>it.log.count &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb67-7"><a href="array-matrix-dataframe.html#cb67-7"></a><span class="co"># Generate</span></span>
<span id="cb67-8"><a href="array-matrix-dataframe.html#cb67-8"></a>ar.fl.log.rescaled &lt;-<span class="st"> </span><span class="kw">exp</span>(<span class="kw">log</span>(<span class="dv">10</span>)<span class="op">*</span><span class="kw">seq</span>(<span class="kw">log10</span>(fl.min.rescale),</span>
<span id="cb67-9"><a href="array-matrix-dataframe.html#cb67-9"></a>                                      <span class="kw">log10</span>(fl.min.rescale <span class="op">+</span></span>
<span id="cb67-10"><a href="array-matrix-dataframe.html#cb67-10"></a><span class="st">                                              </span>(fl.log.higher<span class="op">-</span>fl.log.lower)),</span>
<span id="cb67-11"><a href="array-matrix-dataframe.html#cb67-11"></a>                                      <span class="dt">length.out=</span>it.log.count))</span>
<span id="cb67-12"><a href="array-matrix-dataframe.html#cb67-12"></a>ar.fl.log &lt;-<span class="st"> </span>ar.fl.log.rescaled <span class="op">+</span><span class="st"> </span>fl.log.lower <span class="op">-</span><span class="st"> </span>fl.min.rescale</span>
<span id="cb67-13"><a href="array-matrix-dataframe.html#cb67-13"></a><span class="co"># Print</span></span>
<span id="cb67-14"><a href="array-matrix-dataframe.html#cb67-14"></a>ar.fl.log</span></code></pre></div>
<pre><code>## [1] -10.000000  -9.963430  -9.793123  -9.000000</code></pre>

</div>
</div>
</div>
<div id="string-arrays" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> String Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="string-replace" class="section level4" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> String Replace</h4>
<ul>
<li>r string wildcard replace between regex</li>
<li><a href="https://stackoverflow.com/a/27246520/8280804">R - replace part of a string using wildcards</a></li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="array-matrix-dataframe.html#cb69-1"></a><span class="co"># String replacement</span></span>
<span id="cb69-2"><a href="array-matrix-dataframe.html#cb69-2"></a><span class="kw">gsub</span>(<span class="dt">x =</span> <span class="kw">paste0</span>(<span class="kw">unique</span>(df.slds.stats.perc<span class="op">$</span>it.inner.counter), <span class="st">&#39;:&#39;</span>,</span>
<span id="cb69-3"><a href="array-matrix-dataframe.html#cb69-3"></a>                <span class="kw">unique</span>(df.slds.stats.perc<span class="op">$</span>z_n_a_n), <span class="dt">collapse =</span> <span class="st">&#39;;&#39;</span>),</span>
<span id="cb69-4"><a href="array-matrix-dataframe.html#cb69-4"></a>     <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>,</span>
<span id="cb69-5"><a href="array-matrix-dataframe.html#cb69-5"></a>     <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb69-6"><a href="array-matrix-dataframe.html#cb69-6"></a><span class="kw">gsub</span>(<span class="dt">x =</span> var,  <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb69-7"><a href="array-matrix-dataframe.html#cb69-7"></a><span class="kw">gsub</span>(<span class="dt">x =</span> var.input,  <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<p>String replaces a segment, search by wildcard. Given the string below, delete all text between carriage return and pound sign:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="array-matrix-dataframe.html#cb70-1"></a>st_tex_text &lt;-<span class="st"> &quot;</span><span class="ch">\n</span><span class="st">% Lat2ex Comments</span><span class="ch">\n\\</span><span class="st">newcommand{</span><span class="ch">\\</span><span class="st">exa}{</span><span class="ch">\\</span><span class="st">text{from external file: } </span><span class="ch">\\</span><span class="st">alpha + </span><span class="ch">\\</span><span class="st">beta}</span><span class="ch">\n</span><span class="st">% More LaLatex Comments</span><span class="ch">\n</span><span class="st">&quot;</span></span>
<span id="cb70-2"><a href="array-matrix-dataframe.html#cb70-2"></a>st_clean_a1 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">%.*?</span><span class="ch">\\\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb70-3"><a href="array-matrix-dataframe.html#cb70-3"></a>st_clean_a2 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;L.*?x&quot;</span>, <span class="st">&quot;[LATEX]&quot;</span>, st_tex_text)</span>
<span id="cb70-4"><a href="array-matrix-dataframe.html#cb70-4"></a><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\n% Lat2ex Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More LaLatex Comments\n&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="array-matrix-dataframe.html#cb72-1"></a><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="array-matrix-dataframe.html#cb74-1"></a><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a2:&#39;</span>, st_clean_a2))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a2:\n% [LATEX] Comments\n\\newcommand{\\exa}{\\text{from external file: } \\alpha + \\beta}\n% More [LATEX] Comments\n&quot;</code></pre>
<p>String delete after a particular string:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="array-matrix-dataframe.html#cb76-1"></a>st_tex_text &lt;-<span class="st"> &quot;</span><span class="ch">\\</span><span class="st">end{equation}</span><span class="ch">\n</span><span class="st">}</span><span class="ch">\n</span><span class="st">% Even more comments from Latex preamble&quot;</span></span>
<span id="cb76-2"><a href="array-matrix-dataframe.html#cb76-2"></a>st_clean_a1 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\\n</span><span class="st">%.*&quot;</span>,<span class="st">&quot;&quot;</span>, st_tex_text)</span>
<span id="cb76-3"><a href="array-matrix-dataframe.html#cb76-3"></a><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_tex_text:&#39;</span>, st_tex_text))</span></code></pre></div>
<pre><code>## [1] &quot;st_tex_text:\\end{equation}\n}\n% Even more comments from Latex preamble&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="array-matrix-dataframe.html#cb78-1"></a><span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&#39;st_clean_a1:&#39;</span>, st_clean_a1))</span></code></pre></div>
<pre><code>## [1] &quot;st_clean_a1:\\end{equation}\n}&quot;</code></pre>
<div id="search-if-and-which-string-contains" class="section level5" number="1.2.3.1.1">
<h5><span class="header-section-number">1.2.3.1.1</span> Search If and Which String Contains</h5>
<ul>
<li>r if string contains</li>
<li>r if string contains either or grepl</li>
<li><a href="https://stackoverflow.com/a/26319765/8280804">Use grepl to search either of multiple substrings in a text</a></li>
</ul>
<p>Search for a single substring in a single string:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="array-matrix-dataframe.html#cb80-1"></a>st_example_a &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></span>
<span id="cb80-2"><a href="array-matrix-dataframe.html#cb80-2"></a>st_example_b &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/_main.html&#39;</span></span>
<span id="cb80-3"><a href="array-matrix-dataframe.html#cb80-3"></a><span class="kw">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_a)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="array-matrix-dataframe.html#cb82-1"></a><span class="kw">grepl</span>(<span class="st">&#39;_main&#39;</span>, st_example_b)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Search for if one of a set of substring exists in a set of strings. In particular which one of the elements of <em>ls_spn</em> contains at least one of the elements of <em>ls_str_if_contains</em>. In the example below, only the first path does not contain either the word <em>aggregate</em> or <em>index</em> in the path. This can be used after all paths have been found recursively in some folder to select only desired paths from the full set of possibilities:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="array-matrix-dataframe.html#cb84-1"></a>ls_spn &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C:/Users/fan/R4Econ//panel/basic/fs_genpanel.Rmd&quot;</span>,</span>
<span id="cb84-2"><a href="array-matrix-dataframe.html#cb84-2"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/aggregate/main.Rmd&quot;</span>,</span>
<span id="cb84-3"><a href="array-matrix-dataframe.html#cb84-3"></a>            <span class="st">&quot;C:/Users/fan/R4Econ//summarize/index/fs_index_populate.Rmd&quot;</span>)</span>
<span id="cb84-4"><a href="array-matrix-dataframe.html#cb84-4"></a>ls_str_if_contains &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aggregate&quot;</span>, <span class="st">&quot;index&quot;</span>)</span>
<span id="cb84-5"><a href="array-matrix-dataframe.html#cb84-5"></a>str_if_contains &lt;-<span class="st"> </span><span class="kw">paste</span>(ls_str_if_contains, <span class="dt">collapse =</span> <span class="st">&quot;|&quot;</span>)</span>
<span id="cb84-6"><a href="array-matrix-dataframe.html#cb84-6"></a><span class="kw">grepl</span>(str_if_contains, ls_spn)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
</div>
</div>
<div id="string-concatenate" class="section level4" number="1.2.3.2">
<h4><span class="header-section-number">1.2.3.2</span> String Concatenate</h4>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="array-matrix-dataframe.html#cb86-1"></a><span class="co"># Simple Collapse</span></span>
<span id="cb86-2"><a href="array-matrix-dataframe.html#cb86-2"></a>vars.group.by &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;abc&#39;</span>, <span class="st">&#39;efg&#39;</span>)</span>
<span id="cb86-3"><a href="array-matrix-dataframe.html#cb86-3"></a><span class="kw">paste0</span>(vars.group.by, <span class="dt">collapse=</span><span class="st">&#39;|&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;abc|efg&quot;</code></pre>
</div>
<div id="string-add-leading-zero" class="section level4" number="1.2.3.3">
<h4><span class="header-section-number">1.2.3.3</span> String Add Leading Zero</h4>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="array-matrix-dataframe.html#cb88-1"></a><span class="co"># Add Leading zero for integer values to allow for sorting when</span></span>
<span id="cb88-2"><a href="array-matrix-dataframe.html#cb88-2"></a><span class="co"># integers are combined into strings</span></span>
<span id="cb88-3"><a href="array-matrix-dataframe.html#cb88-3"></a>it_z_n &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb88-4"><a href="array-matrix-dataframe.html#cb88-4"></a>it_a_n &lt;-<span class="st"> </span><span class="dv">192</span></span>
<span id="cb88-5"><a href="array-matrix-dataframe.html#cb88-5"></a><span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">&quot;%02d&quot;</span>, it_z_n))</span></code></pre></div>
<pre><code>## [1] &quot;01&quot;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="array-matrix-dataframe.html#cb90-1"></a><span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">&quot;%04d&quot;</span>, it_a_n))</span></code></pre></div>
<pre><code>## [1] &quot;0192&quot;</code></pre>
</div>
<div id="substring-and-file-name" class="section level4" number="1.2.3.4">
<h4><span class="header-section-number">1.2.3.4</span> Substring and File Name</h4>
<p>From path, get file name without suffix.</p>
<ul>
<li>r string split</li>
<li><a href="https://stackoverflow.com/a/83222/8280804">r list last element</a></li>
<li><a href="https://stackoverflow.com/a/29114007/8280804">r get file name from path</a></li>
<li><a href="https://stackoverflow.com/a/47189541/8280804">r get file path no name</a></li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="array-matrix-dataframe.html#cb92-1"></a>st_example &lt;-<span class="st"> &#39;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd&#39;</span></span>
<span id="cb92-2"><a href="array-matrix-dataframe.html#cb92-2"></a>st_file_wth_suffix_s &lt;-<span class="st"> </span><span class="kw">tail</span>(<span class="kw">strsplit</span>(st_example, <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]],<span class="dt">n=</span><span class="dv">1</span>)</span>
<span id="cb92-3"><a href="array-matrix-dataframe.html#cb92-3"></a>st_file_wno_suffix_s &lt;-<span class="st"> </span><span class="kw">sub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">.Rmd$&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="kw">basename</span>(st_example))</span>
<span id="cb92-4"><a href="array-matrix-dataframe.html#cb92-4"></a>st_fullpath_nosufx_s &lt;-<span class="st"> </span><span class="kw">sub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">.Rmd$&#39;</span>, <span class="st">&#39;&#39;</span>, st_example)</span>
<span id="cb92-5"><a href="array-matrix-dataframe.html#cb92-5"></a>st_lastpath_noname_s &lt;-<span class="st"> </span>(<span class="kw">dirname</span>(st_example))</span>
<span id="cb92-6"><a href="array-matrix-dataframe.html#cb92-6"></a>st_fullpath_noname_s &lt;-<span class="st"> </span><span class="kw">dirname</span>(st_example)</span>
<span id="cb92-7"><a href="array-matrix-dataframe.html#cb92-7"></a></span>
<span id="cb92-8"><a href="array-matrix-dataframe.html#cb92-8"></a><span class="kw">print</span>(<span class="kw">strsplit</span>(st_example, <span class="st">&quot;/&quot;</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;C:&quot;                &quot;Users&quot;             &quot;fan&quot;               &quot;R4Econ&quot;            &quot;amto&quot;              &quot;tibble&quot;           
## [7] &quot;fs_tib_basics.Rmd&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="array-matrix-dataframe.html#cb94-1"></a><span class="kw">print</span>(st_file_wth_suffix_s)</span></code></pre></div>
<pre><code>## [1] &quot;fs_tib_basics.Rmd&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="array-matrix-dataframe.html#cb96-1"></a><span class="kw">print</span>(st_file_wno_suffix_s)</span></code></pre></div>
<pre><code>## [1] &quot;fs_tib_basics&quot;</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="array-matrix-dataframe.html#cb98-1"></a><span class="kw">print</span>(st_fullpath_nosufx_s)</span></code></pre></div>
<pre><code>## [1] &quot;C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics&quot;</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="array-matrix-dataframe.html#cb100-1"></a><span class="kw">print</span>(st_lastpath_noname_s)</span></code></pre></div>
<pre><code>## [1] &quot;C:/Users/fan/R4Econ/amto/tibble&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="array-matrix-dataframe.html#cb102-1"></a><span class="kw">print</span>(st_fullpath_noname_s)</span></code></pre></div>
<pre><code>## [1] &quot;C:/Users/fan/R4Econ/amto/tibble&quot;</code></pre>

</div>
</div>
<div id="mesh-matrices-arrays-and-scalars" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Mesh Matrices, Arrays and Scalars</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<ul>
<li>r expand.grid meshed array to matrix</li>
<li>r meshgrid</li>
<li>r array to matrix</li>
<li>r reshape array to matrix</li>
<li>dplyr permuations rows of matrix and element of array</li>
<li>tidyr expand_grid mesh matrix and vector</li>
</ul>
<div id="mesh-two-or-more-vectors-with-expand_grid" class="section level4" number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> Mesh Two or More Vectors with expand_grid</h4>
<p>In the example below, we have a matrix that is 2 by 2 (endogenous states), a vector that is 3 by 1 (choices), and another matrix that is 4 by 3 (exogenous states shocks).</p>
<p>We want to generate a tibble dataset that meshes the matrix and the vector, so that all combinations show up. Additionally, we want to add some additional values that are common across all rows to the meshed dataframe.</p>
<p>Note <em>expand_grid</em> is a from tidyr 1.0.0.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="array-matrix-dataframe.html#cb104-1"></a><span class="co"># A. Generate the 5 by 2 Matrix (ENDO STATES)</span></span>
<span id="cb104-2"><a href="array-matrix-dataframe.html#cb104-2"></a><span class="co"># it_child_count = N, the number of children</span></span>
<span id="cb104-3"><a href="array-matrix-dataframe.html#cb104-3"></a>it_N_child_cnt =<span class="st"> </span><span class="dv">2</span></span>
<span id="cb104-4"><a href="array-matrix-dataframe.html#cb104-4"></a><span class="co"># P fixed parameters, nN is N dimensional, nP is P dimensional</span></span>
<span id="cb104-5"><a href="array-matrix-dataframe.html#cb104-5"></a>ar_nN_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out =</span> it_N_child_cnt)</span>
<span id="cb104-6"><a href="array-matrix-dataframe.html#cb104-6"></a>ar_nN_alpha =<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="dt">length.out =</span> it_N_child_cnt)</span>
<span id="cb104-7"><a href="array-matrix-dataframe.html#cb104-7"></a>fl_rho =<span class="st"> </span><span class="fl">0.1</span></span>
<span id="cb104-8"><a href="array-matrix-dataframe.html#cb104-8"></a>fl_lambda =<span class="st"> </span><span class="fl">1.1</span></span>
<span id="cb104-9"><a href="array-matrix-dataframe.html#cb104-9"></a>mt_nP_A_alpha =<span class="st"> </span><span class="kw">cbind</span>(ar_nN_A, ar_nN_alpha, fl_rho, fl_lambda)</span>
<span id="cb104-10"><a href="array-matrix-dataframe.html#cb104-10"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;s_A&#39;</span>, <span class="st">&#39;s_alpha&#39;</span>, <span class="st">&#39;p_rho&#39;</span>, <span class="st">&#39;p_lambda&#39;</span>)</span>
<span id="cb104-11"><a href="array-matrix-dataframe.html#cb104-11"></a>tb_states_endo &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_nP_A_alpha) <span class="op">%&gt;%</span></span>
<span id="cb104-12"><a href="array-matrix-dataframe.html#cb104-12"></a><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span></span>
<span id="cb104-13"><a href="array-matrix-dataframe.html#cb104-13"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;state_id&quot;</span>)</span>
<span id="cb104-14"><a href="array-matrix-dataframe.html#cb104-14"></a></span>
<span id="cb104-15"><a href="array-matrix-dataframe.html#cb104-15"></a><span class="co"># B. Choice Grid</span></span>
<span id="cb104-16"><a href="array-matrix-dataframe.html#cb104-16"></a>it_N_choice_cnt =<span class="st"> </span><span class="dv">3</span></span>
<span id="cb104-17"><a href="array-matrix-dataframe.html#cb104-17"></a>fl_max =<span class="st"> </span><span class="dv">10</span></span>
<span id="cb104-18"><a href="array-matrix-dataframe.html#cb104-18"></a>fl_min =<span class="st"> </span><span class="dv">0</span></span>
<span id="cb104-19"><a href="array-matrix-dataframe.html#cb104-19"></a>ar_nN_d =<span class="st"> </span><span class="kw">seq</span>(fl_min, fl_max, <span class="dt">length.out =</span> it_N_choice_cnt)</span>
<span id="cb104-20"><a href="array-matrix-dataframe.html#cb104-20"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;c_food&#39;</span>)</span>
<span id="cb104-21"><a href="array-matrix-dataframe.html#cb104-21"></a>tb_choices &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ar_nN_d) <span class="op">%&gt;%</span></span>
<span id="cb104-22"><a href="array-matrix-dataframe.html#cb104-22"></a><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span></span>
<span id="cb104-23"><a href="array-matrix-dataframe.html#cb104-23"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;choice_id&quot;</span>)</span>
<span id="cb104-24"><a href="array-matrix-dataframe.html#cb104-24"></a></span>
<span id="cb104-25"><a href="array-matrix-dataframe.html#cb104-25"></a><span class="co"># C. Shock Grid</span></span>
<span id="cb104-26"><a href="array-matrix-dataframe.html#cb104-26"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb104-27"><a href="array-matrix-dataframe.html#cb104-27"></a>it_N_shock_cnt =<span class="st"> </span><span class="dv">4</span></span>
<span id="cb104-28"><a href="array-matrix-dataframe.html#cb104-28"></a>ar_nQ_shocks =<span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(it_N_shock_cnt, <span class="dt">mean=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">1</span>))</span>
<span id="cb104-29"><a href="array-matrix-dataframe.html#cb104-29"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;s_eps&#39;</span>)</span>
<span id="cb104-30"><a href="array-matrix-dataframe.html#cb104-30"></a>tb_states_exo &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ar_nQ_shocks) <span class="op">%&gt;%</span></span>
<span id="cb104-31"><a href="array-matrix-dataframe.html#cb104-31"></a><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames)) <span class="op">%&gt;%</span></span>
<span id="cb104-32"><a href="array-matrix-dataframe.html#cb104-32"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;shock_id&quot;</span>)</span>
<span id="cb104-33"><a href="array-matrix-dataframe.html#cb104-33"></a></span>
<span id="cb104-34"><a href="array-matrix-dataframe.html#cb104-34"></a><span class="co"># dataframe expand with other non expanded variables</span></span>
<span id="cb104-35"><a href="array-matrix-dataframe.html#cb104-35"></a>ar_st_varnames &lt;-</span>
<span id="cb104-36"><a href="array-matrix-dataframe.html#cb104-36"></a>tb_states_shk_choices &lt;-<span class="st"> </span>tb_states_endo <span class="op">%&gt;%</span></span>
<span id="cb104-37"><a href="array-matrix-dataframe.html#cb104-37"></a><span class="st">  </span><span class="kw">expand_grid</span>(tb_choices) <span class="op">%&gt;%</span></span>
<span id="cb104-38"><a href="array-matrix-dataframe.html#cb104-38"></a><span class="st">  </span><span class="kw">expand_grid</span>(tb_states_exo) <span class="op">%&gt;%</span></span>
<span id="cb104-39"><a href="array-matrix-dataframe.html#cb104-39"></a><span class="st">  </span><span class="kw">select</span>(state_id, choice_id, shock_id,</span>
<span id="cb104-40"><a href="array-matrix-dataframe.html#cb104-40"></a>         s_A, s_alpha, s_eps, c_food,</span>
<span id="cb104-41"><a href="array-matrix-dataframe.html#cb104-41"></a>         p_rho, p_lambda)</span>
<span id="cb104-42"><a href="array-matrix-dataframe.html#cb104-42"></a></span>
<span id="cb104-43"><a href="array-matrix-dataframe.html#cb104-43"></a><span class="co"># display</span></span>
<span id="cb104-44"><a href="array-matrix-dataframe.html#cb104-44"></a><span class="kw">kable</span>(tb_states_shk_choices) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
state_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
choice_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
shock_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_A
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_alpha
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
s_eps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
c_food
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_rho
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
p_lambda
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.5709374
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.7943926
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
4.7526783
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.0730536
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
</tbody>
</table>
<p>Using expand_grid directly over arrays</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="array-matrix-dataframe.html#cb105-1"></a><span class="co"># expand grid with dplyr</span></span>
<span id="cb105-2"><a href="array-matrix-dataframe.html#cb105-2"></a><span class="kw">expand_grid</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">z =</span> <span class="dv">-3</span><span class="op">:-</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="mesh-arrays-with-expand.grid" class="section level4" number="1.2.4.2">
<h4><span class="header-section-number">1.2.4.2</span> Mesh Arrays with expand.grid</h4>
<p>Given two arrays, mesh the two arrays together.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="array-matrix-dataframe.html#cb106-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb106-2"><a href="array-matrix-dataframe.html#cb106-2"></a></span>
<span id="cb106-3"><a href="array-matrix-dataframe.html#cb106-3"></a>it_ar_A =<span class="st"> </span><span class="dv">5</span></span>
<span id="cb106-4"><a href="array-matrix-dataframe.html#cb106-4"></a>it_ar_alpha =<span class="st"> </span><span class="dv">10</span></span>
<span id="cb106-5"><a href="array-matrix-dataframe.html#cb106-5"></a></span>
<span id="cb106-6"><a href="array-matrix-dataframe.html#cb106-6"></a>ar_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out=</span>it_ar_A)</span>
<span id="cb106-7"><a href="array-matrix-dataframe.html#cb106-7"></a>ar_alpha =<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="dt">length.out=</span>it_ar_alpha)</span>
<span id="cb106-8"><a href="array-matrix-dataframe.html#cb106-8"></a></span>
<span id="cb106-9"><a href="array-matrix-dataframe.html#cb106-9"></a>mt_A_alpha =<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">A =</span> ar_A, <span class="dt">alpha =</span> ar_alpha)</span>
<span id="cb106-10"><a href="array-matrix-dataframe.html#cb106-10"></a></span>
<span id="cb106-11"><a href="array-matrix-dataframe.html#cb106-11"></a>mt_A_meshed =<span class="st"> </span>mt_A_alpha[,<span class="dv">1</span>]</span>
<span id="cb106-12"><a href="array-matrix-dataframe.html#cb106-12"></a><span class="kw">dim</span>(mt_A_meshed) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb106-13"><a href="array-matrix-dataframe.html#cb106-13"></a></span>
<span id="cb106-14"><a href="array-matrix-dataframe.html#cb106-14"></a>mt_alpha_meshed =<span class="st"> </span>mt_A_alpha[,<span class="dv">2</span>]</span>
<span id="cb106-15"><a href="array-matrix-dataframe.html#cb106-15"></a><span class="kw">dim</span>(mt_alpha_meshed) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_alpha)</span>
<span id="cb106-16"><a href="array-matrix-dataframe.html#cb106-16"></a></span>
<span id="cb106-17"><a href="array-matrix-dataframe.html#cb106-17"></a><span class="co"># display</span></span>
<span id="cb106-18"><a href="array-matrix-dataframe.html#cb106-18"></a><span class="kw">kable</span>(mt_A_meshed) <span class="op">%&gt;%</span></span>
<span id="cb106-19"><a href="array-matrix-dataframe.html#cb106-19"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="array-matrix-dataframe.html#cb107-1"></a><span class="kw">kable</span>(mt_alpha_meshed) <span class="op">%&gt;%</span></span>
<span id="cb107-2"><a href="array-matrix-dataframe.html#cb107-2"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.1888889
</td>
<td style="text-align:right;">
0.2777778
</td>
<td style="text-align:right;">
0.3666667
</td>
<td style="text-align:right;">
0.4555556
</td>
<td style="text-align:right;">
0.5444444
</td>
<td style="text-align:right;">
0.6333333
</td>
<td style="text-align:right;">
0.7222222
</td>
<td style="text-align:right;">
0.8111111
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
</tbody>
</table>
</div>
<p>Two Identical Arrays, individual attributes, each column is an individual for a matrix, and each row is also an individual.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="array-matrix-dataframe.html#cb108-1"></a><span class="co"># use expand.grid to generate all combinations of two arrays</span></span>
<span id="cb108-2"><a href="array-matrix-dataframe.html#cb108-2"></a></span>
<span id="cb108-3"><a href="array-matrix-dataframe.html#cb108-3"></a>it_ar_A =<span class="st"> </span><span class="dv">5</span></span>
<span id="cb108-4"><a href="array-matrix-dataframe.html#cb108-4"></a></span>
<span id="cb108-5"><a href="array-matrix-dataframe.html#cb108-5"></a>ar_A =<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">length.out=</span>it_ar_A)</span>
<span id="cb108-6"><a href="array-matrix-dataframe.html#cb108-6"></a>mt_A_A =<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">Arow =</span> ar_A, <span class="dt">Arow =</span> ar_A)</span>
<span id="cb108-7"><a href="array-matrix-dataframe.html#cb108-7"></a>mt_Arow =<span class="st"> </span>mt_A_A[,<span class="dv">1</span>]</span>
<span id="cb108-8"><a href="array-matrix-dataframe.html#cb108-8"></a><span class="kw">dim</span>(mt_Arow) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb108-9"><a href="array-matrix-dataframe.html#cb108-9"></a>mt_Acol =<span class="st"> </span>mt_A_A[,<span class="dv">2</span>]</span>
<span id="cb108-10"><a href="array-matrix-dataframe.html#cb108-10"></a><span class="kw">dim</span>(mt_Acol) =<span class="st"> </span><span class="kw">c</span>(it_ar_A, it_ar_A)</span>
<span id="cb108-11"><a href="array-matrix-dataframe.html#cb108-11"></a></span>
<span id="cb108-12"><a href="array-matrix-dataframe.html#cb108-12"></a><span class="co"># display</span></span>
<span id="cb108-13"><a href="array-matrix-dataframe.html#cb108-13"></a><span class="kw">kable</span>(mt_Arow) <span class="op">%&gt;%</span></span>
<span id="cb108-14"><a href="array-matrix-dataframe.html#cb108-14"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="array-matrix-dataframe.html#cb109-1"></a><span class="kw">kable</span>(mt_Acol) <span class="op">%&gt;%</span></span>
<span id="cb109-2"><a href="array-matrix-dataframe.html#cb109-2"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
-2
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="matrix" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Matrix</h2>

<div id="generate-matrixes" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Generate Matrixes</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="create-a-n-by-2-matrix-from-3-arrays" class="section level4" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Create a N by 2 Matrix from 3 arrays</h4>
<p>Names of each array become row names automatically.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="array-matrix-dataframe.html#cb110-1"></a>ar_row_one &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb110-2"><a href="array-matrix-dataframe.html#cb110-2"></a>ar_row_two &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb110-3"><a href="array-matrix-dataframe.html#cb110-3"></a>ar_row_three &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb110-4"><a href="array-matrix-dataframe.html#cb110-4"></a></span>
<span id="cb110-5"><a href="array-matrix-dataframe.html#cb110-5"></a>mt_n_by_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb110-6"><a href="array-matrix-dataframe.html#cb110-6"></a><span class="kw">kable</span>(mt_n_by_<span class="dv">2</span>) <span class="op">%&gt;%</span></span>
<span id="cb110-7"><a href="array-matrix-dataframe.html#cb110-7"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
ar_row_one
</td>
<td style="text-align:right;">
-1.00
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_two
</td>
<td style="text-align:right;">
-3.00
</td>
<td style="text-align:right;">
-2.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ar_row_three
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
</tbody>
</table>
</div>
<div id="name-matrix-columns-and-rows" class="section level4" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Name Matrix Columns and Rows</h4>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="array-matrix-dataframe.html#cb111-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb111-2"><a href="array-matrix-dataframe.html#cb111-2"></a>mt_named &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb111-3"><a href="array-matrix-dataframe.html#cb111-3"></a><span class="kw">colnames</span>(mt_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;c&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb111-4"><a href="array-matrix-dataframe.html#cb111-4"></a><span class="kw">rownames</span>(mt_named) &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;r&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb111-5"><a href="array-matrix-dataframe.html#cb111-5"></a>mt_named</span></code></pre></div>
<pre><code>##    c1 c2
## r1 NA NA
## r2 NA NA</code></pre>
</div>
<div id="generate-na-matrix" class="section level4" number="1.3.1.3">
<h4><span class="header-section-number">1.3.1.3</span> Generate NA Matrix</h4>
<ul>
<li><a href="https://stackoverflow.com/a/26724451/8280804">Best way to allocate matrix in R, NULL vs NA?</a></li>
</ul>
<p>Allocate with NA or NA_real_ or NA_int_. Clarity in type definition is preferred.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="array-matrix-dataframe.html#cb113-1"></a><span class="co"># An empty matrix with Logical NA</span></span>
<span id="cb113-2"><a href="array-matrix-dataframe.html#cb113-2"></a>mt_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb113-3"><a href="array-matrix-dataframe.html#cb113-3"></a><span class="kw">str</span>(mt_na)</span></code></pre></div>
<pre><code>##  logi [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="array-matrix-dataframe.html#cb115-1"></a><span class="co"># An empty matrix with numerica NA</span></span>
<span id="cb115-2"><a href="array-matrix-dataframe.html#cb115-2"></a>mt_fl_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA_real_</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb115-3"><a href="array-matrix-dataframe.html#cb115-3"></a>mt_it_na &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA_integer_</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb115-4"><a href="array-matrix-dataframe.html#cb115-4"></a></span>
<span id="cb115-5"><a href="array-matrix-dataframe.html#cb115-5"></a><span class="kw">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="array-matrix-dataframe.html#cb117-1"></a><span class="kw">str</span>(mt_fl_na)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] NA NA NA NA</code></pre>
</div>
<div id="generate-random-matrixes" class="section level4" number="1.3.1.4">
<h4><span class="header-section-number">1.3.1.4</span> Generate Random Matrixes</h4>
<p>Random draw from the normal distribution, random draw from the uniform distribution, and combine resulting matrixes.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="array-matrix-dataframe.html#cb119-1"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb119-2"><a href="array-matrix-dataframe.html#cb119-2"></a>mt_rnorm &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">15</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">3</span>)</span>
<span id="cb119-3"><a href="array-matrix-dataframe.html#cb119-3"></a></span>
<span id="cb119-4"><a href="array-matrix-dataframe.html#cb119-4"></a><span class="co"># Generate 15 random normal, put in 5 rows, and 3 columns</span></span>
<span id="cb119-5"><a href="array-matrix-dataframe.html#cb119-5"></a>mt_runif &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">15</span>,<span class="dt">min=</span><span class="dv">0</span>,<span class="dt">max=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">5</span>)</span>
<span id="cb119-6"><a href="array-matrix-dataframe.html#cb119-6"></a></span>
<span id="cb119-7"><a href="array-matrix-dataframe.html#cb119-7"></a><span class="co"># Combine</span></span>
<span id="cb119-8"><a href="array-matrix-dataframe.html#cb119-8"></a>mt_rnorm_runif &lt;-<span class="st"> </span><span class="kw">cbind</span>(mt_rnorm, mt_runif)</span>
<span id="cb119-9"><a href="array-matrix-dataframe.html#cb119-9"></a></span>
<span id="cb119-10"><a href="array-matrix-dataframe.html#cb119-10"></a><span class="co"># Display</span></span>
<span id="cb119-11"><a href="array-matrix-dataframe.html#cb119-11"></a><span class="kw">kable</span>(mt_rnorm_runif) <span class="op">%&gt;%</span></span>
<span id="cb119-12"><a href="array-matrix-dataframe.html#cb119-12"></a><span class="st">  </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
-0.4456620
</td>
<td style="text-align:right;">
-0.5558411
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
<td style="text-align:right;">
0.2659726
</td>
<td style="text-align:right;">
0.3181810
</td>
<td style="text-align:right;">
0.3688455
</td>
</tr>
<tr>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
1.2240818
</td>
<td style="text-align:right;">
1.7869131
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
<td style="text-align:right;">
0.8578277
</td>
<td style="text-align:right;">
0.2316258
</td>
<td style="text-align:right;">
0.1524447
</td>
</tr>
<tr>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.3598138
</td>
<td style="text-align:right;">
0.4978505
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
<td style="text-align:right;">
0.0458312
</td>
<td style="text-align:right;">
0.1428000
</td>
<td style="text-align:right;">
0.1388061
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
0.4007715
</td>
<td style="text-align:right;">
-1.9666172
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
<td style="text-align:right;">
0.4422001
</td>
<td style="text-align:right;">
0.4145463
</td>
<td style="text-align:right;">
0.2330341
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.6868529
</td>
<td style="text-align:right;">
0.1106827
</td>
<td style="text-align:right;">
0.7013559
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
<td style="text-align:right;">
0.7989248
</td>
<td style="text-align:right;">
0.4137243
</td>
<td style="text-align:right;">
0.4659625
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="linear-algebra" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Linear Algebra</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="matrix-multiplication" class="section level4" number="1.3.2.1">
<h4><span class="header-section-number">1.3.2.1</span> Matrix Multiplication</h4>
<p>Multiply Together a 3 by 2 matrix and a 2 by 1 vector</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="array-matrix-dataframe.html#cb120-1"></a>ar_row_one &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb120-2"><a href="array-matrix-dataframe.html#cb120-2"></a>ar_row_two &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb120-3"><a href="array-matrix-dataframe.html#cb120-3"></a>ar_row_three &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.35</span>,<span class="fl">0.75</span>)</span>
<span id="cb120-4"><a href="array-matrix-dataframe.html#cb120-4"></a>mt_n_by_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(ar_row_one, ar_row_two, ar_row_three)</span>
<span id="cb120-5"><a href="array-matrix-dataframe.html#cb120-5"></a></span>
<span id="cb120-6"><a href="array-matrix-dataframe.html#cb120-6"></a>ar_row_four &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb120-7"><a href="array-matrix-dataframe.html#cb120-7"></a></span>
<span id="cb120-8"><a href="array-matrix-dataframe.html#cb120-8"></a><span class="co"># Matrix Multiplication</span></span>
<span id="cb120-9"><a href="array-matrix-dataframe.html#cb120-9"></a>mt_out &lt;-<span class="st"> </span>mt_n_by_<span class="dv">2</span> <span class="op">%*%</span><span class="st"> </span>ar_row_four</span>
<span id="cb120-10"><a href="array-matrix-dataframe.html#cb120-10"></a><span class="kw">print</span>(mt_n_by_<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##               [,1]  [,2]
## ar_row_one   -1.00  1.00
## ar_row_two   -3.00 -2.00
## ar_row_three  0.35  0.75</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="array-matrix-dataframe.html#cb122-1"></a><span class="kw">print</span>(ar_row_four)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="array-matrix-dataframe.html#cb124-1"></a><span class="kw">print</span>(mt_out)</span></code></pre></div>
<pre><code>##                [,1]
## ar_row_one     1.00
## ar_row_two   -17.00
## ar_row_three   4.05</code></pre>

</div>
</div>
</div>
<div id="variables-in-dataframes" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Variables in Dataframes</h2>

<!-- includes:
  in_header: ../../preamble.tex -->
<div id="generate-dataframe" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Generate Dataframe</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="simple-meshed-dataframe-name-columns" class="section level4" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> Simple Meshed Dataframe Name Columns</h4>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="array-matrix-dataframe.html#cb126-1"></a><span class="co"># 5 by 3 matrix</span></span>
<span id="cb126-2"><a href="array-matrix-dataframe.html#cb126-2"></a>mt_rnorm_a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">3</span>)</span>
<span id="cb126-3"><a href="array-matrix-dataframe.html#cb126-3"></a></span>
<span id="cb126-4"><a href="array-matrix-dataframe.html#cb126-4"></a><span class="co"># Column Names</span></span>
<span id="cb126-5"><a href="array-matrix-dataframe.html#cb126-5"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;id&#39;</span>,<span class="st">&#39;var1&#39;</span>,<span class="st">&#39;varb&#39;</span>,<span class="st">&#39;vartheta&#39;</span>)</span>
<span id="cb126-6"><a href="array-matrix-dataframe.html#cb126-6"></a></span>
<span id="cb126-7"><a href="array-matrix-dataframe.html#cb126-7"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb126-8"><a href="array-matrix-dataframe.html#cb126-8"></a>tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_rnorm_a) <span class="op">%&gt;%</span></span>
<span id="cb126-9"><a href="array-matrix-dataframe.html#cb126-9"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;id&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-10"><a href="array-matrix-dataframe.html#cb126-10"></a><span class="st">  </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb126-11"><a href="array-matrix-dataframe.html#cb126-11"></a></span>
<span id="cb126-12"><a href="array-matrix-dataframe.html#cb126-12"></a><span class="co"># Display</span></span>
<span id="cb126-13"><a href="array-matrix-dataframe.html#cb126-13"></a><span class="kw">kable</span>(tb_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
varb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
vartheta
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-0.3200564
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.6849361
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-1.1655448
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.3200564
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1.1655448
</td>
<td style="text-align:right;">
-0.8185157
</td>
<td style="text-align:right;">
0.6849361
</td>
</tr>
</tbody>
</table>
</div>
<div id="generate-tibble-given-matrixes-and-arrays" class="section level4" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> Generate Tibble given Matrixes and Arrays</h4>
<p>Given Arrays and Matrixes, Generate Tibble and Name Variables/Columns</p>
<ul>
<li>naming tibble columns</li>
<li>tibble variable names</li>
<li>dplyr rename tibble</li>
<li>dplyr rename tibble all variables</li>
<li>dplyr rename all columns by index</li>
<li>dplyr tibble add index column</li>
<li>see also: <a href="https://stackoverflow.com/questions/45535157/difference-between-dplyrrename-and-dplyrrename-all">SO-51205520</a></li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="array-matrix-dataframe.html#cb127-1"></a><span class="co"># Base Inputs</span></span>
<span id="cb127-2"><a href="array-matrix-dataframe.html#cb127-2"></a>ar_col &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb127-3"><a href="array-matrix-dataframe.html#cb127-3"></a>mt_rnorm_a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb127-4"><a href="array-matrix-dataframe.html#cb127-4"></a>mt_rnorm_b &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">4</span>)</span>
<span id="cb127-5"><a href="array-matrix-dataframe.html#cb127-5"></a></span>
<span id="cb127-6"><a href="array-matrix-dataframe.html#cb127-6"></a><span class="co"># Combine Matrix</span></span>
<span id="cb127-7"><a href="array-matrix-dataframe.html#cb127-7"></a>mt_combine &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_col, mt_rnorm_a, mt_rnorm_b)</span>
<span id="cb127-8"><a href="array-matrix-dataframe.html#cb127-8"></a><span class="kw">colnames</span>(mt_combine) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;ar_col&#39;</span>,</span>
<span id="cb127-9"><a href="array-matrix-dataframe.html#cb127-9"></a>                          <span class="kw">paste0</span>(<span class="st">&#39;matcolvar_grpa_&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">dim</span>(mt_rnorm_a)[<span class="dv">2</span>])),</span>
<span id="cb127-10"><a href="array-matrix-dataframe.html#cb127-10"></a>                          <span class="kw">paste0</span>(<span class="st">&#39;matcolvar_grpb_&#39;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">dim</span>(mt_rnorm_b)[<span class="dv">2</span>])))</span>
<span id="cb127-11"><a href="array-matrix-dataframe.html#cb127-11"></a></span>
<span id="cb127-12"><a href="array-matrix-dataframe.html#cb127-12"></a><span class="co"># Variable Names</span></span>
<span id="cb127-13"><a href="array-matrix-dataframe.html#cb127-13"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;var_one&#39;</span>,</span>
<span id="cb127-14"><a href="array-matrix-dataframe.html#cb127-14"></a>                    <span class="kw">paste0</span>(<span class="st">&#39;tibcolvar_ga_&#39;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)),</span>
<span id="cb127-15"><a href="array-matrix-dataframe.html#cb127-15"></a>                    <span class="kw">paste0</span>(<span class="st">&#39;tibcolvar_gb_&#39;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)))</span>
<span id="cb127-16"><a href="array-matrix-dataframe.html#cb127-16"></a></span>
<span id="cb127-17"><a href="array-matrix-dataframe.html#cb127-17"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb127-18"><a href="array-matrix-dataframe.html#cb127-18"></a>tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb127-19"><a href="array-matrix-dataframe.html#cb127-19"></a></span>
<span id="cb127-20"><a href="array-matrix-dataframe.html#cb127-20"></a><span class="co"># Add an index column to the dataframe, ID column</span></span>
<span id="cb127-21"><a href="array-matrix-dataframe.html#cb127-21"></a>tb_combine &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb127-22"><a href="array-matrix-dataframe.html#cb127-22"></a></span>
<span id="cb127-23"><a href="array-matrix-dataframe.html#cb127-23"></a><span class="co"># Change all gb variable names</span></span>
<span id="cb127-24"><a href="array-matrix-dataframe.html#cb127-24"></a>tb_combine &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span></span>
<span id="cb127-25"><a href="array-matrix-dataframe.html#cb127-25"></a><span class="st">                  </span><span class="kw">rename_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&quot;tibcolvar_gb_&quot;</span>)),</span>
<span id="cb127-26"><a href="array-matrix-dataframe.html#cb127-26"></a>                            <span class="kw">funs</span>(<span class="kw">str_replace</span>(., <span class="st">&quot;_gb_&quot;</span>, <span class="st">&quot;_gbrenamed_&quot;</span>)))</span>
<span id="cb127-27"><a href="array-matrix-dataframe.html#cb127-27"></a></span>
<span id="cb127-28"><a href="array-matrix-dataframe.html#cb127-28"></a><span class="co"># Tibble back to matrix</span></span>
<span id="cb127-29"><a href="array-matrix-dataframe.html#cb127-29"></a>mt_tb_combine_back &lt;-<span class="st"> </span><span class="kw">data.matrix</span>(tb_combine)</span>
<span id="cb127-30"><a href="array-matrix-dataframe.html#cb127-30"></a></span>
<span id="cb127-31"><a href="array-matrix-dataframe.html#cb127-31"></a><span class="co"># Display</span></span>
<span id="cb127-32"><a href="array-matrix-dataframe.html#cb127-32"></a><span class="kw">kable</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ar_col
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpa_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
matcolvar_grpb_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="array-matrix-dataframe.html#cb128-1"></a><span class="kw">kable</span>(tb_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="array-matrix-dataframe.html#cb129-1"></a><span class="kw">kable</span>(mt_tb_combine_back) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_ga_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
tibcolvar_gbrenamed_4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.3115224
</td>
<td style="text-align:right;">
-0.1294107
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
<td style="text-align:right;">
-0.1513960
</td>
<td style="text-align:right;">
-3.2273228
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.5996083
</td>
<td style="text-align:right;">
0.8867361
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
<td style="text-align:right;">
0.3297912
</td>
<td style="text-align:right;">
-0.7717918
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rename-tibble-with-numeric-column-names" class="section level4" number="1.4.1.3">
<h4><span class="header-section-number">1.4.1.3</span> Rename Tibble with Numeric Column Names</h4>
<p>After reshaping, often could end up with variable names that are all numeric, intgers for example, how to rename these variables to add a common prefix for example.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="array-matrix-dataframe.html#cb130-1"></a><span class="co"># Base Inputs</span></span>
<span id="cb130-2"><a href="array-matrix-dataframe.html#cb130-2"></a>ar_col &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb130-3"><a href="array-matrix-dataframe.html#cb130-3"></a>mt_rnorm_c &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">10</span>)</span>
<span id="cb130-4"><a href="array-matrix-dataframe.html#cb130-4"></a>mt_combine &lt;-<span class="st"> </span><span class="kw">cbind</span>(ar_col, mt_rnorm_c)</span>
<span id="cb130-5"><a href="array-matrix-dataframe.html#cb130-5"></a></span>
<span id="cb130-6"><a href="array-matrix-dataframe.html#cb130-6"></a><span class="co"># Variable Names</span></span>
<span id="cb130-7"><a href="array-matrix-dataframe.html#cb130-7"></a>ar_it_cols_ctr &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">dim</span>(mt_rnorm_c)[<span class="dv">2</span>])</span>
<span id="cb130-8"><a href="array-matrix-dataframe.html#cb130-8"></a>ar_st_varnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;var_one&#39;</span>, ar_it_cols_ctr)</span>
<span id="cb130-9"><a href="array-matrix-dataframe.html#cb130-9"></a></span>
<span id="cb130-10"><a href="array-matrix-dataframe.html#cb130-10"></a><span class="co"># Combine to tibble, add name col1, col2, etc.</span></span>
<span id="cb130-11"><a href="array-matrix-dataframe.html#cb130-11"></a>tb_combine &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mt_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename_all</span>(<span class="op">~</span><span class="kw">c</span>(ar_st_varnames))</span>
<span id="cb130-12"><a href="array-matrix-dataframe.html#cb130-12"></a></span>
<span id="cb130-13"><a href="array-matrix-dataframe.html#cb130-13"></a><span class="co"># Add an index column to the dataframe, ID column</span></span>
<span id="cb130-14"><a href="array-matrix-dataframe.html#cb130-14"></a>tb_combine_ori &lt;-<span class="st"> </span>tb_combine <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb130-15"><a href="array-matrix-dataframe.html#cb130-15"></a></span>
<span id="cb130-16"><a href="array-matrix-dataframe.html#cb130-16"></a><span class="co"># Change all gb variable names</span></span>
<span id="cb130-17"><a href="array-matrix-dataframe.html#cb130-17"></a>tb_combine &lt;-<span class="st"> </span>tb_combine_ori <span class="op">%&gt;%</span></span>
<span id="cb130-18"><a href="array-matrix-dataframe.html#cb130-18"></a><span class="st">                  </span><span class="kw">rename_at</span>(</span>
<span id="cb130-19"><a href="array-matrix-dataframe.html#cb130-19"></a>                    <span class="kw">vars</span>(<span class="kw">num_range</span>(<span class="st">&#39;&#39;</span>,ar_it_cols_ctr)),</span>
<span id="cb130-20"><a href="array-matrix-dataframe.html#cb130-20"></a>                    <span class="kw">funs</span>(<span class="kw">paste0</span>(<span class="st">&quot;rho&quot;</span>, . , <span class="st">&#39;var&#39;</span>))</span>
<span id="cb130-21"><a href="array-matrix-dataframe.html#cb130-21"></a>                    )</span>
<span id="cb130-22"><a href="array-matrix-dataframe.html#cb130-22"></a></span>
<span id="cb130-23"><a href="array-matrix-dataframe.html#cb130-23"></a><span class="co"># Display</span></span>
<span id="cb130-24"><a href="array-matrix-dataframe.html#cb130-24"></a><span class="kw">kable</span>(tb_combine_ori) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
5
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
6
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
7
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
8
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
9
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
10
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="array-matrix-dataframe.html#cb131-1"></a><span class="kw">kable</span>(tb_combine) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
var_one
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho1var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho2var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho3var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho4var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho5var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho6var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho7var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho8var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho9var
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
rho10var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
<td style="text-align:right;">
0.4345504
</td>
<td style="text-align:right;">
0.8001769
</td>
<td style="text-align:right;">
0.2865486
</td>
<td style="text-align:right;">
-1.2205120
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="tibble-row-and-column-and-summarize" class="section level4" number="1.4.1.4">
<h4><span class="header-section-number">1.4.1.4</span> Tibble Row and Column and Summarize</h4>
<p>Show what is in the table: 1, column and row names; 2, contents inside table.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="array-matrix-dataframe.html#cb132-1"></a>tb_iris &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(iris)</span>
<span id="cb132-2"><a href="array-matrix-dataframe.html#cb132-2"></a><span class="kw">print</span>(<span class="kw">rownames</span>(tb_iris))</span></code></pre></div>
<pre><code>##   [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot;  &quot;12&quot;  &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot;  &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot; 
##  [22] &quot;22&quot;  &quot;23&quot;  &quot;24&quot;  &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot;  &quot;33&quot;  &quot;34&quot;  &quot;35&quot;  &quot;36&quot;  &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot; 
##  [43] &quot;43&quot;  &quot;44&quot;  &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot;  &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot;  &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot;  &quot;61&quot;  &quot;62&quot;  &quot;63&quot; 
##  [64] &quot;64&quot;  &quot;65&quot;  &quot;66&quot;  &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot;  &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot;  &quot;78&quot;  &quot;79&quot;  &quot;80&quot;  &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot; 
##  [85] &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot;  &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot;  &quot;97&quot;  &quot;98&quot;  &quot;99&quot;  &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot;
## [106] &quot;106&quot; &quot;107&quot; &quot;108&quot; &quot;109&quot; &quot;110&quot; &quot;111&quot; &quot;112&quot; &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot; &quot;121&quot; &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot;
## [127] &quot;127&quot; &quot;128&quot; &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot; &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot; &quot;144&quot; &quot;145&quot; &quot;146&quot; &quot;147&quot;
## [148] &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="array-matrix-dataframe.html#cb134-1"></a><span class="kw">colnames</span>(tb_iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="array-matrix-dataframe.html#cb136-1"></a><span class="kw">colnames</span>(tb_iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="array-matrix-dataframe.html#cb138-1"></a><span class="kw">summary</span>(tb_iris)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500</code></pre>
</div>
<div id="tibble-sorting" class="section level4" number="1.4.1.5">
<h4><span class="header-section-number">1.4.1.5</span> Tibble Sorting</h4>
<ul>
<li>dplyr arrange desc reverse</li>
<li>dplyr sort</li>
</ul>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="array-matrix-dataframe.html#cb140-1"></a><span class="co"># Sort in Ascending Order</span></span>
<span id="cb140-2"><a href="array-matrix-dataframe.html#cb140-2"></a>tb_iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species, Sepal.Length, <span class="kw">everything</span>()) <span class="op">%&gt;%</span></span>
<span id="cb140-3"><a href="array-matrix-dataframe.html#cb140-3"></a><span class="st">  </span><span class="kw">arrange</span>(Species, Sepal.Length) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb140-4"><a href="array-matrix-dataframe.html#cb140-4"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.1
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="array-matrix-dataframe.html#cb141-1"></a><span class="co"># Sort in Descending Order</span></span>
<span id="cb141-2"><a href="array-matrix-dataframe.html#cb141-2"></a>tb_iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species, Sepal.Length, <span class="kw">everything</span>()) <span class="op">%&gt;%</span></span>
<span id="cb141-3"><a href="array-matrix-dataframe.html#cb141-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Species), <span class="kw">desc</span>(Sepal.Length)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb141-4"><a href="array-matrix-dataframe.html#cb141-4"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Species
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sepal.Width
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Length
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Petal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.4
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.6
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
</tbody>
</table>
</div>
<div id="recontools-summarize-over-tible" class="section level4" number="1.4.1.6">
<h4><span class="header-section-number">1.4.1.6</span> REconTools Summarize over Tible</h4>
<p>Use R4Econâ€™s summary tool.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="array-matrix-dataframe.html#cb142-1"></a>df_summ_stats &lt;-<span class="st"> </span><span class="kw">ff_summ_percentiles</span>(tb_iris)</span>
<span id="cb142-2"><a href="array-matrix-dataframe.html#cb142-2"></a><span class="kw">kable</span>(<span class="kw">t</span>(df_summ_stats)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
stats
</td>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
NAobs
</td>
<td style="text-align:left;">
ZEROobs
</td>
<td style="text-align:left;">
mean
</td>
<td style="text-align:left;">
sd
</td>
<td style="text-align:left;">
cv
</td>
<td style="text-align:left;">
min
</td>
<td style="text-align:left;">
p01
</td>
<td style="text-align:left;">
p05
</td>
<td style="text-align:left;">
p10
</td>
<td style="text-align:left;">
p25
</td>
<td style="text-align:left;">
p50
</td>
<td style="text-align:left;">
p75
</td>
<td style="text-align:left;">
p90
</td>
<td style="text-align:left;">
p95
</td>
<td style="text-align:left;">
p99
</td>
<td style="text-align:left;">
max
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.758000
</td>
<td style="text-align:left;">
1.7652982
</td>
<td style="text-align:left;">
0.4697441
</td>
<td style="text-align:left;">
1.0
</td>
<td style="text-align:left;">
1.149
</td>
<td style="text-align:left;">
1.300
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
4.35
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.100
</td>
<td style="text-align:left;">
6.700
</td>
<td style="text-align:left;">
6.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Petal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1.199333
</td>
<td style="text-align:left;">
0.7622377
</td>
<td style="text-align:left;">
0.6355511
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.100
</td>
<td style="text-align:left;">
0.200
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
1.30
</td>
<td style="text-align:left;">
1.8
</td>
<td style="text-align:left;">
2.20
</td>
<td style="text-align:left;">
2.300
</td>
<td style="text-align:left;">
2.500
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Length
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
5.843333
</td>
<td style="text-align:left;">
0.8280661
</td>
<td style="text-align:left;">
0.1417113
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
4.400
</td>
<td style="text-align:left;">
4.600
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.80
</td>
<td style="text-align:left;">
6.4
</td>
<td style="text-align:left;">
6.90
</td>
<td style="text-align:left;">
7.255
</td>
<td style="text-align:left;">
7.700
</td>
<td style="text-align:left;">
7.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Sepal.Width
</td>
<td style="text-align:left;">
150
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
3.057333
</td>
<td style="text-align:left;">
0.4358663
</td>
<td style="text-align:left;">
0.1425642
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
2.200
</td>
<td style="text-align:left;">
2.345
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
2.8
</td>
<td style="text-align:left;">
3.00
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
3.61
</td>
<td style="text-align:left;">
3.800
</td>
<td style="text-align:left;">
4.151
</td>
<td style="text-align:left;">
4.4
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="factor-label-and-combine" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Factor Label and Combine</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="factor-label-cross-and-graph" class="section level4" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Factor, Label, Cross and Graph</h4>
<p>Generate a Scatter plot with different colors representing different categories. There are multiple underlying factor/categorical variables, for example two binary variables. Generate scatter plot with colors for the combinations of these two binary variables.</p>
<p>We combine here the <em>vs</em> and <em>am</em> variables from the <em>mtcars</em> dataset. <em>vs</em> is engine shape, <em>am</em> is auto or manual shift. We will generate a scatter plot of <em>mpg</em> and <em>qsec</em> over four categories with different colors.</p>
<ul>
<li><em>am</em>: Transmission (0 = automatic, 1 = manual)</li>
<li><em>vs</em>: Engine (0 = V-shaped, 1 = straight)</li>
<li><em>mpg</em>: miles per galon</li>
<li><em>qsec</em>: 1/4 mile time</li>
</ul>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="array-matrix-dataframe.html#cb143-1"></a><span class="co"># First make sure these are factors</span></span>
<span id="cb143-2"><a href="array-matrix-dataframe.html#cb143-2"></a>tb_mtcars &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(mtcars) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb143-3"><a href="array-matrix-dataframe.html#cb143-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs =</span> <span class="kw">as_factor</span>(vs), <span class="dt">am =</span> <span class="kw">as_factor</span>(am))</span>
<span id="cb143-4"><a href="array-matrix-dataframe.html#cb143-4"></a></span>
<span id="cb143-5"><a href="array-matrix-dataframe.html#cb143-5"></a><span class="co"># Second Label the Factors</span></span>
<span id="cb143-6"><a href="array-matrix-dataframe.html#cb143-6"></a>am_levels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">auto_shift =</span> <span class="st">&quot;0&quot;</span>, <span class="dt">manual_shift =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb143-7"><a href="array-matrix-dataframe.html#cb143-7"></a>vs_levels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">vshaped_engine =</span> <span class="st">&quot;0&quot;</span>, <span class="dt">straight_engine =</span> <span class="st">&quot;1&quot;</span>)</span>
<span id="cb143-8"><a href="array-matrix-dataframe.html#cb143-8"></a>tb_mtcars &lt;-<span class="st"> </span>tb_mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb143-9"><a href="array-matrix-dataframe.html#cb143-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs =</span> <span class="kw">fct_recode</span>(vs, <span class="op">!!!</span>vs_levels),</span>
<span id="cb143-10"><a href="array-matrix-dataframe.html#cb143-10"></a>         <span class="dt">am =</span> <span class="kw">fct_recode</span>(am, <span class="op">!!!</span>am_levels))</span>
<span id="cb143-11"><a href="array-matrix-dataframe.html#cb143-11"></a></span>
<span id="cb143-12"><a href="array-matrix-dataframe.html#cb143-12"></a><span class="co"># Third Combine Factors</span></span>
<span id="cb143-13"><a href="array-matrix-dataframe.html#cb143-13"></a>tb_mtcars_selected &lt;-<span class="st"> </span>tb_mtcars <span class="op">%&gt;%</span></span>
<span id="cb143-14"><a href="array-matrix-dataframe.html#cb143-14"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vs_am =</span> <span class="kw">fct_cross</span>(vs, am, <span class="dt">sep=</span><span class="st">&#39;_&#39;</span>, <span class="dt">keep_empty =</span> <span class="ot">FALSE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb143-15"><a href="array-matrix-dataframe.html#cb143-15"></a><span class="st">  </span><span class="kw">select</span>(mpg, qsec, vs_am)</span>
<span id="cb143-16"><a href="array-matrix-dataframe.html#cb143-16"></a><span class="kw">print</span>(tb_mtcars_selected)</span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="array-matrix-dataframe.html#cb144-1"></a><span class="co"># Labeling</span></span>
<span id="cb144-2"><a href="array-matrix-dataframe.html#cb144-2"></a>st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Distribution of MPG and QSEC from mtcars&#39;</span>)</span>
<span id="cb144-3"><a href="array-matrix-dataframe.html#cb144-3"></a>st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb144-4"><a href="array-matrix-dataframe.html#cb144-4"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_factors.html&#39;</span>)</span>
<span id="cb144-5"><a href="array-matrix-dataframe.html#cb144-5"></a>st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb144-6"><a href="array-matrix-dataframe.html#cb144-6"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb144-7"><a href="array-matrix-dataframe.html#cb144-7"></a>st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb144-8"><a href="array-matrix-dataframe.html#cb144-8"></a>st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb144-9"><a href="array-matrix-dataframe.html#cb144-9"></a></span>
<span id="cb144-10"><a href="array-matrix-dataframe.html#cb144-10"></a><span class="co"># Graphing</span></span>
<span id="cb144-11"><a href="array-matrix-dataframe.html#cb144-11"></a>plt_mtcars_scatter &lt;-<span class="st"> </span></span>
<span id="cb144-12"><a href="array-matrix-dataframe.html#cb144-12"></a><span class="st">  </span><span class="kw">ggplot</span>(tb_mtcars_selected, </span>
<span id="cb144-13"><a href="array-matrix-dataframe.html#cb144-13"></a>         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, <span class="dt">colour=</span>vs_am, <span class="dt">shape=</span>vs_am)) <span class="op">+</span></span>
<span id="cb144-14"><a href="array-matrix-dataframe.html#cb144-14"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></span>
<span id="cb144-15"><a href="array-matrix-dataframe.html#cb144-15"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</span>
<span id="cb144-16"><a href="array-matrix-dataframe.html#cb144-16"></a>       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></span>
<span id="cb144-17"><a href="array-matrix-dataframe.html#cb144-17"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span>
<span id="cb144-18"><a href="array-matrix-dataframe.html#cb144-18"></a></span>
<span id="cb144-19"><a href="array-matrix-dataframe.html#cb144-19"></a><span class="co"># show</span></span>
<span id="cb144-20"><a href="array-matrix-dataframe.html#cb144-20"></a><span class="kw">print</span>(plt_mtcars_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-40-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
<div id="drawly-random-rows" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Drawly Random Rows</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="draw-random-subset-of-sample" class="section level4" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> Draw Random Subset of Sample</h4>
<ul>
<li>r random discrete</li>
</ul>
<p>We have a sample of N individuals in some dataframe. Draw without replacement a subset <span class="math inline">\(M&lt;N\)</span> of rows.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="array-matrix-dataframe.html#cb145-1"></a><span class="co"># parameters, it_M &lt; it_N</span></span>
<span id="cb145-2"><a href="array-matrix-dataframe.html#cb145-2"></a>it_N &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb145-3"><a href="array-matrix-dataframe.html#cb145-3"></a>it_M &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb145-4"><a href="array-matrix-dataframe.html#cb145-4"></a></span>
<span id="cb145-5"><a href="array-matrix-dataframe.html#cb145-5"></a><span class="co"># Draw it_m from indexed list of it_N</span></span>
<span id="cb145-6"><a href="array-matrix-dataframe.html#cb145-6"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb145-7"><a href="array-matrix-dataframe.html#cb145-7"></a>ar_it_rand_idx &lt;-<span class="st"> </span><span class="kw">sample</span>(it_N, it_M, <span class="dt">replace=</span><span class="ot">FALSE</span>)</span>
<span id="cb145-8"><a href="array-matrix-dataframe.html#cb145-8"></a></span>
<span id="cb145-9"><a href="array-matrix-dataframe.html#cb145-9"></a><span class="co"># dataframe</span></span>
<span id="cb145-10"><a href="array-matrix-dataframe.html#cb145-10"></a>df_full &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>), <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span><span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb145-11"><a href="array-matrix-dataframe.html#cb145-11"></a></span>
<span id="cb145-12"><a href="array-matrix-dataframe.html#cb145-12"></a><span class="co"># random Subset</span></span>
<span id="cb145-13"><a href="array-matrix-dataframe.html#cb145-13"></a>df_rand_sub_a &lt;-<span class="st"> </span>df_full[ar_it_rand_idx,]</span>
<span id="cb145-14"><a href="array-matrix-dataframe.html#cb145-14"></a></span>
<span id="cb145-15"><a href="array-matrix-dataframe.html#cb145-15"></a><span class="co"># Random subset also</span></span>
<span id="cb145-16"><a href="array-matrix-dataframe.html#cb145-16"></a>df_rand_sub_b &lt;-<span class="st"> </span>df_full[<span class="kw">sample</span>(<span class="kw">dim</span>(df_full)[<span class="dv">1</span>], it_M, <span class="dt">replace=</span><span class="ot">FALSE</span>),]</span>
<span id="cb145-17"><a href="array-matrix-dataframe.html#cb145-17"></a></span>
<span id="cb145-18"><a href="array-matrix-dataframe.html#cb145-18"></a><span class="co"># Print</span></span>
<span id="cb145-19"><a href="array-matrix-dataframe.html#cb145-19"></a><span class="co"># Display</span></span>
<span id="cb145-20"><a href="array-matrix-dataframe.html#cb145-20"></a><span class="kw">kable</span>(df_full) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="array-matrix-dataframe.html#cb146-1"></a><span class="kw">kable</span>(df_rand_sub_a) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="array-matrix-dataframe.html#cb147-1"></a><span class="kw">kable</span>(df_rand_sub_b) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
<td style="text-align:right;">
0.1292877
</td>
<td style="text-align:right;">
0.4609162
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
<td style="text-align:right;">
-1.2650612
</td>
<td style="text-align:right;">
1.7150650
</td>
</tr>
</tbody>
</table>
</div>
<div id="random-subset-of-panel" class="section level4" number="1.4.3.2">
<h4><span class="header-section-number">1.4.3.2</span> Random Subset of Panel</h4>
<p>There are <span class="math inline">\(N\)</span> individuals, each could be observed <span class="math inline">\(M\)</span> times, but then select a subset of rows only, so each person is randomly observed only a subset of times. Specifically, there there are 3 unique students with student ids, and the second variable shows the random dates in which the student showed up in class, out of the 10 classes available.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="array-matrix-dataframe.html#cb148-1"></a><span class="co"># Define</span></span>
<span id="cb148-2"><a href="array-matrix-dataframe.html#cb148-2"></a>it_N &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb148-3"><a href="array-matrix-dataframe.html#cb148-3"></a>it_M &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb148-4"><a href="array-matrix-dataframe.html#cb148-4"></a>svr_id &lt;-<span class="st"> &#39;student_id&#39;</span></span>
<span id="cb148-5"><a href="array-matrix-dataframe.html#cb148-5"></a></span>
<span id="cb148-6"><a href="array-matrix-dataframe.html#cb148-6"></a><span class="co"># dataframe</span></span>
<span id="cb148-7"><a href="array-matrix-dataframe.html#cb148-7"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb148-8"><a href="array-matrix-dataframe.html#cb148-8"></a>df_panel_rand &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">matrix</span>(it_M, <span class="dt">nrow=</span>it_N, <span class="dt">ncol=</span><span class="dv">1</span>)) <span class="op">%&gt;%</span></span>
<span id="cb148-9"><a href="array-matrix-dataframe.html#cb148-9"></a><span class="st">  </span><span class="kw">rowid_to_column</span>(<span class="dt">var =</span> svr_id) <span class="op">%&gt;%</span></span>
<span id="cb148-10"><a href="array-matrix-dataframe.html#cb148-10"></a><span class="st">  </span><span class="kw">uncount</span>(V1) <span class="op">%&gt;%</span></span>
<span id="cb148-11"><a href="array-matrix-dataframe.html#cb148-11"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="op">!!</span><span class="kw">sym</span>(svr_id)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></span>
<span id="cb148-12"><a href="array-matrix-dataframe.html#cb148-12"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">in_class =</span> <span class="kw">case_when</span>(<span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">%&gt;%</span></span>
<span id="cb148-13"><a href="array-matrix-dataframe.html#cb148-13"></a><span class="st">  </span><span class="kw">filter</span>(in_class <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">!!</span><span class="kw">sym</span>(svr_id), date) <span class="op">%&gt;%</span></span>
<span id="cb148-14"><a href="array-matrix-dataframe.html#cb148-14"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">date_in_class =</span> date)</span>
<span id="cb148-15"><a href="array-matrix-dataframe.html#cb148-15"></a></span>
<span id="cb148-16"><a href="array-matrix-dataframe.html#cb148-16"></a><span class="co"># Print</span></span>
<span id="cb148-17"><a href="array-matrix-dataframe.html#cb148-17"></a><span class="kw">kable</span>(df_panel_rand) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
student_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
date_in_class
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
9
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="generate-variables-conditional-on-others" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Generate Variables Conditional On Others</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="case_when-basic-example" class="section level4" number="1.4.4.1">
<h4><span class="header-section-number">1.4.4.1</span> case_when Basic Example</h4>
<p>Given several other variables, and generate a new variable when these varaibles satisfy conditions. Note that case_when are ifelse type statements. So below</p>
<ol style="list-style-type: decimal">
<li>group one is below 16 MPG</li>
<li>when do <em>qsec &gt;= 20</em> second line that is elseif, only those that are <em>&gt;=16</em> are considered here</li>
<li>then think about two dimensional mpg and qsec grid, the lower-right area, give another category to manual cars in that group</li>
</ol>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="array-matrix-dataframe.html#cb149-1"></a><span class="co"># Get mtcars</span></span>
<span id="cb149-2"><a href="array-matrix-dataframe.html#cb149-2"></a>df_mtcars &lt;-<span class="st"> </span>mtcars</span>
<span id="cb149-3"><a href="array-matrix-dataframe.html#cb149-3"></a></span>
<span id="cb149-4"><a href="array-matrix-dataframe.html#cb149-4"></a><span class="co"># case_when with mtcars</span></span>
<span id="cb149-5"><a href="array-matrix-dataframe.html#cb149-5"></a>df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span></span>
<span id="cb149-6"><a href="array-matrix-dataframe.html#cb149-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_qsec_am_grp =</span> </span>
<span id="cb149-7"><a href="array-matrix-dataframe.html#cb149-7"></a>           <span class="kw">case_when</span>(mpg <span class="op">&lt;</span><span class="st"> </span><span class="dv">16</span> <span class="op">~</span><span class="st"> &quot;&lt; 16 MPG&quot;</span>,</span>
<span id="cb149-8"><a href="array-matrix-dataframe.html#cb149-8"></a>                     qsec <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</span>
<span id="cb149-9"><a href="array-matrix-dataframe.html#cb149-9"></a>                     am <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</span>
<span id="cb149-10"><a href="array-matrix-dataframe.html#cb149-10"></a>                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Others&quot;</span>))</span>
<span id="cb149-11"><a href="array-matrix-dataframe.html#cb149-11"></a></span>
<span id="cb149-12"><a href="array-matrix-dataframe.html#cb149-12"></a><span class="co"># # For dataframe</span></span>
<span id="cb149-13"><a href="array-matrix-dataframe.html#cb149-13"></a><span class="co"># df.reg &lt;-df.reg %&gt;% na_if(-Inf) %&gt;% na_if(Inf)</span></span>
<span id="cb149-14"><a href="array-matrix-dataframe.html#cb149-14"></a><span class="co"># # For a specific variable in dataframe</span></span>
<span id="cb149-15"><a href="array-matrix-dataframe.html#cb149-15"></a><span class="co"># df.reg.use %&gt;% mutate(!!(var.input) := na_if(!!sym(var.input), 0))</span></span>
<span id="cb149-16"><a href="array-matrix-dataframe.html#cb149-16"></a><span class="co"># </span></span>
<span id="cb149-17"><a href="array-matrix-dataframe.html#cb149-17"></a><span class="co"># # Setting to NA</span></span>
<span id="cb149-18"><a href="array-matrix-dataframe.html#cb149-18"></a><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></span>
<span id="cb149-19"><a href="array-matrix-dataframe.html#cb149-19"></a><span class="co"># df.reg.use.log &lt;- df.reg.use</span></span>
<span id="cb149-20"><a href="array-matrix-dataframe.html#cb149-20"></a><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></span>
<span id="cb149-21"><a href="array-matrix-dataframe.html#cb149-21"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></span>
<span id="cb149-22"><a href="array-matrix-dataframe.html#cb149-22"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></span>
<span id="cb149-23"><a href="array-matrix-dataframe.html#cb149-23"></a><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></span>
<span id="cb149-24"><a href="array-matrix-dataframe.html#cb149-24"></a><span class="co"># # df.reg.use.log$prot.imputed.log</span></span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="array-matrix-dataframe.html#cb150-1"></a><span class="co"># Labeling</span></span>
<span id="cb150-2"><a href="array-matrix-dataframe.html#cb150-2"></a>st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Use case_when To Generate ifelse Groupings&#39;</span>)</span>
<span id="cb150-3"><a href="array-matrix-dataframe.html#cb150-3"></a>st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb150-4"><a href="array-matrix-dataframe.html#cb150-4"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</span>
<span id="cb150-5"><a href="array-matrix-dataframe.html#cb150-5"></a>st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb150-6"><a href="array-matrix-dataframe.html#cb150-6"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb150-7"><a href="array-matrix-dataframe.html#cb150-7"></a>st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb150-8"><a href="array-matrix-dataframe.html#cb150-8"></a>st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb150-9"><a href="array-matrix-dataframe.html#cb150-9"></a></span>
<span id="cb150-10"><a href="array-matrix-dataframe.html#cb150-10"></a><span class="co"># Graphing</span></span>
<span id="cb150-11"><a href="array-matrix-dataframe.html#cb150-11"></a>plt_mtcars_casewhen_scatter &lt;-<span class="st"> </span></span>
<span id="cb150-12"><a href="array-matrix-dataframe.html#cb150-12"></a><span class="st">  </span><span class="kw">ggplot</span>(df_mtcars, </span>
<span id="cb150-13"><a href="array-matrix-dataframe.html#cb150-13"></a>         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, </span>
<span id="cb150-14"><a href="array-matrix-dataframe.html#cb150-14"></a>             <span class="dt">colour=</span>mpg_qsec_am_grp, </span>
<span id="cb150-15"><a href="array-matrix-dataframe.html#cb150-15"></a>             <span class="dt">shape=</span>mpg_qsec_am_grp)) <span class="op">+</span></span>
<span id="cb150-16"><a href="array-matrix-dataframe.html#cb150-16"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></span>
<span id="cb150-17"><a href="array-matrix-dataframe.html#cb150-17"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</span>
<span id="cb150-18"><a href="array-matrix-dataframe.html#cb150-18"></a>       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></span>
<span id="cb150-19"><a href="array-matrix-dataframe.html#cb150-19"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span>
<span id="cb150-20"><a href="array-matrix-dataframe.html#cb150-20"></a></span>
<span id="cb150-21"><a href="array-matrix-dataframe.html#cb150-21"></a><span class="co"># show</span></span>
<span id="cb150-22"><a href="array-matrix-dataframe.html#cb150-22"></a><span class="kw">print</span>(plt_mtcars_casewhen_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-45-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="generate-na-values-if-variables-have-certain-value" class="section level4" number="1.4.4.2">
<h4><span class="header-section-number">1.4.4.2</span> Generate NA values if Variables have Certain Value</h4>
<p>In the example below, in one line:</p>
<ol style="list-style-type: decimal">
<li>generate a random standard normal vector</li>
<li>two set na methods:
<ul>
<li>if the value of the standard normal is negative, set value to -999, otherwise MPG, replace the value <em>-999</em> with <em>NA</em></li>
<li>case_when only with type specific NA values</li>
<li><a href="https://github.com/tidyverse/dplyr/issues/3202#issuecomment-343601409">Assigning NA yields error in case_when</a></li>
<li>note we need to conform NA to type</li>
</ul></li>
<li>generate new categorical variable based on NA condition using is.na with both string and numeric NAs jointly considered.
<ul>
<li>fake NA string to be printed on chart</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="array-matrix-dataframe.html#cb151-1"></a><span class="co"># Get mtcars</span></span>
<span id="cb151-2"><a href="array-matrix-dataframe.html#cb151-2"></a>df_mtcars &lt;-<span class="st"> </span>mtcars</span>
<span id="cb151-3"><a href="array-matrix-dataframe.html#cb151-3"></a></span>
<span id="cb151-4"><a href="array-matrix-dataframe.html#cb151-4"></a><span class="co"># Make some values of mpg randomly NA</span></span>
<span id="cb151-5"><a href="array-matrix-dataframe.html#cb151-5"></a><span class="co"># the NA has to conform to the type of the remaining values for the new variable</span></span>
<span id="cb151-6"><a href="array-matrix-dataframe.html#cb151-6"></a><span class="co"># NA_real_, NA_character_, NA_integer_, NA_complex_</span></span>
<span id="cb151-7"><a href="array-matrix-dataframe.html#cb151-7"></a><span class="kw">set.seed</span>(<span class="dv">2341</span>)</span>
<span id="cb151-8"><a href="array-matrix-dataframe.html#cb151-8"></a>df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb151-9"><a href="array-matrix-dataframe.html#cb151-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA1 =</span> <span class="kw">na_if</span>(</span>
<span id="cb151-10"><a href="array-matrix-dataframe.html#cb151-10"></a>    <span class="kw">case_when</span>(</span>
<span id="cb151-11"><a href="array-matrix-dataframe.html#cb151-11"></a>      <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">-999</span>, </span>
<span id="cb151-12"><a href="array-matrix-dataframe.html#cb151-12"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>mpg), </span>
<span id="cb151-13"><a href="array-matrix-dataframe.html#cb151-13"></a>    <span class="dv">-999</span>)) <span class="op">%&gt;%</span></span>
<span id="cb151-14"><a href="array-matrix-dataframe.html#cb151-14"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA2 =</span> <span class="kw">case_when</span>(</span>
<span id="cb151-15"><a href="array-matrix-dataframe.html#cb151-15"></a>    <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_real_</span>, </span>
<span id="cb151-16"><a href="array-matrix-dataframe.html#cb151-16"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></span>
<span id="cb151-17"><a href="array-matrix-dataframe.html#cb151-17"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mpg_wth_NA3 =</span> <span class="kw">case_when</span>(</span>
<span id="cb151-18"><a href="array-matrix-dataframe.html#cb151-18"></a>    <span class="kw">rnorm</span>(<span class="kw">n</span>(),<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span><span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_character_</span>, </span>
<span id="cb151-19"><a href="array-matrix-dataframe.html#cb151-19"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;shock &gt; 0 string&quot;</span>))</span>
<span id="cb151-20"><a href="array-matrix-dataframe.html#cb151-20"></a>  </span>
<span id="cb151-21"><a href="array-matrix-dataframe.html#cb151-21"></a><span class="co"># Generate New Variables based on if mpg_wth_NA is NA or not</span></span>
<span id="cb151-22"><a href="array-matrix-dataframe.html#cb151-22"></a><span class="co"># same variable as above, but now first a category based on if NA</span></span>
<span id="cb151-23"><a href="array-matrix-dataframe.html#cb151-23"></a><span class="co"># And we generate a fake string &quot;NA&quot; variable, this is not NA</span></span>
<span id="cb151-24"><a href="array-matrix-dataframe.html#cb151-24"></a><span class="co"># the String NA allows for it to be printed on figure</span></span>
<span id="cb151-25"><a href="array-matrix-dataframe.html#cb151-25"></a>df_mtcars &lt;-<span class="st"> </span>df_mtcars <span class="op">%&gt;%</span></span>
<span id="cb151-26"><a href="array-matrix-dataframe.html#cb151-26"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group_with_na =</span> </span>
<span id="cb151-27"><a href="array-matrix-dataframe.html#cb151-27"></a>           <span class="kw">case_when</span>(<span class="kw">is.na</span>(mpg_wth_NA2) <span class="op">&amp;</span><span class="st"> </span><span class="kw">is.na</span>(mpg_wth_NA3) <span class="op">~</span><span class="st"> </span></span>
<span id="cb151-28"><a href="array-matrix-dataframe.html#cb151-28"></a><span class="st">                       &quot;Rand String and Rand Numeric both NA&quot;</span>, </span>
<span id="cb151-29"><a href="array-matrix-dataframe.html#cb151-29"></a>                     mpg <span class="op">&lt;</span><span class="st"> </span><span class="dv">16</span> <span class="op">~</span><span class="st"> &quot;&lt; 16 MPG&quot;</span>,</span>
<span id="cb151-30"><a href="array-matrix-dataframe.html#cb151-30"></a>                     qsec <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; qsec &gt;= 20&quot;</span>,</span>
<span id="cb151-31"><a href="array-matrix-dataframe.html#cb151-31"></a>                     am <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;&gt; 16 MPG &amp; asec &lt; 20 &amp; manual&quot;</span>,</span>
<span id="cb151-32"><a href="array-matrix-dataframe.html#cb151-32"></a>                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Fake String NA&quot;</span>))</span>
<span id="cb151-33"><a href="array-matrix-dataframe.html#cb151-33"></a></span>
<span id="cb151-34"><a href="array-matrix-dataframe.html#cb151-34"></a><span class="co"># show</span></span>
<span id="cb151-35"><a href="array-matrix-dataframe.html#cb151-35"></a><span class="kw">kable</span>(<span class="kw">head</span>(df_mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&#39;mpg&#39;</span>)),<span class="dv">13</span>)) <span class="op">%&gt;%</span></span>
<span id="cb151-36"><a href="array-matrix-dataframe.html#cb151-36"></a><span class="st">  </span><span class="kw">kable_styling_fc</span>()</span></code></pre></div>
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mpg_wth_NA3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
<tr>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
24.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
19.2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:right;">
16.4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
17.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
shock &gt; 0 string
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="array-matrix-dataframe.html#cb152-1"></a><span class="co"># # Setting to NA</span></span>
<span id="cb152-2"><a href="array-matrix-dataframe.html#cb152-2"></a><span class="co"># df.reg.use &lt;- df.reg.guat %&gt;% filter(!!sym(var.mth) != 0)</span></span>
<span id="cb152-3"><a href="array-matrix-dataframe.html#cb152-3"></a><span class="co"># df.reg.use.log &lt;- df.reg.use</span></span>
<span id="cb152-4"><a href="array-matrix-dataframe.html#cb152-4"></a><span class="co"># df.reg.use.log[which(is.nan(df.reg.use$prot.imputed.log)),] = NA</span></span>
<span id="cb152-5"><a href="array-matrix-dataframe.html#cb152-5"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==Inf),] = NA</span></span>
<span id="cb152-6"><a href="array-matrix-dataframe.html#cb152-6"></a><span class="co"># df.reg.use.log[which(df.reg.use$prot.imputed.log==-Inf),] = NA</span></span>
<span id="cb152-7"><a href="array-matrix-dataframe.html#cb152-7"></a><span class="co"># df.reg.use.log &lt;- df.reg.use.log %&gt;% drop_na(prot.imputed.log)</span></span>
<span id="cb152-8"><a href="array-matrix-dataframe.html#cb152-8"></a><span class="co"># # df.reg.use.log$prot.imputed.log</span></span></code></pre></div>
<p>Now we generate scatter plot based on the combined factors, but now with the NA category</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="array-matrix-dataframe.html#cb153-1"></a><span class="co"># Labeling</span></span>
<span id="cb153-2"><a href="array-matrix-dataframe.html#cb153-2"></a>st_title &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;Use na_if and is.na to Generate and Distinguish NA Values</span><span class="ch">\n</span><span class="st">&#39;</span>,</span>
<span id="cb153-3"><a href="array-matrix-dataframe.html#cb153-3"></a>                   <span class="st">&#39;NA_real_, NA_character_, NA_integer_, NA_complex_&#39;</span>)</span>
<span id="cb153-4"><a href="array-matrix-dataframe.html#cb153-4"></a>st_subtitle &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fanwangecon.github.io/&#39;</span>,</span>
<span id="cb153-5"><a href="array-matrix-dataframe.html#cb153-5"></a>                      <span class="st">&#39;R4Econ/amto/tibble/htmlpdfr/fs_tib_na.html&#39;</span>)</span>
<span id="cb153-6"><a href="array-matrix-dataframe.html#cb153-6"></a>st_caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;mtcars dataset, &#39;</span>,</span>
<span id="cb153-7"><a href="array-matrix-dataframe.html#cb153-7"></a>                     <span class="st">&#39;https://fanwangecon.github.io/R4Econ/&#39;</span>)</span>
<span id="cb153-8"><a href="array-matrix-dataframe.html#cb153-8"></a>st_x_label &lt;-<span class="st"> &#39;MPG = Miles per Gallon&#39;</span></span>
<span id="cb153-9"><a href="array-matrix-dataframe.html#cb153-9"></a>st_y_label &lt;-<span class="st"> &#39;QSEC = time for 1/4 Miles&#39;</span></span>
<span id="cb153-10"><a href="array-matrix-dataframe.html#cb153-10"></a></span>
<span id="cb153-11"><a href="array-matrix-dataframe.html#cb153-11"></a><span class="co"># Graphing</span></span>
<span id="cb153-12"><a href="array-matrix-dataframe.html#cb153-12"></a>plt_mtcars_ifisna_scatter &lt;-<span class="st"> </span></span>
<span id="cb153-13"><a href="array-matrix-dataframe.html#cb153-13"></a><span class="st">  </span><span class="kw">ggplot</span>(df_mtcars, </span>
<span id="cb153-14"><a href="array-matrix-dataframe.html#cb153-14"></a>         <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec, </span>
<span id="cb153-15"><a href="array-matrix-dataframe.html#cb153-15"></a>             <span class="dt">colour=</span>group_with_na, </span>
<span id="cb153-16"><a href="array-matrix-dataframe.html#cb153-16"></a>             <span class="dt">shape=</span>group_with_na)) <span class="op">+</span></span>
<span id="cb153-17"><a href="array-matrix-dataframe.html#cb153-17"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span></span>
<span id="cb153-18"><a href="array-matrix-dataframe.html#cb153-18"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> st_title, <span class="dt">subtitle =</span> st_subtitle,</span>
<span id="cb153-19"><a href="array-matrix-dataframe.html#cb153-19"></a>       <span class="dt">x =</span> st_x_label, <span class="dt">y =</span> st_y_label, <span class="dt">caption =</span> st_caption) <span class="op">+</span></span>
<span id="cb153-20"><a href="array-matrix-dataframe.html#cb153-20"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span>
<span id="cb153-21"><a href="array-matrix-dataframe.html#cb153-21"></a></span>
<span id="cb153-22"><a href="array-matrix-dataframe.html#cb153-22"></a><span class="co"># show</span></span>
<span id="cb153-23"><a href="array-matrix-dataframe.html#cb153-23"></a><span class="kw">print</span>(plt_mtcars_ifisna_scatter)</span></code></pre></div>
<p><img src="Panel-Data-and-Optimization-with-R_files/figure-html/unnamed-chunk-47-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="approximate-values-comparison" class="section level4" number="1.4.4.3">
<h4><span class="header-section-number">1.4.4.3</span> Approximate Values Comparison</h4>
<ul>
<li>r values almost the same</li>
<li><a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/all.equal.html">all.equal</a></li>
</ul>
<p>From numeric approximation, often values are very close, and should be set to equal. Use <em>isTRUE(all.equal)</em>. In the example below, we randomly generates four arrays. Two of the arrays have slightly higher variance, two arrays have slightly lower variance. They sd are to be 10 times below or 10 times above the tolerance comparison level. The values are not the same in any of the columns, but by allowing for almost true given some tolerance level, in the low standard deviation case, the values differences are within tolerance, so they are equal.</p>
<p>This is an essential issue when dealing with optimization results.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="array-matrix-dataframe.html#cb154-1"></a><span class="co"># Set tolerance </span></span>
<span id="cb154-2"><a href="array-matrix-dataframe.html#cb154-2"></a>tol_lvl =<span class="st"> </span><span class="fl">1.5e-3</span></span>
<span id="cb154-3"><a href="array-matrix-dataframe.html#cb154-3"></a>sd_lower_than_tol =<span class="st"> </span>tol_lvl<span class="op">/</span><span class="dv">10</span></span>
<span id="cb154-4"><a href="array-matrix-dataframe.html#cb154-4"></a>sd_higher_than_tol =<span class="st"> </span>tol_lvl<span class="op">*</span><span class="dv">10</span></span>
<span id="cb154-5"><a href="array-matrix-dataframe.html#cb154-5"></a></span>
<span id="cb154-6"><a href="array-matrix-dataframe.html#cb154-6"></a><span class="co"># larger SD</span></span>
<span id="cb154-7"><a href="array-matrix-dataframe.html#cb154-7"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb154-8"><a href="array-matrix-dataframe.html#cb154-8"></a>mt_runif_standard &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span>sd_higher_than_tol), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb154-9"><a href="array-matrix-dataframe.html#cb154-9"></a></span>
<span id="cb154-10"><a href="array-matrix-dataframe.html#cb154-10"></a><span class="co"># small SD</span></span>
<span id="cb154-11"><a href="array-matrix-dataframe.html#cb154-11"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb154-12"><a href="array-matrix-dataframe.html#cb154-12"></a>mt_rnorm_small_sd &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dt">mean=</span><span class="dv">0</span>,<span class="dt">sd=</span>sd_lower_than_tol), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb154-13"><a href="array-matrix-dataframe.html#cb154-13"></a></span>
<span id="cb154-14"><a href="array-matrix-dataframe.html#cb154-14"></a><span class="co"># Generates Random Matirx</span></span>
<span id="cb154-15"><a href="array-matrix-dataframe.html#cb154-15"></a>tb_rnorm_runif &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">cbind</span>(mt_rnorm_small_sd, mt_runif_standard))</span>
<span id="cb154-16"><a href="array-matrix-dataframe.html#cb154-16"></a></span>
<span id="cb154-17"><a href="array-matrix-dataframe.html#cb154-17"></a><span class="co"># Are Variables the same, not for strict comparison</span></span>
<span id="cb154-18"><a href="array-matrix-dataframe.html#cb154-18"></a>tb_rnorm_runif_approxi_same &lt;-<span class="st"> </span>tb_rnorm_runif <span class="op">%&gt;%</span></span>
<span id="cb154-19"><a href="array-matrix-dataframe.html#cb154-19"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">V1_V2_ALMOST_SAME =</span> </span>
<span id="cb154-20"><a href="array-matrix-dataframe.html#cb154-20"></a>           <span class="kw">case_when</span>(<span class="kw">isTRUE</span>(<span class="kw">all.equal</span>(V1, V2, <span class="dt">tolerance=</span>tol_lvl)) <span class="op">~</span><span class="st"> </span></span>
<span id="cb154-21"><a href="array-matrix-dataframe.html#cb154-21"></a><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</span>
<span id="cb154-22"><a href="array-matrix-dataframe.html#cb154-22"></a>                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span></span>
<span id="cb154-23"><a href="array-matrix-dataframe.html#cb154-23"></a><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_lower_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>))) <span class="op">%&gt;%</span></span>
<span id="cb154-24"><a href="array-matrix-dataframe.html#cb154-24"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">V3_V4_ALMOST_SAME =</span></span>
<span id="cb154-25"><a href="array-matrix-dataframe.html#cb154-25"></a>           <span class="kw">case_when</span>(<span class="kw">isTRUE</span>(<span class="kw">all.equal</span>(V3, V4, <span class="dt">tolerance=</span>tol_lvl)) <span class="op">~</span><span class="st"> </span></span>
<span id="cb154-26"><a href="array-matrix-dataframe.html#cb154-26"></a><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, SAME ALMOST&#39;</span>),</span>
<span id="cb154-27"><a href="array-matrix-dataframe.html#cb154-27"></a>                     <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span></span>
<span id="cb154-28"><a href="array-matrix-dataframe.html#cb154-28"></a><span class="st">                       </span><span class="kw">paste0</span>(<span class="st">&#39;TOL=&#39;</span>,sd_higher_than_tol,<span class="st">&#39;, NOT SAME ALMOST&#39;</span>)))</span>
<span id="cb154-29"><a href="array-matrix-dataframe.html#cb154-29"></a></span>
<span id="cb154-30"><a href="array-matrix-dataframe.html#cb154-30"></a><span class="co"># Pring</span></span>
<span id="cb154-31"><a href="array-matrix-dataframe.html#cb154-31"></a><span class="kw">kable</span>(tb_rnorm_runif_approxi_same) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling_fc_wide</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:875px; ">
<table class="table table-striped table-hover table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V1
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V2
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V3
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
V4
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V1_V2_ALMOST_SAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
V3_V4_ALMOST_SAME
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-0.0000841
</td>
<td style="text-align:right;">
0.0002573
</td>
<td style="text-align:right;">
-0.0084071
</td>
<td style="text-align:right;">
0.0257260
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0000345
</td>
<td style="text-align:right;">
0.0000691
</td>
<td style="text-align:right;">
-0.0034527
</td>
<td style="text-align:right;">
0.0069137
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0002338
</td>
<td style="text-align:right;">
-0.0001898
</td>
<td style="text-align:right;">
0.0233806
</td>
<td style="text-align:right;">
-0.0189759
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000106
</td>
<td style="text-align:right;">
-0.0001030
</td>
<td style="text-align:right;">
0.0010576
</td>
<td style="text-align:right;">
-0.0103028
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0000194
</td>
<td style="text-align:right;">
-0.0000668
</td>
<td style="text-align:right;">
0.0019393
</td>
<td style="text-align:right;">
-0.0066849
</td>
<td style="text-align:left;">
TOL=0.00015, SAME ALMOST
</td>
<td style="text-align:left;">
TOL=0.015, NOT SAME ALMOST
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div id="string-values" class="section level3" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> String Values</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>â€™s <a href="https://fanwangecon.github.io/REconTools/">REconTools</a> Package, <a href="https://fanwangecon.github.io/R4Econ/">R Code Examples</a> Repository (<a href="https://fanwangecon.github.io/R4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Stat4Econ/">Intro Stats with R</a> Repository (<a href="https://fanwangecon.github.io/Stat4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="find-and-replace" class="section level4" number="1.4.5.1">
<h4><span class="header-section-number">1.4.5.1</span> Find and Replace</h4>
<p>Find and Replace in Dataframe.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="array-matrix-dataframe.html#cb155-1"></a><span class="co"># if string value is contained in variable</span></span>
<span id="cb155-2"><a href="array-matrix-dataframe.html#cb155-2"></a>(<span class="st">&quot;bridex.B&quot;</span> <span class="op">%in%</span><span class="st"> </span>(df.reg.out.all<span class="op">$</span>vars_var.y))</span>
<span id="cb155-3"><a href="array-matrix-dataframe.html#cb155-3"></a><span class="co"># if string value is not contained in variable:</span></span>
<span id="cb155-4"><a href="array-matrix-dataframe.html#cb155-4"></a><span class="co"># 1. type is variable name</span></span>
<span id="cb155-5"><a href="array-matrix-dataframe.html#cb155-5"></a><span class="co"># 2. Toyota|Mazda are strings to be excluded</span></span>
<span id="cb155-6"><a href="array-matrix-dataframe.html#cb155-6"></a><span class="kw">filter</span>(mtcars, <span class="op">!</span><span class="kw">grepl</span>(<span class="st">&#39;Toyota|Mazda&#39;</span>, type))</span>
<span id="cb155-7"><a href="array-matrix-dataframe.html#cb155-7"></a></span>
<span id="cb155-8"><a href="array-matrix-dataframe.html#cb155-8"></a><span class="co"># filter does not contain string</span></span>
<span id="cb155-9"><a href="array-matrix-dataframe.html#cb155-9"></a>rs_hgt_prot_log_tidy <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_detect</span>(term, <span class="st">&#39;prot&#39;</span>))</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarize-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Panel-Data-and-Optimization-with-R.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
