---
title: "R Decompose File Paths to Get Folder and Files Names"
titleshort: "Decompose File Paths to Get Folder and Files Names"
description: |
  Decompose file path and get file path folder names and file name. 
core:
  - package: r
    code: |
      .Platform$file.sep
      tail()
      strsplit()
      basename()
      dirname()
      substring()
date: 2021-01-10
date_start: 2021-01-10
output:
  pdf_document:
    pandoc_args: '../../_output_kniti_pdf.yaml'
    includes:
      in_header: '../../preamble.tex'
  html_document:
    pandoc_args: '../../_output_kniti_html.yaml'
    includes:
      in_header: "../../hdga.html"
always_allow_html: true
urlcolor: blue
---

### File Path

```{r global_options, include = FALSE}
try(source("../../.Rprofile"))
```

`r text_shared_preamble_one`
`r text_shared_preamble_two`
`r text_shared_preamble_thr`

#### Compose a Path

File Path might contain information related to the file, decompose the file path, keep the final N folder names, to be possibled stored as a variable in the datafile stored inside. 

```{r}
# Compose together a path 
print(paste0('.Platform$file.sep=', .Platform$file.sep))
spn_file_path = file.path("C:", "Users", "fan", "R4Econ", "amto", "tibble", 
                          "fs_tib_basics.Rmd", 
                          fsep = .Platform$file.sep)
# print
print(spn_file_path)
```


#### Substring and File Name

From path, get file name without suffix.

- r string split
- [r list last element](https://stackoverflow.com/a/83222/8280804)
- [r get file name from path](https://stackoverflow.com/a/29114007/8280804)
- [r get file path no name](https://stackoverflow.com/a/47189541/8280804)

```{r}
st_example <- 'C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd'
st_file_wth_suffix_s <- tail(strsplit(st_example, "/")[[1]],n=1)
st_file_wno_suffix_s <- tools::file_path_sans_ext(basename(st_example))
st_fullpath_nosufx_s <- sub('\\.Rmd$', '', st_example)
st_fullpath_noname_s <- dirname(st_example)

print(paste0('st_file_wth_suffix_s:', st_file_wth_suffix_s))
print(paste0('st_file_wno_suffix_s:', st_file_wno_suffix_s))
print(paste0('st_fullpath_nosufx_s:', st_fullpath_nosufx_s))
print(paste0('st_fullpath_noname_s:', st_fullpath_noname_s))
```

#### Get Subset of Path Folder Names 

File Path might contain information related to the file, decompose the file path, keep the final N folder names, to be possibled stored as a variable in the datafile stored inside. 

```{r}
# Compose together a path 
spn_example <- 'C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd'
# Replace default system slash, assume spn was generated by system. 
ls_srt_folders_file <- strsplit(st_example, .Platform$file.sep)[[1]]
# Keep the last N layers
it_folders_names_to_keep = 2
snm_file_name <- tail(strsplit(st_example, "/")[[1]],n=1)
ls_srt_folders_keep <- head(tail(ls_srt_folders_file, it_folders_names_to_keep+1),
                            it_folders_names_to_keep)
# Show folder names
print(paste0('snm_file_name:', snm_file_name))
print(paste0('last ', it_folders_names_to_keep, ' folders:'))
print(ls_srt_folders_keep)
```

Shorter lines, to make copying easier. 

```{r}
# inputs
it_folders_names_to_keep = 2
spn_example <- 'C:/Users/fan/R4Econ/amto/tibble/fs_tib_basics.Rmd'
# copy these
ls_srt_folders_name_keep <- tail(strsplit(st_example, "/")[[1]], n=it_folders_names_to_keep+1)
snm_file_name <- tail(ls_srt_folders_name_keep, 1)
ls_srt_folders_keep <- head(ls_srt_folders_name_keep, it_folders_names_to_keep)
# print
print(paste0('snm_file_name:', snm_file_name))
print(paste0('last ', it_folders_names_to_keep, ' folders:'))
print(ls_srt_folders_keep)
```

